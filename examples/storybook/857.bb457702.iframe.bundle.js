/*! For license information please see 857.bb457702.iframe.bundle.js.LICENSE.txt */
(self.webpackChunksolid_ui=self.webpackChunksolid_ui||[]).push([[857],{"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function toPropertyKey(t){var i=function toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}function _defineProperty(e,r,t){return(r=toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}__webpack_require__.d(__webpack_exports__,{A:()=>_defineProperty})},"./node_modules/@frogcat/ttl2jsonld/ttl2jsonld.js":function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(input,options){options=void 0!==options?options:{};var peg$result,peg$FAILED={},peg$startRuleFunctions={turtleDoc:peg$parseturtleDoc},peg$startRuleFunction=peg$parseturtleDoc,peg$c0=function(statements){var jsonld=context.toJSON();return jsonld["@graph"]=[],statements.filter(a=>Array.isArray(a)).forEach(a=>{a.forEach(b=>{jsonld["@graph"].push(b)})}),1===jsonld["@graph"].length&&(Object.assign(jsonld,jsonld["@graph"][0]),delete jsonld["@graph"]),jsonld},peg$c1="\ufeff",peg$c2=peg$literalExpectation("\ufeff",!1),peg$c3=".",peg$c4=peg$literalExpectation(".",!1),peg$c5=function(a){return a},peg$c6="#",peg$c7=peg$literalExpectation("#",!1),peg$c8=/^[^\n]/,peg$c9=peg$classExpectation(["\n"],!0,!1),peg$c10="\n",peg$c11=peg$literalExpectation("\n",!1),peg$c12=function(a){return a.join("")},peg$c13="@prefix",peg$c14=peg$literalExpectation("@prefix",!1),peg$c15=function(a,b){return context.addPrefix(""===a?"0":a,b),{}},peg$c16="@base",peg$c17=peg$literalExpectation("@base",!1),peg$c18=function(a){return context.addBase(a),{}},peg$c19=/^[Bb]/,peg$c20=peg$classExpectation(["B","b"],!1,!1),peg$c21=/^[Aa]/,peg$c22=peg$classExpectation(["A","a"],!1,!1),peg$c23=/^[Ss]/,peg$c24=peg$classExpectation(["S","s"],!1,!1),peg$c25=/^[Ee]/,peg$c26=peg$classExpectation(["E","e"],!1,!1),peg$c27=/^[Pp]/,peg$c28=peg$classExpectation(["P","p"],!1,!1),peg$c29=/^[Rr]/,peg$c30=peg$classExpectation(["R","r"],!1,!1),peg$c31=/^[Ff]/,peg$c32=peg$classExpectation(["F","f"],!1,!1),peg$c33=/^[Ii]/,peg$c34=peg$classExpectation(["I","i"],!1,!1),peg$c35=/^[Xx]/,peg$c36=peg$classExpectation(["X","x"],!1,!1),peg$c37=function(s,p){var x={};return"string"==typeof s&&"[]"!==s?x["@id"]=s:"object"==typeof s&&Object.assign(x,s),p&&Object.assign(x,p),[x]},peg$c38=function(s,p){var x={};return s&&Object.assign(x,s),p&&Object.assign(x,p),[x]},peg$c39=";",peg$c40=peg$literalExpectation(";",!1),peg$c41=function(a,b,e,f){var x={};return x[e]=f,x},peg$c42=function(a,b,d){return d},peg$c43=function(a,b,c){var x={};return c.unshift(createObject(a,b)),c.forEach(t=>{t&&Object.keys(t).forEach(key=>{t[key].forEach(val=>{"@type"===key&&void 0!==val["@id"]&&(val=val["@id"]),void 0===x[key]?x[key]=val:Array.isArray(x[key])?x[key].push(val):x[key]=[x[key],val]})})}),x},peg$c44=",",peg$c45=peg$literalExpectation(",",!1),peg$c46=function(a,c){return c},peg$c47=function(a,b){return b.unshift(a),b},peg$c48="a",peg$c49=peg$literalExpectation("a",!1),peg$c50=function(){return"@type"},peg$c51=function(a){return expandList(a,!0)},peg$c52=function(a){return expandList(a,!1)},peg$c53=function(a){return"[]"===a?{}:{"@id":a}},peg$c54=function(a){return{"@id":a}},peg$c55="[",peg$c56=peg$literalExpectation("[",!1),peg$c57="]",peg$c58=peg$literalExpectation("]",!1),peg$c59="(",peg$c60=peg$literalExpectation("(",!1),peg$c61=")",peg$c62=peg$literalExpectation(")",!1),peg$c63=function(a){return{"@list":a}},peg$c64=function(a,b){return{"@value":a,"@language":b}},peg$c65="^^",peg$c66=peg$literalExpectation("^^",!1),peg$c67=function(a,b){if("http://www.w3.org/2001/XMLSchema#boolean"===b&&"true"===a)return!0;if("http://www.w3.org/2001/XMLSchema#boolean"===b&&"false"===a)return!1;if("http://www.w3.org/2001/XMLSchema#integer"===b)return parseInt(a);if("http://www.w3.org/2001/XMLSchema#double"===b)return parseFloat(a);const uri=context.resolve(b,!0);if(uri){const prefix=b.split(":")[0];if("http://www.w3.org/2001/XMLSchema#boolean"===uri&&"true"===a)return context.decrement(prefix),!0;if("http://www.w3.org/2001/XMLSchema#boolean"===uri&&"false"===a)return context.decrement(prefix),!1;if("http://www.w3.org/2001/XMLSchema#integer"===uri)return context.decrement(prefix),parseInt(a);if("http://www.w3.org/2001/XMLSchema#double"===uri)return context.decrement(prefix),parseFloat(a)}return{"@value":a,"@type":b}},peg$c68="true",peg$c69=peg$literalExpectation("true",!1),peg$c70=function(){return!0},peg$c71="false",peg$c72=peg$literalExpectation("false",!1),peg$c73=function(){return!1},peg$c74=function(a){return a+":"},peg$c75="<",peg$c76=peg$literalExpectation("<",!1),peg$c77=/^[^\0- <>"{}|\^`\\]/,peg$c78=peg$classExpectation([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),peg$c79=">",peg$c80=peg$literalExpectation(">",!1),peg$c81=function(a){const decoded=a.map(s=>65536<=s.codePointAt(0)&&s.codePointAt(0)<=983039?"a":1===s.length?s:6===s.length?String.fromCharCode("0x"+s.substring(2)):10===s.length?String.fromCodePoint("0x"+s.substring(2)):s).join("");if(decoded.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var join=a.join("");try{return context.resolve(join)}catch(e){error("Invalid IRIREF "+join)}}else error("Invalid IRIREF "+a.join("")+" / "+decoded)},peg$c82=":",peg$c83=peg$literalExpectation(":",!1),peg$c84=function(a){return a=a||"0",!1===context.hasPrefix(a)&&error("undefined prefix "+a),a},peg$c85=function(a){return a||""},peg$c86=function(a,b){return context.increment(a),context.resolve(a+":"+b)},peg$c87="_:",peg$c88=peg$literalExpectation("_:",!1),peg$c89=/^[0-9]/,peg$c90=peg$classExpectation([["0","9"]],!1,!1),peg$c91="@",peg$c92=peg$literalExpectation("@",!1),peg$c93=/^[a-zA-Z]/,peg$c94=peg$classExpectation([["a","z"],["A","Z"]],!1,!1),peg$c95="-",peg$c96=peg$literalExpectation("-",!1),peg$c97=/^[a-zA-Z0-9]/,peg$c98=peg$classExpectation([["a","z"],["A","Z"],["0","9"]],!1,!1),peg$c99=function(a,s){return"-"+s.join("")},peg$c100=function(a,b){return a.join("")+b.join("")},peg$c101=/^[+\-]/,peg$c102=peg$classExpectation(["+","-"],!1,!1),peg$c103=function(a){return a.match(/^[0+][0-9]+$/)?{"@value":a,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(a)},peg$c104=function(a){return{"@value":a,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},peg$c105=function(a){return{"@value":a,"@type":"http://www.w3.org/2001/XMLSchema#double"}},peg$c106=/^[eE]/,peg$c107=peg$classExpectation(["e","E"],!1,!1),peg$c108='"',peg$c109=peg$literalExpectation('"',!1),peg$c110=/^[^"\\\n\r]/,peg$c111=peg$classExpectation(['"',"\\","\n","\r"],!0,!1),peg$c112="'",peg$c113=peg$literalExpectation("'",!1),peg$c114=/^[^'\\\n\r]/,peg$c115=peg$classExpectation(["'","\\","\n","\r"],!0,!1),peg$c116="'''",peg$c117=peg$literalExpectation("'''",!1),peg$c118=/^[^'\\]/,peg$c119=peg$classExpectation(["'","\\"],!0,!1),peg$c120="''",peg$c121=peg$literalExpectation("''",!1),peg$c122=function(head,a){return"''"+a.join("")},peg$c123=function(head,a){return"'"+a.join("")},peg$c124=function(head,body){return head.join("")+body.join("")},peg$c125='"""',peg$c126=peg$literalExpectation('"""',!1),peg$c127=/^[^"\\]/,peg$c128=peg$classExpectation(['"',"\\"],!0,!1),peg$c129='""',peg$c130=peg$literalExpectation('""',!1),peg$c131=function(head,a){return'""'+a.join("")},peg$c132=function(head,a){return'"'+a.join("")},peg$c133="\\U",peg$c134=peg$literalExpectation("\\U",!1),peg$c135=function(hex){return String.fromCodePoint(parseInt(hex.join(""),16))},peg$c136="\\u",peg$c137=peg$literalExpectation("\\u",!1),peg$c138=function(hex){return String.fromCharCode(parseInt(hex.join(""),16))},peg$c139="\\t",peg$c140=peg$literalExpectation("\\t",!1),peg$c141=function(){return"\t"},peg$c142="\\b",peg$c143=peg$literalExpectation("\\b",!1),peg$c144=function(){return"\b"},peg$c145="\\n",peg$c146=peg$literalExpectation("\\n",!1),peg$c147=function(){return"\n"},peg$c148="\\r",peg$c149=peg$literalExpectation("\\r",!1),peg$c150=function(){return"\r"},peg$c151="\\f",peg$c152=peg$literalExpectation("\\f",!1),peg$c153=function(){return"\f"},peg$c154='\\"',peg$c155=peg$literalExpectation('\\"',!1),peg$c156=function(){return'"'},peg$c157="\\'",peg$c158=peg$literalExpectation("\\'",!1),peg$c159=function(){return"'"},peg$c160="\\\\",peg$c161=peg$literalExpectation("\\\\",!1),peg$c162=function(){return"\\"},peg$c163=/^[ \t\r\n]/,peg$c164=peg$classExpectation([" ","\t","\r","\n"],!1,!1),peg$c165=function(){return"[]"},peg$c166=/^[\uD800-\uDBFF]/,peg$c167=peg$classExpectation([["\ud800","\udbff"]],!1,!1),peg$c168=/^[\uDC00-\uDFFF]/,peg$c169=peg$classExpectation([["\udc00","\udfff"]],!1,!1),peg$c170=function(a,b){return a+b},peg$c171=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,peg$c172=peg$classExpectation([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),peg$c173="_",peg$c174=peg$literalExpectation("_",!1),peg$c175="·",peg$c176=peg$literalExpectation("·",!1),peg$c177=/^[\u0300-\u036F]/,peg$c178=peg$classExpectation([["̀","ͯ"]],!1,!1),peg$c179=/^[\u203F-\u2040]/,peg$c180=peg$classExpectation([["‿","⁀"]],!1,!1),peg$c181=function(head,body,a,b){return a.join("")+b.join("")},peg$c182=function(head,body,tail){return head+body.join("")+tail.join("")},peg$c183="%",peg$c184=peg$literalExpectation("%",!1),peg$c185=/^[0-9A-Fa-f]/,peg$c186=peg$classExpectation([["0","9"],["A","F"],["a","f"]],!1,!1),peg$c187="\\",peg$c188=peg$literalExpectation("\\",!1),peg$c189=/^[_~.!$&'()*+,;=\/?#@%\-]/,peg$c190=peg$classExpectation(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function error(message,location){throw peg$buildSimpleError(message,location=void 0!==location?location:peg$computeLocation(peg$savedPos,peg$currPos))}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text,ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts,inverted,ignoreCase}}function peg$endExpectation(){return{type:"end"}}function peg$computePosDetails(pos){var p,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details={line:(details=peg$posDetailsCache[p]).line,column:details.column};p<pos;)10===input.charCodeAt(p)?(details.line++,details.column=1):details.column++,p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildSimpleError(message,location){return new peg$SyntaxError(message,null,null,location)}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parseturtleDoc(){var s0,s1,s2,s3,s4;for(s0=peg$currPos,s1=[],s2=peg$parseBOM();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseBOM();if(s1!==peg$FAILED){for(s2=[],s3=peg$parsestatement();s3!==peg$FAILED;)s2.push(s3),s3=peg$parsestatement();if(s2!==peg$FAILED){for(s3=[],s4=peg$parseIGNORE();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseIGNORE();s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c0(s2)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseBOM(){var s0;return 65279===input.charCodeAt(peg$currPos)?(s0=peg$c1,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c2)),s0}function peg$parsestatement(){var s0,s1,s2,s3;if((s0=peg$parsedirective())===peg$FAILED)if(s0=peg$currPos,(s1=peg$parsetriples())!==peg$FAILED){for(s2=[],s3=peg$parseIGNORE();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseIGNORE();s2!==peg$FAILED?(46===input.charCodeAt(peg$currPos)?(s3=peg$c3,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s1)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseCOMMENT(){var s0,s1,s2,s3;if(s0=peg$currPos,35===input.charCodeAt(peg$currPos)?(s1=peg$c6,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c7)),s1!==peg$FAILED){for(s2=[],peg$c8.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c9));s3!==peg$FAILED;)s2.push(s3),peg$c8.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c9));s2!==peg$FAILED?(10===input.charCodeAt(peg$currPos)?(s3=peg$c10,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c11)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c12(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseIGNORE(){var s0;return(s0=peg$parseWS())===peg$FAILED&&(s0=peg$parseCOMMENT()),s0}function peg$parsedirective(){var s0;return(s0=peg$parseprefixID())===peg$FAILED&&(s0=peg$parsebase())===peg$FAILED&&(s0=peg$parsesparqlPrefix())===peg$FAILED&&(s0=peg$parsesparqlBase()),s0}function peg$parseprefixID(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if(input.substr(peg$currPos,7)===peg$c13?(s2=peg$c13,peg$currPos+=7):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c14)),s2!==peg$FAILED){for(s3=[],s4=peg$parseIGNORE();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseIGNORE();if(s3!==peg$FAILED)if((s4=peg$parsePNAME_NS_NO_CHECK())!==peg$FAILED){for(s5=[],s6=peg$parseIGNORE();s6!==peg$FAILED;)s5.push(s6),s6=peg$parseIGNORE();if(s5!==peg$FAILED)if((s6=peg$parseIRIREF())!==peg$FAILED){for(s7=[],s8=peg$parseIGNORE();s8!==peg$FAILED;)s7.push(s8),s8=peg$parseIGNORE();s7!==peg$FAILED?(46===input.charCodeAt(peg$currPos)?(s8=peg$c3,peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s8!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c15(s4,s6)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsebase(){var s0,s1,s2,s3,s4,s5,s6;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if(input.substr(peg$currPos,5)===peg$c16?(s2=peg$c16,peg$currPos+=5):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c17)),s2!==peg$FAILED){for(s3=[],s4=peg$parseIGNORE();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseIGNORE();if(s3!==peg$FAILED)if((s4=peg$parseIRIREF())!==peg$FAILED){for(s5=[],s6=peg$parseIGNORE();s6!==peg$FAILED;)s5.push(s6),s6=peg$parseIGNORE();s5!==peg$FAILED?(46===input.charCodeAt(peg$currPos)?(s6=peg$c3,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s6!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c18(s4)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsesparqlBase(){var s0,s1,s2,s3,s4,s5,s6,s7;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if(peg$c19.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c20)),s2!==peg$FAILED)if(peg$c21.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s3!==peg$FAILED)if(peg$c23.test(input.charAt(peg$currPos))?(s4=input.charAt(peg$currPos),peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c24)),s4!==peg$FAILED)if(peg$c25.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c26)),s5!==peg$FAILED){for(s6=[],s7=peg$parseIGNORE();s7!==peg$FAILED;)s6.push(s7),s7=peg$parseIGNORE();s6!==peg$FAILED&&(s7=peg$parseIRIREF())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c18(s7)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsesparqlPrefix(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if(peg$c27.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c28)),s2!==peg$FAILED)if(peg$c29.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c30)),s3!==peg$FAILED)if(peg$c25.test(input.charAt(peg$currPos))?(s4=input.charAt(peg$currPos),peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c26)),s4!==peg$FAILED)if(peg$c31.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c32)),s5!==peg$FAILED)if(peg$c33.test(input.charAt(peg$currPos))?(s6=input.charAt(peg$currPos),peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c34)),s6!==peg$FAILED)if(peg$c35.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36)),s7!==peg$FAILED){for(s8=[],s9=peg$parseIGNORE();s9!==peg$FAILED;)s8.push(s9),s9=peg$parseIGNORE();if(s8!==peg$FAILED)if((s9=peg$parsePNAME_NS_NO_CHECK())!==peg$FAILED){for(s10=[],s11=peg$parseIGNORE();s11!==peg$FAILED;)s10.push(s11),s11=peg$parseIGNORE();s10!==peg$FAILED&&(s11=peg$parseIRIREF())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c15(s9,s11)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsetriples(){var s0,s1,s2;return s0=peg$currPos,(s1=peg$parsesubject())!==peg$FAILED&&(s2=peg$parsepredicateObjectList())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c37(s1,s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseblankNodePropertyList())!==peg$FAILED?((s2=peg$parsepredicateObjectList())===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c38(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)),s0}function peg$parsepredicateObjectList(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;if(s0=peg$currPos,(s1=peg$parseverb())!==peg$FAILED)if((s2=peg$parseobjectList())!==peg$FAILED){for(s3=[],s4=peg$currPos,s5=[],s6=peg$parseIGNORE();s6!==peg$FAILED;)s5.push(s6),s6=peg$parseIGNORE();for(s5!==peg$FAILED?(59===input.charCodeAt(peg$currPos)?(s6=peg$c39,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c40)),s6!==peg$FAILED?(s7=peg$currPos,(s8=peg$parseverb())!==peg$FAILED&&(s9=peg$parseobjectList())!==peg$FAILED?(peg$savedPos=s7,s7=s8=peg$c41(s1,s2,s8,s9)):(peg$currPos=s7,s7=peg$FAILED),s7===peg$FAILED&&(s7=null),s7!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c42(s1,s2,s7)):(peg$currPos=s4,s4=peg$FAILED)):(peg$currPos=s4,s4=peg$FAILED)):(peg$currPos=s4,s4=peg$FAILED);s4!==peg$FAILED;){for(s3.push(s4),s4=peg$currPos,s5=[],s6=peg$parseIGNORE();s6!==peg$FAILED;)s5.push(s6),s6=peg$parseIGNORE();s5!==peg$FAILED?(59===input.charCodeAt(peg$currPos)?(s6=peg$c39,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c40)),s6!==peg$FAILED?(s7=peg$currPos,(s8=peg$parseverb())!==peg$FAILED&&(s9=peg$parseobjectList())!==peg$FAILED?(peg$savedPos=s7,s7=s8=peg$c41(s1,s2,s8,s9)):(peg$currPos=s7,s7=peg$FAILED),s7===peg$FAILED&&(s7=null),s7!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c42(s1,s2,s7)):(peg$currPos=s4,s4=peg$FAILED)):(peg$currPos=s4,s4=peg$FAILED)):(peg$currPos=s4,s4=peg$FAILED)}s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c43(s1,s2,s3)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseobjectList(){var s0,s1,s2,s3,s4,s5,s6;if(s0=peg$currPos,(s1=peg$parseobject())!==peg$FAILED){for(s2=[],s3=peg$currPos,s4=[],s5=peg$parseIGNORE();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseIGNORE();for(s4!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s5=peg$c44,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s5!==peg$FAILED&&(s6=peg$parseobject())!==peg$FAILED?(peg$savedPos=s3,s3=s4=peg$c46(s1,s6)):(peg$currPos=s3,s3=peg$FAILED)):(peg$currPos=s3,s3=peg$FAILED);s3!==peg$FAILED;){for(s2.push(s3),s3=peg$currPos,s4=[],s5=peg$parseIGNORE();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseIGNORE();s4!==peg$FAILED?(44===input.charCodeAt(peg$currPos)?(s5=peg$c44,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s5!==peg$FAILED&&(s6=peg$parseobject())!==peg$FAILED?(peg$savedPos=s3,s3=s4=peg$c46(s1,s6)):(peg$currPos=s3,s3=peg$FAILED)):(peg$currPos=s3,s3=peg$FAILED)}s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c47(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseverb(){var s0,s1,s2;if(s0=peg$currPos,(s1=peg$parsepredicate())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c5(s1)),(s0=s1)===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();s1!==peg$FAILED?(97===input.charCodeAt(peg$currPos)?(s2=peg$c48,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c49)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c50()):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}return s0}function peg$parsesubject(){var s0,s1;return s0=peg$currPos,(s1=peg$parsecollection())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c51(s1)),(s0=s1)===peg$FAILED&&(s0=peg$parseBlankNode())===peg$FAILED&&(s0=peg$parseiri()),s0}function peg$parsepredicate(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();return s1!==peg$FAILED&&(s2=peg$parseiri())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseobject(){var s0,s1;return(s0=peg$parseliteral())===peg$FAILED&&(s0=peg$currPos,(s1=peg$parsecollection())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c52(s1)),(s0=s1)===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseBlankNode())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c53(s1)),(s0=s1)===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseblankNodePropertyList())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c5(s1)),(s0=s1)===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseiri())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c54(s1)),s0=s1)))),s0}function peg$parseliteral(){var s0;return(s0=peg$parseRDFLiteral())===peg$FAILED&&(s0=peg$parseNumericLiteral())===peg$FAILED&&(s0=peg$parseBooleanLiteral()),s0}function peg$parseblankNodePropertyList(){var s0,s1,s2,s3,s4,s5;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if(91===input.charCodeAt(peg$currPos)?(s2=peg$c55,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c56)),s2!==peg$FAILED)if((s3=peg$parsepredicateObjectList())!==peg$FAILED){for(s4=[],s5=peg$parseIGNORE();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseIGNORE();s4!==peg$FAILED?(93===input.charCodeAt(peg$currPos)?(s5=peg$c57,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c58)),s5!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s3)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsecollection(){var s0,s1,s2,s3,s4,s5;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if(40===input.charCodeAt(peg$currPos)?(s2=peg$c59,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c60)),s2!==peg$FAILED){for(s3=[],s4=peg$parseobject();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseobject();if(s3!==peg$FAILED){for(s4=[],s5=peg$parseIGNORE();s5!==peg$FAILED;)s4.push(s5),s5=peg$parseIGNORE();s4!==peg$FAILED?(41===input.charCodeAt(peg$currPos)?(s5=peg$c61,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c62)),s5!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c63(s3)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseNumericLiteral(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();return s1!==peg$FAILED?((s2=peg$parseDOUBLE())===peg$FAILED&&(s2=peg$parseDECIMAL())===peg$FAILED&&(s2=peg$parseINTEGER()),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseRDFLiteral(){var s0,s1,s2,s3,s4,s5,s6;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if((s2=peg$parseString())!==peg$FAILED){for(s3=[],s4=peg$parseIGNORE();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseIGNORE();s3!==peg$FAILED&&(s4=peg$parseLANGTAG())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c64(s2,s4)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED)if((s2=peg$parseString())!==peg$FAILED){for(s3=[],s4=peg$parseIGNORE();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseIGNORE();if(s3!==peg$FAILED)if(input.substr(peg$currPos,2)===peg$c65?(s4=peg$c65,peg$currPos+=2):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c66)),s4!==peg$FAILED){for(s5=[],s6=peg$parseIGNORE();s6!==peg$FAILED;)s5.push(s6),s6=peg$parseIGNORE();s5!==peg$FAILED&&(s6=peg$parseiri())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c67(s2,s6)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();s1!==peg$FAILED&&(s2=peg$parseString())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED)}}return s0}function peg$parseBooleanLiteral(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED?(input.substr(peg$currPos,4)===peg$c68?(s2=peg$c68,peg$currPos+=4):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c69)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c70()):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();s1!==peg$FAILED?(input.substr(peg$currPos,5)===peg$c71?(s2=peg$c71,peg$currPos+=5):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c72)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c73()):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}return s0}function peg$parseString(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();return s1!==peg$FAILED?((s2=peg$parseSTRING_LITERAL_LONG_SINGLE_QUOTE())===peg$FAILED&&(s2=peg$parseSTRING_LITERAL_LONG_QUOTE())===peg$FAILED&&(s2=peg$parseSTRING_LITERAL_SINGLE_QUOTE())===peg$FAILED&&(s2=peg$parseSTRING_LITERAL_QUOTE()),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseiri(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED&&(s2=peg$parseIRIREF())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();s1!==peg$FAILED&&(s2=peg$parsePrefixedName())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED)}return s0}function peg$parsePrefixedName(){var s0,s1;return(s0=peg$parsePNAME_LN())===peg$FAILED&&(s0=peg$currPos,(s1=peg$parsePNAME_NS())!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c74(s1)),s0=s1),s0}function peg$parseBlankNode(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();if(s1!==peg$FAILED&&(s2=peg$parseBLANK_NODE_LABEL())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parseIGNORE();s2!==peg$FAILED;)s1.push(s2),s2=peg$parseIGNORE();s1!==peg$FAILED&&(s2=peg$parseANON())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED)}return s0}function peg$parseIRIREF(){var s0,s1,s2,s3;if(s0=peg$currPos,60===input.charCodeAt(peg$currPos)?(s1=peg$c75,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c76)),s1!==peg$FAILED){for(s2=[],peg$c77.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78)),s3===peg$FAILED&&(s3=peg$parseUCHAR());s3!==peg$FAILED;)s2.push(s3),peg$c77.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78)),s3===peg$FAILED&&(s3=peg$parseUCHAR());s2!==peg$FAILED?(62===input.charCodeAt(peg$currPos)?(s3=peg$c79,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c80)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c81(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsePNAME_NS(){var s0,s1,s2;return s0=peg$currPos,(s1=peg$parsePN_PREFIX())===peg$FAILED&&(s1=null),s1!==peg$FAILED?(58===input.charCodeAt(peg$currPos)?(s2=peg$c82,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c84(s1)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parsePNAME_NS_NO_CHECK(){var s0,s1,s2;return s0=peg$currPos,(s1=peg$parsePN_PREFIX())===peg$FAILED&&(s1=null),s1!==peg$FAILED?(58===input.charCodeAt(peg$currPos)?(s2=peg$c82,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c85(s1)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parsePNAME_LN(){var s0,s1,s2;return s0=peg$currPos,(s1=peg$parsePNAME_NS())!==peg$FAILED&&(s2=peg$parsePN_LOCAL())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c86(s1,s2)):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parseBLANK_NODE_LABEL(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;if(s0=peg$currPos,s1=peg$currPos,input.substr(peg$currPos,2)===peg$c87?(s2=peg$c87,peg$currPos+=2):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c88)),s2!==peg$FAILED)if((s3=peg$parsePN_CHARS_U())===peg$FAILED&&(peg$c89.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90))),s3!==peg$FAILED){for(s4=[],s5=peg$parsePN_CHARS();s5!==peg$FAILED;)s4.push(s5),s5=peg$parsePN_CHARS();if(s4!==peg$FAILED){if(s5=[],s6=peg$currPos,s7=[],46===input.charCodeAt(peg$currPos)?(s8=peg$c3,peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s8!==peg$FAILED)for(;s8!==peg$FAILED;)s7.push(s8),46===input.charCodeAt(peg$currPos)?(s8=peg$c3,peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s7=peg$FAILED;if(s7!==peg$FAILED){if(s8=[],(s9=peg$parsePN_CHARS())!==peg$FAILED)for(;s9!==peg$FAILED;)s8.push(s9),s9=peg$parsePN_CHARS();else s8=peg$FAILED;s8!==peg$FAILED?s6=s7=[s7,s8]:(peg$currPos=s6,s6=peg$FAILED)}else peg$currPos=s6,s6=peg$FAILED;for(;s6!==peg$FAILED;){if(s5.push(s6),s6=peg$currPos,s7=[],46===input.charCodeAt(peg$currPos)?(s8=peg$c3,peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s8!==peg$FAILED)for(;s8!==peg$FAILED;)s7.push(s8),46===input.charCodeAt(peg$currPos)?(s8=peg$c3,peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s7=peg$FAILED;if(s7!==peg$FAILED){if(s8=[],(s9=peg$parsePN_CHARS())!==peg$FAILED)for(;s9!==peg$FAILED;)s8.push(s9),s9=peg$parsePN_CHARS();else s8=peg$FAILED;s8!==peg$FAILED?s6=s7=[s7,s8]:(peg$currPos=s6,s6=peg$FAILED)}else peg$currPos=s6,s6=peg$FAILED}s5!==peg$FAILED?s1=s2=[s2,s3,s4,s5]:(peg$currPos=s1,s1=peg$FAILED)}else peg$currPos=s1,s1=peg$FAILED}else peg$currPos=s1,s1=peg$FAILED;else peg$currPos=s1,s1=peg$FAILED;return s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1}function peg$parseLANGTAG(){var s0,s1,s2,s3,s4,s5,s6,s7;if(s0=peg$currPos,64===input.charCodeAt(peg$currPos)?(s1=peg$c91,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c92)),s1!==peg$FAILED){if(s2=[],peg$c93.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c94)),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),peg$c93.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c94));else s2=peg$FAILED;if(s2!==peg$FAILED){if(s3=[],s4=peg$currPos,45===input.charCodeAt(peg$currPos)?(s5=peg$c95,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c96)),s5!==peg$FAILED){if(s6=[],peg$c97.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c98)),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c97.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c98));else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c99(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;for(;s4!==peg$FAILED;)if(s3.push(s4),s4=peg$currPos,45===input.charCodeAt(peg$currPos)?(s5=peg$c95,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c96)),s5!==peg$FAILED){if(s6=[],peg$c97.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c98)),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c97.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c98));else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c99(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c100(s2,s3)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseINTEGER(){var s0,s1,s2,s3,s4,s5;if(s0=peg$currPos,s1=peg$currPos,s2=peg$currPos,peg$c101.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c102)),s3===peg$FAILED&&(s3=null),s3!==peg$FAILED){if(s4=[],peg$c89.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s5!==peg$FAILED)for(;s5!==peg$FAILED;)s4.push(s5),peg$c89.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));else s4=peg$FAILED;s4!==peg$FAILED?s2=s3=[s3,s4]:(peg$currPos=s2,s2=peg$FAILED)}else peg$currPos=s2,s2=peg$FAILED;return(s1=s2!==peg$FAILED?input.substring(s1,peg$currPos):s2)!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c103(s1)),s0=s1}function peg$parseDECIMAL(){var s0,s1,s2,s3,s4,s5,s6,s7;if(s0=peg$currPos,s1=peg$currPos,s2=peg$currPos,peg$c101.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c102)),s3===peg$FAILED&&(s3=null),s3!==peg$FAILED){for(s4=[],peg$c89.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));s5!==peg$FAILED;)s4.push(s5),peg$c89.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));if(s4!==peg$FAILED)if(46===input.charCodeAt(peg$currPos)?(s5=peg$c3,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s5!==peg$FAILED){if(s6=[],peg$c89.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c89.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));else s6=peg$FAILED;s6!==peg$FAILED?s2=s3=[s3,s4,s5,s6]:(peg$currPos=s2,s2=peg$FAILED)}else peg$currPos=s2,s2=peg$FAILED;else peg$currPos=s2,s2=peg$FAILED}else peg$currPos=s2,s2=peg$FAILED;return(s1=s2!==peg$FAILED?input.substring(s1,peg$currPos):s2)!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c104(s1)),s0=s1}function peg$parseDOUBLE(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;if(s0=peg$currPos,s1=peg$currPos,s2=peg$currPos,peg$c101.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c102)),s3===peg$FAILED&&(s3=null),s3!==peg$FAILED){if(s4=peg$currPos,s5=[],peg$c89.test(input.charAt(peg$currPos))?(s6=input.charAt(peg$currPos),peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s6!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),peg$c89.test(input.charAt(peg$currPos))?(s6=input.charAt(peg$currPos),peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));else s5=peg$FAILED;if(s5!==peg$FAILED)if(46===input.charCodeAt(peg$currPos)?(s6=peg$c3,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s6!==peg$FAILED){for(s7=[],peg$c89.test(input.charAt(peg$currPos))?(s8=input.charAt(peg$currPos),peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));s8!==peg$FAILED;)s7.push(s8),peg$c89.test(input.charAt(peg$currPos))?(s8=input.charAt(peg$currPos),peg$currPos++):(s8=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));s7!==peg$FAILED&&(s8=peg$parseEXPONENT())!==peg$FAILED?s4=s5=[s5,s6,s7,s8]:(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;else peg$currPos=s4,s4=peg$FAILED;if(s4===peg$FAILED){if(s4=peg$currPos,46===input.charCodeAt(peg$currPos)?(s5=peg$c3,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s5!==peg$FAILED){if(s6=[],peg$c89.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c89.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));else s6=peg$FAILED;s6!==peg$FAILED&&(s7=peg$parseEXPONENT())!==peg$FAILED?s4=s5=[s5,s6,s7]:(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;if(s4===peg$FAILED){if(s4=peg$currPos,s5=[],peg$c89.test(input.charAt(peg$currPos))?(s6=input.charAt(peg$currPos),peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s6!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),peg$c89.test(input.charAt(peg$currPos))?(s6=input.charAt(peg$currPos),peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));else s5=peg$FAILED;s5!==peg$FAILED&&(s6=peg$parseEXPONENT())!==peg$FAILED?s4=s5=[s5,s6]:(peg$currPos=s4,s4=peg$FAILED)}}s4!==peg$FAILED?s2=s3=[s3,s4]:(peg$currPos=s2,s2=peg$FAILED)}else peg$currPos=s2,s2=peg$FAILED;return(s1=s2!==peg$FAILED?input.substring(s1,peg$currPos):s2)!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c105(s1)),s0=s1}function peg$parseEXPONENT(){var s0,s1,s2,s3,s4,s5;if(s0=peg$currPos,s1=peg$currPos,peg$c106.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c107)),s2!==peg$FAILED)if(peg$c101.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c102)),s3===peg$FAILED&&(s3=null),s3!==peg$FAILED){if(s4=[],peg$c89.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s5!==peg$FAILED)for(;s5!==peg$FAILED;)s4.push(s5),peg$c89.test(input.charAt(peg$currPos))?(s5=input.charAt(peg$currPos),peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90));else s4=peg$FAILED;s4!==peg$FAILED?s1=s2=[s2,s3,s4]:(peg$currPos=s1,s1=peg$FAILED)}else peg$currPos=s1,s1=peg$FAILED;else peg$currPos=s1,s1=peg$FAILED;return s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1}function peg$parseSTRING_LITERAL_QUOTE(){var s0,s1,s2,s3;if(s0=peg$currPos,34===input.charCodeAt(peg$currPos)?(s1=peg$c108,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c109)),s1!==peg$FAILED){for(s2=[],peg$c110.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c111)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());s3!==peg$FAILED;)s2.push(s3),peg$c110.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c111)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());s2!==peg$FAILED?(34===input.charCodeAt(peg$currPos)?(s3=peg$c108,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c109)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c12(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseSTRING_LITERAL_SINGLE_QUOTE(){var s0,s1,s2,s3;if(s0=peg$currPos,39===input.charCodeAt(peg$currPos)?(s1=peg$c112,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c113)),s1!==peg$FAILED){for(s2=[],peg$c114.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c115)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());s3!==peg$FAILED;)s2.push(s3),peg$c114.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c115)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());s2!==peg$FAILED?(39===input.charCodeAt(peg$currPos)?(s3=peg$c112,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c113)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c12(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseSTRING_LITERAL_LONG_SINGLE_QUOTE(){var s0,s1,s2,s3,s4,s5,s6,s7;if(s0=peg$currPos,input.substr(peg$currPos,3)===peg$c116?(s1=peg$c116,peg$currPos+=3):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c117)),s1!==peg$FAILED){for(s2=[],peg$c118.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());s3!==peg$FAILED;)s2.push(s3),peg$c118.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());if(s2!==peg$FAILED){if(s3=[],s4=peg$currPos,input.substr(peg$currPos,2)===peg$c120?(s5=peg$c120,peg$currPos+=2):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c121)),s5!==peg$FAILED){if(s6=[],peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c122(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;if(s4===peg$FAILED)if(s4=peg$currPos,39===input.charCodeAt(peg$currPos)?(s5=peg$c112,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c113)),s5!==peg$FAILED){if(s6=[],peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c123(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;for(;s4!==peg$FAILED;){if(s3.push(s4),s4=peg$currPos,input.substr(peg$currPos,2)===peg$c120?(s5=peg$c120,peg$currPos+=2):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c121)),s5!==peg$FAILED){if(s6=[],peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c122(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;if(s4===peg$FAILED)if(s4=peg$currPos,39===input.charCodeAt(peg$currPos)?(s5=peg$c112,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c113)),s5!==peg$FAILED){if(s6=[],peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c118.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c119)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c123(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED}s3!==peg$FAILED?(input.substr(peg$currPos,3)===peg$c116?(s4=peg$c116,peg$currPos+=3):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c117)),s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c124(s2,s3)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseSTRING_LITERAL_LONG_QUOTE(){var s0,s1,s2,s3,s4,s5,s6,s7;if(s0=peg$currPos,input.substr(peg$currPos,3)===peg$c125?(s1=peg$c125,peg$currPos+=3):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c126)),s1!==peg$FAILED){for(s2=[],peg$c127.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());s3!==peg$FAILED;)s2.push(s3),peg$c127.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s3===peg$FAILED&&(s3=peg$parseECHAR())===peg$FAILED&&(s3=peg$parseUCHAR());if(s2!==peg$FAILED){if(s3=[],s4=peg$currPos,input.substr(peg$currPos,2)===peg$c129?(s5=peg$c129,peg$currPos+=2):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c130)),s5!==peg$FAILED){if(s6=[],peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c131(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;if(s4===peg$FAILED)if(s4=peg$currPos,34===input.charCodeAt(peg$currPos)?(s5=peg$c108,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c109)),s5!==peg$FAILED){if(s6=[],peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c132(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;for(;s4!==peg$FAILED;){if(s3.push(s4),s4=peg$currPos,input.substr(peg$currPos,2)===peg$c129?(s5=peg$c129,peg$currPos+=2):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c130)),s5!==peg$FAILED){if(s6=[],peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c131(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;if(s4===peg$FAILED)if(s4=peg$currPos,34===input.charCodeAt(peg$currPos)?(s5=peg$c108,peg$currPos++):(s5=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c109)),s5!==peg$FAILED){if(s6=[],peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR()),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),peg$c127.test(input.charAt(peg$currPos))?(s7=input.charAt(peg$currPos),peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c128)),s7===peg$FAILED&&(s7=peg$parseECHAR())===peg$FAILED&&(s7=peg$parseUCHAR());else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c132(s2,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED}s3!==peg$FAILED?(input.substr(peg$currPos,3)===peg$c125?(s4=peg$c125,peg$currPos+=3):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c126)),s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c124(s2,s3)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseUCHAR(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10;return s0=peg$currPos,input.substr(peg$currPos,2)===peg$c133?(s1=peg$c133,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c134)),s1!==peg$FAILED?(s2=peg$currPos,(s3=peg$parseHEX())!==peg$FAILED&&(s4=peg$parseHEX())!==peg$FAILED&&(s5=peg$parseHEX())!==peg$FAILED&&(s6=peg$parseHEX())!==peg$FAILED&&(s7=peg$parseHEX())!==peg$FAILED&&(s8=peg$parseHEX())!==peg$FAILED&&(s9=peg$parseHEX())!==peg$FAILED&&(s10=peg$parseHEX())!==peg$FAILED?s2=s3=[s3,s4,s5,s6,s7,s8,s9,s10]:(peg$currPos=s2,s2=peg$FAILED),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c135(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c136?(s1=peg$c136,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c137)),s1!==peg$FAILED?(s2=peg$currPos,(s3=peg$parseHEX())!==peg$FAILED&&(s4=peg$parseHEX())!==peg$FAILED&&(s5=peg$parseHEX())!==peg$FAILED&&(s6=peg$parseHEX())!==peg$FAILED?s2=s3=[s3,s4,s5,s6]:(peg$currPos=s2,s2=peg$FAILED),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c138(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)),s0}function peg$parseECHAR(){var s0,s1;return s0=peg$currPos,input.substr(peg$currPos,2)===peg$c139?(s1=peg$c139,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c140)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c141()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c142?(s1=peg$c142,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c143)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c144()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c145?(s1=peg$c145,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c146)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c147()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c148?(s1=peg$c148,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c149)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c150()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c151?(s1=peg$c151,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c152)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c153()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c154?(s1=peg$c154,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c155)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c156()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c157?(s1=peg$c157,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c158)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c159()),(s0=s1)===peg$FAILED&&(s0=peg$currPos,input.substr(peg$currPos,2)===peg$c160?(s1=peg$c160,peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c161)),s1!==peg$FAILED&&(peg$savedPos=s0,s1=peg$c162()),s0=s1))))))),s0}function peg$parseWS(){var s0;return peg$c163.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c164)),s0}function peg$parseANON(){var s0,s1,s2,s3;if(s0=peg$currPos,91===input.charCodeAt(peg$currPos)?(s1=peg$c55,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c56)),s1!==peg$FAILED){for(s2=[],s3=peg$parseIGNORE();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseIGNORE();s2!==peg$FAILED?(93===input.charCodeAt(peg$currPos)?(s3=peg$c57,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c58)),s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c165()):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsePN_CHARS_BASE(){var s0,s1,s2;return s0=peg$currPos,peg$c166.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c167)),s1!==peg$FAILED?(peg$c168.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c169)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c170(s1,s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(peg$c171.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c172))),s0}function peg$parsePN_CHARS_U(){var s0;return(s0=peg$parsePN_CHARS_BASE())===peg$FAILED&&(95===input.charCodeAt(peg$currPos)?(s0=peg$c173,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c174))),s0}function peg$parsePN_CHARS(){var s0;return(s0=peg$parsePN_CHARS_U())===peg$FAILED&&(45===input.charCodeAt(peg$currPos)?(s0=peg$c95,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c96)),s0===peg$FAILED&&(peg$c89.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s0===peg$FAILED&&(183===input.charCodeAt(peg$currPos)?(s0=peg$c175,peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c176)),s0===peg$FAILED&&(peg$c177.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c178)),s0===peg$FAILED&&(peg$c179.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c180))))))),s0}function peg$parsePN_PREFIX(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;if(s0=peg$currPos,s1=peg$currPos,(s2=peg$parsePN_CHARS_BASE())!==peg$FAILED){for(s3=[],s4=peg$parsePN_CHARS();s4!==peg$FAILED;)s3.push(s4),s4=peg$parsePN_CHARS();if(s3!==peg$FAILED){if(s4=[],s5=peg$currPos,s6=[],46===input.charCodeAt(peg$currPos)?(s7=peg$c3,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),46===input.charCodeAt(peg$currPos)?(s7=peg$c3,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s6=peg$FAILED;if(s6!==peg$FAILED){if(s7=[],(s8=peg$parsePN_CHARS())!==peg$FAILED)for(;s8!==peg$FAILED;)s7.push(s8),s8=peg$parsePN_CHARS();else s7=peg$FAILED;s7!==peg$FAILED?s5=s6=[s6,s7]:(peg$currPos=s5,s5=peg$FAILED)}else peg$currPos=s5,s5=peg$FAILED;for(;s5!==peg$FAILED;){if(s4.push(s5),s5=peg$currPos,s6=[],46===input.charCodeAt(peg$currPos)?(s7=peg$c3,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),46===input.charCodeAt(peg$currPos)?(s7=peg$c3,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s6=peg$FAILED;if(s6!==peg$FAILED){if(s7=[],(s8=peg$parsePN_CHARS())!==peg$FAILED)for(;s8!==peg$FAILED;)s7.push(s8),s8=peg$parsePN_CHARS();else s7=peg$FAILED;s7!==peg$FAILED?s5=s6=[s6,s7]:(peg$currPos=s5,s5=peg$FAILED)}else peg$currPos=s5,s5=peg$FAILED}s4!==peg$FAILED?s1=s2=[s2,s3,s4]:(peg$currPos=s1,s1=peg$FAILED)}else peg$currPos=s1,s1=peg$FAILED}else peg$currPos=s1,s1=peg$FAILED;return s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1}function peg$parsePN_LOCAL(){var s0,s1,s2,s3,s4,s5,s6,s7;if(s0=peg$currPos,(s1=peg$parsePN_CHARS_U())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s1=peg$c82,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s1===peg$FAILED&&(peg$c89.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c90)),s1===peg$FAILED&&(s1=peg$parsePLX()))),s1!==peg$FAILED){for(s2=[],(s3=peg$parsePN_CHARS())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s3=peg$c82,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s3===peg$FAILED&&(s3=peg$parsePLX()));s3!==peg$FAILED;)s2.push(s3),(s3=peg$parsePN_CHARS())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s3=peg$c82,peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s3===peg$FAILED&&(s3=peg$parsePLX()));if(s2!==peg$FAILED){if(s3=[],s4=peg$currPos,s5=[],46===input.charCodeAt(peg$currPos)?(s6=peg$c3,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s6!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),46===input.charCodeAt(peg$currPos)?(s6=peg$c3,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s5=peg$FAILED;if(s5!==peg$FAILED){if(s6=[],(s7=peg$parsePN_CHARS())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s7=peg$c82,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s7===peg$FAILED&&(s7=peg$parsePLX())),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),(s7=peg$parsePN_CHARS())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s7=peg$c82,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s7===peg$FAILED&&(s7=peg$parsePLX()));else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c181(s1,s2,s5,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED;for(;s4!==peg$FAILED;){if(s3.push(s4),s4=peg$currPos,s5=[],46===input.charCodeAt(peg$currPos)?(s6=peg$c3,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4)),s6!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),46===input.charCodeAt(peg$currPos)?(s6=peg$c3,peg$currPos++):(s6=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c4));else s5=peg$FAILED;if(s5!==peg$FAILED){if(s6=[],(s7=peg$parsePN_CHARS())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s7=peg$c82,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s7===peg$FAILED&&(s7=peg$parsePLX())),s7!==peg$FAILED)for(;s7!==peg$FAILED;)s6.push(s7),(s7=peg$parsePN_CHARS())===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s7=peg$c82,peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c83)),s7===peg$FAILED&&(s7=peg$parsePLX()));else s6=peg$FAILED;s6!==peg$FAILED?(peg$savedPos=s4,s4=s5=peg$c181(s1,s2,s5,s6)):(peg$currPos=s4,s4=peg$FAILED)}else peg$currPos=s4,s4=peg$FAILED}s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c182(s1,s2,s3)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsePLX(){var s0;return(s0=peg$parsePERCENT())===peg$FAILED&&(s0=peg$parsePN_LOCAL_ESC()),s0}function peg$parsePERCENT(){var s0,s1,s2,s3,s4;return s0=peg$currPos,s1=peg$currPos,37===input.charCodeAt(peg$currPos)?(s2=peg$c183,peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c184)),s2!==peg$FAILED&&(s3=peg$parseHEX())!==peg$FAILED&&(s4=peg$parseHEX())!==peg$FAILED?s1=s2=[s2,s3,s4]:(peg$currPos=s1,s1=peg$FAILED),s0=s1!==peg$FAILED?input.substring(s0,peg$currPos):s1}function peg$parseHEX(){var s0;return peg$c185.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c186)),s0}function peg$parsePN_LOCAL_ESC(){var s0,s1,s2;return s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1=peg$c187,peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c188)),s1!==peg$FAILED?(peg$c189.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c190)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c5(s2)):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0}var isIRI=function(a){return a.match(/^[a-z](.*?):(.+?)/g)};function createObject(property,value){var a={};return a[property]=value,a}var context={base:[],data:{},addBase:function(uri){if(0===context.base.length)return void context.base.push(uri);const last=context.base[context.base.length-1];last!==uri&&context.base.push(new URL(uri,last).toString())},addPrefix:function(prefix,uri){const list=context.data[prefix];void 0===list?context.data[prefix]=[{uri,count:0}]:list[list.length-1].uri!==uri&&list.push({uri,count:0})},hasPrefix:function(prefix){return void 0!==this.data[prefix]},resolve:function(pname,force){const prefix=Object.keys(context.data).find(key=>0===pname.indexOf(key+":"));if(void 0!==prefix){const list=context.data[prefix];if(1===list.length&&!0!==force&&isIRI(list[0].uri))return pname;const uri=list[list.length-1].uri;return pname.replace(prefix+":",uri)}var base=0===context.base.length?options.baseIRI:context.base[context.base.length-1];return!base||pname.match(/^(http:|https:|urn:|file:)/)?pname:0===pname.indexOf("//")&&base?base.split("//")[0]+pname:new URL(pname,base).toString()},increment:function(prefix){const list=context.data[prefix];void 0!==list&&list[list.length-1].count++},decrement:function(prefix){const list=context.data[prefix];void 0!==list&&list[list.length-1].count--},toJSON:function(){const root={};return context.base.length>0&&(void 0===root["@context"]&&(root["@context"]={}),root["@context"]["@base"]=context.base[0]),Object.keys(context.data).forEach(key=>{const head=context.data[key][0];"http://www.w3.org/2001/XMLSchema#"===head.uri&&head.count<1||isIRI(head.uri)&&(void 0===root["@context"]&&(root["@context"]={}),root["@context"][key]=head.uri)}),root}};function expandList(container,force){if(void 0===container["@list"])return container;if(!force&&!container["@list"].find(x=>void 0!==x["@list"]))return container;if(0===container["@list"].length)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var root={},focus=null;return container["@list"].forEach(b=>{null===focus?focus=root:(focus["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},focus=focus["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),focus["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=expandList(b,!0),focus["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),root}if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail(peg$endExpectation()),peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}return peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){var i,escapedParts="";for(i=0;i<expectation.parts.length;i++)escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation)}function describeExpected(expected){var i,j,descriptions=new Array(expected.length);for(i=0;i<expected.length;i++)descriptions[i]=describeExpectation(expected[i]);if(descriptions.sort(),descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++)descriptions[i-1]!==descriptions[i]&&(descriptions[j]=descriptions[i],j++);descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}function describeFound(found){return found?'"'+literalEscape(found)+'"':"end of input"}return"Expected "+describeExpected(expected)+" but "+describeFound(found)+" found."},{SyntaxError:peg$SyntaxError,parse:peg$parse}})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},"./node_modules/@storybook/addon-actions/dist/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{argsEnhancers:()=>argsEnhancers,loaders:()=>loaders});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/node_modules/uuid/dist/esm-browser/v4.js"),_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@storybook/preview-api"),_storybook_global__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("@storybook/global"),_storybook_core_events_preview_errors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/core-events/dist/errors/preview-errors.mjs"),config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a};function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in _storybook_global__WEBPACK_IMPORTED_MODULE_2__.global?_storybook_global__WEBPACK_IMPORTED_MODULE_2__.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find(render=>"playing"===render.phase||"rendering"===render.phase);if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new _storybook_core_events_preview_errors__WEBPACK_IMPORTED_MODULE_3__._U({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.addons.getChannel(),id="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)():Date.now().toString(36)+Math.random().toString(36).substring(2),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit("storybook/actions/action-event",actionDisplayToEmit)};return handler.isAction=!0,handler}var isInInitialArgs=(name,initialArgs)=>typeof initialArgs[name]>"u"&&!(name in initialArgs),argsEnhancers=[context=>{let{initialArgs,argTypes,parameters:{actions}}=context;return actions?.disable||!argTypes?{}:Object.entries(argTypes).filter(([name,argType])=>!!argType.action).reduce((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action("string"==typeof argType.action?argType.action:name)),acc),{})},context=>{let{initialArgs,argTypes,id,parameters:{actions}}=context;if(!actions||actions.disable||!actions.argTypesRegex||!argTypes)return{};let argTypesRegex=new RegExp(actions.argTypesRegex);return Object.entries(argTypes).filter(([name])=>!!argTypesRegex.test(name)).reduce((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action(name,{implicit:!0,id})),acc),{})}],loaders=[context=>{let{args,parameters:{actions}}=context;actions?.disable||Object.entries(args).filter(([,value])=>"function"==typeof value&&"_isMockFunction"in value&&value._isMockFunction).forEach(([key,value])=>{let previous=value.getMockImplementation();if(!0!==previous?._actionAttached&&!0!==previous?.isAction){let implementation=(...params)=>(action(key)(...params),previous?.(...params));implementation._actionAttached=!0,value.mockImplementation(implementation)}})}]},"./node_modules/@storybook/addon-actions/node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});const esm_browser_native={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]}const esm_browser_v4=function v4(options,buf,offset){if(esm_browser_native.randomUUID&&!buf&&!options)return esm_browser_native.randomUUID();const rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)}},"./node_modules/@storybook/addon-essentials/dist/backgrounds/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{decorators:()=>decorators,globals:()=>globals,parameters:()=>parameters});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),esm=__webpack_require__("./node_modules/ts-dedent/esm/index.js"),external_STORYBOOK_MODULE_CLIENT_LOGGER_=__webpack_require__("@storybook/client-logger"),PARAM_KEY="backgrounds",{document:preview_document,window:preview_window}=external_STORYBOOK_MODULE_GLOBAL_.global,clearStyles=selector=>{(Array.isArray(selector)?selector:[selector]).forEach(clearStyle)},clearStyle=selector=>{let element=preview_document.getElementById(selector);element&&element.parentElement?.removeChild(element)},decorators=[(StoryFn,context)=>{let{globals:globals2,parameters:parameters2}=context,gridParameters=parameters2.backgrounds.grid,isActive=!0===globals2.backgrounds?.grid&&!0!==gridParameters.disable,{cellAmount,cellSize,opacity}=gridParameters,isInDocs="docs"===context.viewMode,defaultOffset=void 0===parameters2.layout||"padded"===parameters2.layout?16:0,offsetX=gridParameters.offsetX??(isInDocs?20:defaultOffset),offsetY=gridParameters.offsetY??(isInDocs?20:defaultOffset),gridStyles=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useMemo)(()=>`\n      ${"docs"===context.viewMode?`#anchor--${context.id} .docs-story`:".sb-show-main"} {\n        background-size: ${[`${cellSize*cellAmount}px ${cellSize*cellAmount}px`,`${cellSize*cellAmount}px ${cellSize*cellAmount}px`,`${cellSize}px ${cellSize}px`,`${cellSize}px ${cellSize}px`].join(", ")} !important;\n        background-position: ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px !important;\n        background-blend-mode: difference !important;\n        background-image: linear-gradient(rgba(130, 130, 130, ${opacity}) 1px, transparent 1px),\n         linear-gradient(90deg, rgba(130, 130, 130, ${opacity}) 1px, transparent 1px),\n         linear-gradient(rgba(130, 130, 130, ${opacity/2}) 1px, transparent 1px),\n         linear-gradient(90deg, rgba(130, 130, 130, ${opacity/2}) 1px, transparent 1px) !important;\n      }\n    `,[cellSize]);return(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)(()=>{let selectorId="docs"===context.viewMode?`addon-backgrounds-grid-docs-${context.id}`:"addon-backgrounds-grid";isActive?((selector,css)=>{let existingStyle=preview_document.getElementById(selector);if(existingStyle)existingStyle.innerHTML!==css&&(existingStyle.innerHTML=css);else{let style=preview_document.createElement("style");style.setAttribute("id",selector),style.innerHTML=css,preview_document.head.appendChild(style)}})(selectorId,gridStyles):clearStyles(selectorId)},[isActive,gridStyles,context]),StoryFn()},(StoryFn,context)=>{let{globals:globals2,parameters:parameters2}=context,globalsBackgroundColor=globals2.backgrounds?.value,backgroundsConfig=parameters2.backgrounds,selectedBackgroundColor=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useMemo)(()=>backgroundsConfig.disable?"transparent":((currentSelectedValue,backgrounds=[],defaultName)=>{if("transparent"===currentSelectedValue)return"transparent";if(backgrounds.find(background=>background.value===currentSelectedValue))return currentSelectedValue;let defaultBackground=backgrounds.find(background=>background.name===defaultName);if(defaultBackground)return defaultBackground.value;if(defaultName){let availableColors=backgrounds.map(background=>background.name).join(", ");external_STORYBOOK_MODULE_CLIENT_LOGGER_.logger.warn(esm.T`
        Backgrounds Addon: could not find the default color "${defaultName}".
        These are the available colors for your story based on your configuration:
        ${availableColors}.
      `)}return"transparent"})(globalsBackgroundColor,backgroundsConfig.values,backgroundsConfig.default),[backgroundsConfig,globalsBackgroundColor]),isActive=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useMemo)(()=>selectedBackgroundColor&&"transparent"!==selectedBackgroundColor,[selectedBackgroundColor]),selector="docs"===context.viewMode?`#anchor--${context.id} .docs-story`:".sb-show-main",backgroundStyles=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useMemo)(()=>`\n      ${selector} {\n        background: ${selectedBackgroundColor} !important;\n        ${preview_window.matchMedia("(prefers-reduced-motion: reduce)").matches?"":"transition: background-color 0.3s;"}\n      }\n    `,[selectedBackgroundColor,selector]);return(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)(()=>{let selectorId="docs"===context.viewMode?`addon-backgrounds-docs-${context.id}`:"addon-backgrounds-color";isActive?((selector,css,storyId)=>{let existingStyle=preview_document.getElementById(selector);if(existingStyle)existingStyle.innerHTML!==css&&(existingStyle.innerHTML=css);else{let style=preview_document.createElement("style");style.setAttribute("id",selector),style.innerHTML=css;let gridStyleSelector="addon-backgrounds-grid"+(storyId?`-docs-${storyId}`:""),existingGridStyle=preview_document.getElementById(gridStyleSelector);existingGridStyle?existingGridStyle.parentElement?.insertBefore(style,existingGridStyle):preview_document.head.appendChild(style)}})(selectorId,backgroundStyles,"docs"===context.viewMode?context.id:null):clearStyles(selectorId)},[isActive,backgroundStyles,context]),StoryFn()}],parameters={[PARAM_KEY]:{grid:{cellSize:20,opacity:.5,cellAmount:5},values:[{name:"light",value:"#F8F8F8"},{name:"dark",value:"#333333"}]}},globals={[PARAM_KEY]:null}},"./node_modules/@storybook/addon-essentials/dist/docs/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{parameters:()=>parameters});var parameters={docs:{renderer:async()=>{let{DocsRenderer}=await Promise.all([__webpack_require__.e(81),__webpack_require__.e(425)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@storybook/addon-docs/dist/DocsRenderer-NNNQARDV.mjs"));return new DocsRenderer}}}},"./node_modules/@storybook/addon-essentials/dist/highlight/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{highlightObject:()=>highlightObject,highlightStyle:()=>highlightStyle});var external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_=__webpack_require__("@storybook/core-events"),{document:preview_document}=external_STORYBOOK_MODULE_GLOBAL_.global,highlightStyle=(color="#FF4785",style="dashed")=>`\n  outline: 2px ${style} ${color};\n  outline-offset: 2px;\n  box-shadow: 0 0 0 6px rgba(255,255,255,0.6);\n`,highlightObject=color=>({outline:`2px dashed ${color}`,outlineOffset:2,boxShadow:"0 0 0 6px rgba(255,255,255,0.6)"}),channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),resetHighlight=()=>{let sheetToBeRemoved=preview_document.getElementById("storybookHighlight");sheetToBeRemoved&&sheetToBeRemoved.parentNode?.removeChild(sheetToBeRemoved)};channel.on(external_STORYBOOK_MODULE_CORE_EVENTS_.STORY_CHANGED,resetHighlight),channel.on("storybook/highlight/reset",resetHighlight),channel.on("storybook/highlight/add",infos=>{resetHighlight();let elements=Array.from(new Set(infos.elements)),sheet=preview_document.createElement("style");sheet.setAttribute("id","storybookHighlight"),sheet.innerHTML=elements.map(target=>`${target}{\n          ${highlightStyle(infos.color,infos.style)}\n         }`).join(" "),preview_document.head.appendChild(sheet)})},"./node_modules/@storybook/addon-essentials/dist/measure/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{decorators:()=>decorators,globals:()=>globals});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),prefix="Invariant failed";function invariant(condition,message){if(!condition)throw new Error(prefix)}function getDocumentWidthAndHeight(){let container=external_STORYBOOK_MODULE_GLOBAL_.global.document.documentElement,height=Math.max(container.scrollHeight,container.offsetHeight);return{width:Math.max(container.scrollWidth,container.offsetWidth),height}}function setCanvasWidthAndHeight(canvas,context,{width,height}){canvas.style.width=`${width}px`,canvas.style.height=`${height}px`;let scale=external_STORYBOOK_MODULE_GLOBAL_.global.window.devicePixelRatio;canvas.width=Math.floor(width*scale),canvas.height=Math.floor(height*scale),context.scale(scale,scale)}var state={};function init(){state.canvas||(state=function createCanvas(){let canvas=external_STORYBOOK_MODULE_GLOBAL_.global.document.createElement("canvas");canvas.id="storybook-addon-measure";let context=canvas.getContext("2d");invariant(null!=context);let{width,height}=getDocumentWidthAndHeight();return setCanvasWidthAndHeight(canvas,context,{width,height}),canvas.style.position="absolute",canvas.style.left="0",canvas.style.top="0",canvas.style.zIndex="2147483647",canvas.style.pointerEvents="none",external_STORYBOOK_MODULE_GLOBAL_.global.document.body.appendChild(canvas),{canvas,context,width,height}}())}function clear(){state.context&&state.context.clearRect(0,0,state.width??0,state.height??0)}var colors={margin:"#f6b26b",border:"#ffe599",padding:"#93c47d",content:"#6fa8dc",text:"#232020"};function roundedRect(context,{x,y,w,h,r}){x-=w/2,y-=h/2,w<2*r&&(r=w/2),h<2*r&&(r=h/2),context.beginPath(),context.moveTo(x+r,y),context.arcTo(x+w,y,x+w,y+h,r),context.arcTo(x+w,y+h,x,y+h,r),context.arcTo(x,y+h,x,y,r),context.arcTo(x,y,x+w,y,r),context.closePath()}function textWithRect(context,type,{x,y,w,h},text){return roundedRect(context,{x,y,w,h,r:3}),context.fillStyle=`${colors[type]}dd`,context.fill(),context.strokeStyle=colors[type],context.stroke(),context.fillStyle=colors.text,context.fillText(text,x,y),roundedRect(context,{x,y,w,h,r:3}),context.fillStyle=`${colors[type]}dd`,context.fill(),context.strokeStyle=colors[type],context.stroke(),context.fillStyle=colors.text,context.fillText(text,x,y),{x,y,w,h}}function configureText(context,text){context.font="600 12px monospace",context.textBaseline="middle",context.textAlign="center";let metrics=context.measureText(text),actualHeight=metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent;return{w:metrics.width+12,h:actualHeight+12}}function drawLabel(context,measurements,{type,position="center",text},prevRect,external=!1){let{x,y}=function positionCoordinate(position,{padding,border,width,height,top,left}){let contentWidth=width-border.left-border.right-padding.left-padding.right,contentHeight=height-padding.top-padding.bottom-border.top-border.bottom,x=left+border.left+padding.left,y=top+border.top+padding.top;return"top"===position?x+=contentWidth/2:"right"===position?(x+=contentWidth,y+=contentHeight/2):"bottom"===position?(x+=contentWidth/2,y+=contentHeight):"left"===position?y+=contentHeight/2:"center"===position&&(x+=contentWidth/2,y+=contentHeight/2),{x,y}}(position,measurements),{offsetX,offsetY}=function offset(type,position,{margin,border,padding},labelPaddingSize,external){let shift=dir=>0,offsetX=0,offsetY=0,locationMultiplier=external?1:.5,labelPaddingShift=external?2*labelPaddingSize:0;return"padding"===type?shift=dir=>padding[dir]*locationMultiplier+labelPaddingShift:"border"===type?shift=dir=>padding[dir]+border[dir]*locationMultiplier+labelPaddingShift:"margin"===type&&(shift=dir=>padding[dir]+border[dir]+margin[dir]*locationMultiplier+labelPaddingShift),"top"===position?offsetY=-shift("top"):"right"===position?offsetX=shift("right"):"bottom"===position?offsetY=shift("bottom"):"left"===position&&(offsetX=-shift("left")),{offsetX,offsetY}}(type,position,measurements,7,external);x+=offsetX,y+=offsetY;let{w,h}=configureText(context,text);if(prevRect&&function collide(a,b){return Math.abs(a.x-b.x)<Math.abs(a.w+b.w)/2&&Math.abs(a.y-b.y)<Math.abs(a.h+b.h)/2}({x,y,w,h},prevRect)){let adjusted=function overlapAdjustment(position,currentRect,prevRect){return"top"===position?currentRect.y=prevRect.y-prevRect.h-6:"right"===position?currentRect.x=prevRect.x+prevRect.w/2+6+currentRect.w/2:"bottom"===position?currentRect.y=prevRect.y+prevRect.h+6:"left"===position&&(currentRect.x=prevRect.x-prevRect.w/2-6-currentRect.w/2),{x:currentRect.x,y:currentRect.y}}(position,{x,y,w,h},prevRect);x=adjusted.x,y=adjusted.y}return textWithRect(context,type,{x,y,w,h},text)}function drawStack(context,measurements,stack,external){let rects=[];stack.forEach((l,idx)=>{let rect=external&&"center"===l.position?function drawFloatingLabel(context,measurements,{type,text}){let{floatingAlignment:floatingAlignment2,extremities}=measurements,x=extremities[floatingAlignment2.x],y=extremities[floatingAlignment2.y],{w,h}=configureText(context,text),{offsetX,offsetY}=function floatingOffset(alignment,{w,h}){let deltaW=.5*w+6,deltaH=.5*h+6;return{offsetX:("left"===alignment.x?-1:1)*deltaW,offsetY:("top"===alignment.y?-1:1)*deltaH}}(floatingAlignment2,{w,h});return x+=offsetX,y+=offsetY,textWithRect(context,type,{x,y,w,h},text)}(context,measurements,l):drawLabel(context,measurements,l,rects[idx-1],external);rects[idx]=rect})}var colors2_margin="#f6b26ba8",colors2_border="#ffe599a8",colors2_padding="#93c47d8c",colors2_content="#6fa8dca8";function pxToNumber(px){return parseInt(px.replace("px",""),10)}function round(value){return Number.isInteger(value)?value:value.toFixed(2)}function filterZeroValues(labels){return labels.filter(l=>0!==l.text&&"0"!==l.text)}function floatingAlignment(extremities){let windowExtremities_top=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollY,windowExtremities_bottom=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollY+external_STORYBOOK_MODULE_GLOBAL_.global.window.innerHeight,windowExtremities_left=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollX,windowExtremities_right=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollX+external_STORYBOOK_MODULE_GLOBAL_.global.window.innerWidth,distances_top=Math.abs(windowExtremities_top-extremities.top),distances_bottom=Math.abs(windowExtremities_bottom-extremities.bottom);return{x:Math.abs(windowExtremities_left-extremities.left)>Math.abs(windowExtremities_right-extremities.right)?"left":"right",y:distances_top>distances_bottom?"top":"bottom"}}function drawBoxModel(element){return context=>{if(element&&context){let measurements=function measureElement(element){let style=external_STORYBOOK_MODULE_GLOBAL_.global.getComputedStyle(element),{top,left,right,bottom,width,height}=element.getBoundingClientRect(),{marginTop,marginBottom,marginLeft,marginRight,paddingTop,paddingBottom,paddingLeft,paddingRight,borderBottomWidth,borderTopWidth,borderLeftWidth,borderRightWidth}=style;top+=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollY,left+=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollX,bottom+=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollY,right+=external_STORYBOOK_MODULE_GLOBAL_.global.window.scrollX;let margin={top:pxToNumber(marginTop),bottom:pxToNumber(marginBottom),left:pxToNumber(marginLeft),right:pxToNumber(marginRight)},padding={top:pxToNumber(paddingTop),bottom:pxToNumber(paddingBottom),left:pxToNumber(paddingLeft),right:pxToNumber(paddingRight)},border={top:pxToNumber(borderTopWidth),bottom:pxToNumber(borderBottomWidth),left:pxToNumber(borderLeftWidth),right:pxToNumber(borderRightWidth)},extremities={top:top-margin.top,bottom:bottom+margin.bottom,left:left-margin.left,right:right+margin.right};return{margin,padding,border,top,left,bottom,right,width,height,extremities,floatingAlignment:floatingAlignment(extremities)}}(element),marginLabels=function drawMargin(context,{margin,width,height,top,left,bottom,right}){let marginHeight=height+margin.bottom+margin.top;return context.fillStyle=colors2_margin,context.fillRect(left,top-margin.top,width,margin.top),context.fillRect(right,top-margin.top,margin.right,marginHeight),context.fillRect(left,bottom,width,margin.bottom),context.fillRect(left-margin.left,top-margin.top,margin.left,marginHeight),filterZeroValues([{type:"margin",text:round(margin.top),position:"top"},{type:"margin",text:round(margin.right),position:"right"},{type:"margin",text:round(margin.bottom),position:"bottom"},{type:"margin",text:round(margin.left),position:"left"}])}(context,measurements),paddingLabels=function drawPadding(context,{padding,border,width,height,top,left,bottom,right}){let paddingWidth=width-border.left-border.right,paddingHeight=height-padding.top-padding.bottom-border.top-border.bottom;return context.fillStyle=colors2_padding,context.fillRect(left+border.left,top+border.top,paddingWidth,padding.top),context.fillRect(right-padding.right-border.right,top+padding.top+border.top,padding.right,paddingHeight),context.fillRect(left+border.left,bottom-padding.bottom-border.bottom,paddingWidth,padding.bottom),context.fillRect(left+border.left,top+padding.top+border.top,padding.left,paddingHeight),filterZeroValues([{type:"padding",text:padding.top,position:"top"},{type:"padding",text:padding.right,position:"right"},{type:"padding",text:padding.bottom,position:"bottom"},{type:"padding",text:padding.left,position:"left"}])}(context,measurements),borderLabels=function drawBorder(context,{border,width,height,top,left,bottom,right}){let borderHeight=height-border.top-border.bottom;return context.fillStyle=colors2_border,context.fillRect(left,top,width,border.top),context.fillRect(left,bottom-border.bottom,width,border.bottom),context.fillRect(left,top+border.top,border.left,borderHeight),context.fillRect(right-border.right,top+border.top,border.right,borderHeight),filterZeroValues([{type:"border",text:border.top,position:"top"},{type:"border",text:border.right,position:"right"},{type:"border",text:border.bottom,position:"bottom"},{type:"border",text:border.left,position:"left"}])}(context,measurements),contentLabels=function drawContent(context,{padding,border,width,height,top,left}){let contentWidth=width-border.left-border.right-padding.left-padding.right,contentHeight=height-padding.top-padding.bottom-border.top-border.bottom;return context.fillStyle=colors2_content,context.fillRect(left+border.left+padding.left,top+border.top+padding.top,contentWidth,contentHeight),[{type:"content",position:"center",text:`${round(contentWidth)} x ${round(contentHeight)}`}]}(context,measurements);!function labelStacks(context,measurements,labels,externalLabels){let stacks=labels.reduce((acc,l)=>(Object.prototype.hasOwnProperty.call(acc,l.position)||(acc[l.position]=[]),acc[l.position]?.push(l),acc),{});stacks.top&&drawStack(context,measurements,stacks.top,externalLabels),stacks.right&&drawStack(context,measurements,stacks.right,externalLabels),stacks.bottom&&drawStack(context,measurements,stacks.bottom,externalLabels),stacks.left&&drawStack(context,measurements,stacks.left,externalLabels),stacks.center&&drawStack(context,measurements,stacks.center,externalLabels)}(context,measurements,[...contentLabels,...paddingLabels,...borderLabels,...marginLabels],measurements.width<=90||measurements.height<=30)}}}function drawSelectedElement(element){!function draw(callback){clear(),callback(state.context)}(drawBoxModel(element))}var nodeAtPointerRef,pointer={x:0,y:0};function findAndDrawElement(x,y){nodeAtPointerRef=((x,y)=>{let element=external_STORYBOOK_MODULE_GLOBAL_.global.document.elementFromPoint(x,y),crawlShadows=node=>{if(node&&node.shadowRoot){let nestedElement=node.shadowRoot.elementFromPoint(x,y);return node.isEqualNode(nestedElement)?node:nestedElement.shadowRoot?crawlShadows(nestedElement):nestedElement}return node};return crawlShadows(element)||element})(x,y),drawSelectedElement(nodeAtPointerRef)}var PARAM_KEY="measureEnabled",decorators=[(StoryFn,context)=>{let{measureEnabled}=context.globals;return(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)(()=>{let onPointerMove=event=>{window.requestAnimationFrame(()=>{event.stopPropagation(),pointer.x=event.clientX,pointer.y=event.clientY})};return document.addEventListener("pointermove",onPointerMove),()=>{document.removeEventListener("pointermove",onPointerMove)}},[]),(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)(()=>{let onResize=()=>{window.requestAnimationFrame(()=>{!function rescale(){invariant(state.canvas),invariant(state.context),setCanvasWidthAndHeight(state.canvas,state.context,{width:0,height:0});let{width,height}=getDocumentWidthAndHeight();setCanvasWidthAndHeight(state.canvas,state.context,{width,height}),state.width=width,state.height=height}()})};return"story"===context.viewMode&&measureEnabled&&(document.addEventListener("pointerover",event=>{window.requestAnimationFrame(()=>{event.stopPropagation(),findAndDrawElement(event.clientX,event.clientY)})}),init(),window.addEventListener("resize",onResize),findAndDrawElement(pointer.x,pointer.y)),()=>{window.removeEventListener("resize",onResize),function destroy(){state.canvas&&(clear(),state.canvas.parentNode?.removeChild(state.canvas),state={})}()}},[measureEnabled,context.viewMode]),StoryFn()}],globals={[PARAM_KEY]:!1}},"./node_modules/@storybook/addon-essentials/dist/outline/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{decorators:()=>decorators,globals:()=>globals});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),esm=__webpack_require__("./node_modules/ts-dedent/esm/index.js"),clearStyles=selector=>{(Array.isArray(selector)?selector:[selector]).forEach(clearStyle)},clearStyle=input=>{let selector="string"==typeof input?input:input.join(""),element=external_STORYBOOK_MODULE_GLOBAL_.global.document.getElementById(selector);element&&element.parentElement&&element.parentElement.removeChild(element)},PARAM_KEY="outline";var decorators=[(StoryFn,context)=>{let{globals:globals2}=context,isActive=[!0,"true"].includes(globals2.outline),isInDocs="docs"===context.viewMode,outlineStyles=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useMemo)(()=>function outlineCSS(selector){return esm.T`
    ${selector} body {
      outline: 1px solid #2980b9 !important;
    }

    ${selector} article {
      outline: 1px solid #3498db !important;
    }

    ${selector} nav {
      outline: 1px solid #0088c3 !important;
    }

    ${selector} aside {
      outline: 1px solid #33a0ce !important;
    }

    ${selector} section {
      outline: 1px solid #66b8da !important;
    }

    ${selector} header {
      outline: 1px solid #99cfe7 !important;
    }

    ${selector} footer {
      outline: 1px solid #cce7f3 !important;
    }

    ${selector} h1 {
      outline: 1px solid #162544 !important;
    }

    ${selector} h2 {
      outline: 1px solid #314e6e !important;
    }

    ${selector} h3 {
      outline: 1px solid #3e5e85 !important;
    }

    ${selector} h4 {
      outline: 1px solid #449baf !important;
    }

    ${selector} h5 {
      outline: 1px solid #c7d1cb !important;
    }

    ${selector} h6 {
      outline: 1px solid #4371d0 !important;
    }

    ${selector} main {
      outline: 1px solid #2f4f90 !important;
    }

    ${selector} address {
      outline: 1px solid #1a2c51 !important;
    }

    ${selector} div {
      outline: 1px solid #036cdb !important;
    }

    ${selector} p {
      outline: 1px solid #ac050b !important;
    }

    ${selector} hr {
      outline: 1px solid #ff063f !important;
    }

    ${selector} pre {
      outline: 1px solid #850440 !important;
    }

    ${selector} blockquote {
      outline: 1px solid #f1b8e7 !important;
    }

    ${selector} ol {
      outline: 1px solid #ff050c !important;
    }

    ${selector} ul {
      outline: 1px solid #d90416 !important;
    }

    ${selector} li {
      outline: 1px solid #d90416 !important;
    }

    ${selector} dl {
      outline: 1px solid #fd3427 !important;
    }

    ${selector} dt {
      outline: 1px solid #ff0043 !important;
    }

    ${selector} dd {
      outline: 1px solid #e80174 !important;
    }

    ${selector} figure {
      outline: 1px solid #ff00bb !important;
    }

    ${selector} figcaption {
      outline: 1px solid #bf0032 !important;
    }

    ${selector} table {
      outline: 1px solid #00cc99 !important;
    }

    ${selector} caption {
      outline: 1px solid #37ffc4 !important;
    }

    ${selector} thead {
      outline: 1px solid #98daca !important;
    }

    ${selector} tbody {
      outline: 1px solid #64a7a0 !important;
    }

    ${selector} tfoot {
      outline: 1px solid #22746b !important;
    }

    ${selector} tr {
      outline: 1px solid #86c0b2 !important;
    }

    ${selector} th {
      outline: 1px solid #a1e7d6 !important;
    }

    ${selector} td {
      outline: 1px solid #3f5a54 !important;
    }

    ${selector} col {
      outline: 1px solid #6c9a8f !important;
    }

    ${selector} colgroup {
      outline: 1px solid #6c9a9d !important;
    }

    ${selector} button {
      outline: 1px solid #da8301 !important;
    }

    ${selector} datalist {
      outline: 1px solid #c06000 !important;
    }

    ${selector} fieldset {
      outline: 1px solid #d95100 !important;
    }

    ${selector} form {
      outline: 1px solid #d23600 !important;
    }

    ${selector} input {
      outline: 1px solid #fca600 !important;
    }

    ${selector} keygen {
      outline: 1px solid #b31e00 !important;
    }

    ${selector} label {
      outline: 1px solid #ee8900 !important;
    }

    ${selector} legend {
      outline: 1px solid #de6d00 !important;
    }

    ${selector} meter {
      outline: 1px solid #e8630c !important;
    }

    ${selector} optgroup {
      outline: 1px solid #b33600 !important;
    }

    ${selector} option {
      outline: 1px solid #ff8a00 !important;
    }

    ${selector} output {
      outline: 1px solid #ff9619 !important;
    }

    ${selector} progress {
      outline: 1px solid #e57c00 !important;
    }

    ${selector} select {
      outline: 1px solid #e26e0f !important;
    }

    ${selector} textarea {
      outline: 1px solid #cc5400 !important;
    }

    ${selector} details {
      outline: 1px solid #33848f !important;
    }

    ${selector} summary {
      outline: 1px solid #60a1a6 !important;
    }

    ${selector} command {
      outline: 1px solid #438da1 !important;
    }

    ${selector} menu {
      outline: 1px solid #449da6 !important;
    }

    ${selector} del {
      outline: 1px solid #bf0000 !important;
    }

    ${selector} ins {
      outline: 1px solid #400000 !important;
    }

    ${selector} img {
      outline: 1px solid #22746b !important;
    }

    ${selector} iframe {
      outline: 1px solid #64a7a0 !important;
    }

    ${selector} embed {
      outline: 1px solid #98daca !important;
    }

    ${selector} object {
      outline: 1px solid #00cc99 !important;
    }

    ${selector} param {
      outline: 1px solid #37ffc4 !important;
    }

    ${selector} video {
      outline: 1px solid #6ee866 !important;
    }

    ${selector} audio {
      outline: 1px solid #027353 !important;
    }

    ${selector} source {
      outline: 1px solid #012426 !important;
    }

    ${selector} canvas {
      outline: 1px solid #a2f570 !important;
    }

    ${selector} track {
      outline: 1px solid #59a600 !important;
    }

    ${selector} map {
      outline: 1px solid #7be500 !important;
    }

    ${selector} area {
      outline: 1px solid #305900 !important;
    }

    ${selector} a {
      outline: 1px solid #ff62ab !important;
    }

    ${selector} em {
      outline: 1px solid #800b41 !important;
    }

    ${selector} strong {
      outline: 1px solid #ff1583 !important;
    }

    ${selector} i {
      outline: 1px solid #803156 !important;
    }

    ${selector} b {
      outline: 1px solid #cc1169 !important;
    }

    ${selector} u {
      outline: 1px solid #ff0430 !important;
    }

    ${selector} s {
      outline: 1px solid #f805e3 !important;
    }

    ${selector} small {
      outline: 1px solid #d107b2 !important;
    }

    ${selector} abbr {
      outline: 1px solid #4a0263 !important;
    }

    ${selector} q {
      outline: 1px solid #240018 !important;
    }

    ${selector} cite {
      outline: 1px solid #64003c !important;
    }

    ${selector} dfn {
      outline: 1px solid #b4005a !important;
    }

    ${selector} sub {
      outline: 1px solid #dba0c8 !important;
    }

    ${selector} sup {
      outline: 1px solid #cc0256 !important;
    }

    ${selector} time {
      outline: 1px solid #d6606d !important;
    }

    ${selector} code {
      outline: 1px solid #e04251 !important;
    }

    ${selector} kbd {
      outline: 1px solid #5e001f !important;
    }

    ${selector} samp {
      outline: 1px solid #9c0033 !important;
    }

    ${selector} var {
      outline: 1px solid #d90047 !important;
    }

    ${selector} mark {
      outline: 1px solid #ff0053 !important;
    }

    ${selector} bdi {
      outline: 1px solid #bf3668 !important;
    }

    ${selector} bdo {
      outline: 1px solid #6f1400 !important;
    }

    ${selector} ruby {
      outline: 1px solid #ff7b93 !important;
    }

    ${selector} rt {
      outline: 1px solid #ff2f54 !important;
    }

    ${selector} rp {
      outline: 1px solid #803e49 !important;
    }

    ${selector} span {
      outline: 1px solid #cc2643 !important;
    }

    ${selector} br {
      outline: 1px solid #db687d !important;
    }

    ${selector} wbr {
      outline: 1px solid #db175b !important;
    }`}(isInDocs?'[data-story-block="true"]':".sb-show-main"),[context]);return(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)(()=>{let selectorId=isInDocs?`addon-outline-docs-${context.id}`:"addon-outline";return isActive?((selector,css)=>{let existingStyle=external_STORYBOOK_MODULE_GLOBAL_.global.document.getElementById(selector);if(existingStyle)existingStyle.innerHTML!==css&&(existingStyle.innerHTML=css);else{let style=external_STORYBOOK_MODULE_GLOBAL_.global.document.createElement("style");style.setAttribute("id",selector),style.innerHTML=css,external_STORYBOOK_MODULE_GLOBAL_.global.document.head.appendChild(style)}})(selectorId,outlineStyles):clearStyles(selectorId),()=>{clearStyles(selectorId)}},[isActive,outlineStyles,context]),StoryFn()}],globals={[PARAM_KEY]:!1}},"./node_modules/@storybook/addon-links/dist/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{decorators:()=>decorators});var _storybook_global__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("@storybook/global"),_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@storybook/preview-api"),_storybook_core_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("@storybook/core-events"),{document,HTMLElement}=(__webpack_require__("./node_modules/@storybook/csf/dist/index.mjs"),_storybook_global__WEBPACK_IMPORTED_MODULE_0__.global),linksListener=e=>{let{target}=e;if(!(target instanceof HTMLElement))return;let element=target,{sbKind:kind,sbStory:story}=element.dataset;var params;(kind||story)&&(e.preventDefault(),params={kind,story},_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.addons.getChannel().emit(_storybook_core_events__WEBPACK_IMPORTED_MODULE_2__.SELECT_STORY,params))},hasListener=!1,off=()=>{hasListener&&(hasListener=!1,document.removeEventListener("click",linksListener))},decorators=[(0,_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.makeDecorator)({name:"withLinks",parameterName:"links",wrapper:(getStory,context)=>(hasListener||(hasListener=!0,document.addEventListener("click",linksListener)),_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.addons.getChannel().once(_storybook_core_events__WEBPACK_IMPORTED_MODULE_2__.STORY_CHANGED,off),getStory(context))})]},"./node_modules/@storybook/core-events/dist/errors/preview-errors.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_U:()=>ImplicitActionsDuringRendering});var Category2,StorybookError=class extends Error{constructor(){super(...arguments),this.data={},this.documentation=!1,this.fromStorybook=!0}get fullErrorCode(){let paddedCode=String(this.code).padStart(4,"0");return`SB_${this.category}_${paddedCode}`}get name(){let errorName=this.constructor.name;return`${this.fullErrorCode} (${errorName})`}get message(){let page;return!0===this.documentation?page=`https://storybook.js.org/error/${this.fullErrorCode}`:"string"==typeof this.documentation?page=this.documentation:Array.isArray(this.documentation)&&(page=`\n${this.documentation.map(doc=>`\t- ${doc}`).join("\n")}`),`${this.template()}${null!=page?`\n\nMore info: ${page}\n`:""}`}},esm=__webpack_require__("./node_modules/ts-dedent/esm/index.js"),Category=((Category2=Category||{}).PREVIEW_CLIENT_LOGGER="PREVIEW_CLIENT-LOGGER",Category2.PREVIEW_CHANNELS="PREVIEW_CHANNELS",Category2.PREVIEW_CORE_EVENTS="PREVIEW_CORE-EVENTS",Category2.PREVIEW_INSTRUMENTER="PREVIEW_INSTRUMENTER",Category2.PREVIEW_API="PREVIEW_API",Category2.PREVIEW_REACT_DOM_SHIM="PREVIEW_REACT-DOM-SHIM",Category2.PREVIEW_ROUTER="PREVIEW_ROUTER",Category2.PREVIEW_THEMING="PREVIEW_THEMING",Category2.RENDERER_HTML="RENDERER_HTML",Category2.RENDERER_PREACT="RENDERER_PREACT",Category2.RENDERER_REACT="RENDERER_REACT",Category2.RENDERER_SERVER="RENDERER_SERVER",Category2.RENDERER_SVELTE="RENDERER_SVELTE",Category2.RENDERER_VUE="RENDERER_VUE",Category2.RENDERER_VUE3="RENDERER_VUE3",Category2.RENDERER_WEB_COMPONENTS="RENDERER_WEB-COMPONENTS",Category2),ImplicitActionsDuringRendering=class extends StorybookError{constructor(data){super(),this.data=data,this.category="PREVIEW_API",this.code=2,this.documentation="https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#using-implicit-actions-during-rendering-is-deprecated-for-example-in-the-play-function"}template(){return esm.A`
      We detected that you use an implicit action arg during ${this.data.phase} of your story.  
      ${this.data.deprecated?"\nThis is deprecated and won't work in Storybook 8 anymore.\n":""}
      Please provide an explicit spy to your args like this:
        import { fn } from '@storybook/test';
        ... 
        args: {
         ${this.data.name}: fn()
        }
    `}}},"./node_modules/@storybook/csf/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{aj:()=>O,hX:()=>P});var r,e,C=Object.create,u=Object.defineProperty,B=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,h=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,x=(r=T=>{var r,e,n;Object.defineProperty(T,"__esModule",{value:!0}),T.isEqual=(r=Object.prototype.toString,e=Object.getPrototypeOf,n=Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:Object.keys,function(t,a){return function i(o,s,p){var g,y,d,c=r.call(o),b=r.call(s);if(o===s)return!0;if(null==o||null==s)return!1;if(p.indexOf(o)>-1&&p.indexOf(s)>-1)return!0;if(p.push(o,s),c!=b||(g=n(o),y=n(s),g.length!=y.length||g.some(function(A){return!i(o[A],s[A],p)})))return!1;switch(c.slice(8,-1)){case"Symbol":return o.valueOf()==s.valueOf();case"Date":case"Number":return+o==+s||+o!=+o&&+s!=+s;case"RegExp":case"Function":case"String":case"Boolean":return""+o==""+s;case"Set":case"Map":g=o.entries(),y=s.entries();do{if(!i((d=g.next()).value,y.next().value,p))return!1}while(!d.done);return!0;case"ArrayBuffer":o=new Uint8Array(o),s=new Uint8Array(s);case"DataView":o=new Uint8Array(o.buffer),s=new Uint8Array(s.buffer);case"Float32Array":case"Float64Array":case"Int8Array":case"Int16Array":case"Int32Array":case"Uint8Array":case"Uint16Array":case"Uint32Array":case"Uint8ClampedArray":case"Arguments":case"Array":if(o.length!=s.length)return!1;for(d=0;d<o.length;d++)if((d in o||d in s)&&(d in o!=d in s||!i(o[d],s[d],p)))return!1;return!0;case"Object":return i(e(o),e(s),p);default:return!1}}(t,a,[])})},()=>(e||r((e={exports:{}}).exports,e),e.exports));var l=((r,e,n)=>(n=null!=r?C(h(r)):{},((r,e,n,t)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let a of F(e))!w.call(r,a)&&a!==n&&u(r,a,{get:()=>e[a],enumerable:!(t=B(e,a))||t.enumerable});return r})(!e&&r&&r.__esModule?n:u(n,"default",{value:r,enumerable:!0}),r)))(x()),S=r=>r.map(e=>typeof e<"u").filter(Boolean).length,P=(r,e,n)=>{if(!r.if)return!0;let{arg:t,global:a}=r.if;if(1!==S([t,a]))throw new Error(`Invalid conditional value ${JSON.stringify({arg:t,global:a})}`);let i=t?e[t]:n[a];return((r,e)=>{let{exists:n,eq:t,neq:a,truthy:i}=r;if(S([n,t,a,i])>1)throw new Error(`Invalid conditional test ${JSON.stringify({exists:n,eq:t,neq:a})}`);if(typeof t<"u")return(0,l.isEqual)(e,t);if(typeof a<"u")return!(0,l.isEqual)(e,a);if(typeof n<"u"){let s=typeof e<"u";return n?s:!s}return typeof i>"u"||i?!!e:!e})(r.if,i)},O=r=>r.toLowerCase().replace(/[ ’–—―′¿'`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},"./node_modules/@storybook/docs-tools/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C2:()=>enhanceArgTypes,Op:()=>SNIPPET_RENDERED,Y1:()=>SourceType,gx:()=>str});__webpack_require__("./node_modules/lodash/mapValues.js"),__webpack_require__("./node_modules/doctrine/lib/doctrine.js");var TypeSystem2,_storybook_preview_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("@storybook/preview-api"),TypeSystem=((TypeSystem2=TypeSystem||{}).JAVASCRIPT="JavaScript",TypeSystem2.FLOW="Flow",TypeSystem2.TYPESCRIPT="TypeScript",TypeSystem2.UNKNOWN="Unknown",TypeSystem2);var str=obj=>{if(!obj)return"";if("string"==typeof obj)return obj;throw new Error(`Description: expected string, got: ${JSON.stringify(obj)}`)};var SourceType2,enhanceArgTypes=context=>{let{component,argTypes:userArgTypes,parameters:{docs={}}}=context,{extractArgTypes}=docs,extractedArgTypes=extractArgTypes&&component?extractArgTypes(component):{};return extractedArgTypes?(0,_storybook_preview_api__WEBPACK_IMPORTED_MODULE_2__.combineParameters)(extractedArgTypes,userArgTypes):userArgTypes},SNIPPET_RENDERED="storybook/docs/snippet-rendered",SourceType=((SourceType2=SourceType||{}).AUTO="auto",SourceType2.CODE="code",SourceType2.DYNAMIC="dynamic",SourceType2)},"./node_modules/@storybook/html/dist/entry-preview-docs.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{argTypesEnhancers:()=>argTypesEnhancers,decorators:()=>decorators,parameters:()=>parameters});var _storybook_docs_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/docs-tools/dist/index.mjs"),_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@storybook/preview-api");var decorators=[(storyFn,context)=>{let source,story=storyFn(),renderedForSource=context?.parameters.docs?.source?.excludeDecorators?context.originalStoryFn(context.args,context):story;return function skipSourceRender(context){let sourceParams=context?.parameters.docs?.source,isArgsStory=context?.parameters.__isArgsStory;return sourceParams?.type!==_storybook_docs_tools__WEBPACK_IMPORTED_MODULE_0__.Y1.DYNAMIC&&(!isArgsStory||sourceParams?.code||sourceParams?.type===_storybook_docs_tools__WEBPACK_IMPORTED_MODULE_0__.Y1.CODE)}(context)||("string"==typeof renderedForSource?source=renderedForSource:renderedForSource instanceof Element&&(source=renderedForSource.outerHTML)),(0,_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let{id,unmappedArgs}=context;source&&_storybook_preview_api__WEBPACK_IMPORTED_MODULE_1__.addons.getChannel().emit(_storybook_docs_tools__WEBPACK_IMPORTED_MODULE_0__.Op,{id,args:unmappedArgs,source})}),story}],parameters={docs:{story:{inline:!0},source:{type:_storybook_docs_tools__WEBPACK_IMPORTED_MODULE_0__.Y1.DYNAMIC,language:"html",code:void 0,excludeDecorators:void 0}}},argTypesEnhancers=[_storybook_docs_tools__WEBPACK_IMPORTED_MODULE_0__.C2]},"./node_modules/@storybook/html/dist/entry-preview.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{parameters:()=>parameters,render:()=>render,renderToCanvas:()=>renderToCanvas});var external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),esm=__webpack_require__("./node_modules/ts-dedent/esm/index.js"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),{Node}=external_STORYBOOK_MODULE_GLOBAL_.global,render=(args,context)=>{let{id,component:Component}=context;if("string"==typeof Component){let output=Component;return Object.keys(args).forEach(key=>{output=output.replace(`{{${key}}}`,args[key])}),output}if(Component instanceof HTMLElement){let output=Component.cloneNode(!0);return Object.keys(args).forEach(key=>{output.setAttribute(key,"string"==typeof args[key]?args[key]:JSON.stringify(args[key]))}),output}if("function"==typeof Component)return Component(args,context);throw console.warn(esm.T`
    Storybook's HTML renderer only supports rendering DOM elements and strings.
    Received: ${Component}
  `),new Error(`Unable to render story ${id}`)};function renderToCanvas({storyFn,kind,name,showMain,showError,forceRemount},canvasElement){let element=storyFn();if(showMain(),"string"==typeof element)canvasElement.innerHTML=element,(0,external_STORYBOOK_MODULE_PREVIEW_API_.simulatePageLoad)(canvasElement);else if(element instanceof Node){if(canvasElement.firstChild===element&&!1===forceRemount)return;canvasElement.innerHTML="",canvasElement.appendChild(element),(0,external_STORYBOOK_MODULE_PREVIEW_API_.simulateDOMContentLoaded)()}else showError({title:`Expecting an HTML snippet or DOM node from the story: "${name}" of "${kind}".`,description:esm.T`
        Did you forget to return the HTML snippet from the story?
        Use "() => <your snippet or node>" or when defining the story.
      `})}var parameters={renderer:"html"}},"./node_modules/@xmldom/xmldom/lib/conventions.js":(__unused_webpack_module,exports)=>{"use strict";function freeze(object,oc){return void 0===oc&&(oc=Object),oc&&"function"==typeof oc.freeze?oc.freeze(object):object}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(value){return value===MIME_TYPE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),NAMESPACE=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(uri){return uri===NAMESPACE.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});exports.assign=function assign(target,source){if(null===target||"object"!=typeof target)throw new TypeError("target is not an object");for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},exports.find=function find(list,predicate,ac){if(void 0===ac&&(ac=Array.prototype),list&&"function"==typeof ac.find)return ac.find.call(list,predicate);for(var i=0;i<list.length;i++)if(Object.prototype.hasOwnProperty.call(list,i)){var item=list[i];if(predicate.call(void 0,item,i,list))return item}},exports.freeze=freeze,exports.MIME_TYPE=MIME_TYPE,exports.NAMESPACE=NAMESPACE},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":(__unused_webpack_module,exports,__webpack_require__)=>{var conventions=__webpack_require__("./node_modules/@xmldom/xmldom/lib/conventions.js"),dom=__webpack_require__("./node_modules/@xmldom/xmldom/lib/dom.js"),entities=__webpack_require__("./node_modules/@xmldom/xmldom/lib/entities.js"),sax=__webpack_require__("./node_modules/@xmldom/xmldom/lib/sax.js"),DOMImplementation=dom.DOMImplementation,NAMESPACE=conventions.NAMESPACE,ParseError=sax.ParseError,XMLReader=sax.XMLReader;function normalizeLineEndings(input){return input.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function DOMParser(options){this.options=options||{locator:{}}}function DOMHandler(){this.cdata=!1}function position(locator,node){node.lineNumber=locator.lineNumber,node.columnNumber=locator.columnNumber}function _locator(l){if(l)return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}function _toString(chars,start,length){return"string"==typeof chars?chars.substr(start,length):chars.length>=start+length||start?new java.lang.String(chars,start,length)+"":chars}function appendElement(hander,node){hander.currentElement?hander.currentElement.appendChild(node):hander.doc.appendChild(node)}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options,sax=new XMLReader,domBuilder=options.domBuilder||new DOMHandler,errorHandler=options.errorHandler,locator=options.locator,defaultNSMap=options.xmlns||{},isHTML=/\/x?html?$/.test(mimeType),entityMap=isHTML?entities.HTML_ENTITIES:entities.XML_ENTITIES;locator&&domBuilder.setDocumentLocator(locator),sax.errorHandler=function buildErrorHandler(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler)return domBuilder;errorImpl=domBuilder}var errorHandler={},isCallback=errorImpl instanceof Function;function build(key){var fn=errorImpl[key];!fn&&isCallback&&(fn=2==errorImpl.length?function(msg){errorImpl(key,msg)}:errorImpl),errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}return locator=locator||{},build("warning"),build("error"),build("fatalError"),errorHandler}(errorHandler,domBuilder,locator),sax.domBuilder=options.domBuilder||domBuilder,isHTML&&(defaultNSMap[""]=NAMESPACE.HTML),defaultNSMap.xml=defaultNSMap.xml||NAMESPACE.XML;var normalize=options.normalizeLineEndings||normalizeLineEndings;return source&&"string"==typeof source?sax.parse(normalize(source),defaultNSMap,entityMap):sax.errorHandler.error("invalid doc source"),domBuilder.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc,el=doc.createElementNS(namespaceURI,qName||localName),len=attrs.length;appendElement(this,el),this.currentElement=el,this.locator&&position(this.locator,el);for(var i=0;i<len;i++){namespaceURI=attrs.getURI(i);var value=attrs.getValue(i),attr=(qName=attrs.getQName(i),doc.createAttributeNS(namespaceURI,qName));this.locator&&position(attrs.getLocator(i),attr),attr.value=attr.nodeValue=value,el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins),appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){if(chars=_toString.apply(this,arguments)){if(this.cdata)var charNode=this.doc.createCDATASection(chars);else charNode=this.doc.createTextNode(chars);this.currentElement?this.currentElement.appendChild(charNode):/^\s*$/.test(chars)&&this.doc.appendChild(charNode),this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(locator){(this.locator=locator)&&(locator.lineNumber=0)},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm),appendElement(this,comm)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt),appendElement(this,dt),this.doc.doctype=dt}},warning:function(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function(error){console.error("[xmldom error]\t"+error,_locator(this.locator))},fatalError:function(error){throw new ParseError(error,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}}),exports.DOMParser=DOMParser},"./node_modules/@xmldom/xmldom/lib/dom.js":(__unused_webpack_module,exports,__webpack_require__)=>{var conventions=__webpack_require__("./node_modules/@xmldom/xmldom/lib/conventions.js"),find=conventions.find,NAMESPACE=conventions.NAMESPACE;function notEmptyString(input){return""!==input}function orderedSetReducer(current,element){return current.hasOwnProperty(element)||(current[element]=!0),current}function toOrderedSet(input){if(!input)return[];var list=function splitOnASCIIWhitespace(input){return input?input.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}(input);return Object.keys(list.reduce(orderedSetReducer,{}))}function copy(src,dest){for(var p in src)Object.prototype.hasOwnProperty.call(src,p)&&(dest[p]=src[p])}function _extends(Class,Super){var pt=Class.prototype;if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype,copy(pt,t=new t),Class.prototype=pt=t}pt.constructor!=Class&&("function"!=typeof Class&&console.error("unknown Class:"+Class),pt.constructor=Class)}var NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},HIERARCHY_REQUEST_ERR=(ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3)),NOT_FOUND_ERR=(ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8)),INUSE_ATTRIBUTE_ERR=(ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10));ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(code,message){if(message instanceof Error)var error=message;else error=this,Error.call(this,ExceptionMessage[code]),this.message=ExceptionMessage[code],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return error.code=code,message&&(this.message=this.message+": "+message),error}function NodeList(){}function LiveNodeList(node,refresh){this._node=node,this._refresh=refresh,_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!==inc){var ls=list._refresh(list._node);if(__set__(list,"length",ls.length),!list.$$length||ls.length<list.$$length)for(var i=ls.length;i in list;i++)Object.prototype.hasOwnProperty.call(list,i)&&delete list[i];copy(ls,list),list._inc=inc}}function NamedNodeMap(){}function _findNodeIndex(list,node){for(var i=list.length;i--;)if(list[i]===node)return i}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr?list[_findNodeIndex(list,oldAttr)]=newAttr:list[list.length++]=newAttr,el){newAttr.ownerElement=el;var doc=el.ownerDocument;doc&&(oldAttr&&_onRemoveAttribute(doc,el,oldAttr),function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;ns===NAMESPACE.XMLNS&&(el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value)}(doc,el,newAttr))}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(!(i>=0))throw new DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr));for(var lastIndex=list.length-1;i<lastIndex;)list[i]=list[++i];if(list.length=lastIndex,el){var doc=el.ownerDocument;doc&&(_onRemoveAttribute(doc,el,attr),attr.ownerElement=null)}}function DOMImplementation(){}function Node(){}function _xmlEncoder(c){return("<"==c?"&lt;":">"==c&&"&gt;")||"&"==c&&"&amp;"||'"'==c&&"&quot;"||"&#"+c.charCodeAt()+";"}function _visitNode(node,callback){if(callback(node))return!0;if(node=node.firstChild)do{if(_visitNode(node,callback))return!0}while(node=node.nextSibling)}function Document(){this.ownerDocument=this}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++,newAttr.namespaceURI===NAMESPACE.XMLNS&&delete el._nsMap[newAttr.prefix?newAttr.localName:""]}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild)cs[cs.length++]=newChild;else{for(var child=el.firstChild,i=0;child;)cs[i++]=child,child=child.nextSibling;cs.length=i,delete cs[cs.length]}}}function _removeChild(parentNode,child){var previous=child.previousSibling,next=child.nextSibling;return previous?previous.nextSibling=next:parentNode.firstChild=next,next?next.previousSibling=previous:parentNode.lastChild=previous,child.parentNode=null,child.previousSibling=null,child.nextSibling=null,_onUpdateChild(parentNode.ownerDocument,parentNode),child}function isDocTypeNode(node){return node&&node.nodeType===Node.DOCUMENT_TYPE_NODE}function isElementNode(node){return node&&node.nodeType===Node.ELEMENT_NODE}function isTextNode(node){return node&&node.nodeType===Node.TEXT_NODE}function isElementInsertionPossible(doc,child){var parentChildNodes=doc.childNodes||[];if(find(parentChildNodes,isElementNode)||isDocTypeNode(child))return!1;var docTypeNode=find(parentChildNodes,isDocTypeNode);return!(child&&docTypeNode&&parentChildNodes.indexOf(docTypeNode)>parentChildNodes.indexOf(child))}function isElementReplacementPossible(doc,child){var parentChildNodes=doc.childNodes||[];if(find(parentChildNodes,function hasElementChildThatIsNotChild(node){return isElementNode(node)&&node!==child}))return!1;var docTypeNode=find(parentChildNodes,isDocTypeNode);return!(child&&docTypeNode&&parentChildNodes.indexOf(docTypeNode)>parentChildNodes.indexOf(child))}function assertPreInsertionValidity1to5(parent,node,child){if(!function hasValidParentNodeType(node){return node&&(node.nodeType===Node.DOCUMENT_NODE||node.nodeType===Node.DOCUMENT_FRAGMENT_NODE||node.nodeType===Node.ELEMENT_NODE)}(parent))throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+parent.nodeType);if(child&&child.parentNode!==parent)throw new DOMException(NOT_FOUND_ERR,"child not in parent");if(!function hasInsertableNodeType(node){return node&&(isElementNode(node)||isTextNode(node)||isDocTypeNode(node)||node.nodeType===Node.DOCUMENT_FRAGMENT_NODE||node.nodeType===Node.COMMENT_NODE||node.nodeType===Node.PROCESSING_INSTRUCTION_NODE)}(node)||isDocTypeNode(node)&&parent.nodeType!==Node.DOCUMENT_NODE)throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected node type "+node.nodeType+" for parent node type "+parent.nodeType)}function assertPreInsertionValidityInDocument(parent,node,child){var parentChildNodes=parent.childNodes||[],nodeChildNodes=node.childNodes||[];if(node.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var nodeChildElements=nodeChildNodes.filter(isElementNode);if(nodeChildElements.length>1||find(nodeChildNodes,isTextNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===nodeChildElements.length&&!isElementInsertionPossible(parent,child))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(node)&&!isElementInsertionPossible(parent,child))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(node)){if(find(parentChildNodes,isDocTypeNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var parentElementChild=find(parentChildNodes,isElementNode);if(child&&parentChildNodes.indexOf(parentElementChild)<parentChildNodes.indexOf(child))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!child&&parentElementChild)throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(parent,node,child){var parentChildNodes=parent.childNodes||[],nodeChildNodes=node.childNodes||[];if(node.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var nodeChildElements=nodeChildNodes.filter(isElementNode);if(nodeChildElements.length>1||find(nodeChildNodes,isTextNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===nodeChildElements.length&&!isElementReplacementPossible(parent,child))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(node)&&!isElementReplacementPossible(parent,child))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(node)){if(find(parentChildNodes,function hasDoctypeChildThatIsNotChild(node){return isDocTypeNode(node)&&node!==child}))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var parentElementChild=find(parentChildNodes,isElementNode);if(child&&parentChildNodes.indexOf(parentElementChild)<parentChildNodes.indexOf(child))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function _insertBefore(parent,node,child,_inDocumentAssertion){assertPreInsertionValidity1to5(parent,node,child),parent.nodeType===Node.DOCUMENT_NODE&&(_inDocumentAssertion||assertPreInsertionValidityInDocument)(parent,node,child);var cp=node.parentNode;if(cp&&cp.removeChild(node),node.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=node.firstChild;if(null==newFirst)return node;var newLast=node.lastChild}else newFirst=newLast=node;var pre=child?child.previousSibling:parent.lastChild;newFirst.previousSibling=pre,newLast.nextSibling=child,pre?pre.nextSibling=newFirst:parent.firstChild=newFirst,null==child?parent.lastChild=newLast:child.previousSibling=newLast;do{newFirst.parentNode=parent,_updateOwnerDocument(newFirst,parent.ownerDocument||parent)}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));return _onUpdateChild(parent.ownerDocument||parent,parent),node.nodeType==DOCUMENT_FRAGMENT_NODE&&(node.firstChild=node.lastChild=null),node}function _updateOwnerDocument(node,newOwnerDocument){if(node.ownerDocument!==newOwnerDocument){if(node.ownerDocument=newOwnerDocument,node.nodeType===ELEMENT_NODE&&node.attributes)for(var i=0;i<node.attributes.length;i++){var attr=node.attributes.item(i);attr&&(attr.ownerDocument=newOwnerDocument)}for(var child=node.firstChild;child;)_updateOwnerDocument(child,newOwnerDocument),child=child.nextSibling}}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(isHtml,nodeFilter){var buf=[],refNode=9==this.nodeType&&this.documentElement||this,prefix=refNode.prefix,uri=refNode.namespaceURI;if(uri&&null==prefix&&null==(prefix=refNode.lookupPrefix(uri)))var visibleNamespaces=[{namespace:uri,prefix:null}];return serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces),buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"",uri=node.namespaceURI;if(!uri)return!1;if("xml"===prefix&&uri===NAMESPACE.XML||uri===NAMESPACE.XMLNS)return!1;for(var i=visibleNamespaces.length;i--;){var ns=visibleNamespaces[i];if(ns.prefix===prefix)return ns.namespace!==uri}return!0}function addSerializedAttribute(buf,qualifiedName,value){buf.push(" ",qualifiedName,'="',value.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(visibleNamespaces||(visibleNamespaces=[]),nodeFilter){if(!(node=nodeFilter(node)))return;if("string"==typeof node)return void buf.push(node)}switch(node.nodeType){case ELEMENT_NODE:var attrs=node.attributes,len=attrs.length,child=node.firstChild,nodeName=node.tagName,prefixedNodeName=nodeName;if(!(isHTML=NAMESPACE.isHTML(node.namespaceURI)||isHTML)&&!node.prefix&&node.namespaceURI){for(var defaultNS,ai=0;ai<attrs.length;ai++)if("xmlns"===attrs.item(ai).name){defaultNS=attrs.item(ai).value;break}if(!defaultNS)for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){if(""===(namespace=visibleNamespaces[nsi]).prefix&&namespace.namespace===node.namespaceURI){defaultNS=namespace.namespace;break}}if(defaultNS!==node.namespaceURI)for(nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace;if((namespace=visibleNamespaces[nsi]).namespace===node.namespaceURI){namespace.prefix&&(prefixedNodeName=namespace.prefix+":"+nodeName);break}}}buf.push("<",prefixedNodeName);for(var i=0;i<len;i++){"xmlns"==(attr=attrs.item(i)).prefix?visibleNamespaces.push({prefix:attr.localName,namespace:attr.value}):"xmlns"==attr.nodeName&&visibleNamespaces.push({prefix:"",namespace:attr.value})}for(i=0;i<len;i++){var attr,prefix,uri;if(needNamespaceDefine(attr=attrs.item(i),0,visibleNamespaces))addSerializedAttribute(buf,(prefix=attr.prefix||"")?"xmlns:"+prefix:"xmlns",uri=attr.namespaceURI),visibleNamespaces.push({prefix,namespace:uri});serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(nodeName===prefixedNodeName&&needNamespaceDefine(node,0,visibleNamespaces))addSerializedAttribute(buf,(prefix=node.prefix||"")?"xmlns:"+prefix:"xmlns",uri=node.namespaceURI),visibleNamespaces.push({prefix,namespace:uri});if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){if(buf.push(">"),isHTML&&/^script$/i.test(nodeName))for(;child;)child.data?buf.push(child.data):serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice()),child=child.nextSibling;else for(;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice()),child=child.nextSibling;buf.push("</",prefixedNodeName,">")}else buf.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(child=node.firstChild;child;)serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice()),child=child.nextSibling;return;case ATTRIBUTE_NODE:return addSerializedAttribute(buf,node.name,node.value);case TEXT_NODE:return buf.push(node.data.replace(/[<&>]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("\x3c!--",node.data,"--\x3e");case DOCUMENT_TYPE_NODE:var pubid=node.publicId,sysid=node.systemId;if(buf.push("<!DOCTYPE ",node.name),pubid)buf.push(" PUBLIC ",pubid),sysid&&"."!=sysid&&buf.push(" ",sysid),buf.push(">");else if(sysid&&"."!=sysid)buf.push(" SYSTEM ",sysid,">");else{var sub=node.internalSubset;sub&&buf.push(" [",sub,"]"),buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName)}}function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:(node2=node.cloneNode(!1)).ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=!0}if(node2||(node2=node.cloneNode(!1)),node2.ownerDocument=doc,node2.parentNode=null,deep)for(var child=node.firstChild;child;)node2.appendChild(importNode(doc,child,deep)),child=child.nextSibling;return node2}function cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node)if(Object.prototype.hasOwnProperty.call(node,n)){var v=node[n];"object"!=typeof v&&v!=node2[n]&&(node2[n]=v)}switch(node.childNodes&&(node2.childNodes=new NodeList),node2.ownerDocument=doc,node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes,attrs2=node2.attributes=new NamedNodeMap,len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++)node2.setAttributeNode(cloneNode(doc,attrs.item(i),!0));break;case ATTRIBUTE_NODE:deep=!0}if(deep)for(var child=node.firstChild;child;)node2.appendChild(cloneNode(doc,child,deep)),child=child.nextSibling;return node2}function __set__(object,key,value){object[key]=value}DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(index){return index>=0&&index<this.length?this[index]:null},toString:function(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++)serializeToString(this[i],buf,isHTML,nodeFilter);return buf.join("")},filter:function(predicate){return Array.prototype.filter.call(this,predicate)},indexOf:function(item){return Array.prototype.indexOf.call(this,item)}},LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]||null},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){for(var i=this.length;i--;){var attr=this[i];if(attr.nodeName==key)return attr}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var oldAttr=this.getNamedItem(attr.nodeName);return _addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},setNamedItemNS:function(attr){var oldAttr,el=attr.ownerElement;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName),_addNamedNode(this._ownerElement,this,attr,oldAttr),oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);return _removeNamedNode(this._ownerElement,this,attr),attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);return _removeNamedNode(this._ownerElement,this,attr),attr},getNamedItemNS:function(namespaceURI,localName){for(var i=this.length;i--;){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI)return node}return null}},DOMImplementation.prototype={hasFeature:function(feature,version){return!0},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;if(doc.implementation=this,doc.childNodes=new NodeList,doc.doctype=doctype||null,doctype&&doc.appendChild(doctype),qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;return node.name=qualifiedName,node.nodeName=qualifiedName,node.publicId=publicId||"",node.systemId=systemId||"",node}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function(newChild,oldChild){_insertBefore(this,newChild,oldChild,assertPreReplacementValidityInDocument),oldChild&&this.removeChild(oldChild)},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(deep){return cloneNode(this.ownerDocument||this,this,deep)},normalize:function(){for(var child=this.firstChild;child;){var next=child.nextSibling;next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE?(this.removeChild(next),child.appendData(next.data)):(child.normalize(),child=next)}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){for(var el=this;el;){var map=el._nsMap;if(map)for(var n in map)if(Object.prototype.hasOwnProperty.call(map,n)&&map[n]===namespaceURI)return n;el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){for(var el=this;el;){var map=el._nsMap;if(map&&Object.prototype.hasOwnProperty.call(map,prefix))return map[prefix];el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){return null==this.lookupPrefix(namespaceURI)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){for(var child=newChild.firstChild;child;){var next=child.nextSibling;this.insertBefore(child,refChild),child=next}return newChild}return _insertBefore(this,newChild,refChild),_updateOwnerDocument(newChild,this),null===this.documentElement&&newChild.nodeType===ELEMENT_NODE&&(this.documentElement=newChild),newChild},removeChild:function(oldChild){return this.documentElement==oldChild&&(this.documentElement=null),_removeChild(this,oldChild)},replaceChild:function(newChild,oldChild){_insertBefore(this,newChild,oldChild,assertPreReplacementValidityInDocument),_updateOwnerDocument(newChild,this),oldChild&&this.removeChild(oldChild),isElementNode(newChild)&&(this.documentElement=newChild)},importNode:function(importedNode,deep){return importNode(this,importedNode,deep)},getElementById:function(id){var rtv=null;return _visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE&&node.getAttribute("id")==id)return rtv=node,!0}),rtv},getElementsByClassName:function(classNames){var classNamesSet=toOrderedSet(classNames);return new LiveNodeList(this,function(base){var ls=[];return classNamesSet.length>0&&_visitNode(base.documentElement,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE){var nodeClassNames=node.getAttribute("class");if(nodeClassNames){var matches=classNames===nodeClassNames;if(!matches){var nodeClassNamesSet=toOrderedSet(nodeClassNames);matches=classNamesSet.every(function arrayIncludes(list){return function(element){return list&&-1!==list.indexOf(element)}}(nodeClassNamesSet))}matches&&ls.push(node)}}}),ls})},createElement:function(tagName){var node=new Element;return node.ownerDocument=this,node.nodeName=tagName,node.tagName=tagName,node.localName=tagName,node.childNodes=new NodeList,(node.attributes=new NamedNodeMap)._ownerElement=node,node},createDocumentFragment:function(){var node=new DocumentFragment;return node.ownerDocument=this,node.childNodes=new NodeList,node},createTextNode:function(data){var node=new Text;return node.ownerDocument=this,node.appendData(data),node},createComment:function(data){var node=new Comment;return node.ownerDocument=this,node.appendData(data),node},createCDATASection:function(data){var node=new CDATASection;return node.ownerDocument=this,node.appendData(data),node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;return node.ownerDocument=this,node.tagName=node.nodeName=node.target=target,node.nodeValue=node.data=data,node},createAttribute:function(name){var node=new Attr;return node.ownerDocument=this,node.name=name,node.nodeName=name,node.localName=name,node.specified=!0,node},createEntityReference:function(name){var node=new EntityReference;return node.ownerDocument=this,node.nodeName=name,node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element,pl=qualifiedName.split(":"),attrs=node.attributes=new NamedNodeMap;return node.childNodes=new NodeList,node.ownerDocument=this,node.nodeName=qualifiedName,node.tagName=qualifiedName,node.namespaceURI=namespaceURI,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,attrs._ownerElement=node,node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr,pl=qualifiedName.split(":");return node.ownerDocument=this,node.nodeName=qualifiedName,node.name=qualifiedName,node.namespaceURI=namespaceURI,node.specified=!0,2==pl.length?(node.prefix=pl[0],node.localName=pl[1]):node.localName=qualifiedName,node}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return null!=this.getAttributeNode(name)},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){return newChild.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(newChild,null):function _appendSingleChild(parentNode,newChild){return newChild.parentNode&&newChild.parentNode.removeChild(newChild),newChild.parentNode=parentNode,newChild.previousSibling=parentNode.lastChild,newChild.nextSibling=null,newChild.previousSibling?newChild.previousSibling.nextSibling=newChild:parentNode.firstChild=newChild,parentNode.lastChild=newChild,_onUpdateChild(parentNode.ownerDocument,parentNode,newChild),_updateOwnerDocument(newChild,parentNode.ownerDocument||parentNode),newChild}(this,newChild)},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return null!=this.getAttributeNodeNS(namespaceURI,localName)},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value,this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base,function(node){node===base||node.nodeType!=ELEMENT_NODE||"*"!==tagName&&node.tagName!=tagName||ls.push(node)}),ls})},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];return _visitNode(base,function(node){node===base||node.nodeType!==ELEMENT_NODE||"*"!==namespaceURI&&node.namespaceURI!==namespaceURI||"*"!==localName&&node.localName!=localName||ls.push(node)}),ls})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text,this.nodeValue=this.data=text,this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){text=this.data.substring(0,offset)+text+this.data.substring(offset+count),this.nodeValue=this.data=text,this.length=text.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data,newText=text.substring(offset);text=text.substring(0,offset),this.data=this.nodeValue=text,this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);return this.parentNode&&this.parentNode.insertBefore(newNode,this.nextSibling),newNode}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];for(node=node.firstChild;node;)7!==node.nodeType&&8!==node.nodeType&&buf.push(getTextContent(node)),node=node.nextSibling;return buf.join("");default:return node.nodeValue}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(data||String(data))&&this.appendChild(this.ownerDocument.createTextNode(data));break;default:this.data=data,this.value=data,this.nodeValue=data}}}),__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}exports.DocumentType=DocumentType,exports.DOMException=DOMException,exports.DOMImplementation=DOMImplementation,exports.Element=Element,exports.Node=Node,exports.NodeList=NodeList,exports.XMLSerializer=XMLSerializer},"./node_modules/@xmldom/xmldom/lib/entities.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var freeze=__webpack_require__("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;exports.XML_ENTITIES=freeze({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),exports.HTML_ENTITIES=freeze({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),exports.entityMap=exports.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{var dom=__webpack_require__("./node_modules/@xmldom/xmldom/lib/dom.js");dom.DOMImplementation,dom.XMLSerializer,exports.DOMParser=__webpack_require__("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":(__unused_webpack_module,exports,__webpack_require__)=>{var NAMESPACE=__webpack_require__("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");function ParseError(message,locator){this.message=message,this.locator=locator,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError)}function XMLReader(){}function copyLocator(f,t){return t.lineNumber=f.lineNumber,t.columnNumber=f.columnNumber,t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){function addAttribute(qname,value,startIndex){el.attributeNames.hasOwnProperty(qname)&&errorHandler.fatalError("Attribute "+qname+" redefined"),el.addValue(qname,value.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,entityReplacer),startIndex)}for(var attrName,p=++start,s=0;;){var c=source.charAt(p);switch(c){case"=":if(1===s)attrName=source.slice(start,p),s=3;else{if(2!==s)throw new Error("attribute equal must after attrName");s=3}break;case"'":case'"':if(3===s||1===s){if(1===s&&(errorHandler.warning('attribute value must after "="'),attrName=source.slice(start,p)),start=p+1,!((p=source.indexOf(c,start))>0))throw new Error("attribute value no end '"+c+"' match");addAttribute(attrName,value=source.slice(start,p),start-1),s=5}else{if(4!=s)throw new Error('attribute value must after "="');addAttribute(attrName,value=source.slice(start,p),start),errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!"),start=p+1,s=5}break;case"/":switch(s){case 0:el.setTagName(source.slice(start,p));case 5:case 6:case 7:s=7,el.closed=!0;case 4:case 1:break;case 2:el.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return errorHandler.error("unexpected end of input"),0==s&&el.setTagName(source.slice(start,p)),p;case">":switch(s){case 0:el.setTagName(source.slice(start,p));case 5:case 6:case 7:break;case 4:case 1:"/"===(value=source.slice(start,p)).slice(-1)&&(el.closed=!0,value=value.slice(0,-1));case 2:2===s&&(value=attrName),4==s?(errorHandler.warning('attribute "'+value+'" missed quot(")!'),addAttribute(attrName,value,start)):(NAMESPACE.isHTML(currentNSMap[""])&&value.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!'),addAttribute(value,value,start));break;case 3:throw new Error("attribute value missed!!")}return p;case"":c=" ";default:if(c<=" ")switch(s){case 0:el.setTagName(source.slice(start,p)),s=6;break;case 1:attrName=source.slice(start,p),s=2;break;case 4:var value=source.slice(start,p);errorHandler.warning('attribute "'+value+'" missed quot(")!!'),addAttribute(attrName,value,start);case 5:s=6}else switch(s){case 2:el.tagName;NAMESPACE.isHTML(currentNSMap[""])&&attrName.match(/^(?:disabled|checked|selected)$/i)||errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!'),addAttribute(attrName,attrName,start),start=p,s=1;break;case 5:errorHandler.warning('attribute space is required"'+attrName+'"!!');case 6:s=1,start=p;break;case 3:s=4,start=p;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function appendElement(el,domBuilder,currentNSMap){for(var tagName=el.tagName,localNSMap=null,i=el.length;i--;){var a=el[i],qName=a.qName,value=a.value;if((nsp=qName.indexOf(":"))>0)var prefix=a.prefix=qName.slice(0,nsp),localName=qName.slice(nsp+1),nsPrefix="xmlns"===prefix&&localName;else localName=qName,prefix=null,nsPrefix="xmlns"===qName&&"";a.localName=localName,!1!==nsPrefix&&(null==localNSMap&&(localNSMap={},_copy(currentNSMap,currentNSMap={})),currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value,a.uri=NAMESPACE.XMLNS,domBuilder.startPrefixMapping(nsPrefix,value))}for(i=el.length;i--;){(prefix=(a=el[i]).prefix)&&("xml"===prefix&&(a.uri=NAMESPACE.XML),"xmlns"!==prefix&&(a.uri=currentNSMap[prefix||""]))}var nsp;(nsp=tagName.indexOf(":"))>0?(prefix=el.prefix=tagName.slice(0,nsp),localName=el.localName=tagName.slice(nsp+1)):(prefix=null,localName=el.localName=tagName);var ns=el.uri=currentNSMap[prefix||""];if(domBuilder.startElement(ns,localName,tagName,el),!el.closed)return el.currentNSMap=currentNSMap,el.localNSMap=localNSMap,!0;if(domBuilder.endElement(ns,localName,tagName),localNSMap)for(prefix in localNSMap)Object.prototype.hasOwnProperty.call(localNSMap,prefix)&&domBuilder.endPrefixMapping(prefix)}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd),text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text))return/^script$/i.test(tagName)?(domBuilder.characters(text,0,text.length),elEndStart):(text=text.replace(/&#?\w+;/g,entityReplacer),domBuilder.characters(text,0,text.length),elEndStart)}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];return null==pos&&((pos=source.lastIndexOf("</"+tagName+">"))<elStartEnd&&(pos=source.lastIndexOf("</"+tagName)),closeMap[tagName]=pos),pos<elStartEnd}function _copy(source,target){for(var n in source)Object.prototype.hasOwnProperty.call(source,n)&&(target[n]=source[n])}function parseDCC(source,start,domBuilder,errorHandler){if("-"===source.charAt(start+2))return"-"===source.charAt(start+3)?(end=source.indexOf("--\x3e",start+4))>start?(domBuilder.comment(source,start+4,end-start-4),end+3):(errorHandler.error("Unclosed comment"),-1):-1;if("CDATA["==source.substr(start+3,6)){var end=source.indexOf("]]>",start+9);return domBuilder.startCDATA(),domBuilder.characters(source,start+9,end-start-9),domBuilder.endCDATA(),end+3}var matchs=function split(source,start){var match,buf=[],reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start,reg.exec(source);for(;match=reg.exec(source);)if(buf.push(match),match[1])return buf}(source,start),len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0],pubid=!1,sysid=!1;len>3&&(/^public$/i.test(matchs[2][0])?(pubid=matchs[3][0],sysid=len>4&&matchs[4][0]):/^system$/i.test(matchs[2][0])&&(sysid=matchs[3][0]));var lastMatch=matchs[len-1];return domBuilder.startDTD(name,pubid,sysid),domBuilder.endDTD(),lastMatch.index+lastMatch[0].length}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){match[0].length;return domBuilder.processingInstruction(match[1],match[2]),end+2}return-1}return-1}function ElementAttributes(){this.attributeNames={}}ParseError.prototype=new Error,ParseError.prototype.name=ParseError.name,XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument(),_copy(defaultNSMap,defaultNSMap={}),function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){var surrogate1=55296+((code-=65536)>>10),surrogate2=56320+(1023&code);return String.fromCharCode(surrogate1,surrogate2)}return String.fromCharCode(code)}function entityReplacer(a){var k=a.slice(1,-1);return Object.hasOwnProperty.call(entityMap,k)?entityMap[k]:"#"===k.charAt(0)?fixedFromCharCode(parseInt(k.substr(1).replace("x","0x"))):(errorHandler.error("entity not found:"+a),a)}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start),domBuilder.characters(xt,0,end-start),start=end}}function position(p,m){for(;p>=lineEnd&&(m=linePattern.exec(source));)lineStart=m.index,lineEnd=lineStart+m[0].length,locator.lineNumber++;locator.columnNumber=p-lineStart+1}var lineStart=0,lineEnd=0,linePattern=/.*(?:\r\n?|\n)|.*$/g,locator=domBuilder.locator,parseStack=[{currentNSMap:defaultNSMapCopy}],closeMap={},start=0;for(;;){try{var tagStart=source.indexOf("<",start);if(tagStart<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc,text=doc.createTextNode(source.substr(start));doc.appendChild(text),domBuilder.currentElement=text}return}switch(tagStart>start&&appendText(tagStart),source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3),tagName=source.substring(tagStart+2,end).replace(/[ \t\n\r]+$/g,""),config=parseStack.pop();end<0?(tagName=source.substring(tagStart+2).replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName),end=tagStart+1+tagName.length):tagName.match(/\s</)&&(tagName=tagName.replace(/[\s<].*/,""),errorHandler.error("end tag name: "+tagName+" maybe not complete"),end=tagStart+1+tagName.length);var localNSMap=config.localNSMap,endMatch=config.tagName==tagName;if(endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase()){if(domBuilder.endElement(config.uri,config.localName,tagName),localNSMap)for(var prefix in localNSMap)Object.prototype.hasOwnProperty.call(localNSMap,prefix)&&domBuilder.endPrefixMapping(prefix);endMatch||errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}else parseStack.push(config);end++;break;case"?":locator&&position(tagStart),end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart),end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes,currentNSMap=parseStack[parseStack.length-1].currentNSMap,len=(end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler),el.length);if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)&&(el.closed=!0,entityMap.nbsp||errorHandler.warning("unclosed xml attribute")),locator&&len){for(var locator2=copyLocator(locator,{}),i=0;i<len;i++){var a=el[i];position(a.offset),a.locator=copyLocator(locator,{})}domBuilder.locator=locator2,appendElement(el,domBuilder,currentNSMap)&&parseStack.push(el),domBuilder.locator=locator}else appendElement(el,domBuilder,currentNSMap)&&parseStack.push(el);NAMESPACE.isHTML(el.uri)&&!el.closed?end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder):end++}}catch(e){if(e instanceof ParseError)throw e;errorHandler.error("element parse error: "+e),end=-1}end>start?start=end:appendText(Math.max(tagStart,start)+1)}}(source,defaultNSMap,entityMap,domBuilder,this.errorHandler),domBuilder.endDocument()}},ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName))throw new Error("invalid tagName:"+tagName);this.tagName=tagName},addValue:function(qName,value,offset){if(!tagNamePattern.test(qName))throw new Error("invalid attribute:"+qName);this.attributeNames[qName]=this.length,this[this.length++]={qName,value,offset}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}},exports.XMLReader=XMLReader,exports.ParseError=ParseError},"./node_modules/assert/build/assert.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}var isDeepEqual,isDeepStrictEqual,_require$codes=__webpack_require__("./node_modules/assert/build/internal/errors.js").codes,ERR_AMBIGUOUS_ARGUMENT=_require$codes.ERR_AMBIGUOUS_ARGUMENT,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_INVALID_ARG_VALUE=_require$codes.ERR_INVALID_ARG_VALUE,ERR_INVALID_RETURN_VALUE=_require$codes.ERR_INVALID_RETURN_VALUE,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,AssertionError=__webpack_require__("./node_modules/assert/build/internal/assert/assertion_error.js"),inspect=__webpack_require__("./node_modules/util/util.js").inspect,_require$types=__webpack_require__("./node_modules/util/util.js").types,isPromise=_require$types.isPromise,isRegExp=_require$types.isRegExp,objectAssign=__webpack_require__("./node_modules/object.assign/polyfill.js")(),objectIs=__webpack_require__("./node_modules/object-is/polyfill.js")(),RegExpPrototypeTest=__webpack_require__("./node_modules/call-bind/callBound.js")("RegExp.prototype.test");new Map;function lazyLoadComparison(){var comparison=__webpack_require__("./node_modules/assert/build/internal/util/comparisons.js");isDeepEqual=comparison.isDeepEqual,isDeepStrictEqual=comparison.isDeepStrictEqual}var warned=!1,assert=module.exports=ok,NO_EXCEPTION_SENTINEL={};function innerFail(obj){if(obj.message instanceof Error)throw obj.message;throw new AssertionError(obj)}function innerOk(fn,argLen,value,message){if(!value){var generatedMessage=!1;if(0===argLen)generatedMessage=!0,message="No value argument passed to `assert.ok()`";else if(message instanceof Error)throw message;var err=new AssertionError({actual:value,expected:!0,message,operator:"==",stackStartFn:fn});throw err.generatedMessage=generatedMessage,err}}function ok(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];innerOk.apply(void 0,[ok,args.length].concat(args))}assert.fail=function fail(actual,expected,message,operator,stackStartFn){var internalMessage,argsLen=arguments.length;if(0===argsLen)internalMessage="Failed";else if(1===argsLen)message=actual,actual=void 0;else{if(!1===warned)warned=!0,(process.emitWarning?process.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");2===argsLen&&(operator="!=")}if(message instanceof Error)throw message;var errArgs={actual,expected,operator:void 0===operator?"fail":operator,stackStartFn:stackStartFn||fail};void 0!==message&&(errArgs.message=message);var err=new AssertionError(errArgs);throw internalMessage&&(err.message=internalMessage,err.generatedMessage=!0),err},assert.AssertionError=AssertionError,assert.ok=ok,assert.equal=function equal(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");actual!=expected&&innerFail({actual,expected,message,operator:"==",stackStartFn:equal})},assert.notEqual=function notEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");actual==expected&&innerFail({actual,expected,message,operator:"!=",stackStartFn:notEqual})},assert.deepEqual=function deepEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");void 0===isDeepEqual&&lazyLoadComparison(),isDeepEqual(actual,expected)||innerFail({actual,expected,message,operator:"deepEqual",stackStartFn:deepEqual})},assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");void 0===isDeepEqual&&lazyLoadComparison(),isDeepEqual(actual,expected)&&innerFail({actual,expected,message,operator:"notDeepEqual",stackStartFn:notDeepEqual})},assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");void 0===isDeepEqual&&lazyLoadComparison(),isDeepStrictEqual(actual,expected)||innerFail({actual,expected,message,operator:"deepStrictEqual",stackStartFn:deepStrictEqual})},assert.notDeepStrictEqual=function notDeepStrictEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");void 0===isDeepEqual&&lazyLoadComparison();isDeepStrictEqual(actual,expected)&&innerFail({actual,expected,message,operator:"notDeepStrictEqual",stackStartFn:notDeepStrictEqual})},assert.strictEqual=function strictEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");objectIs(actual,expected)||innerFail({actual,expected,message,operator:"strictEqual",stackStartFn:strictEqual})},assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(arguments.length<2)throw new ERR_MISSING_ARGS("actual","expected");objectIs(actual,expected)&&innerFail({actual,expected,message,operator:"notStrictEqual",stackStartFn:notStrictEqual})};var Comparison=_createClass(function Comparison(obj,keys,actual){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Comparison),keys.forEach(function(key){key in obj&&(void 0!==actual&&"string"==typeof actual[key]&&isRegExp(obj[key])&&RegExpPrototypeTest(obj[key],actual[key])?_this[key]=actual[key]:_this[key]=obj[key])})});function expectedException(actual,expected,msg,fn){if("function"!=typeof expected){if(isRegExp(expected))return RegExpPrototypeTest(expected,actual);if(2===arguments.length)throw new ERR_INVALID_ARG_TYPE("expected",["Function","RegExp"],expected);if("object"!==_typeof(actual)||null===actual){var err=new AssertionError({actual,expected,message:msg,operator:"deepStrictEqual",stackStartFn:fn});throw err.operator=fn.name,err}var keys=Object.keys(expected);if(expected instanceof Error)keys.push("name","message");else if(0===keys.length)throw new ERR_INVALID_ARG_VALUE("error",expected,"may not be an empty object");return void 0===isDeepEqual&&lazyLoadComparison(),keys.forEach(function(key){"string"==typeof actual[key]&&isRegExp(expected[key])&&RegExpPrototypeTest(expected[key],actual[key])||function compareExceptionKey(actual,expected,key,message,keys,fn){if(!(key in actual)||!isDeepStrictEqual(actual[key],expected[key])){if(!message){var a=new Comparison(actual,keys),b=new Comparison(expected,keys,actual),err=new AssertionError({actual:a,expected:b,operator:"deepStrictEqual",stackStartFn:fn});throw err.actual=actual,err.expected=expected,err.operator=fn.name,err}innerFail({actual,expected,message,operator:fn.name,stackStartFn:fn})}}(actual,expected,key,msg,keys,fn)}),!0}return void 0!==expected.prototype&&actual instanceof expected||!Error.isPrototypeOf(expected)&&!0===expected.call({},actual)}function getActual(fn){if("function"!=typeof fn)throw new ERR_INVALID_ARG_TYPE("fn","Function",fn);try{fn()}catch(e){return e}return NO_EXCEPTION_SENTINEL}function checkIsPromise(obj){return isPromise(obj)||null!==obj&&"object"===_typeof(obj)&&"function"==typeof obj.then&&"function"==typeof obj.catch}function waitForActual(promiseFn){return Promise.resolve().then(function(){var resultPromise;if("function"==typeof promiseFn){if(!checkIsPromise(resultPromise=promiseFn()))throw new ERR_INVALID_RETURN_VALUE("instance of Promise","promiseFn",resultPromise)}else{if(!checkIsPromise(promiseFn))throw new ERR_INVALID_ARG_TYPE("promiseFn",["Function","Promise"],promiseFn);resultPromise=promiseFn}return Promise.resolve().then(function(){return resultPromise}).then(function(){return NO_EXCEPTION_SENTINEL}).catch(function(e){return e})})}function expectsError(stackStartFn,actual,error,message){if("string"==typeof error){if(4===arguments.length)throw new ERR_INVALID_ARG_TYPE("error",["Object","Error","Function","RegExp"],error);if("object"===_typeof(actual)&&null!==actual){if(actual.message===error)throw new ERR_AMBIGUOUS_ARGUMENT("error/message",'The error message "'.concat(actual.message,'" is identical to the message.'))}else if(actual===error)throw new ERR_AMBIGUOUS_ARGUMENT("error/message",'The error "'.concat(actual,'" is identical to the message.'));message=error,error=void 0}else if(null!=error&&"object"!==_typeof(error)&&"function"!=typeof error)throw new ERR_INVALID_ARG_TYPE("error",["Object","Error","Function","RegExp"],error);if(actual===NO_EXCEPTION_SENTINEL){var details="";error&&error.name&&(details+=" (".concat(error.name,")")),details+=message?": ".concat(message):".";var fnType="rejects"===stackStartFn.name?"rejection":"exception";innerFail({actual:void 0,expected:error,operator:stackStartFn.name,message:"Missing expected ".concat(fnType).concat(details),stackStartFn})}if(error&&!expectedException(actual,error,message,stackStartFn))throw actual}function expectsNoError(stackStartFn,actual,error,message){if(actual!==NO_EXCEPTION_SENTINEL){if("string"==typeof error&&(message=error,error=void 0),!error||expectedException(actual,error)){var details=message?": ".concat(message):".",fnType="doesNotReject"===stackStartFn.name?"rejection":"exception";innerFail({actual,expected:error,operator:stackStartFn.name,message:"Got unwanted ".concat(fnType).concat(details,"\n")+'Actual message: "'.concat(actual&&actual.message,'"'),stackStartFn})}throw actual}}function internalMatch(string,regexp,message,fn,fnName){if(!isRegExp(regexp))throw new ERR_INVALID_ARG_TYPE("regexp","RegExp",regexp);var match="match"===fnName;if("string"!=typeof string||RegExpPrototypeTest(regexp,string)!==match){if(message instanceof Error)throw message;var generatedMessage=!message;message=message||("string"!=typeof string?'The "string" argument must be of type string. Received type '+"".concat(_typeof(string)," (").concat(inspect(string),")"):(match?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(inspect(regexp),". Input:\n\n").concat(inspect(string),"\n"));var err=new AssertionError({actual:string,expected:regexp,message,operator:fnName,stackStartFn:fn});throw err.generatedMessage=generatedMessage,err}}function strict(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];innerOk.apply(void 0,[strict,args.length].concat(args))}assert.throws=function throws(promiseFn){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];expectsError.apply(void 0,[throws,getActual(promiseFn)].concat(args))},assert.rejects=function rejects(promiseFn){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return waitForActual(promiseFn).then(function(result){return expectsError.apply(void 0,[rejects,result].concat(args))})},assert.doesNotThrow=function doesNotThrow(fn){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];expectsNoError.apply(void 0,[doesNotThrow,getActual(fn)].concat(args))},assert.doesNotReject=function doesNotReject(fn){for(var _len5=arguments.length,args=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];return waitForActual(fn).then(function(result){return expectsNoError.apply(void 0,[doesNotReject,result].concat(args))})},assert.ifError=function ifError(err){if(null!=err){var message="ifError got unwanted exception: ";"object"===_typeof(err)&&"string"==typeof err.message?0===err.message.length&&err.constructor?message+=err.constructor.name:message+=err.message:message+=inspect(err);var newErr=new AssertionError({actual:err,expected:null,operator:"ifError",message,stackStartFn:ifError}),origStack=err.stack;if("string"==typeof origStack){var tmp2=origStack.split("\n");tmp2.shift();for(var tmp1=newErr.stack.split("\n"),i=0;i<tmp2.length;i++){var pos=tmp1.indexOf(tmp2[i]);if(-1!==pos){tmp1=tmp1.slice(0,pos);break}}newErr.stack="".concat(tmp1.join("\n"),"\n").concat(tmp2.join("\n"))}throw newErr}},assert.match=function match(string,regexp,message){internalMatch(string,regexp,message,match,"match")},assert.doesNotMatch=function doesNotMatch(string,regexp,message){internalMatch(string,regexp,message,doesNotMatch,"doesNotMatch")},assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual}),assert.strict.strict=assert.strict},"./node_modules/assert/build/internal/assert/assertion_error.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var inspect=__webpack_require__("./node_modules/util/util.js").inspect,ERR_INVALID_ARG_TYPE=__webpack_require__("./node_modules/assert/build/internal/errors.js").codes.ERR_INVALID_ARG_TYPE;function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}var blue="",green="",red="",white="",kReadableOperator={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function copyError(source){var keys=Object.keys(source),target=Object.create(Object.getPrototypeOf(source));return keys.forEach(function(key){target[key]=source[key]}),Object.defineProperty(target,"message",{value:source.message}),target}function inspectValue(val){return inspect(val,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function createErrDiff(actual,expected,operator){var other="",res="",lastPos=0,end="",skipped=!1,actualInspected=inspectValue(actual),actualLines=actualInspected.split("\n"),expectedLines=inspectValue(expected).split("\n"),i=0,indicator="";if("strictEqual"===operator&&"object"===_typeof(actual)&&"object"===_typeof(expected)&&null!==actual&&null!==expected&&(operator="strictEqualObject"),1===actualLines.length&&1===expectedLines.length&&actualLines[0]!==expectedLines[0]){var inputLength=actualLines[0].length+expectedLines[0].length;if(inputLength<=10){if(!("object"===_typeof(actual)&&null!==actual||"object"===_typeof(expected)&&null!==expected||0===actual&&0===expected))return"".concat(kReadableOperator[operator],"\n\n")+"".concat(actualLines[0]," !== ").concat(expectedLines[0],"\n")}else if("strictEqualObject"!==operator){if(inputLength<(process.stderr&&process.stderr.isTTY?process.stderr.columns:80)){for(;actualLines[0][i]===expectedLines[0][i];)i++;i>2&&(indicator="\n  ".concat(function repeat(str,count){if(count=Math.floor(count),0==str.length||0==count)return"";var maxCount=str.length*count;for(count=Math.floor(Math.log(count)/Math.log(2));count;)str+=str,count--;return str+str.substring(0,maxCount-str.length)}(" ",i),"^"),i=0)}}}for(var a=actualLines[actualLines.length-1],b=expectedLines[expectedLines.length-1];a===b&&(i++<2?end="\n  ".concat(a).concat(end):other=a,actualLines.pop(),expectedLines.pop(),0!==actualLines.length&&0!==expectedLines.length);)a=actualLines[actualLines.length-1],b=expectedLines[expectedLines.length-1];var maxLines=Math.max(actualLines.length,expectedLines.length);if(0===maxLines){var _actualLines=actualInspected.split("\n");if(_actualLines.length>30)for(_actualLines[26]="".concat(blue,"...").concat(white);_actualLines.length>27;)_actualLines.pop();return"".concat(kReadableOperator.notIdentical,"\n\n").concat(_actualLines.join("\n"),"\n")}i>3&&(end="\n".concat(blue,"...").concat(white).concat(end),skipped=!0),""!==other&&(end="\n  ".concat(other).concat(end),other="");var printedLines=0,msg=kReadableOperator[operator]+"\n".concat(green,"+ actual").concat(white," ").concat(red,"- expected").concat(white),skippedMsg=" ".concat(blue,"...").concat(white," Lines skipped");for(i=0;i<maxLines;i++){var cur=i-lastPos;if(actualLines.length<i+1)cur>1&&i>2&&(cur>4?(res+="\n".concat(blue,"...").concat(white),skipped=!0):cur>3&&(res+="\n  ".concat(expectedLines[i-2]),printedLines++),res+="\n  ".concat(expectedLines[i-1]),printedLines++),lastPos=i,other+="\n".concat(red,"-").concat(white," ").concat(expectedLines[i]),printedLines++;else if(expectedLines.length<i+1)cur>1&&i>2&&(cur>4?(res+="\n".concat(blue,"...").concat(white),skipped=!0):cur>3&&(res+="\n  ".concat(actualLines[i-2]),printedLines++),res+="\n  ".concat(actualLines[i-1]),printedLines++),lastPos=i,res+="\n".concat(green,"+").concat(white," ").concat(actualLines[i]),printedLines++;else{var expectedLine=expectedLines[i],actualLine=actualLines[i],divergingLines=actualLine!==expectedLine&&(!endsWith(actualLine,",")||actualLine.slice(0,-1)!==expectedLine);divergingLines&&endsWith(expectedLine,",")&&expectedLine.slice(0,-1)===actualLine&&(divergingLines=!1,actualLine+=","),divergingLines?(cur>1&&i>2&&(cur>4?(res+="\n".concat(blue,"...").concat(white),skipped=!0):cur>3&&(res+="\n  ".concat(actualLines[i-2]),printedLines++),res+="\n  ".concat(actualLines[i-1]),printedLines++),lastPos=i,res+="\n".concat(green,"+").concat(white," ").concat(actualLine),other+="\n".concat(red,"-").concat(white," ").concat(expectedLine),printedLines+=2):(res+=other,other="",1!==cur&&0!==i||(res+="\n  ".concat(actualLine),printedLines++))}if(printedLines>20&&i<maxLines-2)return"".concat(msg).concat(skippedMsg,"\n").concat(res,"\n").concat(blue,"...").concat(white).concat(other,"\n")+"".concat(blue,"...").concat(white)}return"".concat(msg).concat(skipped?skippedMsg:"","\n").concat(res).concat(other).concat(end).concat(indicator)}var AssertionError=function(_Error,_inspect$custom){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(AssertionError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(AssertionError);function AssertionError(options){var _this;if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AssertionError),"object"!==_typeof(options)||null===options)throw new ERR_INVALID_ARG_TYPE("options","Object",options);var message=options.message,operator=options.operator,stackStartFn=options.stackStartFn,actual=options.actual,expected=options.expected,limit=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=message)_this=_super.call(this,String(message));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&1!==process.stderr.getColorDepth()?(blue="[34m",green="[32m",white="[39m",red="[31m"):(blue="",green="",white="",red="")),"object"===_typeof(actual)&&null!==actual&&"object"===_typeof(expected)&&null!==expected&&"stack"in actual&&actual instanceof Error&&"stack"in expected&&expected instanceof Error&&(actual=copyError(actual),expected=copyError(expected)),"deepStrictEqual"===operator||"strictEqual"===operator)_this=_super.call(this,createErrDiff(actual,expected,operator));else if("notDeepStrictEqual"===operator||"notStrictEqual"===operator){var base=kReadableOperator[operator],res=inspectValue(actual).split("\n");if("notStrictEqual"===operator&&"object"===_typeof(actual)&&null!==actual&&(base=kReadableOperator.notStrictEqualObject),res.length>30)for(res[26]="".concat(blue,"...").concat(white);res.length>27;)res.pop();_this=1===res.length?_super.call(this,"".concat(base," ").concat(res[0])):_super.call(this,"".concat(base,"\n\n").concat(res.join("\n"),"\n"))}else{var _res=inspectValue(actual),other="",knownOperators=kReadableOperator[operator];"notDeepEqual"===operator||"notEqual"===operator?(_res="".concat(kReadableOperator[operator],"\n\n").concat(_res)).length>1024&&(_res="".concat(_res.slice(0,1021),"...")):(other="".concat(inspectValue(expected)),_res.length>512&&(_res="".concat(_res.slice(0,509),"...")),other.length>512&&(other="".concat(other.slice(0,509),"...")),"deepEqual"===operator||"equal"===operator?_res="".concat(knownOperators,"\n\n").concat(_res,"\n\nshould equal\n\n"):other=" ".concat(operator," ").concat(other)),_this=_super.call(this,"".concat(_res).concat(other))}return Error.stackTraceLimit=limit,_this.generatedMessage=!message,Object.defineProperty(_assertThisInitialized(_this),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),_this.code="ERR_ASSERTION",_this.actual=actual,_this.expected=expected,_this.operator=operator,Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(_this),stackStartFn),_this.stack,_this.name="AssertionError",_possibleConstructorReturn(_this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AssertionError,[{key:"toString",value:function toString(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:_inspect$custom,value:function value(recurseTimes,ctx){return inspect(this,_objectSpread(_objectSpread({},ctx),{},{customInspect:!1,depth:0}))}}]),AssertionError}(_wrapNativeSuper(Error),inspect.custom);module.exports=AssertionError},"./node_modules/assert/build/internal/errors.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var assert,util,codes={};function createErrorType(code,message,Base){Base||(Base=Error);var NodeError=function(_Base){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(NodeError,_Base);var _super=_createSuper(NodeError);function NodeError(arg1,arg2,arg3){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeError),_this=_super.call(this,function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3)),_this.code=code,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeError)}(Base);codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map(function(i){return String(i)}),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(String(expected))}createErrorType("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(name,expected,actual){var determiner,msg;if(void 0===assert&&(assert=__webpack_require__("./node_modules/assert/build/assert.js")),assert("string"==typeof name,"'name' must be a string"),"string"==typeof expected&&function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(_typeof(actual))},TypeError),createErrorType("ERR_INVALID_ARG_VALUE",function(name,value){var reason=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===util&&(util=__webpack_require__("./node_modules/util/util.js"));var inspected=util.inspect(value);return inspected.length>128&&(inspected="".concat(inspected.slice(0,128),"...")),"The argument '".concat(name,"' ").concat(reason,". Received ").concat(inspected)},TypeError,RangeError),createErrorType("ERR_INVALID_RETURN_VALUE",function(input,name,value){var type;return type=value&&value.constructor&&value.constructor.name?"instance of ".concat(value.constructor.name):"type ".concat(_typeof(value)),"Expected ".concat(input,' to be returned from the "').concat(name,'"')+" function but got ".concat(type,".")},TypeError),createErrorType("ERR_MISSING_ARGS",function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];void 0===assert&&(assert=__webpack_require__("./node_modules/assert/build/assert.js")),assert(args.length>0,"At least one arg needs to be specified");var msg="The ",len=args.length;switch(args=args.map(function(a){return'"'.concat(a,'"')}),len){case 1:msg+="".concat(args[0]," argument");break;case 2:msg+="".concat(args[0]," and ").concat(args[1]," arguments");break;default:msg+=args.slice(0,len-1).join(", "),msg+=", and ".concat(args[len-1]," arguments")}return"".concat(msg," must be specified")},TypeError),module.exports.codes=codes},"./node_modules/assert/build/internal/util/comparisons.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var regexFlagsSupported=void 0!==/a/g.flags,arrayFromSet=function arrayFromSet(set){var array=[];return set.forEach(function(value){return array.push(value)}),array},arrayFromMap=function arrayFromMap(map){var array=[];return map.forEach(function(value,key){return array.push([key,value])}),array},objectIs=Object.is?Object.is:__webpack_require__("./node_modules/object-is/index.js"),objectGetOwnPropertySymbols=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},numberIsNaN=Number.isNaN?Number.isNaN:__webpack_require__("./node_modules/is-nan/index.js");function uncurryThis(f){return f.call.bind(f)}var hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty),propertyIsEnumerable=uncurryThis(Object.prototype.propertyIsEnumerable),objectToString=uncurryThis(Object.prototype.toString),_require$types=__webpack_require__("./node_modules/util/util.js").types,isAnyArrayBuffer=_require$types.isAnyArrayBuffer,isArrayBufferView=_require$types.isArrayBufferView,isDate=_require$types.isDate,isMap=_require$types.isMap,isRegExp=_require$types.isRegExp,isSet=_require$types.isSet,isNativeError=_require$types.isNativeError,isBoxedPrimitive=_require$types.isBoxedPrimitive,isNumberObject=_require$types.isNumberObject,isStringObject=_require$types.isStringObject,isBooleanObject=_require$types.isBooleanObject,isBigIntObject=_require$types.isBigIntObject,isSymbolObject=_require$types.isSymbolObject,isFloat32Array=_require$types.isFloat32Array,isFloat64Array=_require$types.isFloat64Array;function isNonIndex(key){if(0===key.length||key.length>10)return!0;for(var i=0;i<key.length;i++){var code=key.charCodeAt(i);if(code<48||code>57)return!0}return 10===key.length&&key>=Math.pow(2,32)}function getOwnNonIndexProperties(value){return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)))}function compare(a,b){if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0}function innerDeepEqual(val1,val2,strict,memos){if(val1===val2)return 0!==val1||(!strict||objectIs(val1,val2));if(strict){if("object"!==_typeof(val1))return"number"==typeof val1&&numberIsNaN(val1)&&numberIsNaN(val2);if("object"!==_typeof(val2)||null===val1||null===val2)return!1;if(Object.getPrototypeOf(val1)!==Object.getPrototypeOf(val2))return!1}else{if(null===val1||"object"!==_typeof(val1))return(null===val2||"object"!==_typeof(val2))&&val1==val2;if(null===val2||"object"!==_typeof(val2))return!1}var val1Tag=objectToString(val1);if(val1Tag!==objectToString(val2))return!1;if(Array.isArray(val1)){if(val1.length!==val2.length)return!1;var keys1=getOwnNonIndexProperties(val1),keys2=getOwnNonIndexProperties(val2);return keys1.length===keys2.length&&keyCheck(val1,val2,strict,memos,1,keys1)}if("[object Object]"===val1Tag&&(!isMap(val1)&&isMap(val2)||!isSet(val1)&&isSet(val2)))return!1;if(isDate(val1)){if(!isDate(val2)||Date.prototype.getTime.call(val1)!==Date.prototype.getTime.call(val2))return!1}else if(isRegExp(val1)){if(!isRegExp(val2)||!function areSimilarRegExps(a,b){return regexFlagsSupported?a.source===b.source&&a.flags===b.flags:RegExp.prototype.toString.call(a)===RegExp.prototype.toString.call(b)}(val1,val2))return!1}else if(isNativeError(val1)||val1 instanceof Error){if(val1.message!==val2.message||val1.name!==val2.name)return!1}else{if(isArrayBufferView(val1)){if(strict||!isFloat32Array(val1)&&!isFloat64Array(val1)){if(!function areSimilarTypedArrays(a,b){return a.byteLength===b.byteLength&&0===compare(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),new Uint8Array(b.buffer,b.byteOffset,b.byteLength))}(val1,val2))return!1}else if(!function areSimilarFloatArrays(a,b){if(a.byteLength!==b.byteLength)return!1;for(var offset=0;offset<a.byteLength;offset++)if(a[offset]!==b[offset])return!1;return!0}(val1,val2))return!1;var _keys=getOwnNonIndexProperties(val1),_keys2=getOwnNonIndexProperties(val2);return _keys.length===_keys2.length&&keyCheck(val1,val2,strict,memos,0,_keys)}if(isSet(val1))return!(!isSet(val2)||val1.size!==val2.size)&&keyCheck(val1,val2,strict,memos,2);if(isMap(val1))return!(!isMap(val2)||val1.size!==val2.size)&&keyCheck(val1,val2,strict,memos,3);if(isAnyArrayBuffer(val1)){if(!function areEqualArrayBuffers(buf1,buf2){return buf1.byteLength===buf2.byteLength&&0===compare(new Uint8Array(buf1),new Uint8Array(buf2))}(val1,val2))return!1}else if(isBoxedPrimitive(val1)&&!function isEqualBoxedPrimitive(val1,val2){return isNumberObject(val1)?isNumberObject(val2)&&objectIs(Number.prototype.valueOf.call(val1),Number.prototype.valueOf.call(val2)):isStringObject(val1)?isStringObject(val2)&&String.prototype.valueOf.call(val1)===String.prototype.valueOf.call(val2):isBooleanObject(val1)?isBooleanObject(val2)&&Boolean.prototype.valueOf.call(val1)===Boolean.prototype.valueOf.call(val2):isBigIntObject(val1)?isBigIntObject(val2)&&BigInt.prototype.valueOf.call(val1)===BigInt.prototype.valueOf.call(val2):isSymbolObject(val2)&&Symbol.prototype.valueOf.call(val1)===Symbol.prototype.valueOf.call(val2)}(val1,val2))return!1}return keyCheck(val1,val2,strict,memos,0)}function getEnumerables(val,keys){return keys.filter(function(k){return propertyIsEnumerable(val,k)})}function keyCheck(val1,val2,strict,memos,iterationType,aKeys){if(5===arguments.length){aKeys=Object.keys(val1);var bKeys=Object.keys(val2);if(aKeys.length!==bKeys.length)return!1}for(var i=0;i<aKeys.length;i++)if(!hasOwnProperty(val2,aKeys[i]))return!1;if(strict&&5===arguments.length){var symbolKeysA=objectGetOwnPropertySymbols(val1);if(0!==symbolKeysA.length){var count=0;for(i=0;i<symbolKeysA.length;i++){var key=symbolKeysA[i];if(propertyIsEnumerable(val1,key)){if(!propertyIsEnumerable(val2,key))return!1;aKeys.push(key),count++}else if(propertyIsEnumerable(val2,key))return!1}var symbolKeysB=objectGetOwnPropertySymbols(val2);if(symbolKeysA.length!==symbolKeysB.length&&getEnumerables(val2,symbolKeysB).length!==count)return!1}else{var _symbolKeysB=objectGetOwnPropertySymbols(val2);if(0!==_symbolKeysB.length&&0!==getEnumerables(val2,_symbolKeysB).length)return!1}}if(0===aKeys.length&&(0===iterationType||1===iterationType&&0===val1.length||0===val1.size))return!0;if(void 0===memos)memos={val1:new Map,val2:new Map,position:0};else{var val2MemoA=memos.val1.get(val1);if(void 0!==val2MemoA){var val2MemoB=memos.val2.get(val2);if(void 0!==val2MemoB)return val2MemoA===val2MemoB}memos.position++}memos.val1.set(val1,memos.position),memos.val2.set(val2,memos.position);var areEq=function objEquiv(a,b,strict,keys,memos,iterationType){var i=0;if(2===iterationType){if(!function setEquiv(a,b,strict,memo){for(var set=null,aValues=arrayFromSet(a),i=0;i<aValues.length;i++){var val=aValues[i];if("object"===_typeof(val)&&null!==val)null===set&&(set=new Set),set.add(val);else if(!b.has(val)){if(strict)return!1;if(!setMightHaveLoosePrim(a,b,val))return!1;null===set&&(set=new Set),set.add(val)}}if(null!==set){for(var bValues=arrayFromSet(b),_i=0;_i<bValues.length;_i++){var _val=bValues[_i];if("object"===_typeof(_val)&&null!==_val){if(!setHasEqualElement(set,_val,strict,memo))return!1}else if(!strict&&!a.has(_val)&&!setHasEqualElement(set,_val,strict,memo))return!1}return 0===set.size}return!0}(a,b,strict,memos))return!1}else if(3===iterationType){if(!function mapEquiv(a,b,strict,memo){for(var set=null,aEntries=arrayFromMap(a),i=0;i<aEntries.length;i++){var _aEntries$i=_slicedToArray(aEntries[i],2),key=_aEntries$i[0],item1=_aEntries$i[1];if("object"===_typeof(key)&&null!==key)null===set&&(set=new Set),set.add(key);else{var item2=b.get(key);if(void 0===item2&&!b.has(key)||!innerDeepEqual(item1,item2,strict,memo)){if(strict)return!1;if(!mapMightHaveLoosePrim(a,b,key,item1,memo))return!1;null===set&&(set=new Set),set.add(key)}}}if(null!==set){for(var bEntries=arrayFromMap(b),_i2=0;_i2<bEntries.length;_i2++){var _bEntries$_i=_slicedToArray(bEntries[_i2],2),_key=_bEntries$_i[0],item=_bEntries$_i[1];if("object"===_typeof(_key)&&null!==_key){if(!mapHasEqualEntry(set,a,_key,item,strict,memo))return!1}else if(!(strict||a.has(_key)&&innerDeepEqual(a.get(_key),item,!1,memo)||mapHasEqualEntry(set,a,_key,item,!1,memo)))return!1}return 0===set.size}return!0}(a,b,strict,memos))return!1}else if(1===iterationType)for(;i<a.length;i++){if(!hasOwnProperty(a,i)){if(hasOwnProperty(b,i))return!1;for(var keysA=Object.keys(a);i<keysA.length;i++){var key=keysA[i];if(!hasOwnProperty(b,key)||!innerDeepEqual(a[key],b[key],strict,memos))return!1}return keysA.length===Object.keys(b).length}if(!hasOwnProperty(b,i)||!innerDeepEqual(a[i],b[i],strict,memos))return!1}for(i=0;i<keys.length;i++){var _key2=keys[i];if(!innerDeepEqual(a[_key2],b[_key2],strict,memos))return!1}return!0}(val1,val2,strict,aKeys,memos,iterationType);return memos.val1.delete(val1),memos.val2.delete(val2),areEq}function setHasEqualElement(set,val1,strict,memo){for(var setValues=arrayFromSet(set),i=0;i<setValues.length;i++){var val2=setValues[i];if(innerDeepEqual(val1,val2,strict,memo))return set.delete(val2),!0}return!1}function findLooseMatchingPrimitives(prim){switch(_typeof(prim)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":prim=+prim;case"number":if(numberIsNaN(prim))return!1}return!0}function setMightHaveLoosePrim(a,b,prim){var altValue=findLooseMatchingPrimitives(prim);return null!=altValue?altValue:b.has(altValue)&&!a.has(altValue)}function mapMightHaveLoosePrim(a,b,prim,item,memo){var altValue=findLooseMatchingPrimitives(prim);if(null!=altValue)return altValue;var curB=b.get(altValue);return!(void 0===curB&&!b.has(altValue)||!innerDeepEqual(item,curB,!1,memo))&&(!a.has(altValue)&&innerDeepEqual(item,curB,!1,memo))}function mapHasEqualEntry(set,map,key1,item1,strict,memo){for(var setValues=arrayFromSet(set),i=0;i<setValues.length;i++){var key2=setValues[i];if(innerDeepEqual(key1,key2,strict,memo)&&innerDeepEqual(item1,map.get(key2),strict,memo))return set.delete(key2),!0}return!1}module.exports={isDeepEqual:function isDeepEqual(val1,val2){return innerDeepEqual(val1,val2,false)},isDeepStrictEqual:function isDeepStrictEqual(val1,val2){return innerDeepEqual(val1,val2,true)}}},"./node_modules/available-typed-arrays/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var possibleNames=__webpack_require__("./node_modules/possible-typed-array-names/index.js"),g="undefined"==typeof globalThis?__webpack_require__.g:globalThis;module.exports=function availableTypedArrays(){for(var out=[],i=0;i<possibleNames.length;i++)"function"==typeof g[possibleNames[i]]&&(out[out.length]=possibleNames[i]);return out}},"./node_modules/base64-js/index.js":(__unused_webpack_module,exports)=>{"use strict";exports.byteLength=function byteLength(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function toByteArray(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(tripletToBase64(tmp));return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";const base64=__webpack_require__("./node_modules/base64-js/index.js"),ieee754=__webpack_require__("./node_modules/ieee754/index.js"),customInspectSymbol="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;exports.hp=Buffer,exports.IS=50;const K_MAX_LENGTH=2147483647;function createBuffer(length){if(length>K_MAX_LENGTH)throw new RangeError('The value "'+length+'" is invalid for option "size"');const buf=new Uint8Array(length);return Object.setPrototypeOf(buf,Buffer.prototype),buf}function Buffer(arg,encodingOrOffset,length){if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}function from(value,encodingOrOffset,length){if("string"==typeof value)return function fromString(string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);const length=0|byteLength(string,encoding);let buf=createBuffer(length);const actual=buf.write(string,encoding);actual!==length&&(buf=buf.slice(0,actual));return buf}(value,encodingOrOffset);if(ArrayBuffer.isView(value))return function fromArrayView(arrayView){if(isInstance(arrayView,Uint8Array)){const copy=new Uint8Array(arrayView);return fromArrayBuffer(copy.buffer,copy.byteOffset,copy.byteLength)}return fromArrayLike(arrayView)}(value);if(null==value)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value);if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer))return fromArrayBuffer(value,encodingOrOffset,length);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(value,SharedArrayBuffer)||value&&isInstance(value.buffer,SharedArrayBuffer)))return fromArrayBuffer(value,encodingOrOffset,length);if("number"==typeof value)throw new TypeError('The "value" argument must not be of type number. Received type number');const valueOf=value.valueOf&&value.valueOf();if(null!=valueOf&&valueOf!==value)return Buffer.from(valueOf,encodingOrOffset,length);const b=function fromObject(obj){if(Buffer.isBuffer(obj)){const len=0|checked(obj.length),buf=createBuffer(len);return 0===buf.length||obj.copy(buf,0,0,len),buf}if(void 0!==obj.length)return"number"!=typeof obj.length||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj);if("Buffer"===obj.type&&Array.isArray(obj.data))return fromArrayLike(obj.data)}(value);if(b)return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof value[Symbol.toPrimitive])return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be of type number');if(size<0)throw new RangeError('The value "'+size+'" is invalid for option "size"')}function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:0|checked(size))}function fromArrayLike(array){const length=array.length<0?0:0|checked(array.length),buf=createBuffer(length);for(let i=0;i<length;i+=1)buf[i]=255&array[i];return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError('"offset" is outside of buffer bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('"length" is outside of buffer bounds');let buf;return buf=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),Object.setPrototypeOf(buf,Buffer.prototype),buf}function checked(length){if(length>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer))return string.byteLength;if("string"!=typeof string)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof string);const len=string.length,mustMatch=arguments.length>2&&!0===arguments[2];if(!mustMatch&&0===len)return 0;let loweredCase=!1;for(;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return mustMatch?-1:utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){let loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){const i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),numberIsNaN(byteOffset=+byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){let i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){let foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){let found=!0;for(let j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;const remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;const strLen=string.length;let i;for(length>strLen/2&&(length=strLen/2),i=0;i<length;++i){const parsed=parseInt(string.substr(2*i,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function asciiToBytes(str){const byteArray=[];for(let i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function utf16leToBytes(str,units){let c,hi,lo;const byteArray=[];for(let i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);const res=[];let i=start;for(;i<end;){const firstByte=buf[i];let codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){let secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],128==(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function decodeCodePointsArray(codePoints){const len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);let res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{const arr=new Uint8Array(1),proto={foo:function(){return 42}};return Object.setPrototypeOf(proto,Uint8Array.prototype),Object.setPrototypeOf(arr,proto),42===arr.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(size,fill,encoding){return function alloc(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):void 0!==fill?"string"==typeof encoding?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}(size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)},Buffer.isBuffer=function isBuffer(b){return null!=b&&!0===b._isBuffer&&b!==Buffer.prototype},Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array)&&(a=Buffer.from(a,a.offset,a.byteLength)),isInstance(b,Uint8Array)&&(b=Buffer.from(b,b.offset,b.byteLength)),!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let x=a.length,y=b.length;for(let i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);let i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;const buffer=Buffer.allocUnsafe(length);let pos=0;for(i=0;i<list.length;++i){let buf=list[i];if(isInstance(buf,Uint8Array))pos+buf.length>buffer.length?(Buffer.isBuffer(buf)||(buf=Buffer.from(buf)),buf.copy(buffer,pos)):Uint8Array.prototype.set.call(buffer,buf,pos);else{if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos)}pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){const len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){const len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){const len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){const length=this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function inspect(){let str="";const max=exports.IS;return str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim(),this.length>max&&(str+=" ... "),"<Buffer "+str+">"},customInspectSymbol&&(Buffer.prototype[customInspectSymbol]=Buffer.prototype.inspect),Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)&&(target=Buffer.from(target,target.offset,target.byteLength)),!Buffer.isBuffer(target))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof target);if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;let x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0);const len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end);for(let i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset>>>=0,isFinite(length)?(length>>>=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}const remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");let loweredCase=!1;for(;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":case"latin1":case"binary":return asciiWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(buf,start,end){let ret="";end=Math.min(buf.length,end);for(let i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){let ret="";end=Math.min(buf.length,end);for(let i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){const len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);let out="";for(let i=start;i<end;++i)out+=hexSliceLookupTable[buf[i]];return out}function utf16leSlice(buf,start,end){const bytes=buf.slice(start,end);let res="";for(let i=0;i<bytes.length-1;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(buf,value,offset,min,max){checkIntBI(value,min,max,buf,offset,7);let lo=Number(value&BigInt(4294967295));buf[offset++]=lo,lo>>=8,buf[offset++]=lo,lo>>=8,buf[offset++]=lo,lo>>=8,buf[offset++]=lo;let hi=Number(value>>BigInt(32)&BigInt(4294967295));return buf[offset++]=hi,hi>>=8,buf[offset++]=hi,hi>>=8,buf[offset++]=hi,hi>>=8,buf[offset++]=hi,offset}function wrtBigUInt64BE(buf,value,offset,min,max){checkIntBI(value,min,max,buf,offset,7);let lo=Number(value&BigInt(4294967295));buf[offset+7]=lo,lo>>=8,buf[offset+6]=lo,lo>>=8,buf[offset+5]=lo,lo>>=8,buf[offset+4]=lo;let hi=Number(value>>BigInt(32)&BigInt(4294967295));return buf[offset+3]=hi,hi>>=8,buf[offset+2]=hi,hi>>=8,buf[offset+1]=hi,hi>>=8,buf[offset]=hi,offset+8}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function slice(start,end){const len=this.length;(start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start);const newBuf=this.subarray(start,end);return Object.setPrototypeOf(newBuf,Buffer.prototype),newBuf},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let val=this[offset],mul=1,i=0;for(;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let val=this[offset+--byteLength],mul=1;for(;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function readBigUInt64LE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const lo=first+256*this[++offset]+65536*this[++offset]+this[++offset]*2**24,hi=this[++offset]+256*this[++offset]+65536*this[++offset]+last*2**24;return BigInt(lo)+(BigInt(hi)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function readBigUInt64BE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const hi=first*2**24+65536*this[++offset]+256*this[++offset]+this[++offset],lo=this[++offset]*2**24+65536*this[++offset]+256*this[++offset]+last;return(BigInt(hi)<<BigInt(32))+BigInt(lo)}),Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let val=this[offset],mul=1,i=0;for(;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let i=byteLength,mul=1,val=this[offset+--i];for(;i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);const val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);const val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function readBigInt64LE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const val=this[offset+4]+256*this[offset+5]+65536*this[offset+6]+(last<<24);return(BigInt(val)<<BigInt(32))+BigInt(first+256*this[++offset]+65536*this[++offset]+this[++offset]*2**24)}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function readBigInt64BE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const val=(first<<24)+65536*this[++offset]+256*this[++offset]+this[++offset];return(BigInt(val)<<BigInt(32))+BigInt(this[++offset]*2**24+65536*this[++offset]+256*this[++offset]+last)}),Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,byteLength>>>=0,!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0)}let mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,byteLength>>>=0,!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0)}let i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=255&value,offset+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value,offset+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function writeBigUInt64LE(value,offset=0){return wrtBigUInt64LE(this,value,offset,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function writeBigUInt64BE(value,offset=0){return wrtBigUInt64BE(this,value,offset,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){const limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}let i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul|0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){const limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}let i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul|0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function writeBigInt64LE(value,offset=0){return wrtBigUInt64LE(this,value,offset,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function writeBigInt64BE(value,offset=0){return wrtBigUInt64BE(this,value,offset,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);const len=end-start;return this===target&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(targetStart,start,end):Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart),len},Buffer.prototype.fill=function fill(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(1===val.length){const code=val.charCodeAt(0);("utf8"===encoding&&code<128||"latin1"===encoding)&&(val=code)}}else"number"==typeof val?val&=255:"boolean"==typeof val&&(val=Number(val));if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;let i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{const bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding),len=bytes.length;if(0===len)throw new TypeError('The value "'+val+'" is invalid for argument "value"');for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};const errors={};function E(sym,getMessage,Base){errors[sym]=class NodeError extends Base{constructor(){super(),Object.defineProperty(this,"message",{value:getMessage.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${sym}]`,this.stack,delete this.name}get code(){return sym}set code(value){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value,writable:!0})}toString(){return`${this.name} [${sym}]: ${this.message}`}}}function addNumericalSeparator(val){let res="",i=val.length;const start="-"===val[0]?1:0;for(;i>=start+4;i-=3)res=`_${val.slice(i-3,i)}${res}`;return`${val.slice(0,i)}${res}`}function checkIntBI(value,min,max,buf,offset,byteLength){if(value>max||value<min){const n="bigint"==typeof min?"n":"";let range;throw range=byteLength>3?0===min||min===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(byteLength+1)}${n}`:`>= -(2${n} ** ${8*(byteLength+1)-1}${n}) and < 2 ** ${8*(byteLength+1)-1}${n}`:`>= ${min}${n} and <= ${max}${n}`,new errors.ERR_OUT_OF_RANGE("value",range,value)}!function checkBounds(buf,offset,byteLength){validateNumber(offset,"offset"),void 0!==buf[offset]&&void 0!==buf[offset+byteLength]||boundsError(offset,buf.length-(byteLength+1))}(buf,offset,byteLength)}function validateNumber(value,name){if("number"!=typeof value)throw new errors.ERR_INVALID_ARG_TYPE(name,"number",value)}function boundsError(value,length,type){if(Math.floor(value)!==value)throw validateNumber(value,type),new errors.ERR_OUT_OF_RANGE(type||"offset","an integer",value);if(length<0)throw new errors.ERR_BUFFER_OUT_OF_BOUNDS;throw new errors.ERR_OUT_OF_RANGE(type||"offset",`>= ${type?1:0} and <= ${length}`,value)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(name){return name?`${name} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(name,actual){return`The "${name}" argument must be of type number. Received type ${typeof actual}`},TypeError),E("ERR_OUT_OF_RANGE",function(str,range,input){let msg=`The value of "${str}" is out of range.`,received=input;return Number.isInteger(input)&&Math.abs(input)>2**32?received=addNumericalSeparator(String(input)):"bigint"==typeof input&&(received=String(input),(input>BigInt(2)**BigInt(32)||input<-(BigInt(2)**BigInt(32)))&&(received=addNumericalSeparator(received)),received+="n"),msg+=` It must be ${range}. Received ${received}`,msg},RangeError);const INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(string,units){let codePoint;units=units||1/0;const length=string.length;let leadSurrogate=null;const bytes=[];for(let i=0;i<length;++i){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function base64clean(str){if((str=(str=str.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){let i;for(i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isInstance(obj,type){return obj instanceof type||null!=obj&&null!=obj.constructor&&null!=obj.constructor.name&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!=obj}const hexSliceLookupTable=function(){const table=new Array(256);for(let i=0;i<16;++i){const i16=16*i;for(let j=0;j<16;++j)table[i16+j]="0123456789abcdef"[i]+"0123456789abcdef"[j]}return table}();function defineBigIntMethod(fn){return"undefined"==typeof BigInt?BufferBigIntNotDefined:fn}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}},"./node_modules/call-bind-apply-helpers/actualApply.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__("./node_modules/function-bind/index.js"),$apply=__webpack_require__("./node_modules/call-bind-apply-helpers/functionApply.js"),$call=__webpack_require__("./node_modules/call-bind-apply-helpers/functionCall.js"),$reflectApply=__webpack_require__("./node_modules/call-bind-apply-helpers/reflectApply.js");module.exports=$reflectApply||bind.call($call,$apply)},"./node_modules/call-bind-apply-helpers/applyBind.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__("./node_modules/function-bind/index.js"),$apply=__webpack_require__("./node_modules/call-bind-apply-helpers/functionApply.js"),actualApply=__webpack_require__("./node_modules/call-bind-apply-helpers/actualApply.js");module.exports=function applyBind(){return actualApply(bind,$apply,arguments)}},"./node_modules/call-bind-apply-helpers/functionApply.js":module=>{"use strict";module.exports=Function.prototype.apply},"./node_modules/call-bind-apply-helpers/functionCall.js":module=>{"use strict";module.exports=Function.prototype.call},"./node_modules/call-bind-apply-helpers/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__("./node_modules/function-bind/index.js"),$TypeError=__webpack_require__("./node_modules/es-errors/type.js"),$call=__webpack_require__("./node_modules/call-bind-apply-helpers/functionCall.js"),$actualApply=__webpack_require__("./node_modules/call-bind-apply-helpers/actualApply.js");module.exports=function callBindBasic(args){if(args.length<1||"function"!=typeof args[0])throw new $TypeError("a function is required");return $actualApply(bind,$call,args)}},"./node_modules/call-bind-apply-helpers/reflectApply.js":module=>{"use strict";module.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},"./node_modules/call-bind/callBound.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("./node_modules/get-intrinsic/index.js"),callBind=__webpack_require__("./node_modules/call-bind/index.js"),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}},"./node_modules/call-bind/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var setFunctionLength=__webpack_require__("./node_modules/set-function-length/index.js"),$defineProperty=__webpack_require__("./node_modules/es-define-property/index.js"),callBindBasic=__webpack_require__("./node_modules/call-bind-apply-helpers/index.js"),applyBind=__webpack_require__("./node_modules/call-bind-apply-helpers/applyBind.js");module.exports=function callBind(originalFunction){var func=callBindBasic(arguments),adjustedLength=originalFunction.length-(arguments.length-1);return setFunctionLength(func,1+(adjustedLength>0?adjustedLength:0),!0)},$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind},"./node_modules/call-bound/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("./node_modules/get-intrinsic/index.js"),callBindBasic=__webpack_require__("./node_modules/call-bind-apply-helpers/index.js"),$indexOf=callBindBasic([GetIntrinsic("%String.prototype.indexOf%")]);module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBindBasic([intrinsic]):intrinsic}},"./node_modules/cross-fetch/dist/browser-ponyfill.js":(module,exports,__webpack_require__)=>{var __global__="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==__webpack_require__.g&&__webpack_require__.g,__globalThis__=function(){function F(){this.fetch=!1,this.DOMException=__global__.DOMException}return F.prototype=__global__,new F}();!function(globalThis){!function(exports){var g=void 0!==globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==__webpack_require__.g&&__webpack_require__.g||{},support_searchParams="URLSearchParams"in g,support_iterable="Symbol"in g&&"iterator"in Symbol,support_blob="FileReader"in g&&"Blob"in g&&function(){try{return new Blob,!0}catch(e){return!1}}(),support_formData="FormData"in g,support_arrayBuffer="ArrayBuffer"in g;if(support_arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(name)||""===name)throw new TypeError('Invalid character in header field name: "'+name+'"');return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value}}};return support_iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):Array.isArray(headers)?headers.forEach(function(header){if(2!=header.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+header.length);this.append(header[0],header[1])},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(!body._noBody)return body.bodyUsed?Promise.reject(new TypeError("Already read")):void(body.bodyUsed=!0)}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){this.bodyUsed=this.bodyUsed,this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:support_blob&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:support_formData&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():support_arrayBuffer&&support_blob&&function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}(body)?(this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))?this._bodyArrayBuffer=bufferClone(body):this._bodyText=body=Object.prototype.toString.call(body):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support_blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var isConsumed=consumed(this);return isConsumed||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(support_blob)return this.blob().then(readBlobAsArrayBuffer);throw new Error("could not read as ArrayBuffer")},this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader),match=/charset=([A-Za-z0-9_-]+)/.exec(blob.type),encoding=match?match[1]:"utf-8";return reader.readAsText(blob,encoding),promise}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support_formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value},Headers.prototype.delete=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach(function(value,name){items.push(name)}),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach(function(value){items.push(value)}),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach(function(value,name){items.push([name,value])}),iteratorFor(items)},support_iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Request(input,options){if(!(this instanceof Request))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var body=(options=options||{}).body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"same-origin",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.signal=options.signal||this.signal||function(){if("AbortController"in g)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(body),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==options.cache&&"no-cache"!==options.cache)){var reParamSearch=/([?&])_=[^&]*/;if(reParamSearch.test(this.url))this.url=this.url.replace(reParamSearch,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function Response(bodyInit,options){if(!(this instanceof Response))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(options||(options={}),this.type="default",this.status=void 0===options.status?200:options.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===options.statusText?"":""+options.statusText,this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:200,statusText:""});return response.ok=!1,response.status=0,response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status,headers:{location:url}})},exports.DOMException=g.DOMException;try{new exports.DOMException}catch(err){exports.DOMException=function(message,name){this.message=message,this.name=name;var error=Error(message);this.stack=error.stack},exports.DOMException.prototype=Object.create(Error.prototype),exports.DOMException.prototype.constructor=exports.DOMException}function fetch(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted)return reject(new exports.DOMException("Aborted","AbortError"));var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}if(xhr.onload=function(){var rawHeaders,headers,options={statusText:xhr.statusText,headers:(rawHeaders=xhr.getAllResponseHeaders()||"",headers=new Headers,rawHeaders.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(header){return 0===header.indexOf("\n")?header.substr(1,header.length):header}).forEach(function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();try{headers.append(key,value)}catch(error){console.warn("Response "+error.message)}}}),headers)};0===request.url.indexOf("file://")&&(xhr.status<200||xhr.status>599)?options.status=200:options.status=xhr.status,options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;setTimeout(function(){resolve(new Response(body,options))},0)},xhr.onerror=function(){setTimeout(function(){reject(new TypeError("Network request failed"))},0)},xhr.ontimeout=function(){setTimeout(function(){reject(new TypeError("Network request timed out"))},0)},xhr.onabort=function(){setTimeout(function(){reject(new exports.DOMException("Aborted","AbortError"))},0)},xhr.open(request.method,function fixUrl(url){try{return""===url&&g.location.href?g.location.href:url}catch(e){return url}}(request.url),!0),"include"===request.credentials?xhr.withCredentials=!0:"omit"===request.credentials&&(xhr.withCredentials=!1),"responseType"in xhr&&(support_blob?xhr.responseType="blob":support_arrayBuffer&&(xhr.responseType="arraybuffer")),init&&"object"==typeof init.headers&&!(init.headers instanceof Headers||g.Headers&&init.headers instanceof g.Headers)){var names=[];Object.getOwnPropertyNames(init.headers).forEach(function(name){names.push(normalizeName(name)),xhr.setRequestHeader(name,normalizeValue(init.headers[name]))}),request.headers.forEach(function(value,name){-1===names.indexOf(name)&&xhr.setRequestHeader(name,value)})}else request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});request.signal&&(request.signal.addEventListener("abort",abortXhr),xhr.onreadystatechange=function(){4===xhr.readyState&&request.signal.removeEventListener("abort",abortXhr)}),xhr.send(void 0===request._bodyInit?null:request._bodyInit)})}fetch.polyfill=!0,g.fetch||(g.fetch=fetch,g.Headers=Headers,g.Request=Request,g.Response=Response),exports.Headers=Headers,exports.Request=Request,exports.Response=Response,exports.fetch=fetch,Object.defineProperty(exports,"__esModule",{value:!0})}({})}(__globalThis__),__globalThis__.fetch.ponyfill=!0,delete __globalThis__.fetch.polyfill;var ctx=__global__.fetch?__global__:__globalThis__;(exports=ctx.fetch).default=ctx.fetch,exports.fetch=ctx.fetch,exports.Headers=ctx.Headers,exports.Request=ctx.Request,exports.Response=ctx.Response,module.exports=exports},"./node_modules/define-data-property/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $defineProperty=__webpack_require__("./node_modules/es-define-property/index.js"),$SyntaxError=__webpack_require__("./node_modules/es-errors/syntax.js"),$TypeError=__webpack_require__("./node_modules/es-errors/type.js"),gopd=__webpack_require__("./node_modules/gopd/index.js");module.exports=function defineDataProperty(obj,property,value){if(!obj||"object"!=typeof obj&&"function"!=typeof obj)throw new $TypeError("`obj` must be an object or a function`");if("string"!=typeof property&&"symbol"!=typeof property)throw new $TypeError("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new $TypeError("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new $TypeError("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new $TypeError("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new $TypeError("`loose`, if provided, must be a boolean");var nonEnumerable=arguments.length>3?arguments[3]:null,nonWritable=arguments.length>4?arguments[4]:null,nonConfigurable=arguments.length>5?arguments[5]:null,loose=arguments.length>6&&arguments[6],desc=!!gopd&&gopd(obj,property);if($defineProperty)$defineProperty(obj,property,{configurable:null===nonConfigurable&&desc?desc.configurable:!nonConfigurable,enumerable:null===nonEnumerable&&desc?desc.enumerable:!nonEnumerable,value,writable:null===nonWritable&&desc?desc.writable:!nonWritable});else{if(!loose&&(nonEnumerable||nonWritable||nonConfigurable))throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");obj[property]=value}}},"./node_modules/define-properties/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var keys=__webpack_require__("./node_modules/object-keys/index.js"),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,defineDataProperty=__webpack_require__("./node_modules/define-data-property/index.js"),supportsDescriptors=__webpack_require__("./node_modules/has-property-descriptors/index.js")(),defineProperty=function(object,name,value,predicate){if(name in object)if(!0===predicate){if(object[name]===value)return}else if("function"!=typeof(fn=predicate)||"[object Function]"!==toStr.call(fn)||!predicate())return;var fn;supportsDescriptors?defineDataProperty(object,name,value,!0):defineDataProperty(object,name,value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},"./node_modules/doctrine/lib/doctrine.js":(__unused_webpack_module,exports,__webpack_require__)=>{!function(){"use strict";var typed,utility,jsdoc,esutils,hasOwnProperty,func;function sliceSource(source,index,last){return source.slice(index,last)}function isASCIIAlphanumeric(ch){return ch>=97&&ch<=122||ch>=65&&ch<=90||ch>=48&&ch<=57}function isParamTitle(title){return"param"===title||"argument"===title||"arg"===title}function isReturnTitle(title){return"return"===title||"returns"===title}function isProperty(title){return"property"===title||"prop"===title}function isNameParameterRequired(title){return isParamTitle(title)||isProperty(title)||"alias"===title||"this"===title||"mixes"===title||"requires"===title}function isAllowedOptional(title){return isProperty(title)||isParamTitle(title)}function isTypeParameterRequired(title){return isParamTitle(title)||isReturnTitle(title)||"define"===title||"enum"===title||"implements"===title||"this"===title||"type"===title||"typedef"===title||isProperty(title)}esutils=__webpack_require__("./node_modules/esutils/lib/utils.js"),typed=__webpack_require__("./node_modules/doctrine/lib/typed.js"),utility=__webpack_require__("./node_modules/doctrine/lib/utility.js"),func=Object.prototype.hasOwnProperty,hasOwnProperty=function hasOwnProperty(obj,name){return func.call(obj,name)};var WHITESPACE="[ \\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",STAR_MATCHER="("+WHITESPACE+"*(?:\\*"+WHITESPACE+"?)?)(.+|[\r\n\u2028\u2029])";function unwrapComment(doc){return doc.replace(/^\/\*\*?/,"").replace(/\*\/$/,"").replace(new RegExp(STAR_MATCHER,"g"),"$2").replace(/\s*$/,"")}!function(exports){var Rules,index,lineNumber,length,source,originalSource,recoverable,sloppy,strict;function advance(){var ch=source.charCodeAt(index);return index+=1,!esutils.code.isLineTerminator(ch)||13===ch&&10===source.charCodeAt(index)||(lineNumber+=1),String.fromCharCode(ch)}function parseType(title,last,addRange){for(var ch,brace,type,startIndex,direct=!1;index<last;){if(ch=source.charCodeAt(index),!esutils.code.isWhiteSpace(ch)){if(123===ch){advance();break}direct=!0;break}advance()}if(direct)return null;for(brace=1,type="";index<last;)if(ch=source.charCodeAt(index),esutils.code.isLineTerminator(ch))advance();else{if(125===ch){if(0===(brace-=1)){advance();break}}else 123===ch&&(brace+=1);""===type&&(startIndex=index),type+=advance()}return 0!==brace?utility.throwError("Braces are not balanced"):isAllowedOptional(title)?typed.parseParamType(type,{startIndex:convertIndex(startIndex),range:addRange}):typed.parseType(type,{startIndex:convertIndex(startIndex),range:addRange})}function scanIdentifier(last){var identifier;if(!esutils.code.isIdentifierStartES5(source.charCodeAt(index))&&!source[index].match(/[0-9]/))return null;for(identifier=advance();index<last&&esutils.code.isIdentifierPartES5(source.charCodeAt(index));)identifier+=advance();return identifier}function skipWhiteSpace(last){for(;index<last&&(esutils.code.isWhiteSpace(source.charCodeAt(index))||esutils.code.isLineTerminator(source.charCodeAt(index)));)advance()}function parseName(last,allowBrackets,allowNestedParams){var useBrackets,insideString,name="";if(skipWhiteSpace(last),index>=last)return null;if(91===source.charCodeAt(index)){if(!allowBrackets)return null;useBrackets=!0,name=advance()}if(name+=scanIdentifier(last),allowNestedParams)for(58!==source.charCodeAt(index)||"module"!==name&&"external"!==name&&"event"!==name||(name+=advance(),name+=scanIdentifier(last)),91===source.charCodeAt(index)&&93===source.charCodeAt(index+1)&&(name+=advance(),name+=advance());46===source.charCodeAt(index)||47===source.charCodeAt(index)||35===source.charCodeAt(index)||45===source.charCodeAt(index)||126===source.charCodeAt(index);)name+=advance(),name+=scanIdentifier(last);if(useBrackets){if(skipWhiteSpace(last),61===source.charCodeAt(index)){var ch;name+=advance(),skipWhiteSpace(last);for(var bracketDepth=1;index<last;){if(ch=source.charCodeAt(index),esutils.code.isWhiteSpace(ch)&&(insideString||(skipWhiteSpace(last),ch=source.charCodeAt(index))),39===ch&&(insideString?"'"===insideString&&(insideString=""):insideString="'"),34===ch&&(insideString?'"'===insideString&&(insideString=""):insideString='"'),91===ch)bracketDepth++;else if(93===ch&&0===--bracketDepth)break;name+=advance()}}if(skipWhiteSpace(last),index>=last||93!==source.charCodeAt(index))return null;name+=advance()}return name}function convertIndex(rangeIndex){return source===originalSource?rangeIndex:function convertUnwrappedCommentIndex(originalSource,unwrappedIndex){for(var match,replacedSource=originalSource.replace(/^\/\*\*?/,""),numSkippedChars=0,matcher=new RegExp(STAR_MATCHER,"g");match=matcher.exec(replacedSource);)if(numSkippedChars+=match[1].length,match.index+match[0].length>unwrappedIndex+numSkippedChars)return unwrappedIndex+numSkippedChars+originalSource.length-replacedSource.length;return originalSource.replace(/\*\/$/,"").replace(/\s*$/,"").length}(originalSource,rangeIndex)}function TagParser(options,title){this._options=options,this._title=title.toLowerCase(),this._tag={title,description:null},this._options.lineNumbers&&(this._tag.lineNumber=lineNumber),this._first=index-title.length-1,this._last=0,this._extra={}}function parseTag(options){var parser,tag;if(!function skipToTag(){for(;index<length&&64!==source.charCodeAt(index);)advance();return!(index>=length||(utility.assert(64===source.charCodeAt(index)),0))}())return null;for(tag=(parser=new TagParser(options,function scanTitle(){var title="";for(advance();index<length&&isASCIIAlphanumeric(source.charCodeAt(index));)title+=advance();return title}())).parse();index<parser._last;)advance();return tag}TagParser.prototype.addError=function addError(errorText){var args=Array.prototype.slice.call(arguments,1),msg=errorText.replace(/%(\d)/g,function(whole,index){return utility.assert(index<args.length,"Message reference must be in range"),args[index]});return this._tag.errors||(this._tag.errors=[]),strict&&utility.throwError(msg),this._tag.errors.push(msg),recoverable},TagParser.prototype.parseType=function(){if(isTypeParameterRequired(this._title))try{if(this._tag.type=parseType(this._title,this._last,this._options.range),!(this._tag.type||isParamTitle(this._title)||isReturnTitle(this._title)||this.addError("Missing or invalid tag type")))return!1}catch(error){if(this._tag.type=null,!this.addError(error.message))return!1}else if(function isAllowedType(title){return isTypeParameterRequired(title)||"throws"===title||"const"===title||"constant"===title||"namespace"===title||"member"===title||"var"===title||"module"===title||"constructor"===title||"class"===title||"extends"===title||"augments"===title||"public"===title||"private"===title||"protected"===title}(this._title))try{this._tag.type=parseType(this._title,this._last,this._options.range)}catch(e){}return!0},TagParser.prototype._parseNamePath=function(optional){var name;return!!((name=parseName(this._last,sloppy&&isAllowedOptional(this._title),!0))||optional||this.addError("Missing or invalid tag name"))&&(this._tag.name=name,!0)},TagParser.prototype.parseNamePath=function(){return this._parseNamePath(!1)},TagParser.prototype.parseNamePathOptional=function(){return this._parseNamePath(!0)},TagParser.prototype.parseName=function(){var assign,name;if(function isAllowedName(title){return isNameParameterRequired(title)||"const"===title||"constant"===title}(this._title))if(this._tag.name=parseName(this._last,sloppy&&isAllowedOptional(this._title),function isAllowedNested(title){return isProperty(title)||isParamTitle(title)}(this._title)),this._tag.name)"["===(name=this._tag.name).charAt(0)&&"]"===name.charAt(name.length-1)&&((assign=name.substring(1,name.length-1).split("=")).length>1&&(this._tag.default=assign.slice(1).join("=")),this._tag.name=assign[0],this._tag.type&&"OptionalType"!==this._tag.type.type&&(this._tag.type={type:"OptionalType",expression:this._tag.type}));else{if(!isNameParameterRequired(this._title))return!0;if(isParamTitle(this._title)&&this._tag.type&&this._tag.type.name)this._extra.name=this._tag.type,this._tag.name=this._tag.type.name,this._tag.type=null;else if(!this.addError("Missing or invalid tag name"))return!1}return!0},TagParser.prototype.parseDescription=function parseDescription(){var description=sliceSource(source,index,this._last).trim();return description&&(/^-\s+/.test(description)&&(description=description.substring(2)),this._tag.description=description),!0},TagParser.prototype.parseCaption=function parseDescription(){var description=sliceSource(source,index,this._last).trim(),captionStart=description.indexOf("<caption>"),captionEnd=description.indexOf("</caption>");return captionStart>=0&&captionEnd>=0?(this._tag.caption=description.substring(captionStart+9,captionEnd).trim(),this._tag.description=description.substring(captionEnd+10).trim()):this._tag.description=description,!0},TagParser.prototype.parseKind=function parseKind(){var kind,kinds;return kinds={class:!0,constant:!0,event:!0,external:!0,file:!0,function:!0,member:!0,mixin:!0,module:!0,namespace:!0,typedef:!0},kind=sliceSource(source,index,this._last).trim(),this._tag.kind=kind,!(!hasOwnProperty(kinds,kind)&&!this.addError("Invalid kind name '%0'",kind))},TagParser.prototype.parseAccess=function parseAccess(){var access;return access=sliceSource(source,index,this._last).trim(),this._tag.access=access,!("private"!==access&&"protected"!==access&&"public"!==access&&!this.addError("Invalid access name '%0'",access))},TagParser.prototype.parseThis=function parseThis(){var value=sliceSource(source,index,this._last).trim();return value&&"{"===value.charAt(0)?this.parseType()&&"NameExpression"===this._tag.type.type||"UnionType"===this._tag.type.type?(this._tag.name=this._tag.type.name,!0):this.addError("Invalid name for this"):this.parseNamePath()},TagParser.prototype.parseVariation=function parseVariation(){var variation,text;return text=sliceSource(source,index,this._last).trim(),variation=parseFloat(text,10),this._tag.variation=variation,!(isNaN(variation)&&!this.addError("Invalid variation '%0'",text))},TagParser.prototype.ensureEnd=function(){var shouldBeEmpty=sliceSource(source,index,this._last).trim();return!(shouldBeEmpty&&!this.addError("Unknown content '%0'",shouldBeEmpty))},TagParser.prototype.epilogue=function epilogue(){var description;return description=this._tag.description,!(isAllowedOptional(this._title)&&!this._tag.type&&description&&"["===description.charAt(0)&&(this._tag.type=this._extra.name,this._tag.name||(this._tag.name=void 0),!sloppy&&!this.addError("Missing or invalid tag name")))},Rules={access:["parseAccess"],alias:["parseNamePath","ensureEnd"],augments:["parseType","parseNamePathOptional","ensureEnd"],constructor:["parseType","parseNamePathOptional","ensureEnd"],class:["parseType","parseNamePathOptional","ensureEnd"],extends:["parseType","parseNamePathOptional","ensureEnd"],example:["parseCaption"],deprecated:["parseDescription"],global:["ensureEnd"],inner:["ensureEnd"],instance:["ensureEnd"],kind:["parseKind"],mixes:["parseNamePath","ensureEnd"],mixin:["parseNamePathOptional","ensureEnd"],member:["parseType","parseNamePathOptional","ensureEnd"],method:["parseNamePathOptional","ensureEnd"],module:["parseType","parseNamePathOptional","ensureEnd"],func:["parseNamePathOptional","ensureEnd"],function:["parseNamePathOptional","ensureEnd"],var:["parseType","parseNamePathOptional","ensureEnd"],name:["parseNamePath","ensureEnd"],namespace:["parseType","parseNamePathOptional","ensureEnd"],private:["parseType","parseDescription"],protected:["parseType","parseDescription"],public:["parseType","parseDescription"],readonly:["ensureEnd"],requires:["parseNamePath","ensureEnd"],since:["parseDescription"],static:["ensureEnd"],summary:["parseDescription"],this:["parseThis","ensureEnd"],todo:["parseDescription"],typedef:["parseType","parseNamePathOptional"],variation:["parseVariation"],version:["parseDescription"]},TagParser.prototype.parse=function parse(){var i,iz,sequences;if(!this._title&&!this.addError("Missing or invalid title"))return null;for(this._last=function seekContent(){var ch,waiting,last=index;for(waiting=!1;last<length;){if(ch=source.charCodeAt(last),!esutils.code.isLineTerminator(ch)||13===ch&&10===source.charCodeAt(last+1)){if(waiting){if(64===ch)break;esutils.code.isWhiteSpace(ch)||(waiting=!1)}}else waiting=!0;last+=1}return last}(this._title),this._options.range&&(this._tag.range=[this._first,source.slice(0,this._last).replace(/\s*$/,"").length].map(convertIndex)),i=0,iz=(sequences=hasOwnProperty(Rules,this._title)?Rules[this._title]:["parseType","parseName","parseDescription","epilogue"]).length;i<iz;++i)if(!this[sequences[i]]())return null;return this._tag},exports.parse=function parse(comment,options){var tag,description,interestingTags,i,iz,tags=[];if(void 0===options&&(options={}),source="boolean"==typeof options.unwrap&&options.unwrap?unwrapComment(comment):comment,originalSource=comment,options.tags)if(Array.isArray(options.tags))for(interestingTags={},i=0,iz=options.tags.length;i<iz;i++)"string"==typeof options.tags[i]?interestingTags[options.tags[i]]=!0:utility.throwError('Invalid "tags" parameter: '+options.tags);else utility.throwError('Invalid "tags" parameter: '+options.tags);for(length=source.length,index=0,lineNumber=0,recoverable=options.recoverable,sloppy=options.sloppy,strict=options.strict,description=function scanJSDocDescription(preserveWhitespace){var ch,atAllowed,description="";for(atAllowed=!0;index<length&&(ch=source.charCodeAt(index),!atAllowed||64!==ch);)esutils.code.isLineTerminator(ch)?atAllowed=!0:atAllowed&&!esutils.code.isWhiteSpace(ch)&&(atAllowed=!1),description+=advance();return preserveWhitespace?description:description.trim()}(options.preserveWhitespace);tag=parseTag(options);)interestingTags&&!interestingTags.hasOwnProperty(tag.title)||tags.push(tag);return{description,tags}}}(jsdoc={}),utility.VERSION,typed.parseType,typed.parseParamType,exports.w4=function shallowCopy(obj){var key,ret={};for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=obj[key]);return ret}(typed.Syntax),utility.DoctrineError,{Syntax:exports.w4,parseType:typed.parseType,parseParamType:typed.parseParamType,stringify:typed.stringify}}()},"./node_modules/doctrine/lib/typed.js":(__unused_webpack_module,exports,__webpack_require__)=>{!function(){"use strict";var Syntax,Token,source,length,index,previous,token,value,esutils,utility,rangeOffset,addRange;function isTypeName(ch){return-1==="><(){}[],:*|?!=".indexOf(String.fromCharCode(ch))&&!esutils.code.isWhiteSpace(ch)&&!esutils.code.isLineTerminator(ch)}function Context(previous,index,token,value){this._previous=previous,this._index=index,this._token=token,this._value=value}function maybeAddRange(node,range){return addRange&&(node.range=[range[0]+rangeOffset,range[1]+rangeOffset]),node}function advance(){var ch=source.charAt(index);return index+=1,ch}function scanHexEscape(prefix){var i,len,ch,code=0;for(len="u"===prefix?4:2,i=0;i<len;++i){if(!(index<length&&esutils.code.isHexDigit(source.charCodeAt(index))))return"";ch=advance(),code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase())}return String.fromCharCode(code)}function scanNumber(){var number,ch;if(number="",46!==(ch=source.charCodeAt(index))){if(number=advance(),ch=source.charCodeAt(index),"0"===number){if(120===ch||88===ch){for(number+=advance();index<length&&(ch=source.charCodeAt(index),esutils.code.isHexDigit(ch));)number+=advance();return number.length<=2&&utility.throwError("unexpected token"),index<length&&(ch=source.charCodeAt(index),esutils.code.isIdentifierStartES5(ch)&&utility.throwError("unexpected token")),value=parseInt(number,16),Token.NUMBER}if(esutils.code.isOctalDigit(ch)){for(number+=advance();index<length&&(ch=source.charCodeAt(index),esutils.code.isOctalDigit(ch));)number+=advance();return index<length&&(ch=source.charCodeAt(index),(esutils.code.isIdentifierStartES5(ch)||esutils.code.isDecimalDigit(ch))&&utility.throwError("unexpected token")),value=parseInt(number,8),Token.NUMBER}esutils.code.isDecimalDigit(ch)&&utility.throwError("unexpected token")}for(;index<length&&(ch=source.charCodeAt(index),esutils.code.isDecimalDigit(ch));)number+=advance()}if(46===ch)for(number+=advance();index<length&&(ch=source.charCodeAt(index),esutils.code.isDecimalDigit(ch));)number+=advance();if(101===ch||69===ch)if(number+=advance(),43!==(ch=source.charCodeAt(index))&&45!==ch||(number+=advance()),ch=source.charCodeAt(index),esutils.code.isDecimalDigit(ch))for(number+=advance();index<length&&(ch=source.charCodeAt(index),esutils.code.isDecimalDigit(ch));)number+=advance();else utility.throwError("unexpected token");return index<length&&(ch=source.charCodeAt(index),esutils.code.isIdentifierStartES5(ch)&&utility.throwError("unexpected token")),value=parseFloat(number),Token.NUMBER}function next(){var ch;for(previous=index;index<length&&esutils.code.isWhiteSpace(source.charCodeAt(index));)advance();if(index>=length)return token=Token.EOF;switch(ch=source.charCodeAt(index)){case 39:case 34:return token=function scanString(){var quote,ch,code,unescaped,restore,str="";for(quote=source.charAt(index),++index;index<length;){if((ch=advance())===quote){quote="";break}if("\\"===ch)if(ch=advance(),esutils.code.isLineTerminator(ch.charCodeAt(0)))"\r"===ch&&10===source.charCodeAt(index)&&++index;else switch(ch){case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"u":case"x":restore=index,(unescaped=scanHexEscape(ch))?str+=unescaped:(index=restore,str+=ch);break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;default:esutils.code.isOctalDigit(ch.charCodeAt(0))?(code="01234567".indexOf(ch),index<length&&esutils.code.isOctalDigit(source.charCodeAt(index))&&(code=8*code+"01234567".indexOf(advance()),"0123".indexOf(ch)>=0&&index<length&&esutils.code.isOctalDigit(source.charCodeAt(index))&&(code=8*code+"01234567".indexOf(advance()))),str+=String.fromCharCode(code)):str+=ch}else{if(esutils.code.isLineTerminator(ch.charCodeAt(0)))break;str+=ch}}return""!==quote&&utility.throwError("unexpected quote"),value=str,Token.STRING}(),token;case 58:return advance(),token=Token.COLON;case 44:return advance(),token=Token.COMMA;case 40:return advance(),token=Token.LPAREN;case 41:return advance(),token=Token.RPAREN;case 91:return advance(),token=Token.LBRACK;case 93:return advance(),token=Token.RBRACK;case 123:return advance(),token=Token.LBRACE;case 125:return advance(),token=Token.RBRACE;case 46:if(index+1<length){if(60===(ch=source.charCodeAt(index+1)))return advance(),advance(),token=Token.DOT_LT;if(46===ch&&index+2<length&&46===source.charCodeAt(index+2))return advance(),advance(),advance(),token=Token.REST;if(esutils.code.isDecimalDigit(ch))return token=scanNumber()}return token=Token.ILLEGAL;case 60:return advance(),token=Token.LT;case 62:return advance(),token=Token.GT;case 42:return advance(),token=Token.STAR;case 124:return advance(),token=Token.PIPE;case 63:return advance(),token=Token.QUESTION;case 33:return advance(),token=Token.BANG;case 61:return advance(),token=Token.EQUAL;case 45:return token=scanNumber();default:return esutils.code.isDecimalDigit(ch)?token=scanNumber():(utility.assert(isTypeName(ch)),token=function scanTypeName(){for(value=advance();index<length&&isTypeName(source.charCodeAt(index));){if(46===source.charCodeAt(index)){if(index+1>=length)return Token.ILLEGAL;if(60===source.charCodeAt(index+1))break}value+=advance()}return Token.NAME}())}}function consume(target,text){utility.assert(token===target,text||"consumed token not matched"),next()}function expect(target,message){token!==target&&utility.throwError(message||"unexpected token"),next()}function parseFieldType(){var key,rangeStart=previous;return key=function parseFieldName(){var v=value;return token===Token.NAME||token===Token.STRING?(next(),v):token===Token.NUMBER?(consume(Token.NUMBER),String(v)):void utility.throwError("unexpected token")}(),token===Token.COLON?(consume(Token.COLON),maybeAddRange({type:Syntax.FieldType,key,value:parseTypeExpression()},[rangeStart,previous])):maybeAddRange({type:Syntax.FieldType,key,value:null},[rangeStart,previous])}function parseTypeName(){var expr,applications,startIndex=index-value.length;return expr=function parseNameExpression(){var name=value,rangeStart=index-name.length;return expect(Token.NAME),token!==Token.COLON||"module"!==name&&"external"!==name&&"event"!==name||(consume(Token.COLON),name+=":"+value,expect(Token.NAME)),maybeAddRange({type:Syntax.NameExpression,name},[rangeStart,previous])}(),token===Token.DOT_LT||token===Token.LT?(next(),applications=function parseTypeExpressionList(){var elements=[];for(elements.push(parseTop());token===Token.COMMA;)consume(Token.COMMA),elements.push(parseTop());return elements}(),expect(Token.GT),maybeAddRange({type:Syntax.TypeApplication,expression:expr,applications},[startIndex,previous])):expr}function parseParametersType(){for(var expr,startIndex,nameStartIndex,params=[],optionalSequence=!1,rest=!1,restStartIndex=index-3;token!==Token.RPAREN;)token===Token.REST&&(consume(Token.REST),rest=!0),startIndex=previous,(expr=parseTypeExpression()).type===Syntax.NameExpression&&token===Token.COLON&&(nameStartIndex=previous-expr.name.length,consume(Token.COLON),expr=maybeAddRange({type:Syntax.ParameterType,name:expr.name,expression:parseTypeExpression()},[nameStartIndex,previous])),token===Token.EQUAL?(consume(Token.EQUAL),expr=maybeAddRange({type:Syntax.OptionalType,expression:expr},[startIndex,previous]),optionalSequence=!0):optionalSequence&&utility.throwError("unexpected token"),rest&&(expr=maybeAddRange({type:Syntax.RestType,expression:expr},[restStartIndex,previous])),params.push(expr),token!==Token.RPAREN&&expect(Token.COMMA);return params}function parseFunctionType(){var isNew,thisBinding,params,result,fnType,startIndex=index-value.length;return utility.assert(token===Token.NAME&&"function"===value,"FunctionType should start with 'function'"),consume(Token.NAME),expect(Token.LPAREN),isNew=!1,params=[],thisBinding=null,token!==Token.RPAREN&&(token!==Token.NAME||"this"!==value&&"new"!==value?params=parseParametersType():(isNew="new"===value,consume(Token.NAME),expect(Token.COLON),thisBinding=parseTypeName(),token===Token.COMMA&&(consume(Token.COMMA),params=parseParametersType()))),expect(Token.RPAREN),result=null,token===Token.COLON&&(result=function parseResultType(){return consume(Token.COLON,"ResultType should start with :"),token===Token.NAME&&"void"===value?(consume(Token.NAME),{type:Syntax.VoidLiteral}):parseTypeExpression()}()),fnType=maybeAddRange({type:Syntax.FunctionType,params,result},[startIndex,previous]),thisBinding&&(fnType.this=thisBinding,isNew&&(fnType.new=!0)),fnType}function parseBasicTypeExpression(){var context,startIndex;switch(token){case Token.STAR:return consume(Token.STAR),maybeAddRange({type:Syntax.AllLiteral},[previous-1,previous]);case Token.LPAREN:return function parseUnionType(){var elements,startIndex=index-1;if(consume(Token.LPAREN,"UnionType should start with ("),elements=[],token!==Token.RPAREN)for(;elements.push(parseTypeExpression()),token!==Token.RPAREN;)expect(Token.PIPE);return consume(Token.RPAREN,"UnionType should end with )"),maybeAddRange({type:Syntax.UnionType,elements},[startIndex,previous])}();case Token.LBRACK:return function parseArrayType(){var elements,restStartIndex,startIndex=index-1;for(consume(Token.LBRACK,"ArrayType should start with ["),elements=[];token!==Token.RBRACK;){if(token===Token.REST){restStartIndex=index-3,consume(Token.REST),elements.push(maybeAddRange({type:Syntax.RestType,expression:parseTypeExpression()},[restStartIndex,previous]));break}elements.push(parseTypeExpression()),token!==Token.RBRACK&&expect(Token.COMMA)}return expect(Token.RBRACK),maybeAddRange({type:Syntax.ArrayType,elements},[startIndex,previous])}();case Token.LBRACE:return function parseRecordType(){var fields,rangeEnd,rangeStart=index-1;if(consume(Token.LBRACE,"RecordType should start with {"),fields=[],token===Token.COMMA)consume(Token.COMMA);else for(;token!==Token.RBRACE;)fields.push(parseFieldType()),token!==Token.RBRACE&&expect(Token.COMMA);return rangeEnd=index,expect(Token.RBRACE),maybeAddRange({type:Syntax.RecordType,fields},[rangeStart,rangeEnd])}();case Token.NAME:if(startIndex=index-value.length,"null"===value)return consume(Token.NAME),maybeAddRange({type:Syntax.NullLiteral},[startIndex,previous]);if("undefined"===value)return consume(Token.NAME),maybeAddRange({type:Syntax.UndefinedLiteral},[startIndex,previous]);if("true"===value||"false"===value)return consume(Token.NAME),maybeAddRange({type:Syntax.BooleanLiteralType,value:"true"===value},[startIndex,previous]);if(context=Context.save(),"function"===value)try{return parseFunctionType()}catch(e){context.restore()}return parseTypeName();case Token.STRING:return next(),maybeAddRange({type:Syntax.StringLiteralType,value},[previous-value.length-2,previous]);case Token.NUMBER:return next(),maybeAddRange({type:Syntax.NumericLiteralType,value},[previous-String(value).length,previous]);default:utility.throwError("unexpected token")}}function parseTypeExpression(){var expr,rangeStart;return token===Token.QUESTION?(rangeStart=index-1,consume(Token.QUESTION),maybeAddRange(token===Token.COMMA||token===Token.EQUAL||token===Token.RBRACE||token===Token.RPAREN||token===Token.PIPE||token===Token.EOF||token===Token.RBRACK||token===Token.GT?{type:Syntax.NullableLiteral}:{type:Syntax.NullableType,expression:parseBasicTypeExpression(),prefix:!0},[rangeStart,previous])):token===Token.BANG?(rangeStart=index-1,consume(Token.BANG),maybeAddRange({type:Syntax.NonNullableType,expression:parseBasicTypeExpression(),prefix:!0},[rangeStart,previous])):(rangeStart=previous,expr=parseBasicTypeExpression(),token===Token.BANG?(consume(Token.BANG),maybeAddRange({type:Syntax.NonNullableType,expression:expr,prefix:!1},[rangeStart,previous])):token===Token.QUESTION?(consume(Token.QUESTION),maybeAddRange({type:Syntax.NullableType,expression:expr,prefix:!1},[rangeStart,previous])):token===Token.LBRACK?(consume(Token.LBRACK),expect(Token.RBRACK,"expected an array-style type declaration ("+value+"[])"),maybeAddRange({type:Syntax.TypeApplication,expression:maybeAddRange({type:Syntax.NameExpression,name:"Array"},[rangeStart,previous]),applications:[expr]},[rangeStart,previous])):expr)}function parseTop(){var expr,elements;if(expr=parseTypeExpression(),token!==Token.PIPE)return expr;for(elements=[expr],consume(Token.PIPE);elements.push(parseTypeExpression()),token===Token.PIPE;)consume(Token.PIPE);return maybeAddRange({type:Syntax.UnionType,elements},[0,index])}function stringifyImpl(node,compact,topLevel){var result,i,iz;switch(node.type){case Syntax.NullableLiteral:result="?";break;case Syntax.AllLiteral:result="*";break;case Syntax.NullLiteral:result="null";break;case Syntax.UndefinedLiteral:result="undefined";break;case Syntax.VoidLiteral:result="void";break;case Syntax.UnionType:for(result=topLevel?"":"(",i=0,iz=node.elements.length;i<iz;++i)result+=stringifyImpl(node.elements[i],compact),i+1!==iz&&(result+=compact?"|":" | ");topLevel||(result+=")");break;case Syntax.ArrayType:for(result="[",i=0,iz=node.elements.length;i<iz;++i)result+=stringifyImpl(node.elements[i],compact),i+1!==iz&&(result+=compact?",":", ");result+="]";break;case Syntax.RecordType:for(result="{",i=0,iz=node.fields.length;i<iz;++i)result+=stringifyImpl(node.fields[i],compact),i+1!==iz&&(result+=compact?",":", ");result+="}";break;case Syntax.FieldType:result=node.value?node.key+(compact?":":": ")+stringifyImpl(node.value,compact):node.key;break;case Syntax.FunctionType:for(result=compact?"function(":"function (",node.this&&(node.new?result+=compact?"new:":"new: ":result+=compact?"this:":"this: ",result+=stringifyImpl(node.this,compact),0!==node.params.length&&(result+=compact?",":", ")),i=0,iz=node.params.length;i<iz;++i)result+=stringifyImpl(node.params[i],compact),i+1!==iz&&(result+=compact?",":", ");result+=")",node.result&&(result+=(compact?":":": ")+stringifyImpl(node.result,compact));break;case Syntax.ParameterType:result=node.name+(compact?":":": ")+stringifyImpl(node.expression,compact);break;case Syntax.RestType:result="...",node.expression&&(result+=stringifyImpl(node.expression,compact));break;case Syntax.NonNullableType:result=node.prefix?"!"+stringifyImpl(node.expression,compact):stringifyImpl(node.expression,compact)+"!";break;case Syntax.OptionalType:result=stringifyImpl(node.expression,compact)+"=";break;case Syntax.NullableType:result=node.prefix?"?"+stringifyImpl(node.expression,compact):stringifyImpl(node.expression,compact)+"?";break;case Syntax.NameExpression:result=node.name;break;case Syntax.TypeApplication:for(result=stringifyImpl(node.expression,compact)+".<",i=0,iz=node.applications.length;i<iz;++i)result+=stringifyImpl(node.applications[i],compact),i+1!==iz&&(result+=compact?",":", ");result+=">";break;case Syntax.StringLiteralType:result='"'+node.value+'"';break;case Syntax.NumericLiteralType:case Syntax.BooleanLiteralType:result=String(node.value);break;default:utility.throwError("Unknown type "+node.type)}return result}esutils=__webpack_require__("./node_modules/esutils/lib/utils.js"),utility=__webpack_require__("./node_modules/doctrine/lib/utility.js"),Syntax={NullableLiteral:"NullableLiteral",AllLiteral:"AllLiteral",NullLiteral:"NullLiteral",UndefinedLiteral:"UndefinedLiteral",VoidLiteral:"VoidLiteral",UnionType:"UnionType",ArrayType:"ArrayType",RecordType:"RecordType",FieldType:"FieldType",FunctionType:"FunctionType",ParameterType:"ParameterType",RestType:"RestType",NonNullableType:"NonNullableType",OptionalType:"OptionalType",NullableType:"NullableType",NameExpression:"NameExpression",TypeApplication:"TypeApplication",StringLiteralType:"StringLiteralType",NumericLiteralType:"NumericLiteralType",BooleanLiteralType:"BooleanLiteralType"},Token={ILLEGAL:0,DOT_LT:1,REST:2,LT:3,GT:4,LPAREN:5,RPAREN:6,LBRACE:7,RBRACE:8,LBRACK:9,RBRACK:10,COMMA:11,COLON:12,STAR:13,PIPE:14,QUESTION:15,BANG:16,EQUAL:17,NAME:18,STRING:19,NUMBER:20,EOF:21},Context.prototype.restore=function(){previous=this._previous,index=this._index,token=this._token,value=this._value},Context.save=function(){return new Context(previous,index,token,value)},exports.parseType=function parseType(src,opt){var expr;return length=(source=src).length,index=0,previous=0,addRange=opt&&opt.range,rangeOffset=opt&&opt.startIndex||0,next(),expr=parseTop(),opt&&opt.midstream?{expression:expr,index:previous}:(token!==Token.EOF&&utility.throwError("not reach to EOF"),expr)},exports.parseParamType=function parseParamType(src,opt){var expr;return length=(source=src).length,index=0,previous=0,addRange=opt&&opt.range,rangeOffset=opt&&opt.startIndex||0,next(),expr=function parseTopParamType(){var expr;return token===Token.REST?(consume(Token.REST),maybeAddRange({type:Syntax.RestType,expression:parseTop()},[0,index])):(expr=parseTop(),token===Token.EQUAL?(consume(Token.EQUAL),maybeAddRange({type:Syntax.OptionalType,expression:expr},[0,index])):expr)}(),opt&&opt.midstream?{expression:expr,index:previous}:(token!==Token.EOF&&utility.throwError("not reach to EOF"),expr)},exports.stringify=function stringify(node,options){return null==options&&(options={}),stringifyImpl(node,options.compact,options.topLevel)},exports.Syntax=Syntax}()},"./node_modules/doctrine/lib/utility.js":(__unused_webpack_module,exports,__webpack_require__)=>{!function(){"use strict";var VERSION,Middle;function DoctrineError(message){this.name="DoctrineError",this.message=message}VERSION=__webpack_require__("./node_modules/doctrine/package.json").rE,exports.VERSION=VERSION,DoctrineError.prototype=((Middle=function(){}).prototype=Error.prototype,new Middle),DoctrineError.prototype.constructor=DoctrineError,exports.DoctrineError=DoctrineError,exports.throwError=function throwError(message){throw new DoctrineError(message)},exports.assert=__webpack_require__("./node_modules/assert/build/assert.js")}()},"./node_modules/doctrine/package.json":module=>{"use strict";module.exports={rE:"3.0.0"}},"./node_modules/dunder-proto/get.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasProtoAccessor,callBind=__webpack_require__("./node_modules/call-bind-apply-helpers/index.js"),gOPD=__webpack_require__("./node_modules/gopd/index.js");try{hasProtoAccessor=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var desc=!!hasProtoAccessor&&gOPD&&gOPD(Object.prototype,"__proto__"),$Object=Object,$getPrototypeOf=$Object.getPrototypeOf;module.exports=desc&&"function"==typeof desc.get?callBind([desc.get]):"function"==typeof $getPrototypeOf&&function getDunder(value){return $getPrototypeOf(null==value?value:$Object(value))}},"./node_modules/es-define-property/index.js":module=>{"use strict";var $defineProperty=Object.defineProperty||!1;if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=!1}module.exports=$defineProperty},"./node_modules/es-errors/eval.js":module=>{"use strict";module.exports=EvalError},"./node_modules/es-errors/index.js":module=>{"use strict";module.exports=Error},"./node_modules/es-errors/range.js":module=>{"use strict";module.exports=RangeError},"./node_modules/es-errors/ref.js":module=>{"use strict";module.exports=ReferenceError},"./node_modules/es-errors/syntax.js":module=>{"use strict";module.exports=SyntaxError},"./node_modules/es-errors/type.js":module=>{"use strict";module.exports=TypeError},"./node_modules/es-errors/uri.js":module=>{"use strict";module.exports=URIError},"./node_modules/es-object-atoms/index.js":module=>{"use strict";module.exports=Object},"./node_modules/esutils/lib/ast.js":module=>{!function(){"use strict";function isStatement(node){if(null==node)return!1;switch(node.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function trailingStatement(node){switch(node.type){case"IfStatement":return null!=node.alternate?node.alternate:node.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return node.body}return null}module.exports={isExpression:function isExpression(node){if(null==node)return!1;switch(node.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1},isStatement,isIterationStatement:function isIterationStatement(node){if(null==node)return!1;switch(node.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1},isSourceElement:function isSourceElement(node){return isStatement(node)||null!=node&&"FunctionDeclaration"===node.type},isProblematicIfStatement:function isProblematicIfStatement(node){var current;if("IfStatement"!==node.type)return!1;if(null==node.alternate)return!1;current=node.consequent;do{if("IfStatement"===current.type&&null==current.alternate)return!0;current=trailingStatement(current)}while(current);return!1},trailingStatement}}()},"./node_modules/esutils/lib/code.js":module=>{!function(){"use strict";var ES6Regex,ES5Regex,NON_ASCII_WHITESPACES,IDENTIFIER_START,IDENTIFIER_PART,ch;function fromCodePoint(cp){return cp<=65535?String.fromCharCode(cp):String.fromCharCode(Math.floor((cp-65536)/1024)+55296)+String.fromCharCode((cp-65536)%1024+56320)}for(ES5Regex={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},ES6Regex={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},NON_ASCII_WHITESPACES=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],IDENTIFIER_START=new Array(128),ch=0;ch<128;++ch)IDENTIFIER_START[ch]=ch>=97&&ch<=122||ch>=65&&ch<=90||36===ch||95===ch;for(IDENTIFIER_PART=new Array(128),ch=0;ch<128;++ch)IDENTIFIER_PART[ch]=ch>=97&&ch<=122||ch>=65&&ch<=90||ch>=48&&ch<=57||36===ch||95===ch;module.exports={isDecimalDigit:function isDecimalDigit(ch){return 48<=ch&&ch<=57},isHexDigit:function isHexDigit(ch){return 48<=ch&&ch<=57||97<=ch&&ch<=102||65<=ch&&ch<=70},isOctalDigit:function isOctalDigit(ch){return ch>=48&&ch<=55},isWhiteSpace:function isWhiteSpace(ch){return 32===ch||9===ch||11===ch||12===ch||160===ch||ch>=5760&&NON_ASCII_WHITESPACES.indexOf(ch)>=0},isLineTerminator:function isLineTerminator(ch){return 10===ch||13===ch||8232===ch||8233===ch},isIdentifierStartES5:function isIdentifierStartES5(ch){return ch<128?IDENTIFIER_START[ch]:ES5Regex.NonAsciiIdentifierStart.test(fromCodePoint(ch))},isIdentifierPartES5:function isIdentifierPartES5(ch){return ch<128?IDENTIFIER_PART[ch]:ES5Regex.NonAsciiIdentifierPart.test(fromCodePoint(ch))},isIdentifierStartES6:function isIdentifierStartES6(ch){return ch<128?IDENTIFIER_START[ch]:ES6Regex.NonAsciiIdentifierStart.test(fromCodePoint(ch))},isIdentifierPartES6:function isIdentifierPartES6(ch){return ch<128?IDENTIFIER_PART[ch]:ES6Regex.NonAsciiIdentifierPart.test(fromCodePoint(ch))}}}()},"./node_modules/esutils/lib/keyword.js":(module,__unused_webpack_exports,__webpack_require__)=>{!function(){"use strict";var code=__webpack_require__("./node_modules/esutils/lib/code.js");function isKeywordES5(id,strict){return!(!strict&&"yield"===id)&&isKeywordES6(id,strict)}function isKeywordES6(id,strict){if(strict&&function isStrictModeReservedWordES6(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}(id))return!0;switch(id.length){case 2:return"if"===id||"in"===id||"do"===id;case 3:return"var"===id||"for"===id||"new"===id||"try"===id;case 4:return"this"===id||"else"===id||"case"===id||"void"===id||"with"===id||"enum"===id;case 5:return"while"===id||"break"===id||"catch"===id||"throw"===id||"const"===id||"yield"===id||"class"===id||"super"===id;case 6:return"return"===id||"typeof"===id||"delete"===id||"switch"===id||"export"===id||"import"===id;case 7:return"default"===id||"finally"===id||"extends"===id;case 8:return"function"===id||"continue"===id||"debugger"===id;case 10:return"instanceof"===id;default:return!1}}function isReservedWordES5(id,strict){return"null"===id||"true"===id||"false"===id||isKeywordES5(id,strict)}function isReservedWordES6(id,strict){return"null"===id||"true"===id||"false"===id||isKeywordES6(id,strict)}function isIdentifierNameES5(id){var i,iz,ch;if(0===id.length)return!1;if(ch=id.charCodeAt(0),!code.isIdentifierStartES5(ch))return!1;for(i=1,iz=id.length;i<iz;++i)if(ch=id.charCodeAt(i),!code.isIdentifierPartES5(ch))return!1;return!0}function decodeUtf16(lead,trail){return 1024*(lead-55296)+(trail-56320)+65536}function isIdentifierNameES6(id){var i,iz,ch,lowCh,check;if(0===id.length)return!1;for(check=code.isIdentifierStartES6,i=0,iz=id.length;i<iz;++i){if(55296<=(ch=id.charCodeAt(i))&&ch<=56319){if(++i>=iz)return!1;if(!(56320<=(lowCh=id.charCodeAt(i))&&lowCh<=57343))return!1;ch=decodeUtf16(ch,lowCh)}if(!check(ch))return!1;check=code.isIdentifierPartES6}return!0}module.exports={isKeywordES5,isKeywordES6,isReservedWordES5,isReservedWordES6,isRestrictedWord:function isRestrictedWord(id){return"eval"===id||"arguments"===id},isIdentifierNameES5,isIdentifierNameES6,isIdentifierES5:function isIdentifierES5(id,strict){return isIdentifierNameES5(id)&&!isReservedWordES5(id,strict)},isIdentifierES6:function isIdentifierES6(id,strict){return isIdentifierNameES6(id)&&!isReservedWordES6(id,strict)}}}()},"./node_modules/esutils/lib/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{!function(){"use strict";exports.ast=__webpack_require__("./node_modules/esutils/lib/ast.js"),exports.code=__webpack_require__("./node_modules/esutils/lib/code.js"),exports.keyword=__webpack_require__("./node_modules/esutils/lib/keyword.js")}()},"./node_modules/for-each/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isCallable=__webpack_require__("./node_modules/is-callable/index.js"),toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function forEach(list,iterator,thisArg){if(!isCallable(iterator))throw new TypeError("iterator must be a function");var receiver;arguments.length>=3&&(receiver=thisArg),function isArray(x){return"[object Array]"===toStr.call(x)}(list)?function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++)hasOwnProperty.call(array,i)&&(null==receiver?iterator(array[i],i,array):iterator.call(receiver,array[i],i,array))}(list,iterator,receiver):"string"==typeof list?function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++)null==receiver?iterator(string.charAt(i),i,string):iterator.call(receiver,string.charAt(i),i,string)}(list,iterator,receiver):function forEachObject(object,iterator,receiver){for(var k in object)hasOwnProperty.call(object,k)&&(null==receiver?iterator(object[k],k,object):iterator.call(receiver,object[k],k,object))}(list,iterator,receiver)}},"./node_modules/function-bind/implementation.js":module=>{"use strict";var toStr=Object.prototype.toString,max=Math.max,concatty=function concatty(a,b){for(var arr=[],i=0;i<a.length;i+=1)arr[i]=a[i];for(var j=0;j<b.length;j+=1)arr[j+a.length]=b[j];return arr};module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.apply(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=function slicy(arrLike,offset){for(var arr=[],i=offset||0,j=0;i<arrLike.length;i+=1,j+=1)arr[j]=arrLike[i];return arr}(arguments,1),boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs[i]="$"+i;if(bound=Function("binder","return function ("+function(arr,joiner){for(var str="",i=0;i<arr.length;i+=1)str+=arr[i],i+1<arr.length&&(str+=joiner);return str}(boundArgs,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof bound){var result=target.apply(this,concatty(args,arguments));return Object(result)===result?result:this}return target.apply(that,concatty(args,arguments))}),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},"./node_modules/function-bind/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("./node_modules/function-bind/implementation.js");module.exports=Function.prototype.bind||implementation},"./node_modules/generator-function/index.js":module=>{"use strict";const cached=function*(){}.constructor;module.exports=()=>cached},"./node_modules/get-intrinsic/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $Object=__webpack_require__("./node_modules/es-object-atoms/index.js"),$Error=__webpack_require__("./node_modules/es-errors/index.js"),$EvalError=__webpack_require__("./node_modules/es-errors/eval.js"),$RangeError=__webpack_require__("./node_modules/es-errors/range.js"),$ReferenceError=__webpack_require__("./node_modules/es-errors/ref.js"),$SyntaxError=__webpack_require__("./node_modules/es-errors/syntax.js"),$TypeError=__webpack_require__("./node_modules/es-errors/type.js"),$URIError=__webpack_require__("./node_modules/es-errors/uri.js"),abs=__webpack_require__("./node_modules/math-intrinsics/abs.js"),floor=__webpack_require__("./node_modules/math-intrinsics/floor.js"),max=__webpack_require__("./node_modules/math-intrinsics/max.js"),min=__webpack_require__("./node_modules/math-intrinsics/min.js"),pow=__webpack_require__("./node_modules/math-intrinsics/pow.js"),round=__webpack_require__("./node_modules/math-intrinsics/round.js"),sign=__webpack_require__("./node_modules/math-intrinsics/sign.js"),$Function=Function,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}},$gOPD=__webpack_require__("./node_modules/gopd/index.js"),$defineProperty=__webpack_require__("./node_modules/es-define-property/index.js"),throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__("./node_modules/has-symbols/index.js")(),getProto=__webpack_require__("./node_modules/get-proto/index.js"),$ObjectGPO=__webpack_require__("./node_modules/get-proto/Object.getPrototypeOf.js"),$ReflectGPO=__webpack_require__("./node_modules/get-proto/Reflect.getPrototypeOf.js"),$apply=__webpack_require__("./node_modules/call-bind-apply-helpers/functionApply.js"),$call=__webpack_require__("./node_modules/call-bind-apply-helpers/functionCall.js"),needsEval={},TypedArray="undefined"!=typeof Uint8Array&&getProto?getProto(Uint8Array):undefined,INTRINSICS={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?undefined:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?undefined:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float16Array%":"undefined"==typeof Float16Array?undefined:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols&&getProto?getProto((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":$Object,"%Object.getOwnPropertyDescriptor%":$gOPD,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols&&getProto?getProto((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":$URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet,"%Function.prototype.call%":$call,"%Function.prototype.apply%":$apply,"%Object.defineProperty%":$defineProperty,"%Object.getPrototypeOf%":$ObjectGPO,"%Math.abs%":abs,"%Math.floor%":floor,"%Math.max%":max,"%Math.min%":min,"%Math.pow%":pow,"%Math.round%":round,"%Math.sign%":sign,"%Reflect.getPrototypeOf%":$ReflectGPO};if(getProto)try{null.error}catch(e){var errorProto=getProto(getProto(e));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function doEval(name){var value;if("%AsyncFunction%"===name)value=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===name)value=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===name)value=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===name){var fn=doEval("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if("%AsyncIteratorPrototype%"===name){var gen=doEval("%AsyncGenerator%");gen&&getProto&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=__webpack_require__("./node_modules/function-bind/index.js"),hasOwn=__webpack_require__("./node_modules/hasown/index.js"),$concat=bind.call($call,Array.prototype.concat),$spliceApply=bind.call($apply,Array.prototype.splice),$replace=bind.call($call,String.prototype.replace),$strSlice=bind.call($call,String.prototype.slice),$exec=bind.call($call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var alias,intrinsicName=name;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(intrinsicName="%"+(alias=LEGACY_ALIASES[intrinsicName])[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=doEval(intrinsicName)),void 0===value&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias,name:intrinsicName,value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function GetIntrinsic(name,allowMissing){if("string"!=typeof name||0===name.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new $TypeError('"allowMissing" argument must be a boolean');if(null===$exec(/^%?[^%]*%?$/,name))throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var parts=function stringToPath(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if("%"===first&&"%"!==last)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===last&&"%"!==first)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match}),result}(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if(('"'===first||"'"===first||"`"===first||'"'===last||"'"===last||"`"===last)&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==part&&isOwn||(skipFurtherCaching=!0),hasOwn(INTRINSICS,intrinsicRealName="%"+(intrinsicBaseName+="."+part)+"%"))value=INTRINSICS[intrinsicRealName];else if(null!=value){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);value=(isOwn=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}},"./node_modules/get-proto/Object.getPrototypeOf.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $Object=__webpack_require__("./node_modules/es-object-atoms/index.js");module.exports=$Object.getPrototypeOf||null},"./node_modules/get-proto/Reflect.getPrototypeOf.js":module=>{"use strict";module.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},"./node_modules/get-proto/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var reflectGetProto=__webpack_require__("./node_modules/get-proto/Reflect.getPrototypeOf.js"),originalGetProto=__webpack_require__("./node_modules/get-proto/Object.getPrototypeOf.js"),getDunderProto=__webpack_require__("./node_modules/dunder-proto/get.js");module.exports=reflectGetProto?function getProto(O){return reflectGetProto(O)}:originalGetProto?function getProto(O){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new TypeError("getProto: not an object");return originalGetProto(O)}:getDunderProto?function getProto(O){return getDunderProto(O)}:null},"./node_modules/gopd/gOPD.js":module=>{"use strict";module.exports=Object.getOwnPropertyDescriptor},"./node_modules/gopd/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $gOPD=__webpack_require__("./node_modules/gopd/gOPD.js");if($gOPD)try{$gOPD([],"length")}catch(e){$gOPD=null}module.exports=$gOPD},"./node_modules/has-property-descriptors/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $defineProperty=__webpack_require__("./node_modules/es-define-property/index.js"),hasPropertyDescriptors=function hasPropertyDescriptors(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function hasArrayLengthDefineBug(){if(!$defineProperty)return null;try{return 1!==$defineProperty([],"length",{value:1}).length}catch(e){return!0}},module.exports=hasPropertyDescriptors},"./node_modules/has-symbols/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol,hasSymbolSham=__webpack_require__("./node_modules/has-symbols/shams.js");module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}},"./node_modules/has-symbols/shams.js":module=>{"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(var _ in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},"./node_modules/has-tostringtag/shams.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__("./node_modules/has-symbols/shams.js");module.exports=function hasToStringTagShams(){return hasSymbols()&&!!Symbol.toStringTag}},"./node_modules/hasown/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind=__webpack_require__("./node_modules/function-bind/index.js");module.exports=bind.call(call,$hasOwn)},"./node_modules/ieee754/index.js":(__unused_webpack_module,exports)=>{exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},"./node_modules/inherits/inherits_browser.js":module=>{"function"==typeof Object.create?module.exports=function inherits(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}},"./node_modules/is-arguments/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasToStringTag=__webpack_require__("./node_modules/has-tostringtag/shams.js")(),$toString=__webpack_require__("./node_modules/call-bound/index.js")("Object.prototype.toString"),isStandardArguments=function isArguments(value){return!(hasToStringTag&&value&&"object"==typeof value&&Symbol.toStringTag in value)&&"[object Arguments]"===$toString(value)},isLegacyArguments=function isArguments(value){return!!isStandardArguments(value)||null!==value&&"object"==typeof value&&"length"in value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==$toString(value)&&"callee"in value&&"[object Function]"===$toString(value.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},"./node_modules/is-callable/index.js":module=>{"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(_){_!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},tryFunctionObject=function tryFunctionToStr(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function isDocumentDotAll(){return!1};if("object"==typeof document){var all=document.all;toStr.call(all)===toStr.call(document.all)&&(isDDA=function isDocumentDotAll(value){if((isIE68||!value)&&(void 0===value||"object"==typeof value))try{var str=toStr.call(value);return("[object HTMLAllCollection]"===str||"[object HTML document.all class]"===str||"[object HTMLCollection]"===str||"[object Object]"===str)&&null==value("")}catch(e){}return!1})}module.exports=reflectApply?function isCallable(value){if(isDDA(value))return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(value)&&tryFunctionObject(value)}:function isCallable(value){if(isDDA(value))return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return!("[object Function]"!==strClass&&"[object GeneratorFunction]"!==strClass&&!/^\[object HTML/.test(strClass))&&tryFunctionObject(value)}},"./node_modules/is-generator-function/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var callBound=__webpack_require__("./node_modules/call-bound/index.js"),isFnRegex=__webpack_require__("./node_modules/safe-regex-test/index.js")(/^\s*(?:function)?\*/),hasToStringTag=__webpack_require__("./node_modules/has-tostringtag/shams.js")(),getProto=__webpack_require__("./node_modules/get-proto/index.js"),toStr=callBound("Object.prototype.toString"),fnToStr=callBound("Function.prototype.toString"),getGeneratorFunction=__webpack_require__("./node_modules/generator-function/index.js");module.exports=function isGeneratorFunction(fn){if("function"!=typeof fn)return!1;if(isFnRegex(fnToStr(fn)))return!0;if(!hasToStringTag)return"[object GeneratorFunction]"===toStr(fn);if(!getProto)return!1;var GeneratorFunction=getGeneratorFunction();return GeneratorFunction&&getProto(fn)===GeneratorFunction.prototype}},"./node_modules/is-nan/implementation.js":module=>{"use strict";module.exports=function isNaN(value){return value!=value}},"./node_modules/is-nan/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var callBind=__webpack_require__("./node_modules/call-bind/index.js"),define=__webpack_require__("./node_modules/define-properties/index.js"),implementation=__webpack_require__("./node_modules/is-nan/implementation.js"),getPolyfill=__webpack_require__("./node_modules/is-nan/polyfill.js"),shim=__webpack_require__("./node_modules/is-nan/shim.js"),polyfill=callBind(getPolyfill(),Number);define(polyfill,{getPolyfill,implementation,shim}),module.exports=polyfill},"./node_modules/is-nan/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("./node_modules/is-nan/implementation.js");module.exports=function getPolyfill(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:implementation}},"./node_modules/is-nan/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("./node_modules/define-properties/index.js"),getPolyfill=__webpack_require__("./node_modules/is-nan/polyfill.js");module.exports=function shimNumberIsNaN(){var polyfill=getPolyfill();return define(Number,{isNaN:polyfill},{isNaN:function testIsNaN(){return Number.isNaN!==polyfill}}),polyfill}},"./node_modules/is-regex/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fn,callBound=__webpack_require__("./node_modules/call-bound/index.js"),hasToStringTag=__webpack_require__("./node_modules/has-tostringtag/shams.js")(),hasOwn=__webpack_require__("./node_modules/hasown/index.js"),gOPD=__webpack_require__("./node_modules/gopd/index.js");if(hasToStringTag){var $exec=callBound("RegExp.prototype.exec"),isRegexMarker={},throwRegexMarker=function(){throw isRegexMarker},badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker};"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker),fn=function isRegex(value){if(!value||"object"!=typeof value)return!1;var descriptor=gOPD(value,"lastIndex");if(!(descriptor&&hasOwn(descriptor,"value")))return!1;try{$exec(value,badStringifier)}catch(e){return e===isRegexMarker}}}else{var $toString=callBound("Object.prototype.toString");fn=function isRegex(value){return!(!value||"object"!=typeof value&&"function"!=typeof value)&&"[object RegExp]"===$toString(value)}}module.exports=fn},"./node_modules/is-typed-array/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var whichTypedArray=__webpack_require__("./node_modules/which-typed-array/index.js");module.exports=function isTypedArray(value){return!!whichTypedArray(value)}},"./node_modules/lodash/_DataView.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DataView=__webpack_require__("./node_modules/lodash/_getNative.js")(__webpack_require__("./node_modules/lodash/_root.js"),"DataView");module.exports=DataView},"./node_modules/lodash/_Hash.js":(module,__unused_webpack_exports,__webpack_require__)=>{var hashClear=__webpack_require__("./node_modules/lodash/_hashClear.js"),hashDelete=__webpack_require__("./node_modules/lodash/_hashDelete.js"),hashGet=__webpack_require__("./node_modules/lodash/_hashGet.js"),hashHas=__webpack_require__("./node_modules/lodash/_hashHas.js"),hashSet=__webpack_require__("./node_modules/lodash/_hashSet.js");function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},"./node_modules/lodash/_ListCache.js":(module,__unused_webpack_exports,__webpack_require__)=>{var listCacheClear=__webpack_require__("./node_modules/lodash/_listCacheClear.js"),listCacheDelete=__webpack_require__("./node_modules/lodash/_listCacheDelete.js"),listCacheGet=__webpack_require__("./node_modules/lodash/_listCacheGet.js"),listCacheHas=__webpack_require__("./node_modules/lodash/_listCacheHas.js"),listCacheSet=__webpack_require__("./node_modules/lodash/_listCacheSet.js");function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},"./node_modules/lodash/_Map.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Map=__webpack_require__("./node_modules/lodash/_getNative.js")(__webpack_require__("./node_modules/lodash/_root.js"),"Map");module.exports=Map},"./node_modules/lodash/_MapCache.js":(module,__unused_webpack_exports,__webpack_require__)=>{var mapCacheClear=__webpack_require__("./node_modules/lodash/_mapCacheClear.js"),mapCacheDelete=__webpack_require__("./node_modules/lodash/_mapCacheDelete.js"),mapCacheGet=__webpack_require__("./node_modules/lodash/_mapCacheGet.js"),mapCacheHas=__webpack_require__("./node_modules/lodash/_mapCacheHas.js"),mapCacheSet=__webpack_require__("./node_modules/lodash/_mapCacheSet.js");function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},"./node_modules/lodash/_Promise.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Promise=__webpack_require__("./node_modules/lodash/_getNative.js")(__webpack_require__("./node_modules/lodash/_root.js"),"Promise");module.exports=Promise},"./node_modules/lodash/_Set.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Set=__webpack_require__("./node_modules/lodash/_getNative.js")(__webpack_require__("./node_modules/lodash/_root.js"),"Set");module.exports=Set},"./node_modules/lodash/_SetCache.js":(module,__unused_webpack_exports,__webpack_require__)=>{var MapCache=__webpack_require__("./node_modules/lodash/_MapCache.js"),setCacheAdd=__webpack_require__("./node_modules/lodash/_setCacheAdd.js"),setCacheHas=__webpack_require__("./node_modules/lodash/_setCacheHas.js");function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},"./node_modules/lodash/_Stack.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ListCache=__webpack_require__("./node_modules/lodash/_ListCache.js"),stackClear=__webpack_require__("./node_modules/lodash/_stackClear.js"),stackDelete=__webpack_require__("./node_modules/lodash/_stackDelete.js"),stackGet=__webpack_require__("./node_modules/lodash/_stackGet.js"),stackHas=__webpack_require__("./node_modules/lodash/_stackHas.js"),stackSet=__webpack_require__("./node_modules/lodash/_stackSet.js");function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},"./node_modules/lodash/_Symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/lodash/_root.js").Symbol;module.exports=Symbol},"./node_modules/lodash/_Uint8Array.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Uint8Array=__webpack_require__("./node_modules/lodash/_root.js").Uint8Array;module.exports=Uint8Array},"./node_modules/lodash/_WeakMap.js":(module,__unused_webpack_exports,__webpack_require__)=>{var WeakMap=__webpack_require__("./node_modules/lodash/_getNative.js")(__webpack_require__("./node_modules/lodash/_root.js"),"WeakMap");module.exports=WeakMap},"./node_modules/lodash/_arrayFilter.js":module=>{module.exports=function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},"./node_modules/lodash/_arrayLikeKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseTimes=__webpack_require__("./node_modules/lodash/_baseTimes.js"),isArguments=__webpack_require__("./node_modules/lodash/isArguments.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isBuffer=__webpack_require__("./node_modules/lodash/isBuffer.js"),isIndex=__webpack_require__("./node_modules/lodash/_isIndex.js"),isTypedArray=__webpack_require__("./node_modules/lodash/isTypedArray.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},"./node_modules/lodash/_arrayMap.js":module=>{module.exports=function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},"./node_modules/lodash/_arrayPush.js":module=>{module.exports=function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},"./node_modules/lodash/_arraySome.js":module=>{module.exports=function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},"./node_modules/lodash/_assocIndexOf.js":(module,__unused_webpack_exports,__webpack_require__)=>{var eq=__webpack_require__("./node_modules/lodash/eq.js");module.exports=function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},"./node_modules/lodash/_baseAssignValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineProperty=__webpack_require__("./node_modules/lodash/_defineProperty.js");module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value,writable:!0}):object[key]=value}},"./node_modules/lodash/_baseFor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFor=__webpack_require__("./node_modules/lodash/_createBaseFor.js")();module.exports=baseFor},"./node_modules/lodash/_baseForOwn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFor=__webpack_require__("./node_modules/lodash/_baseFor.js"),keys=__webpack_require__("./node_modules/lodash/keys.js");module.exports=function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}},"./node_modules/lodash/_baseGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var castPath=__webpack_require__("./node_modules/lodash/_castPath.js"),toKey=__webpack_require__("./node_modules/lodash/_toKey.js");module.exports=function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},"./node_modules/lodash/_baseGetAllKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayPush=__webpack_require__("./node_modules/lodash/_arrayPush.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js");module.exports=function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},"./node_modules/lodash/_baseGetTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/lodash/_Symbol.js"),getRawTag=__webpack_require__("./node_modules/lodash/_getRawTag.js"),objectToString=__webpack_require__("./node_modules/lodash/_objectToString.js"),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},"./node_modules/lodash/_baseHasIn.js":module=>{module.exports=function baseHasIn(object,key){return null!=object&&key in Object(object)}},"./node_modules/lodash/_baseIsArguments.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js");module.exports=function baseIsArguments(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},"./node_modules/lodash/_baseIsEqual.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsEqualDeep=__webpack_require__("./node_modules/lodash/_baseIsEqualDeep.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js");module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},"./node_modules/lodash/_baseIsEqualDeep.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Stack=__webpack_require__("./node_modules/lodash/_Stack.js"),equalArrays=__webpack_require__("./node_modules/lodash/_equalArrays.js"),equalByTag=__webpack_require__("./node_modules/lodash/_equalByTag.js"),equalObjects=__webpack_require__("./node_modules/lodash/_equalObjects.js"),getTag=__webpack_require__("./node_modules/lodash/_getTag.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isBuffer=__webpack_require__("./node_modules/lodash/isBuffer.js"),isTypedArray=__webpack_require__("./node_modules/lodash/isTypedArray.js"),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},"./node_modules/lodash/_baseIsMatch.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Stack=__webpack_require__("./node_modules/lodash/_Stack.js"),baseIsEqual=__webpack_require__("./node_modules/lodash/_baseIsEqual.js");module.exports=function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}},"./node_modules/lodash/_baseIsNative.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isFunction=__webpack_require__("./node_modules/lodash/isFunction.js"),isMasked=__webpack_require__("./node_modules/lodash/_isMasked.js"),isObject=__webpack_require__("./node_modules/lodash/isObject.js"),toSource=__webpack_require__("./node_modules/lodash/_toSource.js"),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},"./node_modules/lodash/_baseIsTypedArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isLength=__webpack_require__("./node_modules/lodash/isLength.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js"),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},"./node_modules/lodash/_baseIteratee.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseMatches=__webpack_require__("./node_modules/lodash/_baseMatches.js"),baseMatchesProperty=__webpack_require__("./node_modules/lodash/_baseMatchesProperty.js"),identity=__webpack_require__("./node_modules/lodash/identity.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js"),property=__webpack_require__("./node_modules/lodash/property.js");module.exports=function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}},"./node_modules/lodash/_baseKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isPrototype=__webpack_require__("./node_modules/lodash/_isPrototype.js"),nativeKeys=__webpack_require__("./node_modules/lodash/_nativeKeys.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},"./node_modules/lodash/_baseMatches.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsMatch=__webpack_require__("./node_modules/lodash/_baseIsMatch.js"),getMatchData=__webpack_require__("./node_modules/lodash/_getMatchData.js"),matchesStrictComparable=__webpack_require__("./node_modules/lodash/_matchesStrictComparable.js");module.exports=function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}},"./node_modules/lodash/_baseMatchesProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsEqual=__webpack_require__("./node_modules/lodash/_baseIsEqual.js"),get=__webpack_require__("./node_modules/lodash/get.js"),hasIn=__webpack_require__("./node_modules/lodash/hasIn.js"),isKey=__webpack_require__("./node_modules/lodash/_isKey.js"),isStrictComparable=__webpack_require__("./node_modules/lodash/_isStrictComparable.js"),matchesStrictComparable=__webpack_require__("./node_modules/lodash/_matchesStrictComparable.js"),toKey=__webpack_require__("./node_modules/lodash/_toKey.js");module.exports=function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}},"./node_modules/lodash/_baseProperty.js":module=>{module.exports=function baseProperty(key){return function(object){return null==object?void 0:object[key]}}},"./node_modules/lodash/_basePropertyDeep.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGet=__webpack_require__("./node_modules/lodash/_baseGet.js");module.exports=function basePropertyDeep(path){return function(object){return baseGet(object,path)}}},"./node_modules/lodash/_baseTimes.js":module=>{module.exports=function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},"./node_modules/lodash/_baseToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/lodash/_Symbol.js"),arrayMap=__webpack_require__("./node_modules/lodash/_arrayMap.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isSymbol=__webpack_require__("./node_modules/lodash/isSymbol.js"),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},"./node_modules/lodash/_baseUnary.js":module=>{module.exports=function baseUnary(func){return function(value){return func(value)}}},"./node_modules/lodash/_cacheHas.js":module=>{module.exports=function cacheHas(cache,key){return cache.has(key)}},"./node_modules/lodash/_castPath.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isKey=__webpack_require__("./node_modules/lodash/_isKey.js"),stringToPath=__webpack_require__("./node_modules/lodash/_stringToPath.js"),toString=__webpack_require__("./node_modules/lodash/toString.js");module.exports=function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},"./node_modules/lodash/_coreJsData.js":(module,__unused_webpack_exports,__webpack_require__)=>{var coreJsData=__webpack_require__("./node_modules/lodash/_root.js")["__core-js_shared__"];module.exports=coreJsData},"./node_modules/lodash/_createBaseFor.js":module=>{module.exports=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},"./node_modules/lodash/_defineProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getNative=__webpack_require__("./node_modules/lodash/_getNative.js"),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},"./node_modules/lodash/_equalArrays.js":(module,__unused_webpack_exports,__webpack_require__)=>{var SetCache=__webpack_require__("./node_modules/lodash/_SetCache.js"),arraySome=__webpack_require__("./node_modules/lodash/_arraySome.js"),cacheHas=__webpack_require__("./node_modules/lodash/_cacheHas.js");module.exports=function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},"./node_modules/lodash/_equalByTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/lodash/_Symbol.js"),Uint8Array=__webpack_require__("./node_modules/lodash/_Uint8Array.js"),eq=__webpack_require__("./node_modules/lodash/eq.js"),equalArrays=__webpack_require__("./node_modules/lodash/_equalArrays.js"),mapToArray=__webpack_require__("./node_modules/lodash/_mapToArray.js"),setToArray=__webpack_require__("./node_modules/lodash/_setToArray.js"),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},"./node_modules/lodash/_equalObjects.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getAllKeys=__webpack_require__("./node_modules/lodash/_getAllKeys.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},"./node_modules/lodash/_freeGlobal.js":(module,__unused_webpack_exports,__webpack_require__)=>{var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g;module.exports=freeGlobal},"./node_modules/lodash/_getAllKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetAllKeys=__webpack_require__("./node_modules/lodash/_baseGetAllKeys.js"),getSymbols=__webpack_require__("./node_modules/lodash/_getSymbols.js"),keys=__webpack_require__("./node_modules/lodash/keys.js");module.exports=function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}},"./node_modules/lodash/_getMapData.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isKeyable=__webpack_require__("./node_modules/lodash/_isKeyable.js");module.exports=function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},"./node_modules/lodash/_getMatchData.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isStrictComparable=__webpack_require__("./node_modules/lodash/_isStrictComparable.js"),keys=__webpack_require__("./node_modules/lodash/keys.js");module.exports=function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}},"./node_modules/lodash/_getNative.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsNative=__webpack_require__("./node_modules/lodash/_baseIsNative.js"),getValue=__webpack_require__("./node_modules/lodash/_getValue.js");module.exports=function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},"./node_modules/lodash/_getRawTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/lodash/_Symbol.js"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},"./node_modules/lodash/_getSymbols.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayFilter=__webpack_require__("./node_modules/lodash/_arrayFilter.js"),stubArray=__webpack_require__("./node_modules/lodash/stubArray.js"),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray;module.exports=getSymbols},"./node_modules/lodash/_getTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DataView=__webpack_require__("./node_modules/lodash/_DataView.js"),Map=__webpack_require__("./node_modules/lodash/_Map.js"),Promise=__webpack_require__("./node_modules/lodash/_Promise.js"),Set=__webpack_require__("./node_modules/lodash/_Set.js"),WeakMap=__webpack_require__("./node_modules/lodash/_WeakMap.js"),baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),toSource=__webpack_require__("./node_modules/lodash/_toSource.js"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},"./node_modules/lodash/_getValue.js":module=>{module.exports=function getValue(object,key){return null==object?void 0:object[key]}},"./node_modules/lodash/_hasPath.js":(module,__unused_webpack_exports,__webpack_require__)=>{var castPath=__webpack_require__("./node_modules/lodash/_castPath.js"),isArguments=__webpack_require__("./node_modules/lodash/isArguments.js"),isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isIndex=__webpack_require__("./node_modules/lodash/_isIndex.js"),isLength=__webpack_require__("./node_modules/lodash/isLength.js"),toKey=__webpack_require__("./node_modules/lodash/_toKey.js");module.exports=function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}},"./node_modules/lodash/_hashClear.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("./node_modules/lodash/_nativeCreate.js");module.exports=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},"./node_modules/lodash/_hashDelete.js":module=>{module.exports=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},"./node_modules/lodash/_hashGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("./node_modules/lodash/_nativeCreate.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},"./node_modules/lodash/_hashHas.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("./node_modules/lodash/_nativeCreate.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},"./node_modules/lodash/_hashSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("./node_modules/lodash/_nativeCreate.js");module.exports=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},"./node_modules/lodash/_isIndex.js":module=>{var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},"./node_modules/lodash/_isKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isArray=__webpack_require__("./node_modules/lodash/isArray.js"),isSymbol=__webpack_require__("./node_modules/lodash/isSymbol.js"),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},"./node_modules/lodash/_isKeyable.js":module=>{module.exports=function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},"./node_modules/lodash/_isMasked.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uid,coreJsData=__webpack_require__("./node_modules/lodash/_coreJsData.js"),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}},"./node_modules/lodash/_isPrototype.js":module=>{var objectProto=Object.prototype;module.exports=function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},"./node_modules/lodash/_isStrictComparable.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("./node_modules/lodash/isObject.js");module.exports=function isStrictComparable(value){return value==value&&!isObject(value)}},"./node_modules/lodash/_listCacheClear.js":module=>{module.exports=function listCacheClear(){this.__data__=[],this.size=0}},"./node_modules/lodash/_listCacheDelete.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("./node_modules/lodash/_assocIndexOf.js"),splice=Array.prototype.splice;module.exports=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},"./node_modules/lodash/_listCacheGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("./node_modules/lodash/_assocIndexOf.js");module.exports=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},"./node_modules/lodash/_listCacheHas.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("./node_modules/lodash/_assocIndexOf.js");module.exports=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}},"./node_modules/lodash/_listCacheSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("./node_modules/lodash/_assocIndexOf.js");module.exports=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},"./node_modules/lodash/_mapCacheClear.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Hash=__webpack_require__("./node_modules/lodash/_Hash.js"),ListCache=__webpack_require__("./node_modules/lodash/_ListCache.js"),Map=__webpack_require__("./node_modules/lodash/_Map.js");module.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},"./node_modules/lodash/_mapCacheDelete.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("./node_modules/lodash/_getMapData.js");module.exports=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},"./node_modules/lodash/_mapCacheGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("./node_modules/lodash/_getMapData.js");module.exports=function mapCacheGet(key){return getMapData(this,key).get(key)}},"./node_modules/lodash/_mapCacheHas.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("./node_modules/lodash/_getMapData.js");module.exports=function mapCacheHas(key){return getMapData(this,key).has(key)}},"./node_modules/lodash/_mapCacheSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("./node_modules/lodash/_getMapData.js");module.exports=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},"./node_modules/lodash/_mapToArray.js":module=>{module.exports=function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}},"./node_modules/lodash/_matchesStrictComparable.js":module=>{module.exports=function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}},"./node_modules/lodash/_memoizeCapped.js":(module,__unused_webpack_exports,__webpack_require__)=>{var memoize=__webpack_require__("./node_modules/lodash/memoize.js");module.exports=function memoizeCapped(func){var result=memoize(func,function(key){return 500===cache.size&&cache.clear(),key}),cache=result.cache;return result}},"./node_modules/lodash/_nativeCreate.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("./node_modules/lodash/_getNative.js")(Object,"create");module.exports=nativeCreate},"./node_modules/lodash/_nativeKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeKeys=__webpack_require__("./node_modules/lodash/_overArg.js")(Object.keys,Object);module.exports=nativeKeys},"./node_modules/lodash/_nodeUtil.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var freeGlobal=__webpack_require__("./node_modules/lodash/_freeGlobal.js"),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},"./node_modules/lodash/_objectToString.js":module=>{var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},"./node_modules/lodash/_overArg.js":module=>{module.exports=function overArg(func,transform){return function(arg){return func(transform(arg))}}},"./node_modules/lodash/_root.js":(module,__unused_webpack_exports,__webpack_require__)=>{var freeGlobal=__webpack_require__("./node_modules/lodash/_freeGlobal.js"),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},"./node_modules/lodash/_setCacheAdd.js":module=>{module.exports=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},"./node_modules/lodash/_setCacheHas.js":module=>{module.exports=function setCacheHas(value){return this.__data__.has(value)}},"./node_modules/lodash/_setToArray.js":module=>{module.exports=function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}},"./node_modules/lodash/_stackClear.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ListCache=__webpack_require__("./node_modules/lodash/_ListCache.js");module.exports=function stackClear(){this.__data__=new ListCache,this.size=0}},"./node_modules/lodash/_stackDelete.js":module=>{module.exports=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},"./node_modules/lodash/_stackGet.js":module=>{module.exports=function stackGet(key){return this.__data__.get(key)}},"./node_modules/lodash/_stackHas.js":module=>{module.exports=function stackHas(key){return this.__data__.has(key)}},"./node_modules/lodash/_stackSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ListCache=__webpack_require__("./node_modules/lodash/_ListCache.js"),Map=__webpack_require__("./node_modules/lodash/_Map.js"),MapCache=__webpack_require__("./node_modules/lodash/_MapCache.js");module.exports=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},"./node_modules/lodash/_stringToPath.js":(module,__unused_webpack_exports,__webpack_require__)=>{var memoizeCapped=__webpack_require__("./node_modules/lodash/_memoizeCapped.js"),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});module.exports=stringToPath},"./node_modules/lodash/_toKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isSymbol=__webpack_require__("./node_modules/lodash/isSymbol.js");module.exports=function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},"./node_modules/lodash/_toSource.js":module=>{var funcToString=Function.prototype.toString;module.exports=function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},"./node_modules/lodash/eq.js":module=>{module.exports=function eq(value,other){return value===other||value!=value&&other!=other}},"./node_modules/lodash/get.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGet=__webpack_require__("./node_modules/lodash/_baseGet.js");module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},"./node_modules/lodash/hasIn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseHasIn=__webpack_require__("./node_modules/lodash/_baseHasIn.js"),hasPath=__webpack_require__("./node_modules/lodash/_hasPath.js");module.exports=function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}},"./node_modules/lodash/identity.js":module=>{module.exports=function identity(value){return value}},"./node_modules/lodash/isArguments.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsArguments=__webpack_require__("./node_modules/lodash/_baseIsArguments.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},"./node_modules/lodash/isArray.js":module=>{var isArray=Array.isArray;module.exports=isArray},"./node_modules/lodash/isArrayLike.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isFunction=__webpack_require__("./node_modules/lodash/isFunction.js"),isLength=__webpack_require__("./node_modules/lodash/isLength.js");module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},"./node_modules/lodash/isBuffer.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var root=__webpack_require__("./node_modules/lodash/_root.js"),stubFalse=__webpack_require__("./node_modules/lodash/stubFalse.js"),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer},"./node_modules/lodash/isFunction.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isObject=__webpack_require__("./node_modules/lodash/isObject.js");module.exports=function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},"./node_modules/lodash/isLength.js":module=>{module.exports=function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},"./node_modules/lodash/isObject.js":module=>{module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},"./node_modules/lodash/isObjectLike.js":module=>{module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},"./node_modules/lodash/isSymbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js");module.exports=function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},"./node_modules/lodash/isTypedArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsTypedArray=__webpack_require__("./node_modules/lodash/_baseIsTypedArray.js"),baseUnary=__webpack_require__("./node_modules/lodash/_baseUnary.js"),nodeUtil=__webpack_require__("./node_modules/lodash/_nodeUtil.js"),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},"./node_modules/lodash/keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayLikeKeys=__webpack_require__("./node_modules/lodash/_arrayLikeKeys.js"),baseKeys=__webpack_require__("./node_modules/lodash/_baseKeys.js"),isArrayLike=__webpack_require__("./node_modules/lodash/isArrayLike.js");module.exports=function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},"./node_modules/lodash/mapValues.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseAssignValue=__webpack_require__("./node_modules/lodash/_baseAssignValue.js"),baseForOwn=__webpack_require__("./node_modules/lodash/_baseForOwn.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js");module.exports=function mapValues(object,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result}},"./node_modules/lodash/memoize.js":(module,__unused_webpack_exports,__webpack_require__)=>{var MapCache=__webpack_require__("./node_modules/lodash/_MapCache.js");function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},"./node_modules/lodash/property.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseProperty=__webpack_require__("./node_modules/lodash/_baseProperty.js"),basePropertyDeep=__webpack_require__("./node_modules/lodash/_basePropertyDeep.js"),isKey=__webpack_require__("./node_modules/lodash/_isKey.js"),toKey=__webpack_require__("./node_modules/lodash/_toKey.js");module.exports=function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}},"./node_modules/lodash/stubArray.js":module=>{module.exports=function stubArray(){return[]}},"./node_modules/lodash/stubFalse.js":module=>{module.exports=function stubFalse(){return!1}},"./node_modules/lodash/toString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseToString=__webpack_require__("./node_modules/lodash/_baseToString.js");module.exports=function toString(value){return null==value?"":baseToString(value)}},"./node_modules/math-intrinsics/abs.js":module=>{"use strict";module.exports=Math.abs},"./node_modules/math-intrinsics/floor.js":module=>{"use strict";module.exports=Math.floor},"./node_modules/math-intrinsics/isNaN.js":module=>{"use strict";module.exports=Number.isNaN||function isNaN(a){return a!=a}},"./node_modules/math-intrinsics/max.js":module=>{"use strict";module.exports=Math.max},"./node_modules/math-intrinsics/min.js":module=>{"use strict";module.exports=Math.min},"./node_modules/math-intrinsics/pow.js":module=>{"use strict";module.exports=Math.pow},"./node_modules/math-intrinsics/round.js":module=>{"use strict";module.exports=Math.round},"./node_modules/math-intrinsics/sign.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $isNaN=__webpack_require__("./node_modules/math-intrinsics/isNaN.js");module.exports=function sign(number){return $isNaN(number)||0===number?number:number<0?-1:1}},"./node_modules/object-is/implementation.js":module=>{"use strict";var numberIsNaN=function(value){return value!=value};module.exports=function is(a,b){return 0===a&&0===b?1/a==1/b:a===b||!(!numberIsNaN(a)||!numberIsNaN(b))}},"./node_modules/object-is/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("./node_modules/define-properties/index.js"),callBind=__webpack_require__("./node_modules/call-bind/index.js"),implementation=__webpack_require__("./node_modules/object-is/implementation.js"),getPolyfill=__webpack_require__("./node_modules/object-is/polyfill.js"),shim=__webpack_require__("./node_modules/object-is/shim.js"),polyfill=callBind(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim}),module.exports=polyfill},"./node_modules/object-is/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("./node_modules/object-is/implementation.js");module.exports=function getPolyfill(){return"function"==typeof Object.is?Object.is:implementation}},"./node_modules/object-is/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("./node_modules/object-is/polyfill.js"),define=__webpack_require__("./node_modules/define-properties/index.js");module.exports=function shimObjectIs(){var polyfill=getPolyfill();return define(Object,{is:polyfill},{is:function testObjectIs(){return Object.is!==polyfill}}),polyfill}},"./node_modules/object-keys/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__("./node_modules/object-keys/isArguments.js"),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function keys(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},"./node_modules/object-keys/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__("./node_modules/object-keys/isArguments.js"),origKeys=Object.keys,keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__("./node_modules/object-keys/implementation.js"),originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);keysWorksWithArguments||(Object.keys=function keys(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)})}else Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},"./node_modules/object-keys/isArguments.js":module=>{"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},"./node_modules/object.assign/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var objectKeys=__webpack_require__("./node_modules/object-keys/index.js"),hasSymbols=__webpack_require__("./node_modules/has-symbols/shams.js")(),callBound=__webpack_require__("./node_modules/call-bound/index.js"),$Object=__webpack_require__("./node_modules/es-object-atoms/index.js"),$push=callBound("Array.prototype.push"),$propIsEnumerable=callBound("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols?$Object.getOwnPropertySymbols:null;module.exports=function assign(target,source1){if(null==target)throw new TypeError("target must be an object");var to=$Object(target);if(1===arguments.length)return to;for(var s=1;s<arguments.length;++s){var from=$Object(arguments[s]),keys=objectKeys(from),getSymbols=hasSymbols&&($Object.getOwnPropertySymbols||originalGetSymbols);if(getSymbols)for(var syms=getSymbols(from),j=0;j<syms.length;++j){var key=syms[j];$propIsEnumerable(from,key)&&$push(keys,key)}for(var i=0;i<keys.length;++i){var nextKey=keys[i];if($propIsEnumerable(from,nextKey)){var propValue=from[nextKey];to[nextKey]=propValue}}}return to}},"./node_modules/object.assign/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("./node_modules/object.assign/implementation.js");module.exports=function getPolyfill(){return Object.assign?function(){if(!Object.assign)return!1;for(var str="abcdefghijklmnopqrst",letters=str.split(""),map={},i=0;i<letters.length;++i)map[letters[i]]=letters[i];var obj=Object.assign({},map),actual="";for(var k in obj)actual+=k;return str!==actual}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}return!1}()?implementation:Object.assign:implementation}},"./node_modules/possible-typed-array-names/index.js":module=>{"use strict";module.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},"./node_modules/process/browser.js":module=>{var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},"./node_modules/rdflib/esm/blank-node.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>BlankNode});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_class_order__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rdflib/esm/class-order.js"),_node_internal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rdflib/esm/node-internal.js"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rdflib/esm/types.js");class BlankNode extends _node_internal__WEBPACK_IMPORTED_MODULE_2__.A{static getId(id){if(id){if("string"!=typeof id)throw new Error("Bad id argument to new blank node: "+id);if(id.includes("#")){let fragments=id.split("#");return fragments[fragments.length-1]}return id}return"n"+BlankNode.nextId++}constructor(id){super(BlankNode.getId(id)),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"termType",_types__WEBPACK_IMPORTED_MODULE_3__.$Q),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"classOrder",_class_order__WEBPACK_IMPORTED_MODULE_1__.A.BlankNode),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"isBlank",1),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"isVar",1)}get id(){return this.value}set id(value){this.value=value}compareTerm(other){return this.classOrder<other.classOrder?-1:this.classOrder>other.classOrder?1:this.id<other.id?-1:this.id>other.id?1:0}copy(formula){var bnodeNew=new BlankNode;return formula.copyTo(this,bnodeNew),bnodeNew}toCanonical(){return BlankNode.NTAnonymousNodePrefix+this.value}toString(){return BlankNode.NTAnonymousNodePrefix+this.id}}(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(BlankNode,"nextId",0),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(BlankNode,"NTAnonymousNodePrefix","_:")},"./node_modules/rdflib/esm/class-order.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7}},"./node_modules/rdflib/esm/collection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Collection,Y:()=>fromValue});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_blank_node__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rdflib/esm/blank-node.js"),_class_order__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rdflib/esm/class-order.js"),_literal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rdflib/esm/literal.js"),_node_internal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rdflib/esm/node-internal.js"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rdflib/esm/types.js"),_utils_terms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rdflib/esm/utils/terms.js");function fromValue(value){return null==value||(0,_utils_terms__WEBPACK_IMPORTED_MODULE_6__.D0)(value)?value:Array.isArray(value)?new Collection(value):_literal__WEBPACK_IMPORTED_MODULE_3__.A.fromValue(value)}class Collection extends _node_internal__WEBPACK_IMPORTED_MODULE_4__.A{constructor(initial){super((_blank_node__WEBPACK_IMPORTED_MODULE_1__.A.nextId++).toString()),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"termType",_types__WEBPACK_IMPORTED_MODULE_5__.r0),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"classOrder",_class_order__WEBPACK_IMPORTED_MODULE_2__.A.Collection),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"closed",!1),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"compareTerm",_blank_node__WEBPACK_IMPORTED_MODULE_1__.A.prototype.compareTerm),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"elements",[]),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"isVar",0),initial&&initial.length>0&&initial.forEach(element=>{this.elements.push(fromValue(element))})}get id(){return this.value}set id(value){this.value=value}append(element){return this.elements.push(element)}close(){return this.closed=!0,this.closed}shift(){return this.elements.shift()}substitute(bindings){const elementsCopy=this.elements.map(ea=>ea.substitute(bindings));return new Collection(elementsCopy)}toNT(){return Collection.toNT(this)}static toNT(collection){return _blank_node__WEBPACK_IMPORTED_MODULE_1__.A.NTAnonymousNodePrefix+collection.id}toString(){return"("+this.elements.join(" ")+")"}unshift(element){return this.elements.unshift(element)}}(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(Collection,"termType",_types__WEBPACK_IMPORTED_MODULE_5__.r0)},"./node_modules/rdflib/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BlankNode:()=>blank_node.A,Collection:()=>collection.A,ConnectedStore:()=>ConnectedStore,DataFactory:()=>rdflib_data_factory,Empty:()=>Empty,Fetcher:()=>Fetcher,Formula:()=>Formula,IndexedFormula:()=>IndexedFormula,Literal:()=>literal.A,LiveStore:()=>LiveStore,N3Parser:()=>n3parser,NamedNode:()=>named_node.A,Namespace:()=>namespace.A,NextId:()=>NextId,Node:()=>node.A,Query:()=>Query,RDFParser:()=>RDFParser,RDFaProcessor:()=>RDFaProcessor,SPARQLToQuery:()=>SPARQLToQuery,Serializer:()=>createSerializer,Statement:()=>Statement,Store:()=>IndexedFormula,UpdateManager:()=>UpdateManager,UpdatesSocket:()=>UpdatesSocket,UpdatesVia:()=>UpdatesVia,Util:()=>utils_js,Variable:()=>Variable,blankNode:()=>esm_blankNode,defaultGraph:()=>esm_defaultGraph,fetcher:()=>fetcher,fromNT:()=>fromNT,graph:()=>graph,isBlankNode:()=>terms.jt,isCollection:()=>terms.P3,isGraph:()=>terms.RN,isLiteral:()=>terms.c$,isNamedNode:()=>terms.Y2,isPredicate:()=>terms.YC,isQuad:()=>terms.aF,isRDFObject:()=>terms.GE,isRDFlibObject:()=>terms.DJ,isRDFlibPredicate:()=>terms.fY,isRDFlibSubject:()=>terms.CZ,isStatement:()=>terms.SH,isStore:()=>terms.ok,isSubject:()=>terms.hr,isTerm:()=>terms.D0,isVariable:()=>terms.DZ,jsonParser:()=>jsonparser,lit:()=>lit,literal:()=>esm_literal,log:()=>esm_log.A,namedNode:()=>esm_namedNode,parse:()=>parse,quad:()=>esm_quad,queryToSPARQL:()=>queryToSPARQL,serialize:()=>serialize,sparqlUpdateParser:()=>sparqlUpdateParser,st:()=>st,sym:()=>esm_namedNode,term:()=>term,termValue:()=>termValue.E,triple:()=>triple,uri:()=>esm_uri,variable:()=>esm_variable});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),blank_node=__webpack_require__("./node_modules/rdflib/esm/blank-node.js"),collection=__webpack_require__("./node_modules/rdflib/esm/collection.js"),node_internal=__webpack_require__("./node_modules/rdflib/esm/node-internal.js"),types=__webpack_require__("./node_modules/rdflib/esm/types.js");class Empty extends node_internal.A{constructor(){super(""),(0,defineProperty.A)(this,"termType",types.S)}toString(){return"()"}}var class_order=__webpack_require__("./node_modules/rdflib/esm/class-order.js"),named_node=__webpack_require__("./node_modules/rdflib/esm/named-node.js");new named_node.A("chrome:theSession");var literal=__webpack_require__("./node_modules/rdflib/esm/literal.js");class DefaultGraph extends node_internal.A{constructor(){super(""),(0,defineProperty.A)(this,"value",""),(0,defineProperty.A)(this,"termType",types.ic),(0,defineProperty.A)(this,"uri","chrome:theSession")}toCanonical(){return this.value}toString(){return"DefaultGraph"}}function isDefaultGraph(object){return!!object&&object.termType===types.ic}const defaultGraph=new DefaultGraph;class Statement{constructor(subject,predicate,object,graph){(0,defineProperty.A)(this,"subject",void 0),(0,defineProperty.A)(this,"predicate",void 0),(0,defineProperty.A)(this,"object",void 0),(0,defineProperty.A)(this,"graph",void 0),this.subject=node_internal.A.fromValue(subject),this.predicate=node_internal.A.fromValue(predicate),this.object=node_internal.A.fromValue(object),this.graph=null==graph?defaultGraph:node_internal.A.fromValue(graph)}get why(){return this.graph}set why(g){this.graph=g}equals(other){return other.subject.equals(this.subject)&&other.predicate.equals(this.predicate)&&other.object.equals(this.object)&&other.graph.equals(this.graph)}substitute(bindings){return new Statement(this.subject.substitute(bindings),this.predicate.substitute(bindings),this.object.substitute(bindings),isDefaultGraph(this.graph)?this.graph:this.graph.substitute(bindings))}toCanonical(){let terms=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==types.ic&&terms.push(this.graph.toCanonical()),terms.join(" ")+" ."}toNT(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}toNQ(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),isDefaultGraph(this.graph)?"":this.graph.toNT()].join(" ")+" ."}toString(){return this.toNT()}}var esm_uri=__webpack_require__("./node_modules/rdflib/esm/uri.js");class Variable extends node_internal.A{constructor(){let name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(name),(0,defineProperty.A)(this,"termType",types.P2),(0,defineProperty.A)(this,"base","varid:"),(0,defineProperty.A)(this,"classOrder",class_order.A.Variable),(0,defineProperty.A)(this,"isVar",1),(0,defineProperty.A)(this,"uri",void 0),this.base="varid:",this.uri=esm_uri.join(name,this.base)}equals(other){return!!other&&(this.termType===other.termType&&this.value===other.value)}hashString(){return this.toString()}substitute(bindings){var ref;return null!=(ref=bindings[this.toNT()])?ref:this}toString(){return Variable.toString(this)}static toString(variable){return variable.uri.slice(0,variable.base.length)===variable.base?`?${variable.uri.slice(variable.base.length)}`:`?${variable.uri}`}}let Feature=function(Feature){return Feature.collections="COLLECTIONS",Feature.defaultGraphType="DEFAULT_GRAPH_TYPE",Feature.equalsMethod="EQUALS_METHOD",Feature.id="ID",Feature.identity="IDENTITY",Feature.reversibleId="REVERSIBLE_ID",Feature.variableType="VARIABLE_TYPE",Feature}({});var terms=__webpack_require__("./node_modules/rdflib/esm/utils/terms.js");const canonical_data_factory_defaultGraph=new DefaultGraph,CanonicalDataFactory={supports:{[Feature.collections]:!1,[Feature.defaultGraphType]:!1,[Feature.equalsMethod]:!0,[Feature.identity]:!1,[Feature.id]:!0,[Feature.reversibleId]:!1,[Feature.variableType]:!0},blankNode:value=>new blank_node.A(value),defaultGraph:()=>canonical_data_factory_defaultGraph,equals(a,b){return a===b||!a||!b||((0,terms.aF)(a)||(0,terms.aF)(b)?!(!(0,terms.aF)(a)||!(0,terms.aF)(b))&&(this.equals(a.subject,b.subject)&&this.equals(a.predicate,b.predicate)&&this.equals(a.object,b.object)&&this.equals(a.graph,b.graph)):!(!(0,terms.D0)(a)||!(0,terms.D0)(b))&&this.id(a)===this.id(b))},id(term){if(!term)return"undefined";if((0,terms.aF)(term))return this.quadToNQ(term);switch(term.termType){case types.ic:return"defaultGraph";case types.P2:return Variable.toString(term);default:const nq=this.termToNQ(term);if(nq)return nq;throw new Error(`Can't id term with type '${term.termType}'`)}},isQuad:obj=>obj instanceof Statement,literal(value,languageOrDatatype){if("string"!=typeof value&&!languageOrDatatype)return literal.A.fromValue(value);const strValue="string"==typeof value?value:""+value;return"string"==typeof languageOrDatatype?-1===languageOrDatatype.indexOf(":")?new literal.A(strValue,languageOrDatatype):new literal.A(strValue,null,this.namedNode(languageOrDatatype)):new literal.A(strValue,null,languageOrDatatype)},namedNode:value=>new named_node.A(value),quad:(subject,predicate,object,graph)=>new Statement(subject,predicate,object,graph||canonical_data_factory_defaultGraph),triple(subject,predicate,object,graph){return this.quad(subject,predicate,object,graph)},quadToNQ(q){return`${this.termToNQ(q.subject)} ${this.termToNQ(q.predicate)} ${this.termToNQ(q.object)} ${this.termToNQ(q.graph)} .`},termToNQ(term){switch(term.termType){case types.$Q:return"_:"+term.value;case types.ic:return"";case types.S:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case types.QW:return literal.A.toNT(term);case types.bD:case types.Kk:return"<"+term.value+">";case types.r0:return"("+term.elements.map(t=>this.termToNQ(t)).join(" ")+")";default:throw new Error(`Can't serialize nonstandard term type (was '${term.termType}')`)}},toNQ(term){return this.isQuad(term)?this.quadToNQ(term):this.termToNQ(term)},variable:name=>new Variable(name)},canonical_data_factory=CanonicalDataFactory;var esm_log=__webpack_require__("./node_modules/rdflib/esm/log.js"),namespace=__webpack_require__("./node_modules/rdflib/esm/namespace.js"),utils_js=__webpack_require__("./node_modules/rdflib/esm/utils-js.js");function createXSD(){let localFactory=arguments.length>0&&void 0!==arguments[0]?arguments[0]:canonical_data_factory;return{boolean:localFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:localFactory.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:localFactory.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:localFactory.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:localFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:localFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:localFactory.namedNode("http://www.w3.org/2001/XMLSchema#string")}}createXSD(canonical_data_factory);var solid_namespace=__webpack_require__("./node_modules/solid-namespace/index.js"),solid_namespace_default=__webpack_require__.n(solid_namespace),ttl2jsonld=__webpack_require__("./node_modules/@frogcat/ttl2jsonld/ttl2jsonld.js");function createSerializer(store){return new Serializer(store)}class Serializer{constructor(store){(0,defineProperty.A)(this,"_notQNameChars","\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~"),(0,defineProperty.A)(this,"_notNameChars",this._notQNameChars+":"),(0,defineProperty.A)(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),(0,defineProperty.A)(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),(0,defineProperty.A)(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];const nsKeys=Object.keys(solid_namespace_default()());for(const i in nsKeys){const uri=solid_namespace_default()()[nsKeys[i]](""),prefix=nsKeys[i];this.prefixes[uri]=prefix,this.namespaces[prefix]=uri}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=store,this.rdfFactory=store.rdfFactory||canonical_data_factory,this.xsd=createXSD(this.rdfFactory)}setBase(base){return this.base=base,this}setFlags(flags){return this.flags=flags||"",this}toStr(x){var s=x.toNT();return"Graph"===x.termType&&(this.formulas[s]=x),s}fromStr(s){if("{"===s[0]){var x=this.formulas[s];return x||console.log("No formula object for "+s),x}return this.store.fromNT(s)}setNamespaces(namespaces){for(var px in namespaces)this.setPrefix(px,namespaces[px]);return this}setPrefix(prefix,uri){if("default"!==prefix.slice(0,7)&&"ns"!==prefix.slice(0,2)&&prefix&&uri){for(let existingNs in this.prefixes)this.prefixes[existingNs]==prefix&&delete this.prefixes[existingNs];this.prefixes[uri]=prefix,this.namespaces[prefix]=uri}}suggestPrefix(prefix,uri){"default"!==prefix.slice(0,7)&&"ns"!==prefix.slice(0,2)&&prefix&&uri&&(prefix in this.namespaces||uri in this.prefixes||(this.prefixes[uri]=prefix,this.namespaces[prefix]=uri))}suggestNamespaces(namespaces){for(var px in namespaces)this.suggestPrefix(px,namespaces[px]);return this}checkIntegrity(){var p,ns;for(p in this.namespaces)if(this.prefixes[this.namespaces[p]]!==p)throw new Error("Serializer integity error 1: "+p+", "+this.namespaces[p]+", "+this.prefixes[this.namespaces[p]]+"!");for(ns in this.prefixes)if(this.namespaces[this.prefixes[ns]]!==ns)throw new Error("Serializer integity error 2: "+ns+", "+this.prefixs[ns]+", "+this.namespaces[this.prefixes[ns]]+"!")}makeUpPrefix(uri){var p=uri;var canUse=function canUseMethod(pp){return!!this.validPrefix.test(pp)&&("ns"!==pp&&(!(pp in this.namespaces)&&(this.prefixes[uri]=pp,this.namespaces[pp]=uri,pp)))}.bind(this);"#/".indexOf(p[p.length-1])>=0&&(p=p.slice(0,-1));var slash=p.lastIndexOf("/");slash>=0&&(p=p.slice(slash+1));for(var i=0;i<p.length&&this.prefixchars.indexOf(p[i]);)i++;if((p=p.slice(0,i)).length<6&&canUse(p))return p;if(canUse(p.slice(0,3)))return p.slice(0,3);if(canUse(p.slice(0,2)))return p.slice(0,2);if(canUse(p.slice(0,4)))return p.slice(0,4);if(canUse(p.slice(0,1)))return p.slice(0,1);if(canUse(p.slice(0,5)))return p.slice(0,5);this.validPrefix.test(p)||(p="n");for(var j=0;;j++)if(canUse(p.slice(0,3)+j))return p.slice(0,3)+j}rootSubjects(sts){for(var incoming={},subjects={},allBnodes={},i=0;i<sts.length;i++){var st=sts[i],checkMentions=function(x){incoming.hasOwnProperty(x)||(incoming[x]=[]),incoming[x].push(st.subject)};[st.subject,st.predicate,st.object].map(function(y){"BlankNode"===y.termType?allBnodes[y.toNT()]=!0:"Collection"===y.termType&&y.elements.forEach(function(z){checkMentions(z)})}),checkMentions(sts[i].object);var ss=subjects[this.toStr(st.subject)];ss||(ss=[]),ss.push(st),subjects[this.toStr(st.subject)]=ss}var roots=[];for(var xNT in subjects)if(subjects.hasOwnProperty(xNT)){var y=this.fromStr(xNT);"BlankNode"===y.termType&&incoming[y]&&1===incoming[y].length||roots.push(y)}this.incoming=incoming;for(var rootsHash={},k=0;k<roots.length;k++)rootsHash[roots[k].toNT()]=!0;return{roots,subjects,rootsHash,incoming}}toN3(f){return this.statementsToN3(f.statements)}explicitURI(uri){return"<"+(uri=this.flags.indexOf("r")<0&&this.base?esm_uri.refTo(this.base,uri):this.flags.indexOf("u")>=0?function backslashUify(str){for(var k,res="",i=0;i<str.length;i++)res+=(k=str.charCodeAt(i))>65535?"\\U"+("00000000"+k.toString(16)).slice(-8):k>126?"\\u"+("0000"+k.toString(16)).slice(-4):str[i];return res}(uri):function hexify(str){return encodeURI(str)}(decodeURI(uri)))+">"}statementsToNTriples(sts){var sorted=sts.slice();sorted.sort();for(var str="",rdfns="http://www.w3.org/1999/02/22-rdf-syntax-ns#",self=this,kb=this.store,factory=this.rdfFactory,termToNT=function(x){if("Collection"!==x.termType)return self.atomicTermToN3(x);for(var list=x.elements,rest=kb.sym(rdfns+"nill"),i=list.length-1;i>=0;i--){var bnode=factory.blankNode();str+=termToNT(bnode)+" "+termToNT(kb.sym(rdfns+"first"))+" "+termToNT(list[i])+".\n",str+=termToNT(bnode)+" "+termToNT(kb.sym(rdfns+"rest"))+" "+termToNT(rest)+".\n",rest=bnode}return self.atomicTermToN3(rest)},i=0;i<sorted.length;i++){var st=sorted[i],s="";s+=termToNT(st.subject)+" ",s+=termToNT(st.predicate)+" ",s+=termToNT(st.object)+" ",this.flags.indexOf("q")>=0&&(s+=termToNT(st.why)+" "),str+=s+=".\n"}return str}statementsToN3(sts){var kb=this.store,uriMap={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"};sts.sort(function(x,y){return utils_js.heavyCompareSPO(x,y,kb,uriMap)}),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var predMap={};this.flags.indexOf("s")<0&&(predMap["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(predMap["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(predMap["http://www.w3.org/2000/10/swap/log#implies"]="=>");var spaces=function(n){for(var s="",i=0;i<n;i++)s+=" ";return s},treeToLine=function(tree){for(var str="",i=0;i<tree.length;i++){var branch=tree[i],s2="string"==typeof branch?branch:treeToLine(branch);if(0!==i){var ch=str.slice(-1)||" ";","===s2||";"===s2||("."!==s2||"0123456789.:".includes(ch))&&(str+=" ")}str+=s2}return str},treeToString=function(tree,level){var str="",lastLength=1e5;void 0===level&&(level=-1);for(var i=0;i<tree.length;i++){var branch=tree[i];if("string"!=typeof branch){var substr=treeToString(branch,level+1);if(substr.length<10*(80-4*level)&&substr.indexOf('"""')<0){var line=treeToLine(branch);line.length<80-4*level&&(branch=line,substr="")}substr&&(lastLength=1e4),str+=substr}if("string"==typeof branch){if(1===branch.length&&"\n"===str.slice(-1)&&",.;".indexOf(branch)>=0){str=str.slice(0,-1),"."==branch&&"0123456789.:".includes(str.charAt(str.length-1))&&(str+=" ",lastLength+=1),str+=branch+"\n",lastLength+=1;continue}if(lastLength<4*level+4||lastLength+branch.length+1<80&&";.".indexOf(str[str.length-2])<0)str=str.slice(0,-1)+" "+branch+"\n",lastLength+=branch.length+1;else{let line=spaces(4*level)+branch;str+=line+"\n",lastLength=line.length,level<0&&(str+="\n",lastLength=1e5)}}}return str};var statementListToTree=function statementListToTreeMethod(statements){for(var stats=this.rootSubjects(statements),roots=stats.roots,results=[],i=0;i<roots.length;i++){var root=roots[i];results.push(subjectTree(root,stats))}return results}.bind(this);function subjectTree(subject,stats){return"BlankNode"!==subject.termType||stats.incoming[subject]?[termToN3(subject,stats)].concat([propertyTree(subject,stats)]).concat(["."]):objectTree(subject,stats,!0).concat(["."])}var propertyTree=function propertyTreeMethod(subject,stats){var results=[],lastPred=null,sts=stats.subjects[this.toStr(subject)]||[];if(void 0===sts)throw new Error("Cant find statements for "+subject);for(var objects=[],i=0;i<sts.length;i++){var st=sts[i];st.predicate.uri===lastPred?objects.push(","):(lastPred&&(results=results.concat([objects]).concat([";"]),objects=[]),results.push(predMap[st.predicate.uri]?predMap[st.predicate.uri]:termToN3(st.predicate,stats))),lastPred=st.predicate.uri,objects.push(objectTree(st.object,stats))}return results=results.concat([objects])}.bind(this);var objectTree=function objectTreeMethod(obj,stats,force){return"BlankNode"!==obj.termType||!force&&void 0!==stats.rootsHash[obj.toNT()]?termToN3(obj,stats):stats.subjects[this.toStr(obj)]?["[",propertyTree(obj,stats),"]"]:"[]"}.bind(this);Serializer.prototype.termToN3=termToN3;var termToN3=function termToN3Method(expr,stats){var i,res;switch(expr.termType){case"Graph":return(res=(res=["{"]).concat(statementListToTree(expr.statements))).concat(["}"]);case"Collection":for(res=["("],i=0;i<expr.elements.length;i++)res.push([objectTree(expr.elements[i],stats)]);return res.push(")"),res;default:return this.atomicTermToN3(expr)}}.bind(this);var prefixDirectives=function prefixDirectivesMethod(){var str="";for(var ns in this.flags.indexOf("d")<0&&this.defaultNamespace&&(str+="@prefix : "+this.explicitURI(this.defaultNamespace)+".\n"),this.prefixes)this.prefixes.hasOwnProperty(ns)&&this.namespacesUsed[ns]&&(str+="@prefix "+this.prefixes[ns]+": "+this.explicitURI(ns)+".\n");return str+"\n"}.bind(this),tree=statementListToTree(sts);return prefixDirectives()+treeToString(tree)}atomicTermToN3(expr,stats){switch(expr.termType){case"BlankNode":case"Variable":return expr.toNT();case"Literal":var val=expr.value;if("string"!=typeof val)throw new TypeError("Value of RDF literal node must be a string");if(expr.datatype&&this.flags.indexOf("x")<0)switch(expr.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return val;case"http://www.w3.org/2001/XMLSchema#decimal":return val.indexOf(".")<0&&(val+=".0"),val;case"http://www.w3.org/2001/XMLSchema#double":{const eNotation=val.toLowerCase().indexOf("e")>0;return val.indexOf(".")<0&&!eNotation&&(val+=".0"),eNotation||(val+="e0"),val}case"http://www.w3.org/2001/XMLSchema#boolean":return"1"===expr.value?"true":"false"}var str=this.stringToN3(expr.value,this.flags);return expr.language?str+="@"+expr.language:expr.datatype.equals(this.xsd.string)||(str+="^^"+this.atomicTermToN3(expr.datatype,stats)),str;case"NamedNode":return this.symbolToN3(expr);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+expr+" of termType: "+expr.termType)}}stringToN3(str,flags){flags||(flags="e");var i,j,k,delim,forbidden,res="";for(str.length>20&&'"'!==str.slice(-1)&&flags.indexOf("n")<0&&(str.indexOf("\n")>0||str.indexOf('"')>0)?(delim='"""',forbidden=this.forbidden3):(delim='"',forbidden=this.forbidden1),i=0;i<str.length;){if(forbidden.lastIndex=0,null==forbidden.exec(str.slice(i)))break;j=i+forbidden.lastIndex-1,res+=str.slice(i,j);var ch=str[j];'"'===ch&&'"""'===delim&&'"""'!==str.slice(j,j+3)?res+=ch:(k='\b\f\r\t\v\n\\"'.indexOf(ch))>=0?res+="\\"+'bfrtvn\\"'[k]:flags.indexOf("e")>=0?res+="\\u"+("000"+ch.charCodeAt(0).toString(16).toLowerCase()).slice(-4):res+=ch,i=j+1}return delim+res+str.slice(i)+delim}symbolToN3(x){var uri=x.uri,j=uri.indexOf("#");if(j<0&&this.flags.indexOf("/")<0&&(j=uri.lastIndexOf("/")),j>=0&&this.flags.indexOf("p")<0&&(0===uri.indexOf("http")||0===uri.indexOf("ws")||0===uri.indexOf("file"))){for(var canSplit=!0,k=j+1;k<uri.length;k++)if(this._notNameChars.indexOf(uri[k])>=0){canSplit=!1;break}if(canSplit){var localid=uri.slice(j+1),namesp=uri.slice(0,j+1);if(this.defaultNamespace&&this.defaultNamespace===namesp&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(localid)<0?localid:":"+localid;var prefix=this.prefixes[namesp];if(prefix||(prefix=this.makeUpPrefix(namesp)),prefix)return this.namespacesUsed[namesp]=!0,prefix+":"+localid}}return this.explicitURI(uri)}writeStore(write){var kb=this.store,fetcher=kb.fetcher,session=fetcher&&fetcher.appNode,sources=this.store.index[3];for(var s in sources){var source=kb.fromNT(s);session&&source.equals(session)||write("\n"+this.atomicTermToN3(source)+" "+this.atomicTermToN3(kb.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(kb.statementsMatching(void 0,void 0,void 0,source))+" }.\n")}kb.statementsMatching(void 0,kb.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(st){write("\n<"+st.object.value+"> log:metadata {\n");var sts=kb.statementsMatching(void 0,void 0,void 0,st.subject);write(this.statementsToN3(this.statementsToN3(sts))),write("}.\n")});var metaSources=[];session&&metaSources.push(session);var metadata=[];metaSources.map(function(source){metadata=metadata.concat(kb.statementsMatching(void 0,void 0,void 0,source))}),write(this.statementsToN3(metadata))}statementsToXML(sts){var namespaceCounts=[];namespaceCounts["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var liPrefix="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",spaces=function(n){for(var s="",i=0;i<n;i++)s+=" ";return s},XMLtreeToLine=function(tree){for(var str="",i=0;i<tree.length;i++){var branch=tree[i];str+="string"==typeof branch?branch:XMLtreeToLine(branch)}return str},XMLtreeToString=function(tree,level){var line,str="",lastLength=1e5;level||(level=0);for(var i=0;i<tree.length;i++){var branch=tree[i];if("string"!=typeof branch){var substr=XMLtreeToString(branch,level+1);substr.length<10*(80-4*level)&&substr.indexOf('"""')<0&&(line=XMLtreeToLine(branch)).length<80-4*level&&(branch="   "+line,substr=""),substr&&(lastLength=1e4),str+=substr}"string"==typeof branch&&(lastLength<4*level+4?(str=str.slice(0,-1)+" "+branch+"\n",lastLength+=branch.length+1):(str+=(line=spaces(4*level)+branch)+"\n",lastLength=line.length))}return str};var statementListToXMLTree=function statementListToXMLTreeMethod(statements){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var stats=this.rootSubjects(statements),roots=stats.roots,results=[],i=0;i<roots.length;i++){var root=roots[i];results.push(subjectXMLTree(root,stats))}return results}.bind(this);function escapeForXML(str){return void 0===str?"@@@undefined@@@@":str.replace(/[&<"]/g,function(m){switch(m[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}var relURI=function relURIMethod(term){return escapeForXML(this.base?esm_uri.refTo(this.base,term.uri):term.uri)}.bind(this);var subjectXMLTree=function subjectXMLTreeMethod(subject,stats){var type,t,st,pred,results=[],sts=stats.subjects[this.toStr(subject)];if(void 0===sts)return propertyXMLTree(subject,stats);sts.sort(function(a,b){var ap=a.predicate.uri,bp=b.predicate.uri;if(ap.substring(0,44)===liPrefix||bp.substring(0,44)===liPrefix)return ap.localeCompare(bp);var as=ap.substring(44),bs=bp.substring(44),an=parseInt(as,10),bn=parseInt(bs,10);return isNaN(an)||isNaN(bn)||an!==as||bn!==bs?ap.localeCompare(bp):an-bn});for(var i=0;i<sts.length;i++)if("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==(st=sts[i]).predicate.uri||type||"NamedNode"!==st.object.termType){if((pred=st.predicate).uri.substr(0,44)===liPrefix){var number=pred.uri.substr(44);number===parseInt(number,10).toString()&&(pred=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(t=qname(pred),st.object.termType){case"BlankNode":results=1===stats.incoming[st.object].length?results.concat(["<"+t+' rdf:parseType="Resource">',subjectXMLTree(st.object,stats),"</"+t+">"]):results.concat(["<"+t+' rdf:nodeID="'+st.object.toNT().slice(2)+'"/>']);break;case"NamedNode":results=results.concat(["<"+t+' rdf:resource="'+relURI(st.object)+'"/>']);break;case"Literal":results=results.concat(["<"+t+(st.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+escapeForXML(st.object.datatype.uri)+'"')+(st.object.language?' xml:lang="'+st.object.language+'"':"")+">"+escapeForXML(st.object.value)+"</"+t+">"]);break;case"Collection":results=results.concat(["<"+t+' rdf:parseType="Collection">',collectionXMLTree(st.object,stats),"</"+t+">"]);break;default:throw new Error("Can't serialize object of type "+st.object.termType+" into XML")}}else type=st.object;var tag=type?qname(type):"rdf:Description",attrs="";return"BlankNode"===subject.termType?stats.incoming[subject]&&1===stats.incoming[subject].length||(attrs=' rdf:nodeID="'+subject.toNT().slice(2)+'"'):attrs=' rdf:about="'+relURI(subject)+'"',["<"+tag+attrs+">"].concat([results]).concat(["</"+tag+">"])}.bind(this);function collectionXMLTree(subject,stats){for(var res=[],i=0;i<subject.elements.length;i++)res.push(subjectXMLTree(subject.elements[i],stats));return res}var propertyXMLTree=function propertyXMLTreeMethod(subject,stats){var results=[],sts=stats.subjects[this.toStr(subject)];if(!sts)return results;sts.sort();for(var i=0;i<sts.length;i++){var st=sts[i];switch(st.object.termType){case"BlankNode":results=stats.rootsHash[st.object.toNT()]?results.concat(["<"+qname(st.predicate)+' rdf:nodeID="'+st.object.toNT().slice(2)+'">',"</"+qname(st.predicate)+">"]):results.concat(["<"+qname(st.predicate)+' rdf:parseType="Resource">',propertyXMLTree(st.object,stats),"</"+qname(st.predicate)+">"]);break;case"NamedNode":results=results.concat(["<"+qname(st.predicate)+' rdf:resource="'+relURI(st.object)+'"/>']);break;case"Literal":results=results.concat(["<"+qname(st.predicate)+(st.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+escapeForXML(st.object.datatype.value)+'"')+(st.object.language?' xml:lang="'+st.object.language+'"':"")+">"+escapeForXML(st.object.value)+"</"+qname(st.predicate)+">"]);break;case"Collection":results=results.concat(["<"+qname(st.predicate)+' rdf:parseType="Collection">',collectionXMLTree(st.object,stats),"</"+qname(st.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+st.object.termType+" into XML")}}return results}.bind(this);var qname=function qnameMethod(term){var uri=term.uri,j=uri.indexOf("#");if(j<0&&this.flags.indexOf("/")<0&&(j=uri.lastIndexOf("/")),j<0)throw new Error("Cannot make qname out of <"+uri+">");for(var k=j+1;k<uri.length;k++)if(this._notNameChars.indexOf(uri[k])>=0)throw new Error('Invalid character "'+uri[k]+'" cannot be in XML qname for URI: '+uri);var localid=uri.slice(j+1),namesp=uri.slice(0,j+1);if(this.defaultNamespace&&this.defaultNamespace===namesp&&this.flags.indexOf("d")<0)return localid;var prefix=this.prefixes[namesp];return prefix||(prefix=this.makeUpPrefix(namesp)),namespaceCounts[namesp]=!0,prefix+":"+localid}.bind(this),tree=statementListToXMLTree(sts),str="<rdf:RDF";for(var ns in this.defaultNamespace&&(str+=' xmlns="'+escapeForXML(this.defaultNamespace)+'"'),namespaceCounts)if(namespaceCounts.hasOwnProperty(ns)){var ns2=this.base&&this.flags.includes("z")?esm_uri.refTo(this.base,ns):ns;str+="\n xmlns:"+this.prefixes[ns]+'="'+escapeForXML(ns2)+'"'}return XMLtreeToString([str+=">",tree,"</rdf:RDF>"],-1)}statementsToJsonld(sts){const turtleDoc=this.statementsToN3(sts),jsonldObj=ttl2jsonld.parse(turtleDoc);return JSON.stringify(jsonldObj,null,2)}}function serialize(target,kb,base,contentType,callback,options){base=base||target?.value;const opts=options||{};contentType=contentType||types.sT;try{var sz=createSerializer(kb);opts.flags&&sz.setFlags(opts.flags);var newSts=kb.statementsMatching(void 0,void 0,void 0,target);switch("namespaces"in kb&&sz.suggestNamespaces(kb.namespaces),opts.namespaces&&sz.setNamespaces(opts.namespaces),sz.setBase(base),contentType){case types.JG:return executeCallback(null,sz.statementsToXML(newSts));case types.ny:case types.MG:return executeCallback(null,sz.statementsToN3(newSts));case types.sT:case types.hu:return sz.setFlags("si"),executeCallback(null,sz.statementsToN3(newSts));case types.bM:return sz.setFlags("deinprstux"),executeCallback(null,sz.statementsToNTriples(newSts));case types.i2:return sz.setFlags("si dr"),executeCallback(null,sz.statementsToJsonld(newSts));case types._0:case types.BR:return sz.setFlags("deinprstux q"),executeCallback(null,sz.statementsToNTriples(newSts));default:throw new Error("Serialize: Content-type "+contentType+" not supported for data write.")}}catch(err){if(callback)return callback(err,void 0);throw err}function executeCallback(err,result){return callback?void callback(err,result):result}}const appliedFactoryMethods=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],rdf={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function arrayToStatements(rdfFactory,subject,data){const statements=[];return data.reduce((id,_listObj,i,listData)=>{let nextNode;return statements.push(rdfFactory.quad(id,rdfFactory.namedNode(rdf.first),listData[i])),i<listData.length-1?(nextNode=rdfFactory.blankNode(),statements.push(rdfFactory.quad(id,rdfFactory.namedNode(rdf.rest),nextNode))):statements.push(rdfFactory.quad(id,rdfFactory.namedNode(rdf.rest),rdfFactory.namedNode(rdf.nil))),nextNode},subject),statements}function ArrayIndexOf(arr,item){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var length=arr.length;for(i<0&&(i=length+i);i<length;i++)if(arr[i]===item)return i;return-1}class Formula extends node_internal.A{constructor(){var _this;let statements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],constraints=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],initBindings=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],optional=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],opts=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};super(""),_this=this,this.statements=statements,this.constraints=constraints,this.initBindings=initBindings,this.optional=optional,(0,defineProperty.A)(this,"termType",types.bD),(0,defineProperty.A)(this,"classOrder",class_order.A.Graph),(0,defineProperty.A)(this,"fetcher",void 0),(0,defineProperty.A)(this,"isVar",0),(0,defineProperty.A)(this,"ns",namespace.A),(0,defineProperty.A)(this,"rdfFactory",void 0),this.rdfFactory=opts&&opts.rdfFactory||canonical_data_factory;for(const factoryMethod of appliedFactoryMethods)this[factoryMethod]=function(){return _this.rdfFactory[factoryMethod](...arguments)}}add(subject,predicate,object,graph){return 1===arguments.length&&subject.forEach(st=>this.add(st.subject,st.predicate,st.object,st.graph)),this.statements.push(this.rdfFactory.quad(subject,predicate,object,graph))}addStatement(statement){return this.add(statement)}bnode(id){return this.rdfFactory.blankNode(id)}addAll(statements){statements.forEach(quad=>{this.add(quad.subject,quad.predicate,quad.object,quad.graph)})}any(s,p,o,g){const st=this.anyStatementMatching(s,p,o,g);return null==st?null:null==s?st.subject:null==p?st.predicate:null==o?st.object:null}anyValue(s,p,o,g){const y=this.any(s,p,o,g);return y?y.value:void 0}anyJS(s,p,o,g){const y=this.any(s,p,o,g);return y?node_internal.A.toJS(y):void 0}anyStatementMatching(s,p,o,g){let x=this.statementsMatching(s,p,o,g,!0);if(x&&0!==x.length)return x[0]}id(term){return this.rdfFactory.id(term)}statementsMatching(s,p,o,g,justOne){const sts=this.statements.filter(st=>(!s||s.equals(st.subject))&&(!p||p.equals(st.predicate))&&(!o||o.equals(st.object))&&(!g||g.equals(st.graph)));return justOne?0===sts.length?[]:[sts[0]]:sts}bottomTypeURIs(types){let bots,bottom,elt,i,len,ref,subs,v;bots=[];for(let k in types)if(types.hasOwnProperty(k)){for(v=types[k],subs=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(k)),bottom=!0,i=0,len=subs.length;i<len;i++)if(elt=subs[i],ref=elt.uri,ref in types){bottom=!1;break}bottom&&(bots[k]=v)}return bots}collection(){return new collection.A}each(s,p,o,g){const results=[];let sts=this.statementsMatching(s,p,o,g,!1);if(null==s)for(let i=0,len=sts.length;i<len;i++)results.push(sts[i].subject);else if(null==p)for(let l=0,len1=sts.length;l<len1;l++)results.push(sts[l].predicate);else if(null==o)for(let m=0,len2=sts.length;m<len2;m++)results.push(sts[m].object);else if(null==g)for(let q=0,len3=sts.length;q<len3;q++)results.push(new named_node.A(sts[q].graph.value));return results}equals(other){return!!other&&this.hashString()===other.hashString()}findMembersNT(thisClass){let len2,len4,m,members,pred,ref,ref1,ref2,ref3,ref4,ref5,seeds,st,u;seeds={},seeds[thisClass.toNT()]=!0,members={},ref=this.transitiveClosure(seeds,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(let t in ref)if(ref.hasOwnProperty(t)){ref1=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(t));for(let i=0,len=ref1.length;i<len;i++)st=ref1[i],members[st.subject.toNT()]=st;ref2=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(t));for(let l=0,len1=ref2.length;l<len1;l++)for(pred=ref2[l],ref3=this.statementsMatching(void 0,pred),m=0,len2=ref3.length;m<len2;m++)st=ref3[m],members[st.subject.toNT()]=st;ref4=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(t));for(let q=0,len3=ref4.length;q<len3;q++)for(pred=ref4[q],ref5=this.statementsMatching(void 0,pred),u=0,len4=ref5.length;u<len4;u++)st=ref5[u],members[st.object.toNT()]=st}return members}findMemberURIs(subject){return this.NTtoURI(this.findMembersNT(subject))}findSubClassesNT(subject){let types={};return types[subject.toNT()]=!0,this.transitiveClosure(types,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}findSuperClassesNT(subject){let types={};return types[subject.toNT()]=!0,this.transitiveClosure(types,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypesNT(subject){let domain,range,rdftype,ref,ref1,ref2,ref3,st,types;rdftype="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",types=[],ref=this.statementsMatching(subject,void 0,void 0);for(let i=0,len=ref.length;i<len;i++)if(st=ref[i],"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===st.predicate.uri)types[st.object.toNT()]=st;else{ref1=this.each(st.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(let l=0,len1=ref1.length;l<len1;l++)range=ref1[l],types[range.toNT()]=st}ref2=this.statementsMatching(void 0,void 0,subject);for(let m=0,len2=ref2.length;m<len2;m++){st=ref2[m],ref3=this.each(st.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(let q=0,len3=ref3.length;q<len3;q++)domain=ref3[q],types[domain.toNT()]=st}return this.transitiveClosure(types,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypeURIs(subject){return this.NTtoURI(this.findTypesNT(subject))}connectedStatements(subject,doc,excludePredicateURIs){excludePredicateURIs=excludePredicateURIs||[];let todo=[subject],done={},doneArcs={},result=[],self=this,follow=function(x){let queue=function(x){"BlankNode"!==x.termType||done[x.value]||(done[x.value]=!0,todo.push(x))},sts=self.statementsMatching(null,null,x,doc).concat(self.statementsMatching(x,null,null,doc));sts=sts.filter(function(st){if(excludePredicateURIs[st.predicate.value])return!1;let hash=st.toNT();return!doneArcs[hash]&&(doneArcs[hash]=!0,!0)}),sts.forEach(function(st){queue(st.subject),queue(st.object)}),result=result.concat(sts)};for(;todo.length;)follow(todo.shift());return result}formula(_features){return new Formula}fromNT(str){let dt,k,lang;switch(str[0]){case"<":return this.sym(str.slice(1,-1));case'"':if(lang=void 0,dt=void 0,k=str.lastIndexOf('"'),k<str.length-1)if("@"===str[k+1])lang=str.slice(k+2);else{if("^^"!==str.slice(k+1,k+3))throw new Error("Can't convert string from NT: "+str);dt=this.fromNT(str.slice(k+3))}return str=(str=(str=(str=str.slice(1,k)).replace(/\\"/g,'"')).replace(/\\n/g,"\n")).replace(/\\\\/g,"\\"),this.rdfFactory.literal(str,lang||dt);case"_":return this.rdfFactory.blankNode(str.slice(2));case"?":return new Variable(str.slice(1))}throw new Error("Can't convert from NT: "+str)}holds(s,p,o,g){let i;if(1===arguments.length){if(!s)return!0;if(s instanceof Array){for(i=0;i<s.length;i++)if(!this.holds(s[i]))return!1;return!0}if((0,terms.SH)(s))return this.holds(s.subject,s.predicate,s.object,s.graph);if(s.statements)return this.holds(s.statements)}return null!=this.anyStatementMatching(s,p,o,g)}holdsStatement(statement){return this.holds(statement.subject,statement.predicate,statement.object,statement.graph)}list(values,context){if(context.rdfFactory.supports.COLLECTIONS){const collection=context.rdfFactory.collection();return values.forEach(function(val){collection.append(val)}),collection}{const node=context.rdfFactory.blankNode(),statements=arrayToStatements(context.rdfFactory,node,values);return context.addAll(statements),node}}NTtoURI(t){let k,v,uris={};for(k in t)t.hasOwnProperty(k)&&(v=t[k],"<"===k[0]&&(uris[k.slice(1,-1)]=v));return uris}serialize(base,contentType,provenance,options){return serialize(provenance,this,base,contentType,void 0,options)}substitute(bindings){let statementsCopy=this.statements.map(function(ea){return ea.substitute(bindings)});const y=new Formula;return y.addAll(statementsCopy),y}sym(uri,name){if(name)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(uri)}the(s,p,o,g){let x=this.any(s,p,o,g);return null==x&&esm_log.A.error("No value found for the() {"+s+" "+p+" "+o+"}."),x}transitiveClosure(seeds,predicate,inverse){let elt,i,len,s,sups,t,agenda={};Object.assign(agenda,seeds);let done={};for(;;){if(t=function(){for(let p in agenda)if(agenda.hasOwnProperty(p))return p}(),null==t)return done;for(sups=inverse?this.each(void 0,predicate,this.fromNT(t)):this.each(this.fromNT(t),predicate),i=0,len=sups.length;i<len;i++)elt=sups[i],s=elt.toNT(),s in done||s in agenda||(agenda[s]=agenda[t]);done[t]=agenda[t],delete agenda[t]}}topTypeURIs(types){let i,j,k,len,n,ref,tops,v;for(k in tops=[],types)if(types.hasOwnProperty(k)){for(v=types[k],n=0,ref=this.each(this.rdfFactory.namedNode(k),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),i=0,len=ref.length;i<len;i++)if(j=ref[i],"http://www.w3.org/2000/01/rdf-schema#Resource"!==j.uri){n++;break}n||(tops[k]=v)}return tops["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete tops["http://www.w3.org/2000/01/rdf-schema#Resource"],tops["http://www.w3.org/2002/07/owl#Thing"]&&delete tops["http://www.w3.org/2002/07/owl#Thing"],tops}toString(){return"{"+this.statements.join("\n")+"}"}variable(name){return new Variable(name)}whether(s,p,o,g){return this.statementsMatching(s,p,o,g,!1).length}}var node=__webpack_require__("./node_modules/rdflib/esm/node.js");class Query{constructor(name,id){this.pat=new IndexedFormula,this.vars=[],this.name=name,this.id=id}}function indexedFormulaQuery(myQuery,callback,fetcher,onDone){function bindingDebug(b){var v,str="";for(v in b)b.hasOwnProperty(v)&&(str+="    "+v+" -> "+b[v]);return str}function bindingsDebug(nbs){var i,str="Bindings: ",n=nbs.length;for(i=0;i<n;i++)str+=bindingDebug(nbs[i][0])+";\n\t";return str}function unifyContents(self,other,bindings,formula){var nbs2;if(self.length!==other.length)return[];if(!self.length)return[[[],null]];var nbs=function unifyTerm(self,other,bindings,formula){var actual=bindings[self];if(void 0===actual){if(self.isVar){var b=[];return b[self]=other,[[b,null]]}actual=self}if(!actual.complexType)return formula.redirections[actual]&&(actual=formula.redirections[actual]),formula.redirections[other]&&(other=formula.redirections[other]),actual.equals(other)||actual.uri&&"chrome:theSession"===actual.uri?[[[],null]]:[];if(self instanceof Array)return other instanceof Array?unifyContents(self,other,bindings):[];throw new Error("query.js: oops - code not written yet")}(self[0],other[0],bindings,formula);if(0===nbs.length)return nbs;var i,nb,j,m,v,nb2,bindings2,res=[],n=nbs.length;for(i=0;i<n;i++){for(v in bindings2=[],nb=nbs[i][0])nb.hasOwnProperty(v)&&(bindings2[v]=nb[v]);for(v in bindings)bindings.hasOwnProperty(v)&&(bindings2[v]=bindings[v]);for(m=(nbs2=unifyContents(self.slice(1),other.slice(1),bindings2,formula)).length,j=0;j<m;j++){for(v in nb2=nbs2[j][0],nb)nb.hasOwnProperty(v)&&(nb2[v]=nb[v]);res.push([nb2,null])}}return res}function bind(x,binding){var y=binding[x];return void 0===y?x:y}function union(a,b){var x,c={};for(x in a)a.hasOwnProperty(x)&&(c[x]=a[x]);for(x in b)b.hasOwnProperty(x)&&(c[x]=b[x]);return c}function OptionalBranchJunction(originalCallback,trunkBindings){return this.trunkBindings=trunkBindings,this.originalCallback=originalCallback,this.branches=[],this}function MandatoryBranch(callback,onDone){return this.count=0,this.success=!1,this.done=!1,this.callback=callback,this.onDone=onDone,this}OptionalBranchJunction.prototype.checkAllDone=function(){var i;for(i=0;i<this.branches.length;i++)if(!this.branches[i].done)return;esm_log.A.debug("OPTIONAL BIDNINGS ALL DONE:"),this.doCallBacks(this.branches.length-1,this.trunkBindings)},OptionalBranchJunction.prototype.doCallBacks=function(b,bindings){var j;if(b<0)return this.originalCallback(bindings);for(j=0;j<this.branches[b].results.length;j++)this.doCallBacks(b-1,union(bindings,this.branches[b].results[j]))},MandatoryBranch.prototype.reportMatch=function(bindings){this.callback(bindings),this.success=!0},MandatoryBranch.prototype.reportDone=function(){this.done=!0,esm_log.A.info("Mandatory query branch finished.***"),void 0!==this.onDone&&this.onDone()};var OptionalBranch=function(junction){return this.count=0,this.done=!1,this.results=[],this.junction=junction,junction.branches.push(this),this};function prepare(f,item,bindings){var terms,termIndex,i,ind;for(item.nvars=0,item.index=null,terms=[item.subject,item.predicate,item.object,item.why],ind=[f.subjectIndex,f.predicateIndex,f.objectIndex,f.whyIndex],i=0;i<4;i++){let t=terms[i];if(t.uri&&"chrome:theSession"===t.uri);else if(t.isVar&&void 0===bindings[t])item.nvars++;else{if(t=bind(terms[i],bindings),f.redirections[f.id(t)]&&(t=f.redirections[f.id(t)]),!(termIndex=ind[i][f.id(t)]))return item.index=[],!1;(null===item.index||item.index.length>termIndex.length)&&(item.index=termIndex)}}return null===item.index&&(item.index=f.statements),!0}function easiestQuery(self,other){return self.nvars!==other.nvars?self.nvars-other.nvars:self.index.length-other.index.length}OptionalBranch.prototype.reportMatch=function(bindings){this.results.push(bindings)},OptionalBranch.prototype.reportDone=function(){esm_log.A.debug("Optional branch finished - results.length = "+this.results.length),0===this.results.length&&(this.results.push({}),esm_log.A.debug("Optional branch FAILED - that's OK.")),this.done=!0,this.junction.checkAllDone()};var match=function(f,g,bindingsSoFar,level,fetcher,localCallback,branch){esm_log.A.debug("Match begins, Branch count now: "+branch.count+" for "+branch.pattern_debug);var item,i,pattern=g.statements;if(0===pattern.length){if(esm_log.A.debug("FOUND MATCH WITH BINDINGS:"+bindingDebug(bindingsSoFar)),0===g.optional.length)branch.reportMatch(bindingsSoFar);else{esm_log.A.debug("OPTIONAL: "+g.optional);var b,junction=new OptionalBranchJunction(callback,bindingsSoFar),br=[];for(b=0;b<g.optional.length;b++)br[b]=new OptionalBranch(junction),br[b].pattern_debug=g.optional[b];for(b=0;b<g.optional.length;b++)br[b].count=br[b].count+1,match(f,g.optional[b],bindingsSoFar,"",fetcher,callback,br[b])}return branch.count--,void esm_log.A.debug("Match ends -- success , Branch count now: "+branch.count+" for "+branch.pattern_debug)}var n=pattern.length;if(fetcher){0;var fetchResource=function(requestedTerm,id){var docuri=requestedTerm.uri.split("#")[0];fetcher.nowOrWhenFetched(docuri,void 0,function(ok,body,xhr){ok||console.log("Error following link to <"+requestedTerm.uri+"> in query: "+body),match(f,g,bindingsSoFar,level,fetcher,localCallback,branch)})};for(i=0;i<n;i++){if(item=pattern[i],void 0!==bindingsSoFar[item.subject]&&bindingsSoFar[item.subject].uri&&fetcher&&"unrequested"===fetcher.getState((0,esm_uri.docpart)(bindingsSoFar[item.subject].uri)))return void fetchResource(bindingsSoFar[item.subject]);if(void 0!==bindingsSoFar[item.object]&&bindingsSoFar[item.object].uri&&fetcher&&"unrequested"===fetcher.getState((0,esm_uri.docpart)(bindingsSoFar[item.object].uri)))return void fetchResource(bindingsSoFar[item.object])}}match2(f,g,bindingsSoFar,level,fetcher,localCallback,branch)},constraintsSatisfied=function(bindings,constraints){var x,test,res=!0;for(x in bindings)bindings.hasOwnProperty(x)&&constraints[x]&&(test=constraints[x].test)&&!test(bindings[x])&&(res=!1);return res},match2=function(f,g,bindingsSoFar,level,fetcher,callback,branch){var i,k,nk,v,bindings2,newBindings1,item,pattern=g.statements,n=pattern.length;for(i=0;i<n;i++)prepare(f,item=pattern[i],bindingsSoFar);pattern.sort(easiestQuery),item=pattern[0];var c,rest=f.formula();rest.optional=g.optional,rest.constraints=g.constraints,rest.statements=pattern.slice(1),esm_log.A.debug(level+"match2 searching "+item.index.length+" for "+item+"; bindings so far="+bindingDebug(bindingsSoFar));var nbs1,st,nc=item.index.length,onward=0;for(c=0;c<nc;c++)for(st=item.index[c],nbs1=unifyContents([item.subject,item.predicate,item.object,item.why],[st.subject,st.predicate,st.object,st.why],bindingsSoFar,f),esm_log.A.info(level+" From first: "+nbs1.length+": "+bindingsDebug(nbs1)),nk=nbs1.length,k=0;k<nk;k++)if(bindings2=[],newBindings1=nbs1[k][0],constraintsSatisfied(newBindings1,g.constraints)){for(v in newBindings1)newBindings1.hasOwnProperty(v)&&(bindings2[v]=newBindings1[v]);for(v in bindingsSoFar)bindingsSoFar.hasOwnProperty(v)&&(bindings2[v]=bindingsSoFar[v]);branch.count++,onward++,match(f,rest,bindings2,level+"  ",fetcher,callback,branch)}else esm_log.A.debug("Branch count CS: "+branch.count);branch.count--,0===onward&&esm_log.A.debug("Match2 fails completely on "+item),esm_log.A.debug("Match2 ends, Branch count: "+branch.count+" for "+branch.pattern_debug),0===branch.count&&(esm_log.A.debug("Branch finished."),branch.reportDone())},f=this;esm_log.A.debug("Query on "+this.statements.length);var trunck=new MandatoryBranch(callback,onDone);trunck.count++,myQuery.sync?match(f,myQuery.pat,myQuery.pat.initBindings,"",fetcher,callback,trunck):setTimeout(function(){match(f,myQuery.pat,myQuery.pat.initBindings,"",fetcher,callback,trunck)},0)}const owlNamespaceURI="http://www.w3.org/2002/07/owl#";function handleFP(formula,subj,pred,obj){var o1=formula.any(subj,pred,void 0);return!!o1&&(formula.equate(o1,obj),!0)}function handleIFP(formula,subj,pred,obj){var s1=formula.any(void 0,pred,obj);return!!s1&&(formula.equate(s1,subj),!0)}function handleRDFType(formula,subj,pred,obj,why){formula.typeCallback&&formula.typeCallback(formula,obj,why);var x=formula.classActions[formula.id(obj)],done=!1;if(x)for(var i=0;i<x.length;i++)done=done||x[i](formula,subj,pred,obj,why);return done}class IndexedFormula extends Formula{constructor(features){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(void 0,void 0,void 0,void 0,opts),(0,defineProperty.A)(this,"updater",void 0),(0,defineProperty.A)(this,"namespaces",void 0),(0,defineProperty.A)(this,"classActions",void 0),(0,defineProperty.A)(this,"propertyActions",void 0),(0,defineProperty.A)(this,"redirections",void 0),(0,defineProperty.A)(this,"aliases",void 0),(0,defineProperty.A)(this,"HTTPRedirects",void 0),(0,defineProperty.A)(this,"subjectIndex",void 0),(0,defineProperty.A)(this,"predicateIndex",void 0),(0,defineProperty.A)(this,"objectIndex",void 0),(0,defineProperty.A)(this,"whyIndex",void 0),(0,defineProperty.A)(this,"index",void 0),(0,defineProperty.A)(this,"features",void 0),(0,defineProperty.A)(this,"_universalVariables",void 0),(0,defineProperty.A)(this,"_existentialVariables",void 0),(0,defineProperty.A)(this,"rdfArrayRemove",void 0),(0,defineProperty.A)(this,"dataCallbacks",[]),(0,defineProperty.A)(this,"dataRemovalCallbacks",[]),this.propertyActions={},this.classActions={},this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},this.features=features||[],this.rdfArrayRemove=opts.rdfArrayRemove||utils_js.RDFArrayRemove,opts.dataCallback&&(this.dataCallbacks=[opts.dataCallback]),opts.dataRemovalCallback&&(this.dataRemovalCallbacks=[opts.dataRemovalCallback]),this.initPropertyActions(this.features)}static get defaultGraphURI(){return"chrome:theSession"}substitute(bindings){var statementsCopy=this.statements.map(function(ea){return ea.substitute(bindings)}),y=new IndexedFormula;return y.add(statementsCopy),y}addDataCallback(cb){this.dataCallbacks.push(cb)}addDataRemovalCallback(cb){this.dataRemovalCallbacks.push(cb)}applyPatch(patch,target,patchCallback){var ds,targetKB=this,binding=null;function doPatch(onDonePatch){if(patch.delete){ds=patch.delete,binding&&(ds=ds.substitute(binding)),ds=ds.statements;var bad=[],ds2=ds.map(function(st){var sts=targetKB.statementsMatching(st.subject,st.predicate,st.object,target);return 0===sts.length?(bad.push(st),null):sts[0]});if(bad.length)return patchCallback("Could not find to delete: "+bad.join("\n or "));ds2.map(function(st){targetKB.remove(st)})}patch.insert&&(ds=patch.insert,binding&&(ds=ds.substitute(binding)),(ds=ds.statements).map(function(st){st.graph=target,targetKB.add(st.subject,st.predicate,st.object,st.graph)})),onDonePatch()}if(patch.where){var query=new Query("patch");query.pat=patch.where,query.pat.statements.map(function(st){st.graph=esm_namedNode(target.value)}),query.sync=!0;var bindingsFound=[];targetKB.query(query,function onBinding(binding){bindingsFound.push(binding)},targetKB.fetcher,function onDone(){return 0===bindingsFound.length?patchCallback("No match found to be patched:"+patch.where):bindingsFound.length>1?patchCallback("Patch ambiguous. No patch done."):(binding=bindingsFound[0],void doPatch(patchCallback))})}else doPatch(patchCallback)}declareExistential(x){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(x),x}initPropertyActions(features){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[handleRDFType],ArrayIndexOf(features,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${owlNamespaceURI}sameAs`))]=[function(formula,subj,pred,obj,why){return formula.equate(subj,obj),!0}]),ArrayIndexOf(features,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${owlNamespaceURI}InverseFunctionalProperty`))]=[function(formula,subj,pred,obj,addFn){return formula.newPropertyAction(subj,handleIFP)}]),ArrayIndexOf(features,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${owlNamespaceURI}FunctionalProperty`))]=[function(formula,subj,proj,obj,addFn){return formula.newPropertyAction(subj,handleFP)}])}addStatement(st){return this.add(st.subject,st.predicate,st.object,st.graph),this.statements.length}add(subj,pred,obj,why){var i,actions,st;if(1===arguments.length){if(subj instanceof Array)for(i=0;i<subj.length;i++)this.add(subj[i]);else(0,terms.aF)(subj)?this.add(subj.subject,subj.predicate,subj.object,subj.graph):(0,terms.ok)(subj)&&this.add(subj.statements);return this}why||(why=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),"string"==typeof subj&&(subj=this.rdfFactory.namedNode(subj)),pred=node.A.fromValue(pred);const objNode=node.A.fromValue(obj);if(why=node.A.fromValue(why),!(0,terms.CZ)(subj))throw new Error("Subject is not a subject type");if(!(0,terms.fY)(pred))throw new Error(`Predicate ${pred} is not a predicate type`);if(!(0,terms.DJ)(objNode))throw new Error(`Object ${objNode} is not an object type`);if(!(0,terms.RN)(why))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,pred,why);var predHash=this.id(this.canon(pred)),done=!1;if(actions=this.propertyActions[predHash])for(i=0;i<actions.length;i++)done=done||actions[i](this,subj,pred,objNode,why);if(this.holds(subj,pred,objNode,why))return null;var hash=[this.id(this.canon(subj)),predHash,this.id(this.canon(objNode)),this.id(this.canon(why))];for(st=this.rdfFactory.quad(subj,pred,objNode,why),i=0;i<4;i++){var ix=this.index[i],h=hash[i];ix[h]||(ix[h]=[]),ix[h].push(st)}this.statements.push(st);for(const callback of this.dataCallbacks)callback(st);return st}canon(term){if(!term)return term;const y=this.redirections[this.id(term)];if(y)return y;switch(term.termType){case types.$Q:return new blank_node.A(term.value);case types.r0:return term;case types.ic:return new DefaultGraph;case types.S:case types.bD:return term;case types.QW:return new literal.A(term.value,term.language,term.datatype);case types.Kk:return new named_node.A(term.value);case types.P2:return new Variable(term.value);default:throw new Error(`Term Type not recognized for canonization: ${term.termType}`)}}check(){this.checkStatementList(this.statements);for(var p=0;p<4;p++){var ix=this.index[p];for(var key in ix)ix.hasOwnProperty(key)&&this.checkStatementList(ix[key],p)}}checkStatementList(sts,from){void 0===from&&(from=0);for(var st,origin=" found in "+["subject","predicate","object","why"][from]+" index.",j=0;j<sts.length;j++){for(var term=[(st=sts[j]).subject,st.predicate,st.object,st.graph],arrayContains=function(a,x){for(var i=0;i<a.length;i++)if(a[i].subject.equals(x.subject)&&a[i].predicate.equals(x.predicate)&&a[i].object.equals(x.object)&&a[i].why.equals(x.graph))return!0},p=0;p<4;p++){var c=this.canon(term[p]),h=this.id(c);this.index[p][h]&&arrayContains(this.index[p][h],st)}if(!arrayContains(this.statements,st))throw new Error("Statement list does not statement "+st+"@"+st.graph+origin)}}close(){return this}compareTerms(u1,u2){return Object.prototype.hasOwnProperty.call(u1,"compareTerm")?u1.compareTerm(u2):class_order.A[u1.termType]<class_order.A[u2.termType]?-1:class_order.A[u1.termType]>class_order.A[u2.termType]?1:u1.value<u2.value?-1:u1.value>u2.value?1:0}copyTo(template,target,flags){flags||(flags=[]);var statList=this.statementsMatching(template);-1!==ArrayIndexOf(flags,"two-direction")&&statList.concat(this.statementsMatching(void 0,void 0,template));for(var i=0;i<statList.length;i++){var st=statList[i];switch(st.object.termType){case"NamedNode":this.add(target,st.predicate,st.object);break;case"Literal":case"BlankNode":case"Collection":this.add(target,st.predicate,st.object.copy(this))}-1!==ArrayIndexOf(flags,"delete")&&this.remove(st)}}equate(u1in,u2in){const u1=this.canon(u1in),u2=this.canon(u2in);var d=this.compareTerms(u1,u2);return!d||(d<0?this.replaceWith(u2,u1):this.replaceWith(u1,u2))}formula(features){return new IndexedFormula(features)}get length(){return this.statements.length}match(subject,predicate,object,graph){return this.statementsMatching(node.A.fromValue(subject),node.A.fromValue(predicate),node.A.fromValue(object),node.A.fromValue(graph))}mentionsURI(uri){var hash="<"+uri+">";return!!this.subjectIndex[hash]||!!this.objectIndex[hash]||!!this.predicateIndex[hash]}newExistential(uri){if(!uri)return this.bnode();var x=this.sym(uri);return this.declareExistential(x)}newPropertyAction(pred,action){var hash=this.id(pred);this.propertyActions[hash]||(this.propertyActions[hash]=[]),this.propertyActions[hash].push(action);for(var toBeFixed=this.statementsMatching(void 0,pred,void 0),done=!1,i=0;i<toBeFixed.length;i++)done=done||action(this,toBeFixed[i].subject,pred,toBeFixed[i].object);return done}newUniversal(uri){var x=this.sym(uri);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(x),x}variable(name){return new Variable(name)}nextSymbol(doc){for(var i=0;;i++){var uri=doc.value+"#n"+i;if(!this.mentionsURI(uri))return this.sym(uri)}}query(myQuery,callback,fetcher,onDone){return indexedFormulaQuery.call(this,myQuery,callback,fetcher,onDone)}querySync(myQuery){var results=[];var done=!1;if(myQuery.sync=!0,indexedFormulaQuery.call(this,myQuery,function saveBinginds(bindings){results.push(bindings)},null,function onDone(){done=!0}),!done)throw new Error("Sync query should have called done function");return results}remove(st){if(st instanceof Array){for(var i=0;i<st.length;i++)this.remove(st[i]);return this}if((0,terms.ok)(st))return this.remove(st.statements);var sts=this.statementsMatching(st.subject,st.predicate,st.object,st.graph);if(!sts.length)throw new Error("Statement to be removed is not on store: "+st);return this.removeStatement(sts[0]),this}removeDocument(doc){this.removeMetadata(doc);for(var sts=this.statementsMatching(void 0,void 0,void 0,doc).slice(),i=0;i<sts.length;i++)this.removeStatement(sts[i]);return this.removeMatches(doc,null,null),this}removeMetadata(doc){const meta=this.sym("chrome://TheCurrentSession"),linkNamespaceURI="http://www.w3.org/2007/ont/link#",requests=this.statementsMatching(void 0,this.sym(`${linkNamespaceURI}requestedURI`),this.rdfFactory.literal(doc.value),meta).map(st=>st.subject);for(var r=0;r<requests.length;r++){const request=requests[r];if(null!=request){let sts;const status=this.any(request,this.sym(`${linkNamespaceURI}status`),null,meta);if(null!=status){sts=this.statementsMatching(status,this.sym(`${linkNamespaceURI}status`),null,meta).slice();for(var i=0;i<sts.length;i++)this.removeStatement(sts[i])}const response=this.any(request,this.sym(`${linkNamespaceURI}response`),null,meta);if(null!=response){sts=this.statementsMatching(response,null,null,meta).slice();for(i=0;i<sts.length;i++)this.removeStatement(sts[i])}sts=this.statementsMatching(request,null,null,meta).slice();for(i=0;i<sts.length;i++)this.removeStatement(sts[i])}}return this.removeMatches(this.sym(doc.value),null,null,meta),this}removeMany(subj,pred,obj,why,limit){for(var sts=this.statementsMatching(subj,pred,obj,why,!1),statements=[],i=0;i<sts.length;i++)statements.push(sts[i]);for(limit&&(statements=statements.slice(0,limit)),i=0;i<statements.length;i++)this.remove(statements[i])}removeMatches(subject,predicate,object,graph){return this.removeMany(subject,predicate,object,graph),this}removeStatement(st){for(var term=[st.subject,st.predicate,st.object,st.graph],p=0;p<4;p++){var c=this.canon(term[p]),h=this.id(c);this.index[p][h]&&this.rdfArrayRemove(this.index[p][h],st)}this.rdfArrayRemove(this.statements,st);for(const callback of this.dataRemovalCallbacks)callback(st);return this}removeStatements(sts){for(var i=0;i<sts.length;i++)this.remove(sts[i]);return this}replaceWith(big,small){for(var oldhash=this.id(big),newhash=this.id(small),moveIndex=function(ix){var oldlist=ix[oldhash];if(oldlist){var newlist=ix[newhash];ix[newhash]=newlist?oldlist.concat(newlist):oldlist,delete ix[oldhash]}},i=0;i<4;i++)moveIndex(this.index[i]);if(this.redirections[oldhash]=small,big.value){if(this.aliases[newhash]||(this.aliases[newhash]=[]),this.aliases[newhash].push(big),this.aliases[oldhash])for(i=0;i<this.aliases[oldhash].length;i++)this.redirections[this.id(this.aliases[oldhash][i])]=small,this.aliases[newhash].push(this.aliases[oldhash][i]);this.add(small,this.sym("http://www.w3.org/2007/ont/link#uri"),big),this.fetcher&&this.fetcher.nowKnownAs(big,small)}return moveIndex(this.classActions),moveIndex(this.propertyActions),!0}allAliases(x){var a=this.aliases[this.id(this.canon(x))]||[];return a.push(this.canon(x)),a}sameThings(x,y){if(x.equals(y))return!0;var x1=this.canon(x);if(!x1)return!1;var y1=this.canon(y);return!!y1&&x1.value===y1.value}setPrefixForURI(prefix,nsuri){if(("tab"!==prefix||!this.namespaces.tab)&&"ns"!==prefix.slice(0,2)&&"default"!==prefix.slice(0,7)){for(let existingPrefix in this.namespaces)this.namespaces[existingPrefix]==nsuri&&delete this.namespaces[existingPrefix];this.namespaces[prefix]=nsuri}}statementsMatching(subj,pred,obj,why,justOne){var p,list,pat=[subj,pred,obj,why],pattern=[],hash=[],wild=[],given=[];for(p=0;p<4;p++)pattern[p]=this.canon(node.A.fromValue(pat[p])),pattern[p]?(given.push(p),hash[p]=this.id(pattern[p])):wild.push(p);if(0===given.length)return this.statements;if(1===given.length)return p=given[0],(list=this.index[p][hash[p]])&&justOne&&list.length>1&&(list=list.slice(0,1)),list=list||[];var iBest,i,best=1e10;for(i=0;i<given.length;i++){if(p=given[i],!(list=this.index[p][hash[p]]))return[];list.length<best&&(best=list.length,iBest=i)}for(var pBest=given[iBest],possibles=this.index[pBest][hash[pBest]],check=given.slice(0,iBest).concat(given.slice(iBest+1)),results=[],parts=["subject","predicate","object","why"],j=0;j<possibles.length;j++){var st=possibles[j];for(i=0;i<check.length;i++)if(p=check[i],!this.canon(st[parts[p]]).equals(pattern[p])){st=null;break}if(null!=st&&(results.push(st),justOne))break}return results}uris(term){var cterm=this.canon(term),terms=this.aliases[this.id(cterm)];if(!cterm.value)return[];var res=[cterm.value];if(terms)for(var i=0;i<terms.length;i++)res.push(terms[i].uri);return res}serialize(base,contentType,provenance,options){return serialize(provenance,this,base,contentType,void 0,options={...options||{},namespaces:options?.namespaces?{...this.namespaces,...options.namespaces}:{...this.namespaces}})}}(0,defineProperty.A)(IndexedFormula,"handleRDFType",void 0),IndexedFormula.handleRDFType=handleRDFType;const RDF=(0,namespace.A)("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function convertFirstRestNil(store,doc){function preceding(ele,listSoFar,trash){const rests=store.statementsMatching(ele,RDF("rest"),null,doc);if(1!==rests.length)throw new Error(`Bad list structure: no rest at ${ele}`);const firsts=store.statementsMatching(ele,RDF("first"),null,doc);if(1!==firsts.length)throw new Error(`Bad list structure: rest but ${firsts.length} firsts at ${ele}`);const total=[firsts[0].object].concat(listSoFar),totalTrash=trash.concat(rests).concat(firsts),pres=store.statementsMatching(null,RDF("rest"),ele,doc);if(0===pres.length){const newList=new collection.A(total);return store.remove(totalTrash),void function substituteInDoc(store,x,y,doc){for(const quad of store.statementsMatching(y,null,null,doc)){const newStatement=new Statement(x,quad.predicate,quad.object,doc);store.remove(quad),store.add(newStatement)}for(const quad of store.statementsMatching(null,y,null,doc))store.remove(quad),store.add(new Statement(quad.subject,x,quad.object,doc));for(const quad of store.statementsMatching(null,null,y,doc))store.remove(quad),store.add(new Statement(quad.subject,quad.predicate,x,doc))}(store,newList,ele,doc)}if(1!==pres.length)throw new Error(`Bad list structure: ${pres.length} pres at ${ele}`);const pre=pres[0].subject;if("BlankNode"!==pre.termType)throw new Error(`Bad list element node ${pre} type: ${pre.termType} `);preceding(pre,total,totalTrash)}!function substituteNillsInDoc(store,doc){const x=RDF("nil");for(const quad of store.statementsMatching(x,null,null,doc)){store.remove(quad);const y=new collection.A;store.add(new Statement(y,quad.predicate,quad.object,doc))}for(const quad of store.statementsMatching(null,null,x,doc))if(!quad.predicate.sameTerm(RDF("rest"))){store.remove(quad);const y=new collection.A;store.add(new Statement(quad.subject,quad.predicate,y,doc))}}(store,doc);store.statementsMatching(null,RDF("rest"),RDF("nil"),doc).forEach(tail=>{if("BlankNode"!==tail.subject.termType)throw new Error(`Bad list element node ${tail.subject} type: ${tail.subject.termType} `);preceding(tail.subject,[],[])})}var Utf8_encode=function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext},Logic_NS="http://www.w3.org/2000/10/swap/log#",pyjslib_Tuple=function(theList){return theList},pyjslib_List=function(theList){return theList},pyjslib_Dict=function(listOfPairs){if(listOfPairs.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},pyjslib_len=function(s){return s.length},pyjslib_slice=function(str,i,j){if(void 0===str.slice)throw"@@ mising.js: No .slice function for "+str+" of type "+typeof str;return void 0===j||null==j?str.slice(i):str.slice(i,j)},StopIteration=Error("dummy error stop iteration"),pyjslib_Iterator=function(theList){return this.last=0,this.li=theList,this.next=function(){if(this.last==this.li.length)throw StopIteration;return this.li[this.last++]},this},string_find=function(str,s){return str.indexOf(s)},assertFudge=function(condition,desc){if(!condition){if(desc)throw"python Assertion failed: "+desc;throw"(python) Assertion failed."}};String.prototype.encode=function(encoding){if("utf-8"!=encoding)throw"UTF8_converter: can only do utf-8";return Utf8_encode(this)},String.prototype.decode=function(encoding){if("utf-8"!=encoding)throw"UTF8_converter: can only do utf-8";return this};var uripath_join=function(base,given){return esm_uri.join(given,base)},RDF_nil_URI="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";var _notNameChars="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~:",number_syntax=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?([eE][-+]?[0-9]+)?","g"),datetime_syntax=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),interesting=new RegExp('[\\\\\\r\\n\\"]',"g"),langcode=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");const n3parser=function createSinkParser(store,openFormula,thisDoc,baseURI,genPrefix,metaURI,flags,why){return new SinkParser(store,openFormula,thisDoc,baseURI,genPrefix,metaURI,flags,why)};class SinkParser{constructor(store,openFormula,thisDoc,baseURI,genPrefix,metaURI,flags,why){void 0===openFormula&&(openFormula=null),void 0===thisDoc&&(thisDoc=""),void 0===baseURI&&(baseURI=null),void 0===genPrefix&&(genPrefix=""),void 0===metaURI&&(metaURI=null),void 0===flags&&(flags=""),void 0===why&&(why=null),this._bindings=new pyjslib_Dict([]),this._flags=flags,""!=thisDoc&&(assertFudge(thisDoc.indexOf(":")>=0,"Document URI not absolute: "+thisDoc),this._bindings[""]=thisDoc+"#"),this._store=store,genPrefix&&store.setGenPrefix(genPrefix),this._thisDoc=thisDoc,this.source=store.sym(thisDoc),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=genPrefix,this.keywords=new pyjslib_List(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new pyjslib_Dict([]),this._variables=new pyjslib_Dict([]),this._parentVariables=new pyjslib_Dict([]),this._reason=why,this._reason2=null,this._baseURI=baseURI||(thisDoc||null),assertFudge(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),null==openFormula?this._thisDoc?this._formula=store.formula(thisDoc+"#_formula"):this._formula=store.formula():this._formula=openFormula,this._context=this._formula,this._parentContext=null}here(i){return this._genPrefix+"_L"+this.lines+"C"+(i-this.startOfLine+1)}formula(){return this._formula}loadStream(stream){return this.loadBuf(stream.read())}loadBuf(buf){return this.startDoc(),this.feed(buf),this.endDoc()}feed(octets){for(var str=octets.decode("utf-8"),i=0;i>=0;){var j=this.skipSpace(str,i);if(j<0)return;if((i=this.directiveOrStatement(str,j))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"expected directive or statement")}}directiveOrStatement(str,h){var j,i=this.skipSpace(str,h);return i<0?i:(j=this.directive(str,i))>=0||(j=this.statement(str,i))>=0?this.checkDot(str,j):j}tok(tok,str,i){if("@"==str.slice(i,i+1))i=i+1;else if(ArrayIndexOf(this.keywords,tok)<0)return-1;var k=i+pyjslib_len(tok);return str.slice(i,k)==tok&&"\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~".indexOf(str.charAt(k))>=0?k:-1}directive(str,i){if((j=this.skipSpace(str,i))<0)return j;var res=new pyjslib_List([]);if((j=this.tok("bind",str,i))>0)throw BadSyntax(this._thisDoc,this.lines,str,i,"keyword bind is obsolete: use @prefix");if((j=this.tok("keywords",str,i))>0){if((i=this.commaSeparatedList(str,j,res,!1))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"'@keywords' needs comma separated list of words");return this.setKeywords(pyjslib_slice(res,null,null)),i}if((j=this.tok("forAll",str,i))>0){if((i=this.commaSeparatedList(str,j,res,!0))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"Bad variable list after @forAll");var __x=new pyjslib_Iterator(res);try{for(;;){var x=__x.next();(ArrayIndexOf(this._variables,x)<0||ArrayIndexOf(this._parentVariables,x)>=0)&&(this._variables[x]=this._context.newUniversal(x))}}catch(e){if(e!=StopIteration)throw e}return i}if((j=this.tok("forSome",str,i))>0){if((i=this.commaSeparatedList(str,j,res,this.uri_ref2))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"Bad variable list after @forSome");__x=new pyjslib_Iterator(res);try{for(;;){x=__x.next();this._context.declareExistential(x)}}catch(e){if(e!=StopIteration)throw e}return i}if((j=this.tok("prefix",str,i))>=0){var j,t=new pyjslib_List([]);if((i=this.qname(str,j,t))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"expected qname after @prefix");if((j=this.uri_ref2(str,i,t))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"expected <uriref> after @prefix _qname_");var ns=t[1].uri;if(this._baseURI)ns=uripath_join(this._baseURI,ns);else assertFudge(ns.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return assertFudge(ns.indexOf(":")>=0),this._bindings[t[0][0]]=ns,this.bind(t[0][0],function n3parser_hexify(str){return encodeURI(str)}(ns)),j}if((j=this.tok("base",str,i))>=0){t=new pyjslib_List([]);if((i=this.uri_ref2(str,j,t))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"expected <uri> after @base ");ns=t[0].uri;if(!this._baseURI)throw BadSyntax(this._thisDoc,this.lines,str,j,"With no previous base URI, cannot use relative URI in @base  <"+ns+">");ns=uripath_join(this._baseURI,ns);return assertFudge(ns.indexOf(":")>=0),this._baseURI=ns,i}return-1}bind(qn,uri){""==qn||this._store.setPrefixForURI(qn,uri)}setKeywords(k){null==k?this.keywordsSet=0:(this.keywords=k,this.keywordsSet=1)}startDoc(){}endDoc(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&convertFirstRestNil(this._store,this.source),this._formula}makeStatement(quad){quad[0].add(quad[2],quad[1],quad[3],this.source),(quad[2].uri&&quad[2].uri===RDF_nil_URI||quad[3].uri&&quad[3].uri===RDF_nil_URI)&&(this.hasNil=!0),this.statementCount+=1}statement(str,i){var r=new pyjslib_List([]);if((i=this.object(str,i,r))<0)return i;var j=this.property_list(str,i,r[0]);if(j<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"expected propertylist");return j}subject(str,i,res){return this.item(str,i,res)}verb(str,i,res){if((j=this.skipSpace(str,i))<0)return j;var r=new pyjslib_List([]);if((j=this.tok("has",str,i))>=0){if((i=this.prop(str,j,r))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"expected property after 'has'");return res.push(new pyjslib_Tuple(["->",r[0]])),i}if((j=this.tok("is",str,i))>=0){if((i=this.prop(str,j,r))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"expected <property> after 'is'");if((j=this.skipSpace(str,i))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"End of file found, expected property after 'is'");var j;i=j;if((j=this.tok("of",str,i))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"expected 'of' after 'is' <prop>");return res.push(new pyjslib_Tuple(["<-",r[0]])),j}if((j=this.tok("a",str,i))>=0)return res.push(new pyjslib_Tuple(["->",this._store.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")])),j;if("<="==str.slice(i,i+2))return res.push(new pyjslib_Tuple(["<-",this._store.sym(Logic_NS+"implies")])),i+2;if("="==str.slice(i,i+1))return">"==str.slice(i+1,i+2)?(res.push(new pyjslib_Tuple(["->",this._store.sym(Logic_NS+"implies")])),i+2):(res.push(new pyjslib_Tuple(["->",this._store.sym("http://www.w3.org/2002/07/owl#sameAs")])),i+1);if(":="==str.slice(i,i+2))return res.push(new pyjslib_Tuple(["->",Logic_NS+"becomes"])),i+2;if((j=this.prop(str,i,r))>=0)return res.push(new pyjslib_Tuple(["->",r[0]])),j;if(">-"==str.slice(i,i+2)||"<-"==str.slice(i,i+2))throw BadSyntax(this._thisDoc,this.lines,str,j,">- ... -> syntax is obsolete.");return-1}prop(str,i,res){return this.item(str,i,res)}item(str,i,res){return this.path(str,i,res)}blankNode(uri){return this._context.bnode(uri,this._reason2)}path(str,i,res){if((j=this.nodeOrLiteral(str,i,res))<0)return j;for(;"!^.".indexOf(str.slice(j,j+1))>=0;){var ch=str.slice(j,j+1);if("."==ch){var ahead=str.slice(j+1,j+2);if(!ahead||_notNameChars.indexOf(ahead)>=0&&":?<[{(".indexOf(ahead)<0)break}var j,subj=res.pop(),obj=this.blankNode(this.here(j));if((j=this.node(str,j+1,res))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"EOF found in middle of path syntax");var pred=res.pop();"^"==ch?this.makeStatement(new pyjslib_Tuple([this._context,pred,obj,subj])):this.makeStatement(new pyjslib_Tuple([this._context,pred,subj,obj])),res.push(obj)}return j}anonymousNode(ln){if(term=this._anonymousNodes[ln])return term;var term=this._store.bnode(ln);return this._anonymousNodes[ln]=term,term}node(str,i,res,subjectAlready){void 0===subjectAlready&&(subjectAlready=null);var subj=subjectAlready;if((j=this.skipSpace(str,i))<0)return j;i=j;var ch=str.slice(i,i+1);if("["==ch){var bnodeID=this.here(i);if((j=this.skipSpace(str,i+1))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"EOF after '['");if("="==str.slice(j,j+1)){var i=j+1,objs=new pyjslib_List([]);if(!((j=this.objectList(str,i,objs))>=0))throw BadSyntax(this._thisDoc,this.lines,str,i,"objectList expected after [= ");subj=objs[0];if(pyjslib_len(objs)>1){var __obj=new pyjslib_Iterator(objs);try{for(;;){var obj=__obj.next();this.makeStatement(new pyjslib_Tuple([this._context,this._store.sym("http://www.w3.org/2002/07/owl#sameAs"),subj,obj]))}}catch(e){if(e!=StopIteration)throw e}}if((j=this.skipSpace(str,j))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"EOF when objectList expected after [ = ");if(";"==str.slice(j,j+1))var j=j+1}if(null==subj)subj=this.blankNode(bnodeID);if((i=this.property_list(str,j,subj))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"property_list expected");if((j=this.skipSpace(str,i))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"EOF when ']' expected after [ <propertyList>");if("]"!=str.slice(j,j+1))throw BadSyntax(this._thisDoc,this.lines,str,j,"']' expected");return res.push(subj),j+1}if("{"==ch){if("$"==str.slice(i+1,i+2)){for(var j=(i+=1)+1,mylist=new pyjslib_List([]),first_run=!0;;){if((i=this.skipSpace(str,j))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"needed '$}', found end.");if("$}"==str.slice(i,i+2)){var j=i+2;break}if(first_run)first_run=!1;else{if(","!=str.slice(i,i+1))throw BadSyntax(this._thisDoc,this.lines,str,i,"expected: ','");i+=1}var item=new pyjslib_List([]);if((j=this.item(str,i,item))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"expected item in set or '$}'");mylist.push(item[0])}return res.push(this._store.newSet(mylist,this._context)),j}var j=i+1,oldParentContext=this._parentContext;this._parentContext=this._context;var parentAnonymousNodes=this._anonymousNodes,grandParentVariables=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new pyjslib_Dict([]),this._variables=this._variables.slice();var reason2=this._reason2;if(this._reason2=null,null==subj)subj=this._store.formula();for(this._context=subj;;){if((i=this.skipSpace(str,j))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"needed '}', found end.");if("}"==str.slice(i,i+1)){var j=i+1;break}if((j=this.directiveOrStatement(str,i))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"expected statement or '}'")}return this._anonymousNodes=parentAnonymousNodes,this._variables=this._parentVariables,this._parentVariables=grandParentVariables,this._context=this._parentContext,this._reason2=reason2,this._parentContext=oldParentContext,res.push(subj.close()),j}if("("==ch){var thing_type=this._store.list;if("$"==str.slice(i+1,i+2)){thing_type=this._store.newSet;i+=1}for(j=i+1,mylist=new pyjslib_List([]);;){if((i=this.skipSpace(str,j))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"needed ')', found end.");if(")"==str.slice(i,i+1)){j=i+1;break}item=new pyjslib_List([]);if((j=this.item(str,i,item))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"expected item in list or ')'");mylist.push(item[0])}return res.push(thing_type(mylist,this._context)),j}if((j=this.tok("this",str,i))>=0)throw BadSyntax(this._thisDoc,this.lines,str,i,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");if((j=this.tok("true",str,i))>=0)return res.push(!0),j;if((j=this.tok("false",str,i))>=0)return res.push(!1),j;if(null==subj&&(j=this.uri_ref2(str,i,res))>=0)return j;return-1}property_list(str,i,subj){for(;;){if((j=this.skipSpace(str,i))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"EOF found when expected verb in property list");if(":-"!=str.slice(j,j+2)){i=j;var v=new pyjslib_List([]);if((j=this.verb(str,i,v))<=0)return i;var objs=new pyjslib_List([]);if((i=this.objectList(str,j,objs))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"objectList expected");var __obj=new pyjslib_Iterator(objs);try{for(;;){var obj=__obj.next(),pairFudge=v[0],dir=pairFudge[0],sym=pairFudge[1];"->"==dir?this.makeStatement(new pyjslib_Tuple([this._context,sym,subj,obj])):this.makeStatement(new pyjslib_Tuple([this._context,sym,obj,subj]))}}catch(e){if(e!=StopIteration)throw e}if((j=this.skipSpace(str,i))<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"EOF found in list of objects");if(";"!=str.slice(i,i+1))return i;i=i+1}else{var j,i=j+2,res=new pyjslib_List([]);if((j=this.node(str,i,res,subj))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"bad {} or () or [] node after :- ");var i=j}}}commaSeparatedList(str,j,res,ofUris){if((i=this.skipSpace(str,j))<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"EOF found expecting comma sep list");if("."==str.charAt(i))return j;if(ofUris)var i=this.uri_ref2(str,i,res);else i=this.bareWord(str,i,res);if(i<0)return-1;for(;;){if((j=this.skipSpace(str,i))<0)return j;var ch=str.slice(j,j+1);if(","!=ch)return"."!=ch?-1:j;if(ofUris)i=this.uri_ref2(str,j+1,res);else i=this.bareWord(str,j+1,res);if(i<0)throw BadSyntax(this._thisDoc,this.lines,str,i,"bad list content")}}objectList(str,i,res){if((i=this.object(str,i,res))<0)return-1;for(;;){var j=this.skipSpace(str,i);if(j<0)throw BadSyntax(this._thisDoc,this.lines,str,j,"EOF found after object");if(","!=str.slice(j,j+1))return j;if((i=this.object(str,j+1,res))<0)return i}}checkDot(str,i){var j=this.skipSpace(str,i);if(j<0)return j;if("."==str.slice(j,j+1))return j+1;if("}"==str.slice(j,j+1))return j;if("]"==str.slice(j,j+1))return j;throw BadSyntax(this._thisDoc,this.lines,str,j,"expected '.' or '}' or ']' at end of statement")}uri_ref2(str,i,res){var qn=new pyjslib_List([]);if((j=this.qname(str,i,qn))>=0){var pairFudge=qn[0],pfx=pairFudge[0],ln=pairFudge[1];if(null==pfx){assertFudge(0,"not used?");var ns=this._baseURI+"#"}else{if(!(ns=this._bindings[pfx])){if("_"==pfx)return res.push(this.anonymousNode(ln)),j;throw BadSyntax(this._thisDoc,this.lines,str,i,"Prefix "+pfx+" not bound.")}}var symb=this._store.sym(ns+ln);return ArrayIndexOf(this._variables,symb)>=0?res.push(this._variables[symb]):res.push(symb),j}if((i=this.skipSpace(str,i))<0)return-1;if("?"==str.charAt(i)){var v=new pyjslib_List([]);return(j=this.variable(str,i,v))>0?(res.push(v[0]),j):-1}if("<"==str.charAt(i)){for(var st=i=i+1;i<pyjslib_len(str);){if(">"==str.charAt(i)){var uref=str.slice(st,i);if(this._baseURI)uref=uripath_join(this._baseURI,uref);else assertFudge(uref.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if("#"==str.slice(i-1,i)&&"#"!=pyjslib_slice(uref,-1,null))uref=uref+"#";symb=this._store.sym(uref);return ArrayIndexOf(this._variables,symb)>=0?res.push(this._variables[symb]):res.push(symb),i+1}i=i+1}throw BadSyntax(this._thisDoc,this.lines,str,j,"unterminated URI reference")}if(this.keywordsSet){var j;v=new pyjslib_List([]);if((j=this.bareWord(str,i,v))<0)return-1;if(ArrayIndexOf(this.keywords,v[0])>=0)throw BadSyntax(this._thisDoc,this.lines,str,i,'Keyword "'+v[0]+'" not allowed here.');return res.push(this._store.sym(this._bindings[""]+v[0])),j}return-1}skipSpace(str,i){for(var j=i||0;j<str.length;j++){var ch=str.charAt(j);if(" \n\r\t\f\v            ​\u2028\u2029　".indexOf(ch)<0){if("#"!==str.charAt(j))return j;for(;;j++){if(j===str.length)return-1;if("\n"===str.charAt(j)){this.lines=this.lines+1;break}}}else"\n"===str.charAt(j)&&(this.lines=this.lines+1)}return-1}variable(str,i,res){if((j=this.skipSpace(str,i))<0)return-1;if("?"!=str.slice(j,j+1))return-1;var j;i=j+=1;if("0123456789-".indexOf(str.charAt(j))>=0)throw BadSyntax(this._thisDoc,this.lines,str,j,"Varible name can't start with '"+str.charAt(j)+"s'");for(;i<pyjslib_len(str)&&_notNameChars.indexOf(str.charAt(i))<0;)i=i+1;if(null==this._parentContext)throw BadSyntax(this._thisDoc,this.lines,str,j,"Can't use ?xxx syntax for variable in outermost level: "+str.slice(j-1,i));return res.push(this._store.variable(str.slice(j,i))),i}bareWord(str,i,res){var j=this.skipSpace(str,i);if(j<0)return-1;var ch=str.charAt(j);if("0123456789-".indexOf(ch)>=0)return-1;if(_notNameChars.indexOf(ch)>=0)return-1;for(i=j;i<pyjslib_len(str)&&_notNameChars.indexOf(str.charAt(i))<0;)i=i+1;return res.push(str.slice(j,i)),i}qname(str,i,res){if((i=this.skipSpace(str,i))<0)return-1;var c=str.charAt(i);if("0123456789-+".indexOf(c)>=0)return-1;if(_notNameChars.indexOf(c)<0){var ln=c;for(i=i+1;i<pyjslib_len(str);){c=str.charAt(i);if(!(_notNameChars.indexOf(c)<0))break;ln=ln+c,i=i+1}}else ln="";if(i<pyjslib_len(str)&&":"==str.charAt(i)){var pfx=ln;for(i=i+1,ln="";i<pyjslib_len(str);){c=str.charAt(i);if(!(_notNameChars.indexOf(c)<0))break;ln=ln+c,i=i+1}return res.push(new pyjslib_Tuple([pfx,ln])),i}return ln&&this.keywordsSet&&ArrayIndexOf(this.keywords,ln)<0?(res.push(new pyjslib_Tuple(["",ln])),i):-1}object(str,i,res){if((j=this.subject(str,i,res))>=0)return j;{if((j=this.skipSpace(str,i))<0)return-1;i=j;var delim=null;let ch=str.charAt(i);if('"'==ch||"'"==ch){delim=str.slice(i,i+3==ch+ch)?ch+ch+ch:ch;i=i+pyjslib_len(delim);var pairFudge=this.strconst(str,i,delim),j=pairFudge[0],s=pairFudge[1];return res.push(this._store.literal(s)),j}return-1}}nodeOrLiteral(str,i,res){if((j=this.node(str,i,res))>=0)return j;if((j=this.skipSpace(str,i))<0)return-1;i=j;var ch=str.charAt(i);if("-+0987654321".indexOf(ch)>=0){if(datetime_syntax.lastIndex=0,null!=(m=datetime_syntax.exec(str.slice(i)))){j=i+(val=m[0]).length,val.indexOf("T")>=0?res.push(this._store.literal(val,this._store.sym("http://www.w3.org/2001/XMLSchema#dateTime"))):res.push(this._store.literal(val,this._store.sym("http://www.w3.org/2001/XMLSchema#date")))}else{var val;if(number_syntax.lastIndex=0,null==(m=number_syntax.exec(str.slice(i))))throw BadSyntax(this._thisDoc,this.lines,str,i,"Bad number or date syntax");j=i+number_syntax.lastIndex,(val=str.slice(i,j)).indexOf("e")>=0?res.push(this._store.literal(parseFloat(val),this._store.sym("http://www.w3.org/2001/XMLSchema#double"))):str.slice(i,j).indexOf(".")>=0?res.push(this._store.literal(parseFloat(val),this._store.sym("http://www.w3.org/2001/XMLSchema#decimal"))):res.push(this._store.literal(parseInt(val),this._store.sym("http://www.w3.org/2001/XMLSchema#integer")))}return j}if('"'==str.charAt(i)){if('"""'==str.slice(i,i+3))var delim='"""';else delim='"';i=i+pyjslib_len(delim);var dt=null,pairFudge=this.strconst(str,i,delim),j=pairFudge[0],s=pairFudge[1],lang=null;if("@"==str.slice(j,j+1)){var m;if(langcode.lastIndex=0,null==(m=langcode.exec(str.slice(j+1))))throw BadSyntax(this._thisDoc,startline,str,i,"Bad language code syntax on string literal, after @");i=langcode.lastIndex+j+1,lang=str.slice(j+1,i),j=i}if("^^"==str.slice(j,j+2)){var res2=new pyjslib_List([]);j=this.uri_ref2(str,j+2,res2),dt=res2[0]}return res.push(this._store.literal(s,lang||dt)),j}return-1}strconst(str,i,delim){for(var j=i,ustr="",startline=this.lines;j<pyjslib_len(str);){i=j+pyjslib_len(delim);if(str.slice(j,i)==delim)return new pyjslib_Tuple([i,ustr]);if('"'!=str.charAt(j)){if(interesting.lastIndex=0,!interesting.exec(str.slice(j)))throw BadSyntax(this._thisDoc,startline,str,j,"Closing quote missing in string at ^ in "+str.slice(j-20,j)+"^"+str.slice(j,j+20));i=j+interesting.lastIndex-1,ustr=ustr+str.slice(j,i);if('"'!=(ch=str.charAt(i)))if("\r"!=ch){if("\n"==ch){if('"'==delim)throw BadSyntax(this._thisDoc,startline,str,i,"newline found in string literal");this.lines=this.lines+1;ustr=ustr+ch,j=i+1;this.previousLine=this.startOfLine,this.startOfLine=j}else if("\\"==ch){j=i+1;if(!(ch=str.slice(j,j+1)))throw BadSyntax(this._thisDoc,startline,str,i,"unterminated string literal (2)");var k=string_find('abfrtvn\\"',ch);if(k>=0)ustr=ustr+'a\b\f\r\t\v\n\\"'.charAt(k),j=j+1;else if("u"==ch)j=(pairFudge=this.uEscape(str,j+1,startline))[0],ustr=ustr+(ch=pairFudge[1]);else{if("U"!=ch)throw BadSyntax(this._thisDoc,this.lines,str,i,"bad escape");var pairFudge,ch;j=(pairFudge=this.UEscape(str,j+1,startline))[0],ustr=ustr+(ch=pairFudge[1])}}}else var j=i+1;else var j=i}else var ustr=ustr+'"',j=j+1}throw BadSyntax(this._thisDoc,this.lines,str,i,"unterminated string literal")}uEscape(str,i,startline){for(var j=i,count=0,value=0;count<4;){var ch=str.slice(j,j+1).toLowerCase();j=j+1;if(""==ch)throw BadSyntax(this._thisDoc,startline,str,i,"unterminated string literal(3)");var k=string_find("0123456789abcdef",ch);if(k<0)throw BadSyntax(this._thisDoc,startline,str,i,"bad string literal hex escape");value=16*value+k,count=count+1}var uch=String.fromCharCode(value);return new pyjslib_Tuple([j,uch])}UEscape(str,i,startline){for(var j=i,count=0,value="\\U";count<8;){var ch=str.slice(j,j+1).toLowerCase();j=j+1;if(""==ch)throw BadSyntax(this._thisDoc,startline,str,i,"unterminated string literal(3)");if(string_find("0123456789abcdef",ch)<0)throw BadSyntax(this._thisDoc,startline,str,i,"bad string literal hex escape");value=value+ch,count=count+1}var uesc,uch=(uesc="0x"+pyjslib_slice(value,2,10)-0,String.fromCharCode(uesc));return new pyjslib_Tuple([j,uch])}}function __OLD_BadSyntax(uri,lines,str,i,why){this._str=str.encode("utf-8"),this._str=str,this._i=i,this._why=why,this.lines=lines,this._uri=uri}function BadSyntax(uri,lines,str,i,why){let lineNo=lines+1,msg="Line "+lineNo+" of <"+uri+">: Bad syntax: "+why+'\nat: "'+str.slice(i,i+30)+'"',e=new SyntaxError(msg,uri,lineNo);return e.lineNo=lineNo,e.characterInFile=i,e.syntaxProblem=why,e}__OLD_BadSyntax.prototype.toString=function(){var str=this._str,i=this._i,st=0;if(i>60){var pre="...";st=i-60}else pre="";if(pyjslib_len(str)-i>60)var post="...";else post="";return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new pyjslib_Tuple([this.lines+1,this._uri,this._why,pre,str.slice(st,i),str.slice(i,i+60),post])};const ExtendedTermFactory={...canonical_data_factory,supports:{[Feature.collections]:!0,[Feature.defaultGraphType]:!1,[Feature.equalsMethod]:!0,[Feature.identity]:!1,[Feature.id]:!0,[Feature.reversibleId]:!1,[Feature.variableType]:!0},collection:elements=>new collection.A(elements),id(term){return(0,terms.P3)(term)?`( ${term.elements.map(e=>this.id(e)).join(", ")} )`:(0,terms.DZ)(term)?Variable.toString(term):canonical_data_factory.id(term)},termToNQ:term=>term.termType===types.r0?collection.A.toNT(term):canonical_data_factory.termToNQ(term)},extended_term_factory=ExtendedTermFactory;function jsonldObjectToTerm(kb,obj){return"string"==typeof obj?kb.rdfFactory.literal(obj):Object.prototype.hasOwnProperty.call(obj,"@list")?!0===kb.rdfFactory.supports.COLLECTIONS?function listToCollection(kb,obj){if(!Array.isArray(obj))throw new TypeError("Object must be an array");return kb.rdfFactory.collection(obj.map(o=>jsonldObjectToTerm(kb,o)))}(kb,obj["@list"]):function listToStatements(kb,obj){const listId=obj["@id"]?nodeType(kb,obj):kb.rdfFactory.blankNode(),items=obj["@list"].map(listItem=>jsonldObjectToTerm(kb,listItem)),statements=arrayToStatements(kb.rdfFactory,listId,items);return kb.addAll(statements),listId}(kb,obj):Object.prototype.hasOwnProperty.call(obj,"@id")?nodeType(kb,obj):Object.prototype.hasOwnProperty.call(obj,"@language")?kb.rdfFactory.literal(obj["@value"],obj["@language"]):Object.prototype.hasOwnProperty.call(obj,"@type")?kb.rdfFactory.literal(obj["@value"],kb.rdfFactory.namedNode(obj["@type"])):Object.prototype.hasOwnProperty.call(obj,"@value")?kb.rdfFactory.literal(obj["@value"]):kb.rdfFactory.literal(obj)}async function jsonldParser(str,kb,base){const baseString=base&&Object.prototype.hasOwnProperty.call(base,"termType")?base.value:base,jsonld=await Promise.all([__webpack_require__.e(841),__webpack_require__.e(789)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/jsonld/lib/jsonld.js",23));return(await jsonld.default.flatten(JSON.parse(str),null,{base:baseString})).reduce((store,flatResource)=>processResource(store,base,flatResource),kb)}function nodeType(kb,obj){return obj["@id"].startsWith("_:")?kb.rdfFactory.blankNode(obj["@id"].substring(2)):kb.rdfFactory.namedNode(obj["@id"])}function processResource(kb,base,flatResource){const id=flatResource["@id"]?nodeType(kb,flatResource):kb.rdfFactory.blankNode();for(const property of Object.keys(flatResource)){if("@id"===property)continue;if("@graph"==property){const graphId=id,nestedFlatResources=flatResource[property];for(let i=0;i<nestedFlatResources.length;i++)kb=processResource(kb,graphId,nestedFlatResources[i])}const value=flatResource[property];if(Array.isArray(value))for(let i=0;i<value.length;i++)kb.addStatement(createStatement(kb,id,property,value[i],base));else kb.addStatement(createStatement(kb,id,property,value,base))}return kb}function createStatement(kb,id,property,value,base){let predicate,object;return"@type"===property?(predicate=kb.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),object=kb.rdfFactory.namedNode(value)):(predicate=kb.rdfFactory.namedNode(property),object=jsonldObjectToTerm(kb,value)),kb.rdfFactory.quad(id,predicate,object,kb.rdfFactory.namedNode(base))}var buffer=__webpack_require__("./node_modules/buffer/index.js");const IRIs_RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#",SWAP="http://www.w3.org/2000/10/swap/",IRIs={xsd:{decimal:`${XSD}decimal`,boolean:`${XSD}boolean`,double:`${XSD}double`,integer:`${XSD}integer`,string:`${XSD}string`},rdf:{type:`${IRIs_RDF}type`,nil:`${IRIs_RDF}nil`,first:`${IRIs_RDF}first`,rest:`${IRIs_RDF}rest`,langString:`${IRIs_RDF}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${SWAP}reify#forSome`,forAll:`${SWAP}reify#forAll`},log:{implies:`${SWAP}log#implies`,isImpliedBy:`${SWAP}log#isImpliedBy`}},{xsd:N3Lexer_xsd}=IRIs,escapeSequence=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,escapeReplacements={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},illegalIriChars=/[\x00-\x20<>\\"\{\}\|\^\`]/,lineModeRegExps={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},invalidRegExp=/$0^/;class N3Lexer{constructor(options){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,options=options||{},this._isImpliedBy=options.isImpliedBy,this._lineMode=!!options.lineMode){this._n3Mode=!1;for(const key in this)!(key in lineModeRegExps)&&this[key]instanceof RegExp&&(this[key]=invalidRegExp)}else this._n3Mode=!1!==options.n3;this.comments=!!options.comments,this._literalClosingPos=0}_tokenizeToEnd(callback,inputFinished){let input=this._input,currentLineLength=input.length;for(;;){let whiteSpaceMatch,comment;for(;whiteSpaceMatch=this._newline.exec(input);)this.comments&&(comment=this._comment.exec(whiteSpaceMatch[0]))&&emitToken("comment",comment[1],"",this._line,whiteSpaceMatch[0].length),input=input.substr(whiteSpaceMatch[0].length,input.length),currentLineLength=input.length,this._line++;if(!whiteSpaceMatch&&(whiteSpaceMatch=this._whitespace.exec(input))&&(input=input.substr(whiteSpaceMatch[0].length,input.length)),this._endOfFile.test(input))return inputFinished&&(this.comments&&(comment=this._comment.exec(input))&&emitToken("comment",comment[1],"",this._line,input.length),input=null,emitToken("eof","","",this._line,0)),this._input=input;const line=this._line,firstChar=input[0];let type="",value="",prefix="",match=null,matchLength=0,inconclusive=!1;switch(firstChar){case"^":if(input.length<3)break;if("^"!==input[1]){this._n3Mode&&(matchLength=1,type="^");break}if(this._previousMarker="^^",input=input.substr(2),"<"!==input[0]){inconclusive=!0;break}case"<":if(match=this._unescapedIri.exec(input))type="IRI",value=match[1];else if(match=this._iri.exec(input)){if(value=this._unescape(match[1]),null===value||illegalIriChars.test(value))return reportSyntaxError(this);type="IRI"}else input.length>1&&"<"===input[1]?(type="<<",matchLength=2):this._n3Mode&&input.length>1&&"="===input[1]&&(matchLength=2,this._isImpliedBy?(type="abbreviation",value="<"):(type="inverse",value=">"));break;case">":input.length>1&&">"===input[1]&&(type=">>",matchLength=2);break;case"_":((match=this._blank.exec(input))||inputFinished&&(match=this._blank.exec(`${input} `)))&&(type="blank",prefix="_",value=match[1]);break;case'"':if(match=this._simpleQuotedString.exec(input))value=match[1];else if(({value,matchLength}=this._parseLiteral(input)),null===value)return reportSyntaxError(this);null===match&&0===matchLength||(type="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(match=this._simpleApostropheString.exec(input))value=match[1];else if(({value,matchLength}=this._parseLiteral(input)),null===value)return reportSyntaxError(this);null===match&&0===matchLength||(type="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(match=this._variable.exec(input))&&(type="var",value=match[0]);break;case"@":"literal"===this._previousMarker&&(match=this._langcode.exec(input))?(type="langcode",value=match[1]):(match=this._keyword.exec(input))&&(type=match[0]);break;case".":if(1===input.length?inputFinished:input[1]<"0"||input[1]>"9"){type=".",matchLength=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(match=this._number.exec(input)||inputFinished&&(match=this._number.exec(`${input} `)))&&(type="literal",value=match[0],prefix="string"==typeof match[1]?N3Lexer_xsd.double:"string"==typeof match[2]?N3Lexer_xsd.decimal:N3Lexer_xsd.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(match=this._sparqlKeyword.exec(input))?type=match[0].toUpperCase():inconclusive=!0;break;case"f":case"t":(match=this._boolean.exec(input))?(type="literal",value=match[0],prefix=N3Lexer_xsd.boolean):inconclusive=!0;break;case"a":(match=this._shortPredicates.exec(input))?(type="abbreviation",value="a"):inconclusive=!0;break;case"=":this._n3Mode&&input.length>1&&(type="abbreviation",">"!==input[1]?(matchLength=1,value="="):(matchLength=2,value=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(matchLength=1,type=firstChar);break;case"{":!this._lineMode&&input.length>=2&&("|"===input[1]?(type="{|",matchLength=2):(type=firstChar,matchLength=1));break;case"|":input.length>=2&&"}"===input[1]&&(type="|}",matchLength=2);break;default:inconclusive=!0}if(inconclusive&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(match=this._prefix.exec(input))?((match=this._prefixed.exec(input))||inputFinished&&(match=this._prefixed.exec(`${input} `)))&&(type="prefixed",prefix=match[1]||"",value=this._unescape(match[2])):(type="prefix",value=match[1]||"")),"^^"===this._previousMarker)switch(type){case"prefixed":type="type";break;case"IRI":type="typeIRI";break;default:type=""}if(!type)return inputFinished||!/^'''|^"""/.test(input)&&/\n|\r/.test(input)?reportSyntaxError(this):this._input=input;const length=matchLength||match[0].length,token=emitToken(type,value,prefix,line,length);this.previousToken=token,this._previousMarker=type,input=input.substr(length,input.length)}function emitToken(type,value,prefix,line,length){const start=input?currentLineLength-input.length:currentLineLength,token={type,value,prefix,line,start,end:start+length};return callback(null,token),token}function reportSyntaxError(self){callback(self._syntaxError(/^\S*/.exec(input)[0]))}}_unescape(item){let invalid=!1;const replaced=item.replace(escapeSequence,(sequence,unicode4,unicode8,escapedChar)=>{if("string"==typeof unicode4)return String.fromCharCode(Number.parseInt(unicode4,16));if("string"==typeof unicode8){let charCode=Number.parseInt(unicode8,16);return charCode<=65535?String.fromCharCode(Number.parseInt(unicode8,16)):String.fromCharCode(55296+((charCode-=65536)>>10),56320+(1023&charCode))}return escapedChar in escapeReplacements?escapeReplacements[escapedChar]:(invalid=!0,"")});return invalid?null:replaced}_parseLiteral(input){if(input.length>=3){const opening=input.match(/^(?:"""|"|'''|'|)/)[0],openingLength=opening.length;let closingPos=Math.max(this._literalClosingPos,openingLength);for(;(closingPos=input.indexOf(opening,closingPos))>0;){let backslashCount=0;for(;"\\"===input[closingPos-backslashCount-1];)backslashCount++;if(backslashCount%2==0){const raw=input.substring(openingLength,closingPos),lines=raw.split(/\r\n|\r|\n/).length-1,matchLength=closingPos+openingLength;if(1===openingLength&&0!==lines||3===openingLength&&this._lineMode)break;return this._line+=lines,{value:this._unescape(raw),matchLength}}closingPos++}this._literalClosingPos=input.length-openingLength+1}return{value:"",matchLength:0}}_syntaxError(issue){this._input=null;const err=new Error(`Unexpected "${issue}" on line ${this._line}.`);return err.context={token:void 0,line:this._line,previousToken:this.previousToken},err}_readStartingBom(input){return input.startsWith("\ufeff")?input.substr(1):input}tokenize(input,callback){if(this._line=1,"string"==typeof input){if(this._input=this._readStartingBom(input),"function"!=typeof callback){const tokens=[];let error;if(this._tokenizeToEnd((e,t)=>e?error=e:tokens.push(t),!0),error)throw error;return tokens}queueMicrotask(()=>this._tokenizeToEnd(callback,!0))}else this._pendingBuffer=null,"function"==typeof input.setEncoding&&input.setEncoding("utf8"),input.on("data",data=>{null!==this._input&&0!==data.length&&(this._pendingBuffer&&(data=buffer.hp.concat([this._pendingBuffer,data]),this._pendingBuffer=null),128&data[data.length-1]?this._pendingBuffer=data:(void 0===this._input?this._input=this._readStartingBom("string"==typeof data?data:data.toString()):this._input+=data,this._tokenizeToEnd(callback,!1)))}),input.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(callback,!0)}),input.on("error",callback)}}const{rdf:N3DataFactory_rdf,xsd:N3DataFactory_xsd}=IRIs;let DEFAULTGRAPH,_blankNodeCounter=0;const DataFactory={namedNode,blankNode,variable,literal:N3DataFactory_literal,defaultGraph:function N3DataFactory_defaultGraph(){return DEFAULTGRAPH},quad,triple:quad,fromTerm,fromQuad},N3DataFactory=DataFactory;class Term{constructor(id){this.id=id}get value(){return this.id}equals(other){return other instanceof Term?this.id===other.id:!!other&&this.termType===other.termType&&this.value===other.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class NamedNode extends Term{get termType(){return"NamedNode"}}class Literal extends Term{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const id=this.id;let atPos=id.lastIndexOf('"')+1;return atPos<id.length&&"@"===id[atPos++]?id.substr(atPos).toLowerCase():""}get datatype(){return new NamedNode(this.datatypeString)}get datatypeString(){const id=this.id,dtPos=id.lastIndexOf('"')+1,char=dtPos<id.length?id[dtPos]:"";return"^"===char?id.substr(dtPos+2):"@"!==char?N3DataFactory_xsd.string:N3DataFactory_rdf.langString}equals(other){return other instanceof Literal?this.id===other.id:!!other&&!!other.datatype&&this.termType===other.termType&&this.value===other.value&&this.language===other.language&&this.datatype.value===other.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class BlankNode extends Term{constructor(name){super(`_:${name}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class N3DataFactory_Variable extends Term{constructor(name){super(`?${name}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}DEFAULTGRAPH=new class N3DataFactory_DefaultGraph extends Term{constructor(){return super(""),DEFAULTGRAPH||this}get termType(){return"DefaultGraph"}equals(other){return this===other||!!other&&this.termType===other.termType}};class Quad extends Term{constructor(subject,predicate,object,graph){super(""),this._subject=subject,this._predicate=predicate,this._object=object,this._graph=graph||DEFAULTGRAPH}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(other){return!!other&&this._subject.equals(other.subject)&&this._predicate.equals(other.predicate)&&this._object.equals(other.object)&&this._graph.equals(other.graph)}}function namedNode(iri){return new NamedNode(iri)}function blankNode(name){return new BlankNode(name||"n3-"+_blankNodeCounter++)}function N3DataFactory_literal(value,languageOrDataType){if("string"==typeof languageOrDataType)return new Literal(`"${value}"@${languageOrDataType.toLowerCase()}`);let datatype=languageOrDataType?languageOrDataType.value:"";return""===datatype&&("boolean"==typeof value?datatype=N3DataFactory_xsd.boolean:"number"==typeof value&&(Number.isFinite(value)?datatype=Number.isInteger(value)?N3DataFactory_xsd.integer:N3DataFactory_xsd.double:(datatype=N3DataFactory_xsd.double,Number.isNaN(value)||(value=value>0?"INF":"-INF")))),""===datatype||datatype===N3DataFactory_xsd.string?new Literal(`"${value}"`):new Literal(`"${value}"^^${datatype}`)}function variable(name){return new N3DataFactory_Variable(name)}function quad(subject,predicate,object,graph){return new Quad(subject,predicate,object,graph)}function fromTerm(term){if(term instanceof Term)return term;switch(term.termType){case"NamedNode":return namedNode(term.value);case"BlankNode":return blankNode(term.value);case"Variable":return variable(term.value);case"DefaultGraph":return DEFAULTGRAPH;case"Literal":return N3DataFactory_literal(term.value,term.language||term.datatype);case"Quad":return fromQuad(term);default:throw new Error(`Unexpected termType: ${term.termType}`)}}function fromQuad(inQuad){if(inQuad instanceof Quad)return inQuad;if("Quad"!==inQuad.termType)throw new Error(`Unexpected termType: ${inQuad.termType}`);return quad(fromTerm(inQuad.subject),fromTerm(inQuad.predicate),fromTerm(inQuad.object),fromTerm(inQuad.graph))}let blankNodePrefix=0;class N3Parser{constructor(options){this._contextStack=[],this._graph=null,options=options||{},this._setBase(options.baseIRI),options.factory&&initDataFactory(this,options.factory);const format="string"==typeof options.format?options.format.match(/\w*$/)[0].toLowerCase():"",isTurtle=/turtle/.test(format),isTriG=/trig/.test(format),isNTriples=/triple/.test(format),isNQuads=/quad/.test(format),isN3=this._n3Mode=/n3/.test(format),isLineMode=isNTriples||isNQuads;(this._supportsNamedGraphs=!(isTurtle||isN3))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(isTurtle||isTriG||isNTriples||isN3),this._isImpliedBy=options.isImpliedBy,this._supportsRDFStar=""===format||/star|\*$/.test(format),isLineMode&&(this._resolveRelativeIRI=iri=>null),this._blankNodePrefix="string"!=typeof options.blankNodePrefix?"":options.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=options.lexer||new N3Lexer({lineMode:isLineMode,n3:isN3,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!options.explicitQuantifiers}static _resetBlankNodePrefix(){blankNodePrefix=0}_setBase(baseIRI){if(baseIRI){const fragmentPos=baseIRI.indexOf("#");fragmentPos>=0&&(baseIRI=baseIRI.substr(0,fragmentPos)),this._base=baseIRI,this._basePath=baseIRI.indexOf("/")<0?baseIRI:baseIRI.replace(/[^\/?]*(?:\?.*)?$/,""),baseIRI=baseIRI.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=baseIRI[0],this._baseScheme=baseIRI[1]}else this._base="",this._basePath=""}_saveContext(type,graph,subject,predicate,object){const n3Mode=this._n3Mode;this._contextStack.push({type,subject,predicate,object,graph,inverse:!!n3Mode&&this._inversePredicate,blankPrefix:n3Mode?this._prefixes._:"",quantified:n3Mode?this._quantified:null}),n3Mode&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(type,token){const context=this._contextStack.pop();if(!context||context.type!==type)return this._error(`Unexpected ${token.type}`,token);this._subject=context.subject,this._predicate=context.predicate,this._object=context.object,this._graph=context.graph,this._n3Mode&&(this._inversePredicate=context.inverse,this._prefixes._=context.blankPrefix,this._quantified=context.quantified)}_readInTopContext(token){switch(token.type){case"eof":return null!==this._graph?this._error("Unclosed graph",token):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(token)}}_readEntity(token,quantifier){let value;switch(token.type){case"IRI":case"typeIRI":const iri=this._resolveIRI(token.value);if(null===iri)return this._error("Invalid IRI",token);value=this._factory.namedNode(iri);break;case"type":case"prefixed":const prefix=this._prefixes[token.prefix];if(void 0===prefix)return this._error(`Undefined prefix "${token.prefix}:"`,token);value=this._factory.namedNode(prefix+token.value);break;case"blank":value=this._factory.blankNode(this._prefixes[token.prefix]+token.value);break;case"var":value=this._factory.variable(token.value.substr(1));break;default:return this._error(`Expected entity but got ${token.type}`,token)}return!quantifier&&this._n3Mode&&value.id in this._quantified&&(value=this._quantified[value.id]),value}_readSubject(token){switch(this._predicate=null,token.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",token);case"}":return this._readPunctuation(token);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',token);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',token);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",token);if(0===token.prefix.length)return this._literalValue=token.value,this._completeSubjectLiteral;this._subject=this._factory.literal(token.value,this._factory.namedNode(token.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",token);default:if(void 0===(this._subject=this._readEntity(token)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(token){const type=token.type;switch(type){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[token.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${type}`,token):(this._subject=null,"]"===type?this._readBlankNodeTail(token):this._readPunctuation(token));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",token);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",token);default:if(void 0===(this._predicate=this._readEntity(token)))return}return this._readObject}_readObject(token){switch(token.type){case"literal":if(0===token.prefix.length)return this._literalValue=token.value,this._readDataTypeOrLang;this._object=this._factory.literal(token.value,this._factory.namedNode(token.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",token);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",token);default:if(void 0===(this._object=this._readEntity(token)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(token){return"{"===token.type?this._readGraph(token):this._readPredicate(token)}_readGraph(token){return"{"!==token.type?this._error(`Expected graph but got ${token.type}`,token):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(token){return"]"===token.type?(this._subject=null,this._readBlankNodeTail(token)):(this._predicate=null,this._readPredicate(token))}_readBlankNodeTail(token){if("]"!==token.type)return this._readBlankNodePunctuation(token);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const empty=null===this._predicate;return this._restoreContext("blank",token),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:empty?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(token){switch(token.type){case".":case"}":return this._subject=null,this._readPunctuation(token);default:return this._readPredicate(token)}}_readListItem(token){let item=null,list=null,next=this._readListItem;const previousList=this._subject,stack=this._contextStack,parent=stack[stack.length-1];switch(token.type){case"[":this._saveContext("blank",this._graph,list=this._factory.blankNode(),this.RDF_FIRST,this._subject=item=this._factory.blankNode()),next=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,list=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",token),0!==stack.length&&"list"===stack[stack.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(next=this._readPredicate,this._subject===this.RDF_NIL)return next}else if(next=this._getContextEndReader(),this._object===this.RDF_NIL)return next;list=this.RDF_NIL;break;case"literal":0===token.prefix.length?(this._literalValue=token.value,next=this._readListItemDataTypeOrLang):(item=this._factory.literal(token.value,this._factory.namedNode(token.prefix)),next=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",token);default:if(void 0===(item=this._readEntity(token)))return}if(null===list&&(this._subject=list=this._factory.blankNode()),null===previousList?null===parent.predicate?parent.subject=list:parent.object=list:this._emit(previousList,this.RDF_REST,list,this._graph),null!==item){if(this._n3Mode&&("IRI"===token.type||"prefixed"===token.type))return this._saveContext("item",this._graph,list,this.RDF_FIRST,item),this._subject=item,this._predicate=null,this._getPathReader(this._readListItem);this._emit(list,this.RDF_FIRST,item,this._graph)}return next}_readDataTypeOrLang(token){return this._completeObjectLiteral(token,!1)}_readListItemDataTypeOrLang(token){return this._completeObjectLiteral(token,!0)}_completeLiteral(token){let literal=this._factory.literal(this._literalValue);switch(token.type){case"type":case"typeIRI":const datatype=this._readEntity(token);if(void 0===datatype)return;literal=this._factory.literal(this._literalValue,datatype),token=null;break;case"langcode":literal=this._factory.literal(this._literalValue,token.value),token=null}return{token,literal}}_completeSubjectLiteral(token){return this._subject=this._completeLiteral(token).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(token,listItem){const completed=this._completeLiteral(token);if(completed)return this._object=completed.literal,listItem&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===completed.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(completed.token))}_readFormulaTail(token){return"}"!==token.type?this._readPunctuation(token):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",token),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(token){let next,graph=this._graph;const subject=this._subject,inversePredicate=this._inversePredicate;switch(token.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",token);if(this._n3Mode)return this._readFormulaTail(token);this._graph=null;case".":this._subject=null,next=this._contextStack.length?this._readSubject:this._readInTopContext,inversePredicate&&(this._inversePredicate=!1);break;case";":next=this._readPredicate;break;case",":next=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",token);const predicate=this._predicate,object=this._object;this._subject=this._factory.quad(subject,predicate,object,this.DEFAULTGRAPH),next=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",token);this._subject=null,next=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(graph=this._readEntity(token))){next=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,token)}if(null!==subject){const predicate=this._predicate,object=this._object;inversePredicate?this._emit(object,predicate,subject,graph):this._emit(subject,predicate,object,graph)}return next}_readBlankNodePunctuation(token){let next;switch(token.type){case";":next=this._readPredicate;break;case",":next=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,token)}return this._emit(this._subject,this._predicate,this._object,this._graph),next}_readQuadPunctuation(token){return"."!==token.type?this._error("Expected dot to follow quad",token):this._readInTopContext}_readPrefix(token){return"prefix"!==token.type?this._error("Expected prefix to follow @prefix",token):(this._prefix=token.value,this._readPrefixIRI)}_readPrefixIRI(token){if("IRI"!==token.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,token);const prefixNode=this._readEntity(token);return this._prefixes[this._prefix]=prefixNode.value,this._prefixCallback(this._prefix,prefixNode),this._readDeclarationPunctuation}_readBaseIRI(token){const iri="IRI"===token.type&&this._resolveIRI(token.value);return iri?(this._setBase(iri),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",token)}_readNamedGraphLabel(token){switch(token.type){case"IRI":case"blank":case"prefixed":return this._readSubject(token),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",token)}}_readNamedGraphBlankLabel(token){return"]"!==token.type?this._error("Invalid graph label",token):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(token){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(token)):"."!==token.type?this._error("Expected declaration to end with a dot",token):this._readInTopContext}_readQuantifierList(token){let entity;switch(token.type){case"IRI":case"prefixed":if(void 0!==(entity=this._readEntity(token,!0)))break;default:return this._error(`Unexpected ${token.type}`,token)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,entity,this.QUANTIFIERS_GRAPH)):this._quantified[entity.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(token){return","===token.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(token))}_getPathReader(afterPath){return this._afterPath=afterPath,this._readPath}_readPath(token){switch(token.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const stack=this._contextStack,parent=stack.length&&stack[stack.length-1];if(parent&&"item"===parent.type){const item=this._subject;this._restoreContext("item",token),this._emit(this._subject,this.RDF_FIRST,item,this._graph)}return this._afterPath(token)}}_readForwardPath(token){let subject,predicate;const object=this._factory.blankNode();if(void 0!==(predicate=this._readEntity(token)))return null===this._predicate?(subject=this._subject,this._subject=object):(subject=this._object,this._object=object),this._emit(subject,predicate,object,this._graph),this._readPath}_readBackwardPath(token){const subject=this._factory.blankNode();let predicate,object;if(void 0!==(predicate=this._readEntity(token)))return null===this._predicate?(object=this._subject,this._subject=subject):(object=this._object,this._object=subject),this._emit(subject,predicate,object,this._graph),this._readPath}_readRDFStarTailOrGraph(token){return">>"!==token.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(token))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,token):this._readRDFStarTail(token)}_readRDFStarTail(token){if(">>"!==token.type)return this._error(`Expected >> but got ${token.type}`,token);const quad=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",token),null===this._subject?(this._subject=quad,this._readPredicate):(this._object=quad,this._getContextEndReader())}_getContextEndReader(){const contextStack=this._contextStack;if(!contextStack.length)return this._readPunctuation;switch(contextStack[contextStack.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(subject,predicate,object,graph){this._callback(null,this._factory.quad(subject,predicate,object,graph||this.DEFAULTGRAPH))}_error(message,token){const err=new Error(`${message} on line ${token.line}.`);err.context={token,line:token.line,previousToken:this._lexer.previousToken},this._callback(err),this._callback=noop}_resolveIRI(iri){return/^[a-z][a-z0-9+.-]*:/i.test(iri)?iri:this._resolveRelativeIRI(iri)}_resolveRelativeIRI(iri){if(!iri.length)return this._base;switch(iri[0]){case"#":return this._base+iri;case"?":return this._base.replace(/(?:\?.*)?$/,iri);case"/":return("/"===iri[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(iri);default:return/^[^/:]*:/.test(iri)?null:this._removeDotSegments(this._basePath+iri)}}_removeDotSegments(iri){if(!/(^|\/)\.\.?($|[/#?])/.test(iri))return iri;const length=iri.length;let result="",i=-1,pathStart=-1,segmentStart=0,next="/";for(;i<length;){switch(next){case":":if(pathStart<0&&"/"===iri[++i]&&"/"===iri[++i])for(;(pathStart=i+1)<length&&"/"!==iri[pathStart];)i=pathStart;break;case"?":case"#":i=length;break;case"/":if("."===iri[i+1])switch(next=iri[1+ ++i],next){case"/":result+=iri.substring(segmentStart,i-1),segmentStart=i+1;break;case void 0:case"?":case"#":return result+iri.substring(segmentStart,i)+iri.substr(i+1);case".":if(next=iri[1+ ++i],void 0===next||"/"===next||"?"===next||"#"===next){if(result+=iri.substring(segmentStart,i-2),(segmentStart=result.lastIndexOf("/"))>=pathStart&&(result=result.substr(0,segmentStart)),"/"!==next)return`${result}/${iri.substr(i+1)}`;segmentStart=i+1}}}next=iri[++i]}return result+iri.substring(segmentStart)}parse(input,quadCallback,prefixCallback){let onQuad,onPrefix,onComment;if(quadCallback&&(quadCallback.onQuad||quadCallback.onPrefix||quadCallback.onComment)?(onQuad=quadCallback.onQuad,onPrefix=quadCallback.onPrefix,onComment=quadCallback.onComment):(onQuad=quadCallback,onPrefix=prefixCallback),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${blankNodePrefix++}_`,this._prefixCallback=onPrefix||noop,this._inversePredicate=!1,this._quantified=Object.create(null),!onQuad){const quads=[];let error;if(this._callback=(e,t)=>{e?error=e:t&&quads.push(t)},this._lexer.tokenize(input).every(token=>this._readCallback=this._readCallback(token)),error)throw error;return quads}let processNextToken=(error,token)=>{null!==error?(this._callback(error),this._callback=noop):this._readCallback&&(this._readCallback=this._readCallback(token))};onComment&&(this._lexer.comments=!0,processNextToken=(error,token)=>{null!==error?(this._callback(error),this._callback=noop):this._readCallback&&("comment"===token.type?onComment(token.value):this._readCallback=this._readCallback(token))}),this._callback=onQuad,this._lexer.tokenize(input,processNextToken)}}function noop(){}function initDataFactory(parser,factory){parser._factory=factory,parser.DEFAULTGRAPH=factory.defaultGraph(),parser.RDF_FIRST=factory.namedNode(IRIs.rdf.first),parser.RDF_REST=factory.namedNode(IRIs.rdf.rest),parser.RDF_NIL=factory.namedNode(IRIs.rdf.nil),parser.N3_FORALL=factory.namedNode(IRIs.r.forAll),parser.N3_FORSOME=factory.namedNode(IRIs.r.forSome),parser.ABBREVIATIONS={a:factory.namedNode(IRIs.rdf.type),"=":factory.namedNode(IRIs.owl.sameAs),">":factory.namedNode(IRIs.log.implies),"<":factory.namedNode(IRIs.log.isImpliedBy)},parser.QUANTIFIERS_GRAPH=factory.namedNode("urn:n3:quantifiers")}if(initDataFactory(N3Parser.prototype,N3DataFactory),void 0===rdfaparser_Node)var rdfaparser_Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class RDFaProcessor{constructor(kb,options){this.options=options||{},this.kb=kb,this.target=options.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}addTriple(origin,subject,predicate,object){var su,ob,pr,or;su=void 0===subject?canonical_data_factory.namedNode(this.options.base):this.toRDFNodeObject(subject),pr=this.toRDFNodeObject(predicate),ob=this.toRDFNodeObject(object),or=canonical_data_factory.namedNode(this.options.base),this.kb.add(su,pr,ob,or)}ancestorPath(node){for(var path="";node&&node.nodeType!==rdfaparser_Node.DOCUMENT_NODE;)path="/"+node.localName+path,node=node.parentNode;return path}copyMappings(mappings){var newMappings={};for(var k in mappings)newMappings[k]=mappings[k];return newMappings}copyProperties(){}deriveDateTimeType(value){for(var i=0;i<RDFaProcessor.dateTimeTypes.length;i++){var matched=RDFaProcessor.dateTimeTypes[i].pattern.exec(value);if(matched&&matched[0].length===value.length)return RDFaProcessor.dateTimeTypes[i].type}return null}init(){}newBlankNode(){return this.blankCounter++,"_:"+this.blankCounter}newSubjectOrigin(origin,subject){}parseCURIE(value,prefixes,base){var uri,colon=value.indexOf(":");if(colon>=0){var prefix=value.substring(0,colon);if(""===prefix)return(uri=prefixes[""])?uri+value.substring(colon+1):null;if("_"===prefix)return"_:"+value.substring(colon+1);if(RDFaProcessor.NCNAME.test(prefix)&&(uri=prefixes[prefix]))return uri+value.substring(colon+1)}return null}parseCURIEOrURI(value,prefixes,base){var curie=this.parseCURIE(value,prefixes,base);return curie||this.resolveAndNormalize(base,value)}parsePredicate(value,defaultVocabulary,terms,prefixes,base,ignoreTerms){if(""===value)return null;var predicate=this.parseTermOrCURIEOrAbsURI(value,defaultVocabulary,ignoreTerms?null:terms,prefixes,base);return predicate&&0===predicate.indexOf("_:")?null:predicate}parsePrefixMappings(str,target){for(var values=this.tokenize(str),prefix=null,i=0;i<values.length;i++)":"===values[i][values[i].length-1]?prefix=values[i].substring(0,values[i].length-1):prefix&&(target[prefix]=this.options.base?esm_uri.join(values[i],this.options.base):values[i],prefix=null)}static parseRDFaDOM(dom,kb,base){var p=new RDFaProcessor(kb,{base});dom.baseURI||(dom.baseURI=base),p.process(dom,{baseURI:base})}parseSafeCURIEOrCURIEOrURI(value,prefixes,base){return"["===(value=this.trim(value)).charAt(0)&&"]"===value.charAt(value.length-1)?0===(value=(value=value.substring(1,value.length-1)).trim(value)).length?null:"_:"===value?this.theOne:this.parseCURIE(value,prefixes,base):this.parseCURIEOrURI(value,prefixes,base)}parseTermOrCURIEOrAbsURI(value,defaultVocabulary,terms,prefixes,base){value=this.trim(value);var curie=this.parseCURIE(value,prefixes,base);if(curie)return curie;if(terms){if(defaultVocabulary&&!this.absURIRE.exec(value))return defaultVocabulary+value;var term=terms[value];if(term)return term;if(term=terms[value.toLowerCase()])return term}return this.absURIRE.exec(value)?this.resolveAndNormalize(base,value):null}parseTermOrCURIEOrURI(value,defaultVocabulary,terms,prefixes,base){value=this.trim(value);var curie=this.parseCURIE(value,prefixes,base);if(curie)return curie;var term=terms[value];return term||((term=terms[value.toLowerCase()])?term:defaultVocabulary&&!this.absURIRE.exec(value)?defaultVocabulary+value:this.resolveAndNormalize(base,value))}parseURI(uri){return uri}process(node,options){var base;options=options||{},node.nodeType===rdfaparser_Node.DOCUMENT_NODE?(node.baseURI&&!options.baseURI&&(options.baseURI=node.baseURI),base=node.baseURI,(node=node.documentElement).baseURI||(node.baseURI=base),this.setContext(node)):node.parentNode.nodeType===rdfaparser_Node.DOCUMENT_NODE&&this.setContext(node);var queue=[],removeHash=function(baseURI){if(!baseURI&&options&&options.baseURI)return options.baseURI;var hash=baseURI.indexOf("#");return hash>=0&&(baseURI=baseURI.substring(0,hash)),options&&options.baseURIMap&&(baseURI=options.baseURIMap(baseURI)),baseURI};for(queue.push({current:node,context:this.push(null,removeHash(node.baseURI))});queue.length>0;){var item=queue.shift();if(item.parent){if(item.context.parent&&item.context.parent.listMapping===item.listMapping)continue;for(let predicate in item.listMapping){var list=item.listMapping[predicate];if(0!==list.length){var bnodes=[];for(let i=0;i<list.length;i++)bnodes.push(this.newBlankNode());for(let i=0;i<bnodes.length;i++)this.addTriple(item.parent,bnodes[i],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",list[i]),this.addTriple(item.parent,bnodes[i],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:RDFaProcessor.objectURI,value:i+1<bnodes.length?bnodes[i+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(item.parent,item.subject,predicate,{type:RDFaProcessor.objectURI,value:bnodes[0]})}else this.addTriple(item.parent,item.subject,predicate,{type:RDFaProcessor.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var current=item.current,context=item.context,skip=!1,newSubject=null,currentObjectResource=null,typedResource=null,prefixes=context.prefixes,prefixesCopied=!1,incomplete=[],listMapping=context.listMapping,listMappingDifferent=!context.parent,language=context.language,vocabulary=context.vocabulary;base=this.parseURI(removeHash(current.baseURI)),current.item=null;var vocabAtt=current.getAttributeNode("vocab");if(vocabAtt){let value=this.trim(vocabAtt.value);if(value.length>0){vocabulary=value;var baseSubject=base.spec;this.addTriple(current,baseSubject,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:RDFaProcessor.objectURI,value:vocabulary})}else vocabulary=this.vocabulary}for(var i=0;i<current.attributes.length;i++){var att=current.attributes[i];if("x"===att.nodeName.charAt(0)&&0===att.nodeName.indexOf("xmlns:")){prefixesCopied||(prefixes=this.copyMappings(prefixes),prefixesCopied=!0);var prefix=att.nodeName.substring(6),ref=RDFaProcessor.trim(att.value);prefixes[prefix]=this.options.base?esm_uri.join(ref,this.options.base):ref}}var prefixAtt=current.getAttributeNode("prefix");prefixAtt&&(prefixesCopied||(prefixes=this.copyMappings(prefixes),prefixesCopied=!0),this.parsePrefixMappings(prefixAtt.value,prefixes));var xmlLangAtt=null;for(let i=0;!xmlLangAtt&&i<this.langAttributes.length;i++)xmlLangAtt=current.getAttributeNodeNS(this.langAttributes[i].namespaceURI,this.langAttributes[i].localName);if(xmlLangAtt){let value=RDFaProcessor.trim(xmlLangAtt.value);language=value.length>0?value:null}var predicate,values,relAtt=current.getAttributeNode("rel"),revAtt=current.getAttributeNode("rev"),typeofAtt=current.getAttributeNode("typeof"),propertyAtt=current.getAttributeNode("property"),datatypeAtt=current.getAttributeNode("datatype"),datetimeAtt=this.inHTMLMode?current.getAttributeNode("datetime"):null,contentAtt=current.getAttributeNode("content"),aboutAtt=current.getAttributeNode("about"),srcAtt=current.getAttributeNode("src"),resourceAtt=current.getAttributeNode("resource"),hrefAtt=current.getAttributeNode("href"),inlistAtt=current.getAttributeNode("inlist"),relAttPredicates=[];if(relAtt){values=this.tokenize(relAtt.value);for(let i=0;i<values.length;i++)(predicate=this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base,this.inHTMLMode&&null!==propertyAtt))&&relAttPredicates.push(predicate)}var revAttPredicates=[];if(revAtt){values=this.tokenize(revAtt.value);for(let i=0;i<values.length;i++)(predicate=this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base,this.inHTMLMode&&propertyAtt))&&revAttPredicates.push(predicate)}if(this.inHTMLMode&&(relAtt||revAtt)&&propertyAtt&&(0===relAttPredicates.length&&(relAtt=null),0===revAttPredicates.length&&(revAtt=null)),relAtt||revAtt?(aboutAtt&&(newSubject=this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base)),typeofAtt&&(typedResource=newSubject),newSubject||(current.parentNode.nodeType===rdfaparser_Node.DOCUMENT_NODE?newSubject=removeHash(current.baseURI):context.parentObject&&(newSubject=removeHash(current.parentNode.baseURI)===context.parentObject?removeHash(current.baseURI):context.parentObject)),resourceAtt&&(currentObjectResource=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)),currentObjectResource||(hrefAtt?currentObjectResource=this.resolveAndNormalize(base,encodeURI(hrefAtt.value)):srcAtt?currentObjectResource=this.resolveAndNormalize(base,encodeURI(srcAtt.value)):!typeofAtt||aboutAtt||this.inXHTMLMode&&("head"===current.localName||"body"===current.localName)||(currentObjectResource=this.newBlankNode())),!typeofAtt||aboutAtt||!this.inXHTMLMode||"head"!==current.localName&&"body"!==current.localName?typeofAtt&&!aboutAtt&&(typedResource=currentObjectResource):typedResource=newSubject):!propertyAtt||contentAtt||datatypeAtt?(aboutAtt&&(newSubject=this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base)),!newSubject&&resourceAtt&&(newSubject=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)),!newSubject&&hrefAtt&&(newSubject=this.resolveAndNormalize(base,encodeURI(hrefAtt.value))),!newSubject&&srcAtt&&(newSubject=this.resolveAndNormalize(base,encodeURI(srcAtt.value))),newSubject||(current.parentNode.nodeType===rdfaparser_Node.DOCUMENT_NODE?newSubject=removeHash(current.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==current.localName&&"body"!==current.localName?typeofAtt?newSubject=this.newBlankNode():context.parentObject&&(newSubject=removeHash(current.parentNode.baseURI)===context.parentObject?removeHash(current.baseURI):context.parentObject,propertyAtt||(skip=!0)):newSubject=removeHash(current.parentNode.baseURI)===context.parentObject?removeHash(current.baseURI):context.parentObject),typeofAtt&&(typedResource=newSubject)):(aboutAtt&&(newSubject=this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base),typeofAtt&&(typedResource=newSubject)),newSubject||current.parentNode.nodeType!==rdfaparser_Node.DOCUMENT_NODE?!newSubject&&context.parentObject&&(newSubject=removeHash(current.parentNode.baseURI)===context.parentObject?removeHash(current.baseURI):context.parentObject):(newSubject=removeHash(current.baseURI),typeofAtt&&(typedResource=newSubject)),typeofAtt&&!typedResource&&(resourceAtt&&(typedResource=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)),!typedResource&&hrefAtt&&(typedResource=this.resolveAndNormalize(base,encodeURI(hrefAtt.value))),!typedResource&&srcAtt&&(typedResource=this.resolveAndNormalize(base,encodeURI(srcAtt.value))),typedResource||!this.inXHTMLMode&&!this.inHTMLMode||"head"!==current.localName&&"body"!==current.localName||(typedResource=newSubject),typedResource||(typedResource=this.newBlankNode()),currentObjectResource=typedResource)),newSubject&&(aboutAtt||resourceAtt||typedResource)){var id=newSubject;typeofAtt&&!aboutAtt&&!resourceAtt&&currentObjectResource&&(id=currentObjectResource),this.newSubjectOrigin(current,id)}if(typedResource){values=this.tokenize(typeofAtt.value);for(let i=0;i<values.length;i++){var object=this.parseTermOrCURIEOrAbsURI(values[i],vocabulary,context.terms,prefixes,base);object&&this.addTriple(current,typedResource,RDFaProcessor.typeURI,{type:RDFaProcessor.objectURI,value:object})}}if(newSubject&&newSubject!==context.parentObject&&(listMapping={},listMappingDifferent=!0),currentObjectResource){if(relAtt&&inlistAtt)for(let i=0;i<relAttPredicates.length;i++){let list=listMapping[relAttPredicates[i]];list||(list=[],listMapping[relAttPredicates[i]]=list),list.push({type:RDFaProcessor.objectURI,value:currentObjectResource})}else if(relAtt)for(let i=0;i<relAttPredicates.length;i++)this.addTriple(current,newSubject,relAttPredicates[i],{type:RDFaProcessor.objectURI,value:currentObjectResource});if(revAtt)for(let i=0;i<revAttPredicates.length;i++)this.addTriple(current,currentObjectResource,revAttPredicates[i],{type:RDFaProcessor.objectURI,value:newSubject})}else{if(newSubject&&!currentObjectResource&&(relAtt||revAtt)&&(currentObjectResource=this.newBlankNode()),relAtt&&inlistAtt)for(let i=0;i<relAttPredicates.length;i++){let list=listMapping[relAttPredicates[i]];list||(list=[],listMapping[predicate]=list),incomplete.push({predicate:relAttPredicates[i],list})}else if(relAtt)for(let i=0;i<relAttPredicates.length;i++)incomplete.push({predicate:relAttPredicates[i],forward:!0});if(revAtt)for(let i=0;i<revAttPredicates.length;i++)incomplete.push({predicate:revAttPredicates[i],forward:!1})}if(propertyAtt){var datatype=null,content=null;datatypeAtt?(datatype=""===datatypeAtt.value?RDFaProcessor.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(datatypeAtt.value,vocabulary,context.terms,prefixes,base),content=datetimeAtt&&!contentAtt?datetimeAtt.value:datatype===RDFaProcessor.XMLLiteralURI||datatype===RDFaProcessor.HTMLLiteralURI?null:contentAtt?contentAtt.value:current.textContent):contentAtt?(datatype=RDFaProcessor.PlainLiteralURI,content=contentAtt.value):datetimeAtt?(content=datetimeAtt.value,(datatype=RDFaProcessor.deriveDateTimeType(content))||(datatype=RDFaProcessor.PlainLiteralURI)):relAtt||revAtt||(resourceAtt&&(content=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)),!content&&hrefAtt?content=this.resolveAndNormalize(base,encodeURI(hrefAtt.value)):!content&&srcAtt&&(content=this.resolveAndNormalize(base,encodeURI(srcAtt.value))),content&&(datatype=RDFaProcessor.objectURI)),datatype||(typeofAtt&&!aboutAtt?(datatype=RDFaProcessor.objectURI,content=typedResource):(content=current.textContent,this.inHTMLMode&&"time"===current.localName&&(datatype=RDFaProcessor.deriveDateTimeType(content)),datatype||(datatype=RDFaProcessor.PlainLiteralURI))),values=this.tokenize(propertyAtt.value);for(let i=0;i<values.length;i++){let predicate=this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base);if(predicate)if(inlistAtt){let list=listMapping[predicate];list||(list=[],listMapping[predicate]=list),list.push(datatype===RDFaProcessor.XMLLiteralURI||datatype===RDFaProcessor.HTMLLiteralURI?{type:datatype,value:current.childNodes}:{type:datatype||RDFaProcessor.PlainLiteralURI,value:content,language})}else datatype===RDFaProcessor.XMLLiteralURI||datatype===RDFaProcessor.HTMLLiteralURI?this.addTriple(current,newSubject,predicate,{type:datatype,value:current.childNodes}):this.addTriple(current,newSubject,predicate,{type:datatype||RDFaProcessor.PlainLiteralURI,value:content,language})}}if(newSubject&&!skip)for(let i=0;i<context.incomplete.length;i++)context.incomplete[i].list?context.incomplete[i].list.push({type:RDFaProcessor.objectURI,value:newSubject}):context.incomplete[i].forward?this.addTriple(current,context.subject,context.incomplete[i].predicate,{type:RDFaProcessor.objectURI,value:newSubject}):this.addTriple(current,newSubject,context.incomplete[i].predicate,{type:RDFaProcessor.objectURI,value:context.subject});var childContext=null,listSubject=newSubject;skip?((childContext=this.push(context,context.subject)).parentObject=removeHash(current.parentNode.baseURI)===context.parentObject?removeHash(current.baseURI):context.parentObject,childContext.incomplete=context.incomplete,childContext.language=language,childContext.prefixes=prefixes,childContext.vocabulary=vocabulary):((childContext=this.push(context,newSubject)).parentObject=currentObjectResource||newSubject||context.subject,childContext.prefixes=prefixes,childContext.incomplete=incomplete,currentObjectResource&&(listSubject=currentObjectResource,listMapping={},listMappingDifferent=!0),childContext.listMapping=listMapping,childContext.language=language,childContext.vocabulary=vocabulary),listMappingDifferent&&queue.unshift({parent:current,context,subject:listSubject,listMapping});for(var child=current.lastChild;child;child=child.previousSibling)child.nodeType===rdfaparser_Node.ELEMENT_NODE&&queue.unshift({current:child,context:childContext})}}this.inHTMLMode&&this.copyProperties();for(let i=0;i<this.finishedHandlers.length;i++)this.finishedHandlers[i](node)}push(parent,subject){return{parent,subject:subject||(parent?parent.subject:null),parentObject:null,incomplete:[],listMapping:parent?parent.listMapping:{},language:parent?parent.language:this.language,prefixes:parent?parent.prefixes:this.target.graph.prefixes,terms:parent?parent.terms:this.target.graph.terms,vocabulary:parent?parent.vocabulary:this.vocabulary}}resolveAndNormalize(base,uri){return esm_uri.join(uri,base)}setContext(node){"html"===node.localName&&"XHTML+RDFa 1.1"===node.getAttribute("version")?this.setXHTMLContext():"html"===node.localName||"http://www.w3.org/1999/xhtml"===node.namespaceURI?"undefined"!=typeof document&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}setHTMLContext(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}setInitialContext(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}setXHTMLContext(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}setXMLContext(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}tokenize(str){return this.trim(str).split(/\s+/)}static tokenize(str){return this.trim(str).split(/\s+/)}toRDFNodeObject(x){if(void 0!==x){if("string"==typeof x)return"_:"===x.substring(0,2)?(void 0===this.blankNodes[x.substring(2)]&&(this.blankNodes[x.substring(2)]=new blank_node.A(x.substring(2))),this.blankNodes[x.substring(2)]):canonical_data_factory.namedNode(x);switch(x.type){case RDFaProcessor.objectURI:return"_:"===x.value.substring(0,2)?(void 0===this.blankNodes[x.value.substring(2)]&&(this.blankNodes[x.value.substring(2)]=new blank_node.A(x.value.substring(2))),this.blankNodes[x.value.substring(2)]):canonical_data_factory.namedNode(x.value);case RDFaProcessor.PlainLiteralURI:return new literal.A(x.value,x.language||"");case RDFaProcessor.XMLLiteralURI:case RDFaProcessor.HTMLLiteralURI:var string="";return Object.keys(x.value).forEach(i=>{string+=utils_js.domToString(x.value[i],this.htmlOptions)}),new literal.A(string,"",new named_node.A(x.type));default:return new literal.A(x.value,"",new named_node.A(x.type))}}}trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}static trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}RDFaProcessor.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",RDFaProcessor.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",RDFaProcessor.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",RDFaProcessor.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",RDFaProcessor.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",RDFaProcessor.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",RDFaProcessor.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",RDFaProcessor.NCNAME=new RegExp("^"+RDFaProcessor.nameStartChar+RDFaProcessor.nameChar+"*$"),RDFaProcessor.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];const parseRDFaDOM=RDFaProcessor.parseRDFaDOM;class RDFParser{constructor(store){this.store=store,this.bnodes={},this.why=null,this.reify=!1}frameFactory(parser,parent,element){return{NODE:1,ARC:2,parent,parser,store:parser.store,element,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(type,uri){uri=esm_uri.join(uri,this.base),this.node=this.store.sym(uri),this.nodeType=type},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var triple=this.store.sym(esm_uri.join("#"+this.parent.rdfid,this.base));this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"type"),this.store.sym(RDFParser.ns.RDF+"Statement"),this.parser.why),this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(uri){this.addSymbol(this.NODE,uri),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(id){null!=id?null!=this.parser.bnodes[id]?this.node=this.parser.bnodes[id]:this.node=this.parser.bnodes[id]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(uri){uri===RDFParser.ns.RDF+"li"&&(uri=RDFParser.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,uri)},addLiteral:function(value){this.parent.datatype&&this.parent.datatype!==RDFParser.ns.RDF+"langString"?this.node=this.store.literal(value,this.store.sym(this.parent.datatype)):this.node=this.store.literal(value,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}getAttributeNodeNS(node,uri,name){var attributeNode=null;if(node.getAttributeNodeNS)attributeNode=node.getAttributeNodeNS(uri,name);else for(var potentialNode,attributes=node.attributes,i=0;i<attributes.length;++i)if((potentialNode=attributes[i]).namespaceURI===uri&&(potentialNode.prefix?potentialNode.prefix+":"+name:name)===potentialNode.nodeName){attributeNode=potentialNode;break}return attributeNode}parse(document,base,why){var root,children=document.childNodes;if(this.cleanParser(),document.nodeType===RDFParser.nodeType.DOCUMENT){for(var c=0;c<children.length;c++)if(children[c].nodeType===RDFParser.nodeType.ELEMENT){root=children[c];break}}else{if(document.nodeType!==RDFParser.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+base+". Halting. ");root=document}this.why=why;var f=this.frameFactory(this);return this.base=base,f.base=base,f.lang=null,this.parseDOM(this.buildFrame(f,root)),!0}parseDOM(frame){for(var rdfid,elementURI=function(el){var result="";if(null==el.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+el.localName+" in "+this.base);return el.namespaceURI&&(result+=el.namespaceURI),el.localName?result+=el.localName:el.nodeName&&(el.nodeName.indexOf(":")>=0?result+=el.nodeName.split(":")[1]:result+=el.nodeName),result}.bind(this),dig=!0;frame.parent;){var dom=frame.element,attrs=dom.attributes;if(dom.nodeType===RDFParser.nodeType.TEXT||dom.nodeType===RDFParser.nodeType.CDATA_SECTION)frame.parent.nodeType===frame.NODE&&(frame.addArc(RDFParser.ns.RDF+"value"),frame=this.buildFrame(frame)),frame.addLiteral(dom.nodeValue);else if(elementURI(dom)!==RDFParser.ns.RDF+"RDF")if(frame.parent&&frame.parent.collection&&(frame.addCollectionArc(),(frame=this.buildFrame(frame,frame.element)).parent.element=null),frame.parent&&frame.parent.nodeType&&frame.parent.nodeType!==frame.ARC){frame.addArc(elementURI(dom)),this.reify&&(rdfid=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"ID"))&&(frame.rdfid=rdfid.nodeValue,dom.removeAttributeNode(rdfid));var parsetype=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"parseType"),datatype=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"datatype");if(datatype&&(frame.datatype=datatype.nodeValue,dom.removeAttributeNode(datatype)),parsetype){var nv=parsetype.nodeValue;"Literal"===nv?(frame.datatype=RDFParser.ns.RDF+"XMLLiteral",(frame=this.buildFrame(frame)).addLiteral(dom.innerHTML||dom.childNodes),dig=!1):"Resource"===nv?((frame=this.buildFrame(frame,frame.element)).parent.element=null,frame.addBNode()):"Collection"===nv&&((frame=this.buildFrame(frame,frame.element)).parent.element=null,frame.addCollection()),dom.removeAttributeNode(parsetype)}if(0!==attrs.length){var resource=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"resource"),bnid2=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"nodeID");frame=this.buildFrame(frame),resource?(frame.addNode(resource.nodeValue),dom.removeAttributeNode(resource)):bnid2?(frame.addBNode(bnid2.nodeValue),dom.removeAttributeNode(bnid2)):frame.addBNode();for(var x1=attrs.length-1;x1>=0;x1--){var f=this.buildFrame(frame);f.addArc(elementURI(attrs[x1])),elementURI(attrs[x1])===RDFParser.ns.RDF+"type"?this.buildFrame(f).addNode(attrs[x1].nodeValue):this.buildFrame(f).addLiteral(attrs[x1].nodeValue)}}else 0===dom.childNodes.length&&this.buildFrame(frame).addLiteral("")}else{var about=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"about");if(rdfid=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"ID"),about&&rdfid)throw new Error("RDFParser: "+dom.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!about&&rdfid)frame.addNode("#"+rdfid.nodeValue),dom.removeAttributeNode(rdfid);else if(null==about&&null==rdfid){var bnid=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"nodeID");bnid?(frame.addBNode(bnid.nodeValue),dom.removeAttributeNode(bnid)):frame.addBNode()}else frame.addNode(about.nodeValue),dom.removeAttributeNode(about);var rdftype=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"type");RDFParser.ns.RDF+"Description"!==elementURI(dom)&&(rdftype={nodeValue:elementURI(dom)}),null!=rdftype&&(this.store.add(frame.node,this.store.sym(RDFParser.ns.RDF+"type"),this.store.sym(esm_uri.join(rdftype.nodeValue,frame.base)),this.why),rdftype.nodeName&&dom.removeAttributeNode(rdftype));for(var x=attrs.length-1;x>=0;x--)this.store.add(frame.node,this.store.sym(elementURI(attrs[x])),this.store.literal(attrs[x].nodeValue,frame.lang),this.why)}for(dom=frame.element;frame.parent;){for(var pframe=frame;null==dom;)dom=(frame=frame.parent).element;var candidate=dom.childNodes&&dom.childNodes[frame.lastChild];if(candidate&&dig){if((candidate.nodeType===RDFParser.nodeType.ELEMENT||candidate.nodeType===RDFParser.nodeType.TEXT||candidate.nodeType===RDFParser.nodeType.CDATA_SECTION)&&(candidate.nodeType!==RDFParser.nodeType.TEXT&&candidate.nodeType!==RDFParser.nodeType.CDATA_SECTION||1===dom.childNodes.length)){frame.lastChild++,frame=this.buildFrame(pframe,dom.childNodes[frame.lastChild-1]);break}frame.lastChild++}else{if(frame.terminateFrame(),!(frame=frame.parent))break;dom=frame.element,dig=!0}}}}cleanParser(){this.bnodes={},this.why=null}buildFrame(parent,element){var frame=this.frameFactory(this,parent,element);if(parent&&(frame.base=parent.base,frame.lang=parent.lang),!element||element.nodeType===RDFParser.nodeType.TEXT||element.nodeType===RDFParser.nodeType.CDATA_SECTION)return frame;var attrs=element.attributes,base=element.getAttributeNode("xml:base");null!=base&&(frame.base=base.nodeValue,element.removeAttribute("xml:base"));var lang=element.getAttributeNode("xml:lang");null!=lang&&(frame.lang=lang.nodeValue,element.removeAttribute("xml:lang"));for(var x=attrs.length-1;x>=0;x--)if("xml"===attrs[x].nodeName.substr(0,3)){if("xmlns:"===attrs[x].name.slice(0,6)){var uri=attrs[x].nodeValue;this.base&&(uri=esm_uri.join(uri,this.base)),this.store.setPrefixForURI(attrs[x].name.slice(6),uri)}element.removeAttributeNode(attrs[x])}return frame}}function sparqlUpdateParser(str,kb,base){var i,j,k,keywords=["INSERT","DELETE","WHERE"],SQNS=(0,namespace.A)("http://www.w3.org/ns/pim/patch#"),p=n3parser(kb,kb,base,base,null,null,"",null),clauses={},badSyntax=function(uri,lines,str,i,why){return"Line "+(lines+1)+" of <"+uri+">: Bad syntax:\n   "+why+'\n   at: "'+str.slice(i,i+30)+'"'};i=0;var query=kb.sym(base+"#query");for(clauses.query=query;;){if((j=p.skipSpace(str,i))<0)return clauses;if(";"===str[j]){if((i=p.skipSpace(str,j+1))<0)return clauses;j=i}var found=!1;for(k=0;k<keywords.length;k++){var key=keywords[k];if(str.slice(j,j+key.length)===key){if((i=p.skipSpace(str,j+key.length))<0)throw badSyntax(p._thisDoc,p.lines,str,j+key.length,"found EOF, needed {...} after "+key);if(("INSERT"===key||"DELETE"===key)&&"DATA"===str.slice(i,i+4)){if((j=p.skipSpace(str,i+4))<0)throw badSyntax(p._thisDoc,p.lines,str,i+4,"needed {...} after INSERT DATA "+key);i=j}var res2=[];if((j=p.node(str,i,res2))<0)throw badSyntax(p._thisDoc,p.lines,str,i,"bad syntax or EOF in {...} after "+key);clauses[key.toLowerCase()]=res2[0],kb.add(query,SQNS(key.toLowerCase()),res2[0]),found=!0,i=j}}if(!found&&"@prefix"===str.slice(j,j+7)){if((i=p.directive(str,j))<0)throw badSyntax(p._thisDoc,p.lines,str,i,"bad syntax or EOF after @prefix ");i=p.checkDot(str,i),found=!0}if(!found)throw badSyntax(p._thisDoc,p.lines,str,j,"Unknown syntax at start of statememt: '"+str.slice(j).slice(0,20)+"'")}}function parse(str,kb,base){let contentType=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text/turtle",callback=arguments.length>4?arguments[4]:void 0;contentType=contentType||types.sT,contentType=contentType.split(";")[0];try{if(contentType===types.ny||contentType===types.sT)n3parser(kb,kb,base,base,null,null,"",null).loadBuf(str),executeCallback();else if(contentType===types.JG){new RDFParser(kb).parse(utils_js.parseXML(str),base,kb.sym(base)),executeCallback()}else if(contentType===types.H)parseRDFaDOM(utils_js.parseXML(str,{contentType:types.H}),kb,base),executeCallback();else if(contentType===types.lc)parseRDFaDOM(utils_js.parseXML(str,{contentType:types.lc}),kb,base),executeCallback();else if(contentType===types.K9||contentType===types.Fn)sparqlUpdateParser(str,kb,base),executeCallback();else if(contentType===types.i2)jsonldParser(str,kb,base).then(executeCallback).catch(executeErrorCallback);else{if(contentType!==types._0&&contentType!==types.BR)throw void 0===contentType?new Error("contentType is undefined"):new Error("Don't know how to parse "+contentType+" yet");var n3Parser=new N3Parser({factory:extended_term_factory});!function nquadCallback(err,nquads){err&&callback(err,kb);try{n3Parser.parse(nquads,tripleCallback)}catch(err){callback(err,kb)}}(null,str)}}catch(e){executeErrorCallback(e)}function executeCallback(){callback&&callback(null,kb)}function executeErrorCallback(e){if(contentType!==types.i2||contentType!==types._0||contentType!==types.BR){if(!callback){let e2=new Error(e+" while trying to parse <"+base+"> as "+contentType);throw e2.cause=e,e2}callback(e,kb)}}function tripleCallback(err,triple){triple?kb.add(triple.subject,triple.predicate,triple.object,triple.graph):callback(err,kb)}parse.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0}}(0,defineProperty.A)(RDFParser,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"}),(0,defineProperty.A)(RDFParser,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});var browser_ponyfill=__webpack_require__("./node_modules/cross-fetch/dist/browser-ponyfill.js"),browser_ponyfill_default=__webpack_require__.n(browser_ponyfill),termValue=__webpack_require__("./node_modules/rdflib/esm/utils/termValue.js");const Parsable={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},CONTENT_TYPE_BY_EXT={rdf:types.JG,owl:types.JG,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},getNS=factory=>({link:(0,namespace.A)("http://www.w3.org/2007/ont/link#",factory),http:(0,namespace.A)("http://www.w3.org/2007/ont/http#",factory),httph:(0,namespace.A)("http://www.w3.org/2007/ont/httph#",factory),rdf:(0,namespace.A)("http://www.w3.org/1999/02/22-rdf-syntax-ns#",factory),rdfs:(0,namespace.A)("http://www.w3.org/2000/01/rdf-schema#",factory),dc:(0,namespace.A)("http://purl.org/dc/elements/1.1/",factory),ldp:(0,namespace.A)("http://www.w3.org/ns/ldp#",factory)}),ns=getNS();class Handler{constructor(response,dom){(0,defineProperty.A)(this,"response",void 0),(0,defineProperty.A)(this,"dom",void 0),this.response=response,this.dom=dom}}(0,defineProperty.A)(Handler,"pattern",void 0);class RDFXMLHandler extends Handler{static toString(){return"RDFXMLHandler"}static register(fetcher){fetcher.mediatypes[types.JG]={q:.9}}parse(fetcher,responseText,options){let kb=fetcher.store;if(this.dom||(this.dom=utils_js.parseXML(responseText)),"parsererror"===this.dom.documentElement.nodeName)return fetcher.failFetch(options,"Badly formed XML in "+options.resource.value,"parse_error");let parser=new RDFParser(kb);try{parser.parse(this.dom,options.original.value,options.original)}catch(err){return fetcher.failFetch(options,"Syntax error parsing RDF/XML! "+err,"parse_error")}return options.noMeta||kb.add(options.original,ns.rdf("type"),ns.link("RDFDocument"),fetcher.appNode),fetcher.doneFetch(options,this.response)}}RDFXMLHandler.pattern=new RegExp("application/rdf\\+xml");class XHTMLHandler extends Handler{static toString(){return"XHTMLHandler"}static register(fetcher){fetcher.mediatypes[types.H]={q:.8}}parse(fetcher,responseText,options){let relation,reverse;this.dom||(this.dom=utils_js.parseXML(responseText));let kb=fetcher.store,title=this.dom.getElementsByTagName("title");title.length>0&&kb.add(options.resource,ns.dc("title"),kb.rdfFactory.literal(title[0].textContent),options.resource);let links=this.dom.getElementsByTagName("link");for(let x=links.length-1;x>=0;x--)relation=links[x].getAttribute("rel"),reverse=!1,relation||(relation=links[x].getAttribute("rev"),reverse=!0),relation&&fetcher.linkData(options.original,relation,links[x].getAttribute("href"),options.resource,reverse);let scripts=this.dom.getElementsByTagName("script");for(let i=0;i<scripts.length;i++){let contentType=scripts[i].getAttribute("type");Parsable[contentType]&&(parse(scripts[i].textContent,kb,options.original.value,contentType),parse(scripts[i].textContent,kb,options.original.value,contentType))}if(options.noMeta||kb.add(options.resource,ns.rdf("type"),ns.link("WebPage"),fetcher.appNode),!options.noRDFa&&parseRDFaDOM)try{parseRDFaDOM(this.dom,kb,options.original.value)}catch(err){let msg="Error trying to parse "+options.resource+" as RDFa:\n"+err+":\n"+err.stack;return fetcher.failFetch(options,msg,"parse_error")}return fetcher.doneFetch(options,this.response)}}XHTMLHandler.pattern=new RegExp("application/xhtml");class XMLHandler extends Handler{static toString(){return"XMLHandler"}static register(fetcher){fetcher.mediatypes["text/xml"]={q:.5},fetcher.mediatypes["application/xml"]={q:.5}}static isElement(node){return node.nodeType===Node.ELEMENT_NODE}parse(fetcher,responseText,options){let dom=utils_js.parseXML(responseText);for(let c=0;c<dom.childNodes.length;c++){const node=dom.childNodes[c];if(XMLHandler.isElement(node)){let ns=node.namespaceURI;if(ns&&ns===ns.rdf){return fetcher.addStatus(options.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new RDFXMLHandler(this.response,dom).parse(fetcher,responseText,options)}break}}if(dom.doctype&&"html"===dom.doctype.name&&dom.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&dom.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){return fetcher.addStatus(options.req,"Has XHTML DOCTYPE. Switching to XHTML Handler.\n"),new XHTMLHandler(this.response,dom).parse(fetcher,responseText,options)}let html=dom.getElementsByTagName("html")[0];if(html){let xmlns=html.getAttribute("xmlns");if(xmlns&&xmlns.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){return fetcher.addStatus(options.req,"Has a default namespace for XHTML. Switching to XHTMLHandler.\n"),new XHTMLHandler(this.response,dom).parse(fetcher,responseText,options)}}return fetcher.failFetch(options,"Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n"+responseText.slice(0,80),901)}}XMLHandler.pattern=new RegExp("(text|application)/(.*)xml");class HTMLHandler extends Handler{static toString(){return"HTMLHandler"}static register(fetcher){fetcher.mediatypes["text/html"]={q:.8}}parse(fetcher,responseText,options){let kb=fetcher.store;if(isXML(responseText)){return fetcher.addStatus(options.req,"Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.\n"),new XHTMLHandler(this.response).parse(fetcher,responseText,options)}if(function isXHTML(responseText){const docTypeStart=responseText.indexOf("<!DOCTYPE html"),docTypeEnd=responseText.indexOf(">");if(-1===docTypeStart||-1===docTypeEnd||docTypeStart>docTypeEnd)return!1;return-1!==responseText.substr(docTypeStart,docTypeEnd-docTypeStart).indexOf("XHTML")}(responseText)){return fetcher.addStatus(options.req,"Has XHTML DOCTYPE. Switching to XHTMLHandler.\n"),new XHTMLHandler(this.response).parse(fetcher,responseText,options)}if(function isXMLNS(responseText){const match=responseText.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!match}(responseText)){return fetcher.addStatus(options.req,"Has default namespace for XHTML, so switching to XHTMLHandler.\n"),new XHTMLHandler(this.response).parse(fetcher,responseText,options)}let titleMatch=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(responseText);return titleMatch&&kb.add(options.resource,ns.dc("title"),kb.rdfFactory.literal(titleMatch[1]),options.resource),kb.add(options.resource,ns.rdf("type"),ns.link("WebPage"),fetcher.appNode),fetcher.addStatus(options.req,"non-XML HTML document, not parsed for data."),fetcher.doneFetch(options,this.response)}}HTMLHandler.pattern=new RegExp("text/html");class JsonLdHandler extends Handler{static toString(){return"JsonLdHandler"}static register(fetcher){fetcher.mediatypes["application/ld+json"]={q:.9}}async parse(fetcher,responseText,options,response){const kb=fetcher.store;try{return await jsonldParser(responseText,kb,options.original.value),fetcher.store.add(options.original,ns.rdf("type"),ns.link("RDFDocument"),fetcher.appNode),fetcher.doneFetch(options,response)}catch(err){const msg="Error trying to parse "+options.resource+" as JSON-LD:\n"+err;return fetcher.failFetch(options,msg,"parse_error",response)}}}JsonLdHandler.pattern=/application\/(ld\+json|activity\+json)/;class TextHandler extends Handler{static toString(){return"TextHandler"}static register(fetcher){fetcher.mediatypes["text/plain"]={q:.5}}parse(fetcher,responseText,options){if(isXML(responseText)){return fetcher.addStatus(options.req,"Warning: "+options.resource+" has an XML declaration. We'll assume it's XML but its content-type wasn't XML.\n"),new XMLHandler(this.response).parse(fetcher,responseText,options)}if(responseText.slice(0,500).match(/xmlns:/)){return fetcher.addStatus(options.req,"May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.\n"),new XMLHandler(this.response).parse(fetcher,responseText,options)}return fetcher.addStatus(options.req,"Plain text document, no known RDF semantics."),fetcher.doneFetch(options,this.response)}}TextHandler.pattern=new RegExp("text/plain");class N3Handler extends Handler{static toString(){return"N3Handler"}static register(fetcher){fetcher.mediatypes["text/n3"]={},fetcher.mediatypes["text/turtle"]={}}parse(fetcher,responseText,options,response){let kb=fetcher.store,p=n3parser(kb,kb,options.original.value,options.original.value,null,null,"",null);try{p.loadBuf(responseText)}catch(err){let msg="Error trying to parse "+options.resource+" as Notation3:\n"+err;return fetcher.failFetch(options,msg,"parse_error",response)}return fetcher.addStatus(options.req,"N3 parsed: "+p.statementCount+" triples in "+p.lines+" lines."),fetcher.store.add(options.original,ns.rdf("type"),ns.link("RDFDocument"),fetcher.appNode),fetcher.doneFetch(options,this.response)}}N3Handler.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");const defaultHandlers={RDFXMLHandler,XHTMLHandler,XMLHandler,HTMLHandler,TextHandler,N3Handler,JsonLdHandler};function isXML(responseText){return!!responseText.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)}class Fetcher{constructor(store){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,defineProperty.A)(this,"store",void 0),(0,defineProperty.A)(this,"timeout",void 0),(0,defineProperty.A)(this,"_fetch",void 0),(0,defineProperty.A)(this,"mediatypes",void 0),(0,defineProperty.A)(this,"appNode",void 0),(0,defineProperty.A)(this,"requested",void 0),(0,defineProperty.A)(this,"timeouts",void 0),(0,defineProperty.A)(this,"redirectedTo",void 0),(0,defineProperty.A)(this,"fetchQueue",void 0),(0,defineProperty.A)(this,"fetchCallbacks",void 0),(0,defineProperty.A)(this,"nonexistent",void 0),(0,defineProperty.A)(this,"lookedUp",void 0),(0,defineProperty.A)(this,"handlers",void 0),(0,defineProperty.A)(this,"ns",void 0),(0,defineProperty.A)(this,"fireCallbacks",void 0),this.store=store||new IndexedFormula,this.ns=getNS(this.store.rdfFactory),this.timeout=options.timeout||3e4,this._fetch=options.fetch||void 0!==__webpack_require__.g&&(__webpack_require__.g.solidFetcher||__webpack_require__.g.solidFetch)||"undefined"!=typeof window&&(window.solidFetcher||window.solidFetch)||browser_ponyfill_default(),!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},utils_js.callbackify(this,["request","fail","refresh","retract","done"]),Object.keys(options.handlers||defaultHandlers).map(key=>this.addHandler(defaultHandlers[key]))}static crossSiteProxy(uri){return Fetcher.crossSiteProxyTemplate?Fetcher.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(uri)):void 0}static offlineOverride(uri){let requestedURI=uri;var UI;return"undefined"!=typeof window&&window.panes&&(UI=window.panes.UI)&&UI.preferences&&UI.preferences.get("offlineModeUsingLocalhost")&&"http://"===requestedURI.slice(0,7)&&"localhost/"!==requestedURI.slice(7,17)&&(requestedURI="http://localhost/"+requestedURI.slice(7),esm_log.A.warn("Localhost kludge for offline use: actually getting <"+requestedURI+">")),requestedURI}static proxyIfNecessary(uri){var UI;if("undefined"!=typeof window&&window.panes&&(UI=window.panes.UI)&&UI.isExtension)return uri;if("undefined"!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.localSiteMap){let hostpath=uri.split("/").slice(2);const lookup=(parts,index)=>{let z=index[parts.shift()];return z?"string"==typeof z?z+parts.join("/"):parts?lookup(parts,z):null:null},y=lookup(hostpath,$SolidTestEnvironment.localSiteMap);if(y)return y}return Fetcher.crossSiteProxyTemplate&&"undefined"!=typeof document&&document.location&&"https:"===(""+document.location).slice(0,6)&&"http:"===uri.slice(0,5)?Fetcher.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(uri)):uri}static unsupportedProtocol(uri){let pcol=esm_uri.protocol(uri);return"tel"===pcol||"mailto"===pcol||"urn"===pcol}static setCredentials(requestedURI){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===options.credentials&&(void 0!==options.withCredentials?options.credentials=options.withCredentials?"include":"omit":options.credentials="include")}load(uri){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(options=Object.assign({},options),uri instanceof Array)return Promise.all(uri.map(x=>this.load(x,Object.assign({},options))));const uriIn=uri;let docuri=(0,termValue.E)(uriIn);docuri=docuri.split("#")[0],options=this.initFetchOptions(docuri,options);const meta=this.appNode,kb=this.store,requests=kb.statementsMatching(void 0,this.ns.link("requestedURI"),kb.sym(docuri),meta).map(st=>st.subject);for(const request of requests){const response=kb.any(request,this.ns.link("response"),null,meta);if(null!=response){const quad=kb.statementsMatching(response,this.ns.link("outOfDate"),!0,meta);kb.remove(quad),options.force=!0,options.clearPreviousData=!0}}const initialisedOptions=this.initFetchOptions(docuri,options);return this.pendingFetchPromise(docuri,initialisedOptions.baseURI,initialisedOptions)}async pendingFetchPromise(uri,originalUri,options){let pendingPromise;return!options.force&&await this.fetchQueue[originalUri]?pendingPromise=this.fetchQueue[originalUri]:(pendingPromise=Promise.race([this.setRequestTimeout(uri,options),this.fetchUri(uri,options)]),this.fetchQueue[originalUri]=pendingPromise,this.cleanupFetchRequest(originalUri,void 0,this.timeout)),pendingPromise.then(x=>(uri in this.timeouts&&(this.timeouts[uri].forEach(clearTimeout),delete this.timeouts[uri]),x))}cleanupFetchRequest(originalUri,_options,timeout){void 0!==_options&&console.warn("_options is deprecated"),this.timeouts[originalUri]=(this.timeouts[originalUri]||[]).concat(setTimeout(()=>{this.isPending(originalUri)||delete this.fetchQueue[originalUri]},timeout))}initFetchOptions(uri,options){let kb=this.store;!options.method||"GET"===options.method.toUpperCase()||(options.force=!0),options.resource=kb.rdfFactory.namedNode(uri),options.baseURI=options.baseURI||uri,options.original=kb.rdfFactory.namedNode(options.baseURI),options.req=kb.bnode(),options.headers=options.headers||{},options.contentType&&(options.headers["content-type"]=options.contentType),options.force&&(options.cache="no-cache");let acceptString=this.acceptString();options.headers.accept=acceptString;let requestedURI=Fetcher.offlineOverride(uri);options.requestedURI=requestedURI,Fetcher.setCredentials(requestedURI,options);let actualProxyURI=Fetcher.proxyIfNecessary(requestedURI);return requestedURI!==actualProxyURI&&(options.proxyUsed=!0),options.actualProxyURI=actualProxyURI,options}fetchUri(docuri,options){if(!docuri)return Promise.reject(new Error("Cannot fetch an empty uri"));if(Fetcher.unsupportedProtocol(docuri))return this.failFetch(options,"fetcher: Unsupported protocol","unsupported_protocol");let state=this.getState(docuri);if(options.force)delete this.nonexistent[docuri];else{if("fetched"===state)return Promise.resolve(this.doneFetch(options,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if("failed"===state&&404===this.requested[docuri]){let message="Previously failed: "+this.requested[docuri],dummyResponse={url:docuri,status:this.requested[docuri],statusText:message,responseText:message,headers:new browser_ponyfill.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(options,message,this.requested[docuri],dummyResponse)}}this.fireCallbacks("request",[docuri]),this.requested[docuri]=!0,options.noMeta||this.saveRequestMetadata(docuri,options);let{actualProxyURI}=options;return this._fetch(actualProxyURI,options).then(response=>this.handleResponse(response,docuri,options),error=>{let dummyResponse={url:actualProxyURI,status:999,statusText:(error.name||"network failure")+": "+(error.errno||error.code||error.type),responseText:error.message,headers:new browser_ponyfill.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.handleError(dummyResponse,docuri,options)})}nowOrWhenFetched(uriIn,p2,userCallback){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const uri=(0,termValue.E)(uriIn);"function"==typeof p2?userCallback=p2:void 0===p2||((0,terms.Y2)(p2)?options.referringTerm=p2:options=p2),this.load(uri,options).then(fetchResponse=>{if(userCallback)if(fetchResponse)if(fetchResponse.ok)userCallback(!0,"OK",fetchResponse);else{let oops="HTTP error: Status "+fetchResponse.status+" ("+fetchResponse.statusText+")";fetchResponse.responseText&&(oops+=" "+fetchResponse.responseText),userCallback(!1,oops,fetchResponse)}else{userCallback(!1,"@@ nowOrWhenFetched:  no response object!")}},function(err){var message=err.message||err.statusText;message="Failed to load  <"+uri+"> "+message,err.response&&err.response.status&&(message+=" status: "+err.response.status),userCallback(!1,message,err.response)})}addStatus(req,statusMessage){let now=new Date;statusMessage="["+now.getHours()+":"+now.getMinutes()+":"+now.getSeconds()+"."+now.getMilliseconds()+"] "+statusMessage;let kb=this.store;const statusNode=kb.the(req,this.ns.link("status"));(0,terms.P3)(statusNode)?statusNode.append(kb.rdfFactory.literal(statusMessage)):esm_log.A.warn("web.js: No list to add to: "+statusNode+","+statusMessage)}failFetch(options,errorMessage,statusCode,response){this.addStatus(options.req,errorMessage),options.noMeta||this.store.add(options.original,this.ns.link("error"),this.store.rdfFactory.literal(errorMessage));let meth=(options.method||"GET").toUpperCase();("GET"===meth||"HEAD"===meth)&&(options.resource.equals(options.original),this.requested[esm_uri.docpart(options.original.value)]=statusCode,this.fireCallbacks("fail",[options.original.value,errorMessage]));var err=new Error("Fetcher: "+errorMessage);return err.status=statusCode,err.statusText=errorMessage,err.response=response,Promise.reject(err)}linkData(originalUri,rel,uri,why,reverse){if(!uri)return;let predicate,kb=this.store,obj=kb.rdfFactory.namedNode(esm_uri.join(uri,originalUri.value));if("alternate"===rel||"seeAlso"===rel||"meta"===rel||"describedby"===rel){if(obj.value===originalUri.value)return;predicate=this.ns.rdfs("seeAlso")}else predicate="type"===rel?kb.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):kb.rdfFactory.namedNode(esm_uri.join(encodeURIComponent(rel),"http://www.iana.org/assignments/link-relations/"));reverse?kb.add(obj,predicate,originalUri,why):kb.add(originalUri,predicate,obj,why)}parseLinkHeader(linkHeader,originalUri,reqNode){if(!linkHeader)return;const paramexp=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,matches=linkHeader.match(/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g);if(null!=matches)for(let i=0;i<matches.length;i++){let split=matches[i].split(">"),href=split[0].substring(1),s=split[1].match(paramexp);if(null==s)return;for(let j=0;j<s.length;j++){let rel=s[j].split("=")[1].replace(/["']/g,"");this.linkData(originalUri,rel,href,reqNode)}}}doneFetch(options,response){return this.addStatus(options.req,"Done."),this.requested[options.original.value]="done",this.fireCallbacks("done",[options.original.value]),response.req=options.req,response}nowKnownAs(was,now){this.lookedUp[was.value]?this.lookedUp[now.value]||this.lookUpThing(now,was):this.lookedUp[now.value]&&(this.lookedUp[was.value]||this.lookUpThing(was,now))}putBack(uri){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const uriSting=(0,termValue.E)(uri);let doc=new named_node.A(uriSting).doc();return options.contentType=options["content-type"]||options["Content-Type"]||options.contentType||types.sT,"application/ld+json"===options.contentType?new Promise((resolve,reject)=>{serialize(doc,this.store,doc.uri,options.contentType,(err,jsonString)=>{err?reject(err):(options.data=jsonString,this.webOperation("PUT",uri,options).then(res=>resolve(res)).catch(error=>reject(error)))})}):(options.data=serialize(doc,this.store,doc.value,options.contentType),this.webOperation("PUT",uriSting,options))}webCopy(here,there,contentType){return this.webOperation("GET",here).then(result=>this.webOperation("PUT",there,{data:result.responseText,contentType}))}delete(uri,options){return this.webOperation("DELETE",uri,options).then(response=>(this.requested[uri]=404,this.nonexistent[uri]=!0,this.unload(this.store.rdfFactory.namedNode(uri)),response))}async createIfNotExists(doc){let contentType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:types.sT,data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const fetcher=this;try{var response=await fetcher.load(doc)}catch(err){if(404===err.response.status){try{response=await fetcher.webOperation("PUT",doc.value,{data,contentType})}catch(err){throw err}return delete fetcher.requested[doc.value],response}throw err}return response}createContainer(parentURI,folderName,data){let headers={"content-type":types.sT,link:this.ns.ldp("BasicContainer")+'; rel="type"'};folderName&&(headers.slug=folderName);let options={headers};return data&&(options.body=data),this.webOperation("POST",parentURI,options)}invalidateCache(iri){const uri=(0,termValue.E)(iri),fetcher=this;fetcher.fetchQueue&&fetcher.fetchQueue[uri]&&(fetcher.fetchQueue[uri].PromiseStatus,delete fetcher.fetchQueue[uri]);if(fetcher.requested[uri]&&"done"!==fetcher.requested[uri]&&"failed"!==fetcher.requested[uri]&&404!==fetcher.requested[uri]){let msg=`Rdflib: fetcher: Destructive operation on <${fetcher.requested[uri]}> file being fetched! `+uri;console.error(msg)}else delete fetcher.requested[uri],delete fetcher.nonexistent[uri]}webOperation(method,uriIn){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const uri=(0,termValue.E)(uriIn);options.method=method,options.body=options.data||options.body,options.force=!0;const fetcher=this;if(options.body&&!options.contentType)throw new Error("Web operation sending data must have a defined contentType.");return options.contentType&&(options.headers=options.headers||{},options.headers["content-type"]=options.contentType),Fetcher.setCredentials(uri,options),new Promise(function(resolve,reject){fetcher._fetch(uri,options).then(response=>{if(response.ok)"PUT"!==method&&"PATCH"!==method&&"POST"!==method&&"DELETE"!==method||fetcher.invalidateCache(uri),response.text?response.text().then(data=>{response.responseText=data,resolve(response)}):resolve(response);else{let msg="Web error: "+response.status;response.statusText&&(msg+=" ("+response.statusText+")"),msg+=" on "+method+" of <"+uri+">",response.responseText&&(msg+=": "+response.responseText);let e2=new Error(msg);e2.response=response,reject(e2)}},err=>{reject(new Error("Fetch error for "+method+" of <"+uri+">:"+err))})})}lookUpThing(term,rterm){let uris=this.store.uris(term);return uris=uris.map(u=>esm_uri.docpart(u)),uris.forEach(u=>{this.lookedUp[u]=!0}),this.load(uris,{referringTerm:rterm})}getHeader(doc,header){const kb=this.store,docuri=doc.value,requests=kb.each(void 0,this.ns.link("requestedURI"),kb.rdfFactory.literal(docuri));for(let r=0;r<requests.length;r++){let request=requests[r];if(void 0!==request){let response=kb.any(request,this.ns.link("response"));if(void 0!==response&&kb.anyValue(response,this.ns.http("status"))&&kb.anyValue(response,this.ns.http("status")).startsWith("2")){let results=kb.each(response,this.ns.httph(header.toLowerCase()));return results.length?results.map(v=>v.value):[]}}}}saveRequestMetadata(docuri,options){let req=options.req,kb=this.store,rterm=options.referringTerm;this.addStatus(options.req,"Accept: "+options.headers.accept),(0,terms.Y2)(rterm)&&kb.add(kb.rdfFactory.namedNode(docuri),this.ns.link("requestedBy"),rterm,this.appNode),options.original&&options.original.value!==docuri&&kb.add(req,this.ns.link("orginalURI"),kb.rdfFactory.literal(options.original.value),this.appNode);const now=new Date,timeNow="["+now.getHours()+":"+now.getMinutes()+":"+now.getSeconds()+"] ";kb.add(req,this.ns.rdfs("label"),kb.rdfFactory.literal(timeNow+" Request for "+docuri),this.appNode),kb.add(req,this.ns.link("requestedURI"),kb.rdfFactory.literal(docuri),this.appNode),kb.add(req,this.ns.link("status"),kb.collection(),this.appNode)}saveResponseMetadata(response,options){const kb=this.store;let responseNode=kb.bnode();return kb.add(options.req,this.ns.link("response"),responseNode,this.appNode),kb.add(responseNode,this.ns.http("status"),kb.rdfFactory.literal(response.status),this.appNode),kb.add(responseNode,this.ns.http("statusText"),kb.rdfFactory.literal(response.statusText),this.appNode),response.headers.forEach((value,header)=>{kb.add(responseNode,this.ns.httph(header),this.store.rdfFactory.literal(value),this.appNode),"content-type"===header&&kb.add(options.resource,this.ns.rdf("type"),kb.rdfFactory.namedNode(utils_js.mediaTypeClass(value).value),this.appNode)}),responseNode}objectRefresh(term){let uris=this.store.uris(term);if(void 0!==uris)for(let i=0;i<uris.length;i++)this.refresh(this.store.rdfFactory.namedNode(esm_uri.docpart(uris[i])))}refresh(term,userCallback){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(term,{force:!0,clearPreviousData:!0},userCallback)}refreshIfExpired(term,userCallback){let exp=this.getHeader(term,"Expires");!exp||new Date(exp[0]).getTime()<=(new Date).getTime()?this.refresh(term,userCallback):userCallback(!0,"Not expired",{})}retract(term){this.store.removeMany(void 0,void 0,void 0,term),term.value&&delete this.requested[esm_uri.docpart(term.value)],this.fireCallbacks("retract",arguments)}getState(docuri){return void 0===this.requested[docuri]?"unrequested":!0===this.requested[docuri]?"requested":"done"===this.requested[docuri]?"fetched":"redirected"===this.requested[docuri]?this.getState(this.redirectedTo[docuri]):"failed"}isPending(docuri){return!0===this.requested[docuri]}unload(term){this.store.removeDocument(term),delete this.requested[term.value]}addHandler(handler){this.handlers.push(handler),handler.register(this)}retryNoCredentials(docuri,options){options.retriedWithNoCredentials=!0,delete this.requested[docuri],delete this.fetchQueue[docuri];let newOptions=Object.assign({},options,{credentials:"omit"});return this.addStatus(options.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(docuri,newOptions)}isCrossSite(uri){if("undefined"==typeof document||!document.location)return!1;const hostpart=esm_uri.hostpart,here=""+document.location;return(hostpart(here)&&hostpart(uri)&&hostpart(here))!==hostpart(uri)}handleError(response,docuri,options){if(this.isCrossSite(docuri)){if(options.credentials&&"include"===options.credentials&&!options.retriedWithNoCredentials)return this.retryNoCredentials(docuri,options);let proxyUri=Fetcher.crossSiteProxy(docuri);if(proxyUri&&!options.proxyUsed)return this.redirectToProxy(proxyUri,options)}var message;return response instanceof Error?message="Fetch error: "+response.message:(message=response.statusText,response.responseText&&(message+=` ${response.responseText}`)),this.failFetch(options,message,response.status||998,response)}addType(rdfType,req,kb,locURI){let prev=req;if(locURI){var reqURI=kb.any(prev,this.ns.link("requestedURI"));reqURI&&reqURI.value!==locURI&&kb.add(kb.rdfFactory.namedNode(locURI),this.ns.rdf("type"),rdfType,this.appNode)}for(;;){const doc=kb.any(prev,this.ns.link("requestedURI"));if(doc&&doc.value&&kb.add(kb.rdfFactory.namedNode(doc.value),this.ns.rdf("type"),rdfType,this.appNode),prev=kb.any(void 0,kb.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),prev),!prev)break;var response=kb.any(prev,kb.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!response)break;var redirection=kb.any(response,kb.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!redirection)break;if("301"!==redirection&&"302"!==redirection)break}}handleResponse(response,docuri,options){const kb=this.store,headers=response.headers,reqNode=options.req,responseNode=this.saveResponseMetadata(response,options),contentType=this.normalizedContentType(options,headers)||"";let contentLocation=headers.get("content-location");if(0===response.status)return this.handleError(response,docuri,options);if(response.status>=400)return 404===response.status&&(this.nonexistent[options.original.value]=!0,this.nonexistent[docuri]=!0),this.saveErrorResponse(response,responseNode).then(()=>{let errorMessage=options.resource+" "+response.statusText;return this.failFetch(options,errorMessage,response.status,response)});var diffLocation=null,absContentLocation=null;if(contentLocation&&(absContentLocation=esm_uri.join(contentLocation,docuri))!==docuri&&(diffLocation=absContentLocation),200===response.status){if(this.addType(this.ns.link("Document"),reqNode,kb,docuri),diffLocation&&this.addType(this.ns.link("Document"),reqNode,kb,diffLocation),options.clearPreviousData){const sts=kb.statementsMatching(void 0,void 0,void 0,options.resource).slice();for(let i=0;i<sts.length;i++)kb.removeStatement(sts[i])}let isImage=contentType.includes("image/")||contentType.includes("application/pdf");contentType&&isImage&&(this.addType(kb.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),reqNode,kb,docuri),diffLocation&&this.addType(kb.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),reqNode,kb,diffLocation))}if(contentLocation){if(!options.force&&diffLocation&&"done"===this.requested[absContentLocation])return this.doneFetch(options,response);this.requested[absContentLocation]=!0}this.parseLinkHeader(headers.get("link"),options.original,reqNode);let handler=this.handlerForContentType(contentType,response);return handler?response.text().then(responseText=>(response.responseText=responseText,handler.parse(this,responseText,options,response))):(this.addStatus(reqNode,"Fetch over. No data handled."),this.doneFetch(options,response))}saveErrorResponse(response,responseNode){let kb=this.store;return response.text().then(content=>{content.length>10&&kb.add(responseNode,this.ns.http("content"),kb.rdfFactory.literal(content),responseNode)})}handlerForContentType(contentType,response){if(!contentType)return null;let Handler=this.handlers.find(handler=>contentType.match(handler.pattern));return Handler?new Handler(response):null}guessContentType(uri){return CONTENT_TYPE_BY_EXT[uri.split(".").pop()]}normalizedContentType(options,headers){if(options.forceContentType)return options.forceContentType;let contentType=headers.get("content-type");if(!contentType||contentType.includes("application/octet-stream")){let guess=this.guessContentType(options.resource.value);if(guess)return guess}let protocol=esm_uri.protocol(options.resource.value);return!contentType&&["file","chrome"].includes(protocol)?"text/xml":contentType}redirectToProxy(newURI,options){this.addStatus(options.req,"BLOCKED -> Cross-site Proxy to <"+newURI+">"),options.proxyUsed=!0;const kb=this.store,oldReq=options.req;options.noMeta||(kb.add(oldReq,this.ns.link("redirectedTo"),kb.rdfFactory.namedNode(newURI),oldReq),this.addStatus(oldReq,"redirected to new request")),this.requested[options.resource.value]="redirected",this.redirectedTo[options.resource.value]=newURI;let newOptions=Object.assign({},options);return newOptions.baseURI=options.resource.value,this.fetchUri(newURI,newOptions).then(response=>(newOptions.noMeta||kb.add(oldReq,this.ns.link("redirectedRequest"),newOptions.req,this.appNode),response))}setRequestTimeout(uri,options){return new Promise(resolve=>{this.timeouts[uri]=(this.timeouts[uri]||[]).concat(setTimeout(()=>{!this.isPending(uri)||options.retriedWithNoCredentials||options.proxyUsed||resolve(this.failFetch(options,`Request to ${uri} timed out`,"timeout"))},this.timeout))})}addFetchCallback(uri,callback){this.fetchCallbacks[uri]?this.fetchCallbacks[uri].push(callback):this.fetchCallbacks[uri]=[callback]}acceptString(){let acceptstring="";for(let mediaType in this.mediatypes){""!==acceptstring&&(acceptstring+=", "),acceptstring+=mediaType;for(let property in this.mediatypes[mediaType])acceptstring+=";"+property+"="+this.mediatypes[mediaType][property]}return acceptstring}}(0,defineProperty.A)(Fetcher,"HANDLERS",void 0),(0,defineProperty.A)(Fetcher,"CONTENT_TYPE_BY_EXT",void 0),(0,defineProperty.A)(Fetcher,"crossSiteProxyTemplate",void 0),Fetcher.HANDLERS=defaultHandlers,Fetcher.CONTENT_TYPE_BY_EXT=CONTENT_TYPE_BY_EXT;const jsonparser={parseJSON:function(data,source,store){var subject,predicate,object,bnodes={},why=store.sym(source);for(var x in data){0===x.indexOf("_:")?bnodes[x]?subject=bnodes[x]:(subject=store.bnode(x),bnodes[x]=subject):subject=store.sym(x);var preds=data[x];for(var y in preds){var objects=preds[y];for(var z in predicate=store.sym(y),objects){var obj=objects[z];if("uri"===obj.type)object=store.sym(obj.value),store.add(subject,predicate,object,why);else if("BlankNode"===obj.type)bnodes[obj.value]?object=bnodes[obj.value]:(object=store.bnode(obj.value),bnodes[obj.value]=object),store.add(subject,predicate,object,why);else{if("Literal"!==obj.type)throw new Error("error: unexpected termtype: "+z.type);object=obj.datatype?store.literal(obj.value,void 0,store.sym(obj.datatype)):obj.lang?store.literal(obj.value,obj.lang):store.literal(obj.value),store.add(subject,predicate,object,why)}}}}}};function queryToSPARQL(query){var indent=0;function getPattern(pat){var str="",st=pat.statements;for(var x in st)esm_log.A.debug("Found statement: "+st),str+=addIndent()+st[x]+"\n";return str}function getConstraints(pat){var str="";for(var v in pat.constraints){var foo=pat.constraints[v];str+=addIndent()+"FILTER ( "+foo.describe(v)+" ) \n"}return str}function getOptionals(pat){for(var str="",x=0;x<pat.optional.length;x++)esm_log.A.debug("Found optional query"),str+=addIndent()+"OPTIONAL { \n",indent++,str+=getPattern(pat.optional[x]),str+=getConstraints(pat.optional[x]),str+=getOptionals(pat.optional[x]),indent--,str+=addIndent()+"}\n";return str}function getWhere(pat){var str=addIndent()+"WHERE \n{ \n";return indent++,str+=getPattern(pat),str+=getConstraints(pat),str+=getOptionals(pat),indent--,str+="}"}function addIndent(){for(var str="",i=0;i<indent;i++)str+="    ";return str}return function getSPARQL(query){return function getSelect(query){for(var str=addIndent()+"SELECT ",i=0;i<query.vars.length;i++)str+=query.vars[i]+" ";return str+"\n"}(query)+getWhere(query.pat)}(query)}function SPARQLToQuery(SPARQL,testMode,kb){var variableHash=[];function makeVar(name){if(variableHash[name])return variableHash[name];var newVar=kb.variable(name);return variableHash[name]=newVar,newVar}function isRealText(term){return"string"==typeof term&&term.match(/[^ \n\t]/)}function isVar(term){return"string"==typeof term&&term.match(/^[\?\$]/)}function fixSymbolBrackets(term){return"string"==typeof term?term.replace(/^&lt;/,"<").replace(/&gt;$/,">"):term}function isSymbol(term){return"string"==typeof term&&term.match(/^<[^>]*>$/)}function isBnode(term){return"string"==typeof term&&(term.match(/^_:/)||term.match(/^$/))}function isPrefix(term){return"string"==typeof term&&term.match(/:$/)}function isPrefixedSymbol(term){return"string"==typeof term&&term.match(/^:|^[^_][^:]*:/)}function getPrefix(term){return term.split(":")[0]}function getSuffix(term){return term.split(":")[1]}function removeBrackets(term){return isSymbol(term)?term.slice(1,term.length-1):term}function parseLiterals(str){var sin=-1===str.indexOf("'")?null:str.indexOf("'"),doub=-1===str.indexOf('"')?null:str.indexOf('"');if(!sin&&!doub){var a=new Array(1);return a[0]=str,a}var br,ind,res=new Array(2);if(!sin||doub&&doub<sin)br='"',ind=doub;else{if(doub&&!(sin&&sin<doub))return esm_log.A.error("SQARQL QUERY OOPS!"),res;br="'",ind=sin}res[0]=str.slice(0,ind);var end2,end=str.slice(ind+1).indexOf(br);return-1===end?(esm_log.A.error("SPARQL parsing error: no matching parentheses in literal "+str),str):(str.slice(end+ind+2).match(/^\^\^/)?(end2=str.slice(end+ind+2).indexOf(" "),res[1]=kb.literal(str.slice(ind+1,ind+1+end),kb.sym(removeBrackets(str.slice(ind+4+end,ind+2+end+end2)))),res=res.concat(parseLiterals(str.slice(end+ind+3+end2)))):str.slice(end+ind+2).match(/^@/)?(end2=str.slice(end+ind+2).indexOf(" "),res[1]=kb.literal(str.slice(ind+1,ind+1+end),str.slice(ind+3+end,ind+2+end+end2),null),res=res.concat(parseLiterals(str.slice(end+ind+2+end2)))):(res[1]=kb.literal(str.slice(ind+1,ind+1+end)),esm_log.A.info("Literal found: "+res[1]),res=res.concat(parseLiterals(str.slice(end+ind+2)))),res)}function spaceDelimit(str){str=str.replace(/\(/g," ( ").replace(/\)/g," ) ").replace(/</g," <").replace(/>/g,"> ").replace(/{/g," { ").replace(/}/g," } ").replace(/[\t\n\r]/g," ").replace(/; /g," ; ").replace(/\. /g," . ").replace(/, /g," , "),esm_log.A.info("New str into spaceDelimit: \n"+str);var res=[],br=str.split(" ");for(var x in br)isRealText(br[x])&&(res=res.concat(br[x]));return res}function arrayIndexOf(str,arr){for(var i=0;i<arr.length;i++)if("string"==typeof arr[i]&&arr[i].toLowerCase()===str.toLowerCase())return i;return null}function arrayIndicesOf(str,arr){for(var ind=[],i=0;i<arr.length;i++)"string"==typeof arr[i]&&arr[i].toLowerCase()===str.toLowerCase()&&ind.push(i);return ind}function getMatchingBracket(arr,open,close){esm_log.A.info("Looking for a close bracket of type "+close+" in "+arr);for(var index=0,i=0;i<arr.length;i++)if(arr[i]===open&&index++,arr[i]===close&&index--,index<0)return i;return esm_log.A.error("Statement had no close parenthesis in SPARQL query"),0}function ConstraintEqualTo(value){return this.describe=function(varstr){return varstr+" = "+value.toNT()},this.test=function(term){return value.equals(term)},this}function ConstraintRegexp(value){this.describe=function(varstr){return"REGEXP( '"+value+"' , "+varstr+" )"},this.test=function(term){var rg=new RegExp(value);return!!term.value&&rg.test(term.value)}}function setConstraint(input,pat){3!==input.length||"Variable"!==input[0].termType||"NamedNode"!==input[2].termType&&"Literal"!==input[2].termType?6===input.length&&"string"==typeof input[0]&&"regexp"===input[0].toLowerCase()&&"("===input[1]&&")"===input[5]&&","===input[3]&&"Variable"===input[4].termType&&"Literal"===input[2].termType&&(esm_log.A.debug("Constraint added: "+input),pat.constraints[input[4]]=new ConstraintRegexp(input[2].value)):"="===input[1]||">"===input[1]||"<"===input[1]?(esm_log.A.debug("Constraint added: "+input),pat.constraints[input[0]]=new ConstraintEqualTo(input[2])):esm_log.A.warn("I don't know how to handle the constraint: "+input)}function setOptional(terms,pat){esm_log.A.debug("Optional query: "+terms+" not yet implemented.");var opt=kb.formula();setWhere(terms,opt),pat.optional.push(opt)}function setWhere(input,pat){var end,opt,terms=function toTerms(input){for(var res=[],x=0;x<input.length;x++)"string"==typeof input[x]?(input[x]=fixSymbolBrackets(input[x]),isVar(input[x])?res[x]=makeVar(input[x].slice(1)):isBnode(input[x])?(esm_log.A.info(input[x]+" was identified as a bnode."),res[x]=kb.bnode()):isSymbol(input[x])?(esm_log.A.info(input[x]+" was identified as a symbol."),res[x]=kb.sym(removeBrackets(input[x]))):isPrefixedSymbol(input[x])?(esm_log.A.info(input[x]+" was identified as a prefixed symbol"),prefixes[getPrefix(input[x])]?res[x]=kb.sym(input[x]=prefixes[getPrefix(input[x])]+getSuffix(input[x])):(esm_log.A.error("SPARQL error: "+input[x]+" with prefix "+getPrefix(input[x])+" does not have a correct prefix entry."),res[x]=input[x])):res[x]=input[x]):res[x]=input[x];return res}(input);for(esm_log.A.debug("WHERE: "+terms);arrayIndexOf("OPTIONAL",terms);)opt=arrayIndexOf("OPTIONAL",terms),esm_log.A.debug("OPT: "+opt+" "+terms[opt]+" in "+terms),"{"!==terms[opt+1]&&esm_log.A.warn("Bad optional opening bracket in word "+opt),-1===(end=getMatchingBracket(terms.slice(opt+2),"{","}"))?esm_log.A.error("No matching bracket in word "+opt):(setOptional(terms.slice(opt+2,opt+2+end),pat),opt=arrayIndexOf("OPTIONAL",terms),end=getMatchingBracket(terms.slice(opt+2),"{","}"),terms.splice(opt,end+3));for(esm_log.A.debug("WHERE after optionals: "+terms);arrayIndexOf("FILTER",terms);){var filt=arrayIndexOf("FILTER",terms);"("!==terms[filt+1]&&esm_log.A.warn("Bad filter opening bracket in word "+filt),-1===(end=getMatchingBracket(terms.slice(filt+2),"(",")"))?esm_log.A.error("No matching bracket in word "+filt):(setConstraint(terms.slice(filt+2,filt+2+end),pat),filt=arrayIndexOf("FILTER",terms),end=getMatchingBracket(terms.slice(filt+2),"(",")"),terms.splice(filt,end+3))}esm_log.A.debug("WHERE after filters and optionals: "+terms),function extractStatements(terms,formula){var arrayZero=new Array(1);arrayZero[0]=-1;for(var per=arrayZero.concat(arrayIndicesOf(".",terms)),stat=[],x=0;x<per.length-1;x++)stat[x]=terms.slice(per[x]+1,per[x+1]);for(x in stat){esm_log.A.info("s+p+o "+x+" = "+stat[x]);var subj=stat[x][0];stat[x].splice(0,1);var sem=arrayZero.concat(arrayIndicesOf(";",stat[x]));sem.push(stat[x].length);for(var stat2=[],y=0;y<sem.length-1;y++)stat2[y]=stat[x].slice(sem[y]+1,sem[y+1]);for(x in stat2){esm_log.A.info("p+o "+x+" = "+stat[x]);var pred=stat2[x][0];stat2[x].splice(0,1);var com=arrayZero.concat(arrayIndicesOf(",",stat2[x]));com.push(stat2[x].length);var stat3=[];for(y=0;y<com.length-1;y++)stat3[y]=stat2[x].slice(com[y]+1,com[y+1]);for(x in stat3){var obj=stat3[x][0];esm_log.A.info("Subj="+subj+" Pred="+pred+" Obj="+obj),formula.add(subj,pred,obj)}}}}(terms,pat)}esm_log.A.info("SPARQL input: \n"+SPARQL);var q=new Query,sp=function tokenize(str){var token1=parseLiterals(str),token2=[];for(var x in token1)token2="string"==typeof token1[x]?token2.concat(spaceDelimit(token1[x])):token2.concat(token1[x]);return token2=function replaceKeywords(input){for(var strarr=input,x=0;x<strarr.length;x++)if("a"===strarr[x]&&(strarr[x]="<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"),"is"===strarr[x]&&"of"===strarr[x+2]){strarr.splice(x,1),strarr.splice(x+1,1);var s=strarr[x-1];strarr[x-1]=strarr[x+1],strarr[x+1]=s}return strarr}(token2),esm_log.A.info("SPARQL Tokens: "+token2),token2}(SPARQL),prefixes=function getPrefixDeclarations(input){var prefInd=arrayIndicesOf("PREFIX",input),res=[];for(var i in prefInd){var a=input[prefInd[i]+1],b=input[prefInd[i]+2];if(isPrefix(a))if(isSymbol(b)){esm_log.A.info("Prefix found: "+a+" -> "+b);var pref=getPrefix(a),symbol=removeBrackets(b);res[pref]=symbol}else esm_log.A.error("Invalid SPARQL symbol: "+b);else esm_log.A.error("Invalid SPARQL prefix: "+a)}return res}(sp);prefixes.rdf||(prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"),prefixes.rdfs||(prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#");var selectLoc=arrayIndexOf("SELECT",sp),whereLoc=arrayIndexOf("WHERE",sp);if(selectLoc<0||whereLoc<0||selectLoc>whereLoc)return esm_log.A.error("Invalid or nonexistent SELECT and WHERE tags in SPARQL query"),!1;if(function setVars(input,query){for(var x in esm_log.A.info("SPARQL vars: "+input),input)if(isVar(input[x])){esm_log.A.info("Added "+input[x]+" to query variables from SPARQL");var v=makeVar(input[x].slice(1));query.vars.push(v),v.label=input[x].slice(1)}else esm_log.A.warn("Incorrect SPARQL variable in SELECT: "+input[x])}(sp.slice(selectLoc+1,whereLoc),q),setWhere(sp.slice(whereLoc+2,sp.length-1),q.pat),testMode)return q;for(var x in q.pat.statements){var st=q.pat.statements[x];"NamedNode"===st.subject.termType&&kb.fetcher&&kb.fetcher.lookUpThing(st.subject,"sparql:"+st.subject),"NamedNode"===st.object.termType&&kb.fetcher&&kb.fetcher.lookUpThing(st.object,"sparql:"+st.object)}return q}class UpdateManager{constructor(store){if((0,defineProperty.A)(this,"store",void 0),(0,defineProperty.A)(this,"ifps",void 0),(0,defineProperty.A)(this,"fps",void 0),(0,defineProperty.A)(this,"patchControl",void 0),(0,defineProperty.A)(this,"ns",void 0),(store=store||new IndexedFormula).updater)throw new Error("You can't have two UpdateManagers for the same store");store.fetcher||(store.fetcher=new Fetcher(store)),this.store=store,store.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=(0,namespace.A)("http://www.w3.org/2007/ont/link#"),this.ns.http=(0,namespace.A)("http://www.w3.org/2007/ont/http#"),this.ns.httph=(0,namespace.A)("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=(0,namespace.A)("http://www.w3.org/ns/ldp#"),this.ns.rdf=(0,namespace.A)("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=(0,namespace.A)("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=(0,namespace.A)("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=(0,namespace.A)("http://www.w3.org/2002/07/owl#"),this.patchControl=[]}patchControlFor(doc){return this.patchControl[doc.value]||(this.patchControl[doc.value]=[]),this.patchControl[doc.value]}isHttpUri(uri){return"http"===uri.slice(0,4)}flagAuthorizationMetadata(kb){kb||(kb=this.store);const meta=kb.fetcher?.appNode,requests=kb.statementsMatching(void 0,this.ns.link("requestedURI"),void 0,meta).map(st=>st.subject);for(const request of requests){const response=kb.any(request,this.ns.link("response"),null,meta);null!=response&&kb.add(response,this.ns.link("outOfDate"),!0,meta)}}async checkEditable(uri,kb){if(!uri)return!1;kb||(kb=this.store);const initial=this.editable(uri,kb);if(void 0!==initial)return initial;await(kb.fetcher?.load(uri));return this.editable(uri,kb)}editable(uri,kb){if(!uri)return!1;if(kb||(kb=this.store),uri=(0,termValue.E)(uri),!this.isHttpUri(uri)&&kb.holds(kb.rdfFactory.namedNode(uri),kb.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),kb.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE";var request,definitive=!1;const meta=kb.fetcher?.appNode;for(var method,requests=kb.each(void 0,this.ns.link("requestedURI"),(0,esm_uri.docpart)(uri),meta),r=0;r<requests.length;r++)if(void 0!==(request=requests[r])){const response=kb.any(request,this.ns.link("response"),null,meta);if(void 0!==response){if(kb.anyJS(response,this.ns.link("outOfDate"),null,meta))continue;var wacAllow=kb.anyValue(response,this.ns.httph("wac-allow"));if(wacAllow)for(var bit of wacAllow.split(",")){var lr=bit.split("=");if(lr[0].includes("user")&&!lr[1].includes("write")&&!lr[1].includes("append"))return!1}var acceptPatch=kb.each(response,this.ns.httph("accept-patch"));if(acceptPatch.length)for(let i=0;i<acceptPatch.length;i++){if((method=acceptPatch[i].value.trim()).indexOf("application/sparql-update")>=0)return"SPARQL";if(method.indexOf("application/sparql-update-single-match")>=0)return"SPARQL";if(method.indexOf("text/n3")>=0)return"N3PATCH"}var authorVia=kb.each(response,this.ns.httph("ms-author-via"));if(authorVia.length)for(let i=0;i<authorVia.length;i++){if((method=authorVia[i].value.trim()).indexOf("SPARQL")>=0)return"SPARQL";if(method.indexOf("DAV")>=0)return"DAV"}if(!this.isHttpUri(uri))return!!wacAllow&&"LOCALFILE";var status=kb.each(response,this.ns.http("status"));if(status.length)for(let i=0;i<status.length;i++)200!==status[i]&&404!==status[i]||(definitive=!0)}}if(0===requests.length);else if(definitive)return!1}anonymize(obj){return"_:"===obj.toNT().substr(0,2)&&this.mentioned(obj)?"?"+obj.toNT().substr(2):obj.toNT()}anonymizeNT(stmt){return this.anonymize(stmt.subject)+" "+this.anonymize(stmt.predicate)+" "+this.anonymize(stmt.object)+" ."}nTriples(stmt){return`${stmt.subject.toNT()} ${stmt.predicate.toNT()} ${stmt.object.toNT()} .`}statementBnodes(st){return[st.subject,st.predicate,st.object].filter(function(x){return(0,terms.jt)(x)})}statementArrayBnodes(sts){var bnodes=[];for(let i=0;i<sts.length;i++)bnodes=bnodes.concat(this.statementBnodes(sts[i]));bnodes.sort();var bnodes2=[];for(let j=0;j<bnodes.length;j++)0!==j&&bnodes[j].equals(bnodes[j-1])||bnodes2.push(bnodes[j]);return bnodes2}cacheIfps(){this.ifps={};var a=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty"));for(let i=0;i<a.length;i++)this.ifps[a[i].value]=!0;this.fps={},a=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty"));for(let i=0;i<a.length;i++)this.fps[a[i].value]=!0}bnodeContext2(x,source,depth){var y,res,sts=this.store.statementsMatching(void 0,void 0,x,source);for(let i=0;i<sts.length;i++)if(this.fps[sts[i].predicate.value]){if(!(y=sts[i].subject).isBlank)return[sts[i]];if(depth&&(res=this.bnodeContext2(y,source,depth-1)))return res.concat([sts[i]])}sts=this.store.statementsMatching(x,void 0,void 0,source);for(let i=0;i<sts.length;i++)if(this.ifps[sts[i].predicate.value]){if(!(y=sts[i].object).isBlank)return[sts[i]];if(depth&&(res=this.bnodeContext2(y,source,depth-1)))return res.concat([sts[i]])}return null}bnodeContext1(x,source){for(var depth=0;depth<3;depth++){var con=this.bnodeContext2(x,source,depth);if(null!==con)return con}return this.store.connectedStatements(x,source)}mentioned(x){return 0!==this.store.statementsMatching(x,null,null,null).length||0!==this.store.statementsMatching(null,x).length||0!==this.store.statementsMatching(null,null,x).length}bnodeContext(bnodes,doc){var context=[];if(bnodes.length){this.cacheIfps();for(let i=0;i<bnodes.length;i++){var bnode=bnodes[i];this.mentioned(bnode)&&(context=context.concat(this.bnodeContext1(bnode,doc)))}}return context}statementContext(st){var bnodes=this.statementBnodes(st);return this.bnodeContext(bnodes,st.graph)}contextWhere(context){var updater=this;return context&&0!==context.length?"WHERE { "+context.map(function(x){return updater.anonymizeNT(x)}).join("\n")+" }\n":""}fire(uri,query,callbackFunction){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Promise.resolve().then(()=>{if(!uri)throw new Error("No URI given for remote editing operation: "+query);return options.noMeta=!0,options.contentType=options.contentType||"application/sparql-update",options.body=query,this.store.fetcher.webOperation("PATCH",uri,options)}).then(response=>{if(!response.ok){let message="UpdateManager: update failed for <"+uri+"> status="+response.status+", "+response.statusText+"\n   for query: "+query;throw new Error(message)}callbackFunction(uri,response.ok,response.responseText,response)}).catch(err=>{callbackFunction(uri,!1,err.message,err)})}update_statement(statement){if(!statement||statement.graph){var updater=this,context=this.statementContext(statement);return{statement:statement?[statement.subject,statement.predicate,statement.object,statement.graph]:void 0,statementNT:statement?this.anonymizeNT(statement):void 0,where:updater.contextWhere(context),set_object:function(obj,callbackFunction){var query=this.where;query+="DELETE DATA { "+this.statementNT+" } ;\n",query+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(obj)+"  . }\n",updater.fire(this.statement[3].value,query,callbackFunction)}}}}insert_statement(st,callbackFunction){var st0=st instanceof Array?st[0]:st,query=this.contextWhere(this.statementContext(st0));if(st instanceof Array){var stText="";for(let i=0;i<st.length;i++)stText+=st[i]+"\n";query+="INSERT DATA { "+stText+" }\n"}else query+="INSERT DATA { "+this.anonymize(st.subject)+" "+this.anonymize(st.predicate)+" "+this.anonymize(st.object)+"  . }\n";this.fire(st0.graph.value,query,callbackFunction)}delete_statement(st,callbackFunction){var st0=st instanceof Array?st[0]:st,query=this.contextWhere(this.statementContext(st0));if(st instanceof Array){var stText="";for(let i=0;i<st.length;i++)stText+=st[i]+"\n";query+="DELETE DATA { "+stText+" }\n"}else query+="DELETE DATA { "+this.anonymize(st.subject)+" "+this.anonymize(st.predicate)+" "+this.anonymize(st.object)+"  . }\n";this.fire(st0.graph.value,query,callbackFunction)}requestDownstreamAction(doc,action){var control=this.patchControlFor(doc);if(control.pendingUpstream)if(control.downstreamAction){if(""+control.downstreamAction!=""+action)throw new Error("Can't wait for > 1 different downstream actions")}else control.downstreamAction=action;else action(doc)}clearUpstreamCount(doc){this.patchControlFor(doc).upstreamCount=0}getUpdatesVia(doc){var linkHeaders=this.store.fetcher.getHeader(doc,"updates-via");return linkHeaders&&linkHeaders.length?linkHeaders[0].trim():null}addDownstreamChangeListener(doc,listener){var control=this.patchControlFor(doc);control.downstreamChangeListeners||(control.downstreamChangeListeners=[]),control.downstreamChangeListeners.push(listener),this.setRefreshHandler(doc,doc=>{this.reloadAndSync(doc)})}reloadAndSync(doc){var control=this.patchControlFor(doc),updater=this;if(control.reloading)control.outOfDate=!0;else{control.reloading=!0;var retryTimeout=1e3,tryReload=function(){updater.reload(updater.store,doc,function(ok,message,response){if(ok){if(control.downstreamChangeListeners)for(let i=0;i<control.downstreamChangeListeners.length;i++)control.downstreamChangeListeners[i]();control.reloading=!1,control.outOfDate&&(control.outOfDate=!1,tryReload())}else control.reloading=!1,response&&0===response.status&&(control.reloading=!0,retryTimeout*=2,setTimeout(tryReload,retryTimeout))})};tryReload()}}setRefreshHandler(doc,handler){let wssURI=this.getUpdatesVia(doc);var theHandler=handler,self=this,updater=this,retryTimeout=1500,retries=0;if(!wssURI)return!1;wssURI=(0,esm_uri.join)(wssURI,doc.value);const validWssURI=wssURI.replace(/^http:/,"ws:").replace(/^https:/,"wss:");var openWebsocket=function(){var socket;if("undefined"!=typeof WebSocket)socket=new WebSocket(validWssURI);else{if("undefined"==typeof window||!window.WebSocket)return;socket=window.WebSocket(validWssURI)}socket.onopen=function(){retryTimeout=1500,this.send("sub "+doc.value),retries&&updater.requestDownstreamAction(doc,theHandler)};var control=self.patchControlFor(doc);control.upstreamCount=0,socket.onerror=function onerror(err){},socket.onclose=function(event){retryTimeout*=2,retries+=1,setTimeout(function(){openWebsocket()},retryTimeout)},socket.onmessage=function(msg){if(msg.data&&"pub"===msg.data.slice(0,3)){if("upstreamCount"in control&&(control.upstreamCount-=1,control.upstreamCount>=0))return;control.upstreamCount=0,self.requestDownstreamAction(doc,theHandler)}}};return openWebsocket(),!0}updateMany(deletions){let insertions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const docs=deletions.concat(insertions).map(st=>st.why),thisUpdater=this,uniqueDocs=[];docs.forEach(doc=>{uniqueDocs.find(uniqueDoc=>uniqueDoc.equals(doc))||uniqueDocs.push(doc)});const updates=uniqueDocs.map(doc=>thisUpdater.update(deletions.filter(st=>st.why.equals(doc)),insertions.filter(st=>st.why.equals(doc))));return updates.length,Promise.all(updates)}constructSparqlUpdateQuery(ds,is,bnodes_context){var whereClause=this.contextWhere(bnodes_context),query="";if(whereClause.length){if(ds.length){query+="DELETE { ";for(let i=0;i<ds.length;i++)query+=this.anonymizeNT(ds[i])+"\n";query+=" }\n"}if(is.length){query+="INSERT { ";for(let i=0;i<is.length;i++)query+=this.anonymizeNT(is[i])+"\n";query+=" }\n"}query+=whereClause}else{if(ds.length){query+="DELETE DATA { ";for(let i=0;i<ds.length;i++)query+=this.anonymizeNT(ds[i])+"\n";query+=" } \n"}if(is.length){ds.length&&(query+=" ; "),query+="INSERT DATA { ";for(let i=0;i<is.length;i++)query+=this.nTriples(is[i])+"\n";query+=" }\n"}}return query}constructN3PatchQuery(ds,is,bnodes_context){var query="\n@prefix solid: <http://www.w3.org/ns/solid/terms#>.\n@prefix ex: <http://www.example.org/terms#>.\n\n_:patch\n";return bnodes_context&&bnodes_context.length>0&&(query+=`\n      solid:where {\n        ${bnodes_context.map(x=>this.anonymizeNT(x)).join("\n        ")}\n      };`),ds.length>0&&(query+=`\n      solid:deletes {\n        ${ds.map(x=>this.anonymizeNT(x)).join("\n        ")}\n      };`),is.length>0&&(query+=`\n      solid:inserts {\n        ${is.map(x=>this.anonymizeNT(x)).join("\n        ")}\n      };`),query+="   a solid:InsertDeletePatch .\n"}update(deletions,insertions,callback,secondTry){let options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!callback){var thisUpdater=this;return new Promise(function(resolve,reject){thisUpdater.update(deletions,insertions,function(uri,ok,errorBody){ok?resolve():reject(new Error(errorBody))},secondTry,options)})}try{var kb=this.store,ds=deletions?(0,terms.ok)(deletions)?deletions.statements:deletions instanceof Array?deletions:[deletions]:[],is=insertions?(0,terms.ok)(insertions)?insertions.statements:insertions instanceof Array?insertions:[insertions]:[];if(!(ds instanceof Array))throw new Error("Type Error "+typeof ds+": "+ds);if(!(is instanceof Array))throw new Error("Type Error "+typeof is+": "+is);if(0===ds.length&&0===is.length)return callback(null,!0);var doc=ds.length?ds[0].graph:is[0].graph;if(!doc){let message="Error patching: statement does not specify which document to patch:"+ds[0]+", "+is[0];throw new Error(message)}if("NamedNode"!==doc.termType){let message="Error patching: document not a NamedNode:"+ds[0]+", "+is[0];throw new Error(message)}var control=this.patchControlFor(doc),startTime=Date.now(),props=["subject","predicate","object","why"],clauses={delete:ds,insert:is};["insert","delete"].map(function(verb){clauses[verb].map(function(st){if(!doc.equals(st.graph))throw new Error("update: destination "+doc+" inconsistent with delete quad "+st.graph);props.map(function(prop){if(void 0===st[prop])throw new Error("update: undefined "+prop+" of statement.")})})});var protocol=this.editable(doc.value,kb);if(!1===protocol)throw new Error("Update: Can't make changes in uneditable "+doc);if(void 0===protocol){if(secondTry)throw new Error("Update: Loaded "+doc+"but still can't figure out what editing protocol it supports.");return void this.store.fetcher.load(doc).then(response=>{this.update(deletions,insertions,callback,!0,options)},err=>{if(404!==err.response.status)throw new Error(`Update: Can't get updatability status ${doc} before patching: ${err}`);this.update(deletions,insertions,callback,!0,options)})}if(protocol.indexOf("SPARQL")>=0||protocol.indexOf("N3PATCH")>=0){var isSparql=protocol.indexOf("SPARQL")>=0,bnodes=[];ds.length&&(bnodes=this.statementArrayBnodes(ds)),is.length&&(bnodes=bnodes.concat(this.statementArrayBnodes(is)));var context=this.bnodeContext(bnodes,doc),query=isSparql?this.constructSparqlUpdateQuery(ds,is,context):this.constructN3PatchQuery(ds,is,context);options.contentType=isSparql?"application/sparql-update":"text/n3",control.pendingUpstream=control.pendingUpstream?control.pendingUpstream+1:1,"upstreamCount"in control&&(control.upstreamCount+=1),this.fire(doc.value,query,(uri,success,body,response)=>{if(response.elapsedTimeMs=Date.now()-startTime,success){try{kb.remove(ds)}catch(e){success=!1,body="Remote Ok BUT error deleting "+ds.length+" from store!!! "+e}for(let i=0;i<is.length;i++)kb.add(is[i].subject,is[i].predicate,is[i].object,doc)}if(callback(uri,success,body,response),control.pendingUpstream-=1,0===control.pendingUpstream&&control.downstreamAction){var downstreamAction=control.downstreamAction;delete control.downstreamAction,downstreamAction(doc)}},options)}else if(protocol.indexOf("DAV")>=0)this.updateDav(doc,ds,is,callback,options);else{if(!(protocol.indexOf("LOCALFILE")>=0))throw new Error("Unhandled edit method: '"+protocol+"' for "+doc);try{this.updateLocalFile(doc,ds,is,callback,options)}catch(e){callback(doc.value,!1,"Exception trying to write back file <"+doc.value+">\n")}}}catch(e){callback(void 0,!1,"Exception in update: "+e+"\n"+utils_js.stackString(e))}}updateDav(doc,ds,is,callbackFunction){let options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},kb=this.store;var request=kb.any(doc,this.ns.link("request"));if(!request)throw new Error("No record of our HTTP GET request for document: "+doc);var response=kb.any(request,this.ns.link("response"));if(!response)return null;var contentType=kb.the(response,this.ns.httph("content-type")).value;let newSts=kb.statementsMatching(void 0,void 0,void 0,doc).slice();for(let i=0;i<ds.length;i++)utils_js.RDFArrayRemove(newSts,ds[i]);for(let i=0;i<is.length;i++)newSts.push(is[i]);const documentString=this.serialize(doc.value,newSts,contentType);var targetURI,candidateTarget=kb.the(response,this.ns.httph("content-location"));return candidateTarget&&(targetURI=(0,esm_uri.join)(candidateTarget.value,targetURI)),options.contentType=contentType,options.noMeta=!0,options.body=documentString,kb.fetcher.webOperation("PUT",targetURI,options).then(response=>{if(!response.ok)throw new Error(response.error);for(let i=0;i<ds.length;i++)kb.remove(ds[i]);for(let i=0;i<is.length;i++)kb.add(is[i].subject,is[i].predicate,is[i].object,doc);callbackFunction(doc.value,response.ok,response.responseText,response)}).catch(err=>{callbackFunction(doc.value,!1,err.message,err)})}updateLocalFile(doc,ds,is,callbackFunction){let options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const kb=this.store;let newSts=kb.statementsMatching(void 0,void 0,void 0,doc).slice();for(let i=0;i<ds.length;i++)utils_js.RDFArrayRemove(newSts,ds[i]);for(let i=0;i<is.length;i++)newSts.push(is[i]);var dot=doc.value.lastIndexOf(".");if(dot<1)throw new Error("Rewriting file: No filename extension: "+doc.value);var ext=doc.value.slice(dot+1);let contentType=Fetcher.CONTENT_TYPE_BY_EXT[ext];if(!contentType)throw new Error("File extension ."+ext+" not supported for data write");options.body=this.serialize(doc.value,newSts,contentType),options.contentType=contentType,kb.fetcher.webOperation("PUT",doc.value,options).then(response=>{if(!response.ok)return callbackFunction(doc.value,!1,response.error);for(let i=0;i<ds.length;i++)kb.remove(ds[i]);for(let i=0;i<is.length;i++)kb.add(is[i].subject,is[i].predicate,is[i].object,doc);callbackFunction(doc.value,!0,"")})}serialize(uri,data,contentType){const kb=this.store;let documentString;if("string"==typeof data)return data;var sz=createSerializer(kb);switch(sz.suggestNamespaces(kb.namespaces),sz.setBase(uri),contentType){case"text/xml":case"application/rdf+xml":documentString=sz.statementsToXML(data);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":documentString=sz.statementsToN3(data);break;default:throw new Error("Content-type "+contentType+" not supported for data serialization")}return documentString}put(doc,data,contentType,callback){const kb=this.store;let documentString;return Promise.resolve().then(()=>(documentString=this.serialize(doc.value,data,contentType),kb.fetcher.webOperation("PUT",doc.value,{contentType,body:documentString}))).then(response=>{if(!response.ok)return callback(doc.value,response.ok,response.error,response);delete kb.fetcher.nonexistent[doc.value],delete kb.fetcher.requested[doc.value],"string"!=typeof data&&data.map(st=>{kb.addStatement(st)}),callback(doc.value,response.ok,"",response)}).catch(err=>{callback(doc.value,!1,err.message)})}reload(kb,doc,callbackFunction){var startTime=Date.now();kb.fetcher.nowOrWhenFetched(doc.value,{force:!0,noMeta:!0,clearPreviousData:!0},function(ok,body,response){if(ok)if(response.onErrorWasCalled||200!==response.status)callbackFunction(!1,"Non-HTTP error reloading data: "+body,response);else{var elapsedTimeMs=Date.now()-startTime;doc.reloadTimeTotal||(doc.reloadTimeTotal=0),doc.reloadTimeCount||(doc.reloadTimeCount=0),doc.reloadTimeTotal+=elapsedTimeMs,doc.reloadTimeCount+=1,callbackFunction(!0)}else callbackFunction(!1,"Error reloading data: "+body,response)})}}const RDFlibDataFactory={...extended_term_factory,fetcher:(store,options)=>new Fetcher(store,options),graph(){return new IndexedFormula(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)||{rdfFactory:extended_term_factory})},lit(val,lang,dt){return this.literal(""+val,lang||dt)},st(subject,predicate,object,graph){return this.quad(subject,predicate,object,graph)}},rdflib_data_factory=RDFlibDataFactory;class UpdatesSocket{constructor(parent,via){this.parent=parent,this.via=via,this.connected=!1,this.pending={},this.subscribed={},this.socket={};try{this.socket=new WebSocket(via),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError}catch(error){this.onError(error)}}_decode(q){var elt,i,k,r,ref,ref1,v;for(i in r={},ref=function(){var j,len,ref,results;for(results=[],j=0,len=(ref=q.split("&")).length;j<len;j++)elt=ref[j],results.push(elt.split("="));return results}())elt=ref[i],v=(ref1=[decodeURIComponent(elt[0]),decodeURIComponent(elt[1])])[1],null==r[k=ref1[0]]&&(r[k]=[]),r[k].push(v);return r}_send(method,uri,data){var base,message;return message=[method,uri,data].join(" "),"function"==typeof(base=this.socket).send?base.send(message):void 0}_subscribe(uri){return this._send("sub",uri,""),this.subscribed[uri]=!0,this.subscribed[uri]}onClose(e){var uri;for(uri in this.connected=!1,this.subscribed)this.pending[uri]=!0;return this.subscribed={},this.subscribed}onError(e){throw new Error("onError"+e)}onMessage(e){var base,message;return"ping"===(message=e.data.split(" "))[0]?"function"==typeof(base=this.socket).send?base.send("pong "+message.slice(1).join(" ")):void 0:"pub"===message[0]?this.parent.onUpdate(message[1],this._decode(message[2])):void 0}onOpen(e){var results,uri;for(uri in this.connected=!0,results=[],this.pending)delete this.pending[uri],results.push(this._subscribe(uri));return results}subscribe(uri){return this.connected?this._subscribe(uri):(this.pending[uri]=!0,this.pending[uri])}}class UpdatesVia{constructor(fetcher){this.fetcher=fetcher,this.graph={},this.via={},this.fetcher.addCallback("headers",this.onHeaders)}onHeaders(d){var etag,uri,via;return null==d.headers||"undefined"==typeof WebSocket||null===WebSocket||(etag=d.headers.etag,via=d.headers["updates-via"],uri=d.uri,etag&&via&&(this.graph[uri]={etag,via},this.register(via,uri))),!0}onUpdate(uri,d){return this.fetcher.refresh(rdflib_data_factory.namedNode(uri))}register(via,uri){return null==this.via[via]&&(this.via[via]=new UpdatesSocket(this,via)),this.via[via].subscribe(uri)}}const boundDataFactory={};for(const name in rdflib_data_factory)"function"==typeof rdflib_data_factory[name]&&(boundDataFactory[name]=rdflib_data_factory[name].bind(rdflib_data_factory));const{fetcher,graph,lit,st,namedNode:esm_namedNode,variable:esm_variable,blankNode:esm_blankNode,defaultGraph:esm_defaultGraph,literal:esm_literal,quad:esm_quad,triple}=boundDataFactory,formula=new Formula,fromNT=str=>formula.fromNT(str),term=node.A.fromValue,NextId=blank_node.A.nextId;class ConnectedStore extends IndexedFormula{constructor(features){super(features),(0,defineProperty.A)(this,"fetcher",void 0),this.fetcher=new Fetcher(this,{})}}class LiveStore extends ConnectedStore{constructor(features){super(features),(0,defineProperty.A)(this,"updater",void 0),this.updater=new UpdateManager(this)}}},"./node_modules/rdflib/esm/literal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Literal});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),class_order=__webpack_require__("./node_modules/rdflib/esm/class-order.js"),named_node=__webpack_require__("./node_modules/rdflib/esm/named-node.js"),node_internal=__webpack_require__("./node_modules/rdflib/esm/node-internal.js"),types=__webpack_require__("./node_modules/rdflib/esm/types.js"),terms=__webpack_require__("./node_modules/rdflib/esm/utils/terms.js");const xsd_internal={boolean:new named_node.A("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new named_node.A("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new named_node.A("http://www.w3.org/2001/XMLSchema#decimal"),double:new named_node.A("http://www.w3.org/2001/XMLSchema#double"),integer:new named_node.A("http://www.w3.org/2001/XMLSchema#integer"),langString:new named_node.A("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new named_node.A("http://www.w3.org/2001/XMLSchema#string")};class Literal extends node_internal.A{constructor(value,language,datatype){super(value),(0,defineProperty.A)(this,"termType",types.QW),(0,defineProperty.A)(this,"classOrder",class_order.A.Literal),(0,defineProperty.A)(this,"datatype",xsd_internal.string),(0,defineProperty.A)(this,"isVar",0),(0,defineProperty.A)(this,"language",""),language?(this.language=language,this.datatype=xsd_internal.langString):this.datatype=datatype?named_node.A.fromValue(datatype):xsd_internal.string}copy(){return new Literal(this.value,this.lang,this.datatype)}equals(other){return!!other&&(this.termType===other.termType&&this.value===other.value&&this.language===other.language&&(!this.datatype&&!other.datatype||this.datatype&&this.datatype.equals(other.datatype)))}get lang(){return this.language}set lang(language){this.language=language||""}toNT(){return Literal.toNT(this)}static toNT(literal){if("number"==typeof literal.value)return""+literal.value;if("string"!=typeof literal.value)throw new Error("Value of RDF literal is not string or number: "+literal.value);var str=literal.value;return str='"'+(str=(str=(str=(str=str.replace(/\\/g,"\\\\")).replace(/\"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r"))+'"',literal.language?str+="@"+literal.language:literal.datatype.equals(xsd_internal.string)||(str+="^^"+literal.datatype.toCanonical()),str}toString(){return""+this.value}static fromBoolean(value){return new Literal(value?"1":"0",null,xsd_internal.boolean)}static fromDate(value){if(!(value instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");let d2=function(x){return(""+(100+x)).slice(1,3)},date=value.getUTCFullYear()+"-"+d2(value.getUTCMonth()+1)+"-"+d2(value.getUTCDate())+"T"+d2(value.getUTCHours())+":"+d2(value.getUTCMinutes())+":"+d2(value.getUTCSeconds())+"Z";return new Literal(date,null,xsd_internal.dateTime)}static fromNumber(value){if("number"!=typeof value)throw new TypeError("Invalid argument to Literal.fromNumber()");let datatype;const strValue=value.toString();return datatype=strValue.indexOf("e")<0&&Math.abs(value)<=Number.MAX_SAFE_INTEGER?Number.isInteger(value)?xsd_internal.integer:xsd_internal.decimal:xsd_internal.double,new Literal(strValue,null,datatype)}static fromValue(value){if((0,terms.c$)(value))return value;switch(typeof value){case"object":if(value instanceof Date)return Literal.fromDate(value);case"boolean":return Literal.fromBoolean(value);case"number":return Literal.fromNumber(value);case"string":return new Literal(value)}throw new Error("Can't make literal from "+value+" of type "+typeof value)}}},"./node_modules/rdflib/esm/log.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={debug(x){},warn(x){},info(x){},error(x){},success(x){},msg(x){}}},"./node_modules/rdflib/esm/named-node.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>NamedNode});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_class_order__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rdflib/esm/class-order.js"),_node_internal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rdflib/esm/node-internal.js"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rdflib/esm/types.js"),_utils_termValue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rdflib/esm/utils/termValue.js"),_utils_terms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rdflib/esm/utils/terms.js");class NamedNode extends _node_internal__WEBPACK_IMPORTED_MODULE_2__.A{constructor(iri){if(super((0,_utils_termValue__WEBPACK_IMPORTED_MODULE_4__.E)(iri)),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"termType",_types__WEBPACK_IMPORTED_MODULE_3__.Kk),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"classOrder",_class_order__WEBPACK_IMPORTED_MODULE_1__.A.NamedNode),!this.value)throw new Error("Missing IRI for NamedNode");if(!this.value.includes(":"))throw new Error('NamedNode IRI "'+iri+'" must be absolute.');if(this.value.includes(" "))throw new Error('Error: NamedNode IRI "'+iri+'" must not contain unencoded spaces.')}dir(){var str=this.value.split("#")[0],p=str.slice(0,-1).lastIndexOf("/"),q=str.indexOf("//");return q>=0&&p<q+2||p<0?null:new NamedNode(str.slice(0,p+1))}site(){var str=this.value.split("#")[0],p=str.indexOf("//");if(p<0)throw new Error("This URI does not have a web site part (origin)");var q=str.indexOf("/",p+2);return new NamedNode(q<0?str.slice(0)+"/":str.slice(0,q+1))}doc(){return this.value.indexOf("#")<0?this:new NamedNode(this.value.split("#")[0])}toString(){return"<"+this.value+">"}id(){return this.value.split("#")[1]}get uri(){return this.value}set uri(uri){this.value=uri}static fromValue(value){return null==value||(0,_utils_terms__WEBPACK_IMPORTED_MODULE_5__.D0)(value)?value:new NamedNode(value)}}},"./node_modules/rdflib/esm/namespace.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Namespace});var _named_node__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rdflib/esm/named-node.js");function Namespace(nsuri,factory){const dataFactory=factory||{namedNode:value=>new _named_node__WEBPACK_IMPORTED_MODULE_0__.A(value)};return function(ln){return dataFactory.namedNode(nsuri+(ln||""))}}},"./node_modules/rdflib/esm/node-internal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Node});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");class Node{constructor(value){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"termType",void 0),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"classOrder",void 0),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(this,"value",void 0),this.value=value}substitute(bindings){return this}compareTerm(other){return this.classOrder<other.classOrder?-1:this.classOrder>other.classOrder?1:this.value<other.value?-1:this.value>other.value?1:0}equals(other){return!!other&&(this.termType===other.termType&&this.value===other.value)}hashString(){return this.toCanonical()}sameTerm(other){return this.equals(other)}toCanonical(){return this.toNT()}toNT(){return this.toString()}toNQ(){return this.toNT()}toString(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(Node,"fromValue",void 0),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.A)(Node,"toJS",void 0)},"./node_modules/rdflib/esm/node.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _collection__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rdflib/esm/collection.js"),_node_internal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rdflib/esm/node-internal.js"),_namespace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rdflib/esm/namespace.js"),_utils_terms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rdflib/esm/utils/terms.js");_node_internal__WEBPACK_IMPORTED_MODULE_1__.A.fromValue=_collection__WEBPACK_IMPORTED_MODULE_0__.Y;const __WEBPACK_DEFAULT_EXPORT__=_node_internal__WEBPACK_IMPORTED_MODULE_1__.A,ns={xsd:(0,_namespace__WEBPACK_IMPORTED_MODULE_2__.A)("http://www.w3.org/2001/XMLSchema#")};_node_internal__WEBPACK_IMPORTED_MODULE_1__.A.toJS=function(term){return(0,_utils_terms__WEBPACK_IMPORTED_MODULE_3__.P3)(term)?term.elements.map(_node_internal__WEBPACK_IMPORTED_MODULE_1__.A.toJS):(0,_utils_terms__WEBPACK_IMPORTED_MODULE_3__.c$)(term)?term.datatype.equals(ns.xsd("boolean"))?"1"===term.value||"true"===term.value:term.datatype.equals(ns.xsd("dateTime"))||term.datatype.equals(ns.xsd("date"))?new Date(term.value):term.datatype.equals(ns.xsd("integer"))||term.datatype.equals(ns.xsd("float"))||term.datatype.equals(ns.xsd("decimal"))?Number(term.value):term.value:term}},"./node_modules/rdflib/esm/types.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$Q:()=>BlankNodeTermType,BR:()=>NQuadsAltContentType,Fn:()=>SPARQLUpdateSingleMatchContentType,H:()=>XHTMLContentType,JG:()=>RDFXMLContentType,K9:()=>SPARQLUpdateContentType,Kk:()=>NamedNodeTermType,MG:()=>N3LegacyContentType,P2:()=>VariableTermType,QW:()=>LiteralTermType,S:()=>EmptyTermType,_0:()=>NQuadsContentType,bD:()=>GraphTermType,bM:()=>NTriplesContentType,hu:()=>TurtleLegacyContentType,i2:()=>JSONLDContentType,ic:()=>DefaultGraphTermType,lc:()=>HTMLContentType,ny:()=>N3ContentType,r0:()=>CollectionTermType,sT:()=>TurtleContentType});const NamedNodeTermType="NamedNode",BlankNodeTermType="BlankNode",LiteralTermType="Literal",VariableTermType="Variable",DefaultGraphTermType="DefaultGraph",CollectionTermType="Collection",EmptyTermType="Empty",GraphTermType="Graph",HTMLContentType="text/html",JSONLDContentType="application/ld+json",N3ContentType="text/n3",N3LegacyContentType="application/n3",NQuadsAltContentType="application/nquads",NQuadsContentType="application/n-quads",NTriplesContentType="application/n-triples",RDFXMLContentType="application/rdf+xml",SPARQLUpdateContentType="application/sparql-update",SPARQLUpdateSingleMatchContentType="application/sparql-update-single-match",TurtleContentType="text/turtle",TurtleLegacyContentType="application/x-turtle",XHTMLContentType="application/xhtml+xml"},"./node_modules/rdflib/esm/uri.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{docpart:()=>docpart,document:()=>document,hostpart:()=>hostpart,join:()=>join,protocol:()=>protocol,refTo:()=>refTo});var _named_node__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rdflib/esm/named-node.js"),alert=alert||console.log;function docpart(uri){var i;return(i=uri.indexOf("#"))<0?uri:uri.slice(0,i)}function document(x){return new _named_node__WEBPACK_IMPORTED_MODULE_0__.A(docpart(x))}function hostpart(u){var m=/[^\/]*\/\/([^\/]*)\//.exec(u);return m?m[1]:""}function join(given,base){var baseColon,baseScheme,baseSingle,lastSlash,path,baseHash=base.indexOf("#");if(baseHash>0&&(base=base.slice(0,baseHash)),0===given.length)return base;if(0===given.indexOf("#"))return base+given;if(given.indexOf(":")>=0)return given;if(baseColon=base.indexOf(":"),0===base.length)return given;if(baseColon<0)return alert("Invalid base: "+base+" in join with given: "+given),given;if(baseScheme=base.slice(0,+baseColon+1||9e9),0===given.indexOf("//"))return baseScheme+given;if(base.indexOf("//",baseColon)===baseColon+1){if((baseSingle=base.indexOf("/",baseColon+3))<0)return base.length-baseColon-3>0?base+"/"+given:baseScheme+given}else if((baseSingle=base.indexOf("/",baseColon+1))<0)return base.length-baseColon-1>0?base+"/"+given:baseScheme+given;if(0===given.indexOf("/"))return base.slice(0,baseSingle)+given;if((lastSlash=(path=base.slice(baseSingle)).lastIndexOf("/"))<0)return baseScheme+given;for(lastSlash>=0&&lastSlash<path.length-1&&(path=path.slice(0,+lastSlash+1||9e9)),path+=given;path.match(/[^\/]*\/\.\.\//);)path=path.replace(/[^\/]*\/\.\.\//,"");return path=(path=path.replace(/\.\//g,"")).replace(/\/\.$/,"/"),base.slice(0,baseSingle)+path}function protocol(uri){const i=uri.indexOf(":");return i<0?null:uri.slice(0,i)}function refTo(base,uri){var i,k,l,len,len1,n,o,p,q,ref,ref1,s,commonHost=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!base)return uri;if(base===uri)return"";for(i=o=0,len=uri.length;o<len;i=++o){if(uri[i]!==base[i])break}if(base.slice(0,i).match(commonHost)&&((k=uri.indexOf("//"))<0&&(k=-2),l=uri.indexOf("/",k+2),"/"!==uri[l+1]&&"/"!==base[l+1]&&uri.slice(0,l)===base.slice(0,l)))return uri.slice(l);if("#"===uri[i]&&base.length===i)return uri.slice(i);for(;i>0&&"/"!==uri[i-1];)i--;if(i<3)return uri;if(base.indexOf("//",i-2)>0||uri.indexOf("//",i-2)>0)return uri;if(base.indexOf(":",i)>0)return uri;for(n=0,p=0,len1=(ref=base.slice(i)).length;p<len1;p++)"/"===ref[p]&&n++;if(0===n&&i<uri.length&&"#"===uri[i])return"./"+uri.slice(i);if(0===n&&i===uri.length)return"./";if(s="",n>0)for(q=1,ref1=n;ref1>=1?q<=ref1:q>=ref1;ref1>=1?++q:--q)s+="../";return s+uri.slice(i)}},"./node_modules/rdflib/esm/utils-js.js":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DOMParserFactory:()=>DOMParserFactory,RDFArrayRemove:()=>RDFArrayRemove,callbackify:()=>callbackify,domToString:()=>domToString,dtstamp:()=>dtstamp,dumpNode:()=>dumpNode,heavyCompare:()=>heavyCompare,heavyCompareSPO:()=>heavyCompareSPO,linkRelationProperty:()=>linkRelationProperty,log:()=>_log__WEBPACK_IMPORTED_MODULE_0__.A,mediaTypeClass:()=>mediaTypeClass,output:()=>output,parseXML:()=>parseXML,stackString:()=>stackString,string:()=>string,string_startswith:()=>string_startswith,uri:()=>_uri__WEBPACK_IMPORTED_MODULE_1__});var _log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rdflib/esm/log.js"),_uri__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rdflib/esm/uri.js"),_named_node__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rdflib/esm/named-node.js"),_xmldom_xmldom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@xmldom/xmldom/lib/index.js");module=__webpack_require__.hmd(module);const string={template:function stringTemplate(base,subs){for(var baseA=base.split("%s"),result="",i=0;i<subs.length;i++)subs[i]+="",result+=baseA[i]+subs[i];return result+baseA.slice(subs.length).join()}};function mediaTypeClass(mediaType){return mediaType=mediaType.split(";")[0].trim(),new _named_node__WEBPACK_IMPORTED_MODULE_2__.A("http://www.w3.org/ns/iana/media-types/"+mediaType+"#Resource")}function linkRelationProperty(relation){return new _named_node__WEBPACK_IMPORTED_MODULE_2__.A("http://www.w3.org/ns/iana/link-relations/relation#"+relation.trim())}function callbackify(obj,callbacks){obj.callbacks={};for(var x=callbacks.length-1;x>=0;x--)obj.callbacks[callbacks[x]]=[];obj.addHook=function(hook){obj.callbacks[hook]||(obj.callbacks[hook]=[])},obj.addCallback=function(hook,func){obj.callbacks[hook].push(func)},obj.removeCallback=function(hook,funcName){for(var i=0;i<obj.callbacks[hook].length;i++)if(obj.callbacks[hook][i].name===funcName)return obj.callbacks[hook].splice(i,1),!0;return!1},obj.insertCallback=function(hook,func){obj.callbacks[hook].unshift(func)},obj.fireCallbacks=function fireCallbacks(hook,args){var x,newCallbacks=[],replaceCallbacks=[],len=obj.callbacks[hook].length;let callback;for(x=len-1;x>=0;x--)callback=obj.callbacks[hook][x],callback&&callback.apply(obj,args)&&newCallbacks.push(callback);for(x=newCallbacks.length-1;x>=0;x--)replaceCallbacks.push(newCallbacks[x]);for(x=len;x<obj.callbacks[hook].length;x++)replaceCallbacks.push(obj.callbacks[hook][x]);obj.callbacks[hook]=replaceCallbacks}}function DOMParserFactory(){return window.DOMParser?new _xmldom_xmldom__WEBPACK_IMPORTED_MODULE_3__.DOMParser:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")}function domToString(node,options){var selfClosing=[];(options=options||{})&&options.selfClosing&&options.selfClosing.split(" ").forEach(function(n){selfClosing[n]=!0});var skipAttributes=[];return options&&options.skipAttributes&&options.skipAttributes.split(" ").forEach(function(n){skipAttributes[n]=!0}),dumpNode(node,options,selfClosing,skipAttributes)}function dumpNode(node,options,selfClosing,skipAttributes){var i,out="",noEsc=[!1];if(void 0===node.nodeType)return out;if(1===node.nodeType){if(node.hasAttribute("class")&&options&&options.classWithChildText&&node.matches(options.classWithChildText.class))out+=node.querySelector(options.classWithChildText.element).textContent;else if(!(options&&options.skipNodeWithClass&&node.matches("."+options.skipNodeWithClass))){var ename=node.nodeName.toLowerCase();out+="<"+ename;var attrList=[];for(i=node.attributes.length-1;i>=0;i--){var atn=node.attributes[i];if(!(skipAttributes&&skipAttributes.length>0&&skipAttributes[atn.name])&&!/^\d+$/.test(atn.name)){if("class"===atn.name&&options&&options.replaceClassItemWith&&atn.value.split(" ").indexOf(options.replaceClassItemWith.source)>-1){var re=new RegExp(options.replaceClassItemWith.source,"g");atn.value=atn.value.replace(re,options.replaceClassItemWith.target).trim()}"class"===atn.name&&options&&options.skipClassWithValue&&options.skipClassWithValue===atn.value||attrList.push(atn.name+"='"+atn.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(attrList.length>0&&(options&&options.sortAttributes&&attrList.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}),out+=" "+attrList.join(" ")),selfClosing&&selfClosing.ename)out+=" />";else{for(out+=">",out+="html"===ename?"\n  ":"",noEsc.push("style"===ename||"script"===ename),i=0;i<node.childNodes.length;i++)out+=dumpNode(node.childNodes[i]);noEsc.pop(),out+="body"===ename?"</"+ename+">\n":"</"+ename+">"}}}else if(8===node.nodeType)out+="\x3c!--"+node.nodeValue+"--\x3e";else if(3===node.nodeType||4===node.nodeType){var nl=node.nodeValue.replace(/\n+$/,"");out+=noEsc[noEsc.length-1]?nl:nl.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+node.nodeType),console.log(node);return out}function dtstamp(){var now=new Date,year=now.getYear()+1900,month=now.getMonth()+1,day=now.getDate(),hour=now.getUTCHours(),minute=now.getUTCMinutes(),second=now.getSeconds();return month<10&&(month="0"+month),day<10&&(day="0"+day),hour<10&&(hour="0"+hour),minute<10&&(minute="0"+minute),second<10&&(second="0"+second),year+"-"+month+"-"+day+"T"+hour+":"+minute+":"+second+"Z"}function heavyCompare(x,y,g,uriMap){var nonBlank=function(x){return"BlankNode"===x.termType?null:x},signature=function(x){var lis=g.statementsMatching(x).map(function(st){return nonBlank(st.subject)+" "+nonBlank(st.predicate)+" "+nonBlank(st.object)}).concat(g.statementsMatching(void 0,void 0,x).map(function(st){return nonBlank(st.subject)+" "+nonBlank(st.predicate)+" "+nonBlank(st.object)}));return lis.sort(),lis.join("\n")};const comparison=Object.prototype.hasOwnProperty.call(g,"compareTerms")?g.compareTerms(x,y):x.compareTerm(y);return"BlankNode"===x.termType&&"BlankNode"===y.termType?0===comparison?0:signature(x)>signature(y)?1:signature(x)<signature(y)?-1:comparison:uriMap&&x.uri&&y.uri?(uriMap[x.uri]||x.uri).localeCompare(uriMap[y.uri]||y.uri):comparison}function heavyCompareSPO(x,y,g,uriMap){return heavyCompare(x.subject,y.subject,g,uriMap)||heavyCompare(x.predicate,y.predicate,g,uriMap)||heavyCompare(x.object,y.object,g,uriMap)}function output(o){var k=document.createElement("div");k.textContent=o,document.body.appendChild(k)}function parseXML(str,options){return options=options||{},module&&module.exports?(new _xmldom_xmldom__WEBPACK_IMPORTED_MODULE_3__.DOMParser).parseFromString(str,options.contentType||"application/xhtml+xml"):("undefined"!=typeof window&&window.DOMParser?new window.DOMParser:new _xmldom_xmldom__WEBPACK_IMPORTED_MODULE_3__.DOMParser).parseFromString(str,"application/xml")}function RDFArrayRemove(a,x){for(var i=0;i<a.length;i++)if(a[i].subject.equals(x.subject)&&a[i].predicate.equals(x.predicate)&&a[i].object.equals(x.object)&&a[i].why.equals(x.why))return void a.splice(i,1);throw new Error("RDFArrayRemove: Array did not contain "+x+" "+x.why)}function string_startswith(str,pref){return str.slice(0,pref.length)===pref}function stackString(e){var str=e+"\n";if(!e.stack)return str+"No stack available.\n";for(var lines=e.stack.toString().split("\n"),toprint=[],i=0;i<lines.length;i++){var line=lines[i];if(line.indexOf("ecmaunit.js")>-1)break;"("==line.charAt(0)&&(line="function"+line);var chunks=line.split("@");toprint.push(chunks)}for(i=0;i<toprint.length;i++)str+="  "+toprint[i][1]+"\n    "+toprint[i][0];return str}},"./node_modules/rdflib/esm/utils/termValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function termValue(node){return"string"==typeof node?node:node.value}__webpack_require__.d(__webpack_exports__,{E:()=>termValue})},"./node_modules/rdflib/esm/utils/terms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CZ:()=>isRDFlibSubject,D0:()=>isTerm,DJ:()=>isRDFlibObject,DZ:()=>isVariable,GE:()=>isRDFObject,P3:()=>isCollection,RN:()=>isGraph,SH:()=>isStatement,Y2:()=>isNamedNode,YC:()=>isPredicate,aF:()=>isQuad,c$:()=>isLiteral,fY:()=>isRDFlibPredicate,hr:()=>isSubject,jt:()=>isBlankNode,ok:()=>isStore});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rdflib/esm/types.js");function isStatement(obj){return"object"==typeof obj&&null!==obj&&"subject"in obj}function isStore(obj){return"object"==typeof obj&&null!==obj&&"statements"in obj}function isCollection(obj){return isTerm(obj)&&obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.r0}function isRDFlibObject(obj){return obj&&Object.prototype.hasOwnProperty.call(obj,"termType")&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.$Q||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.r0||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.QW||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.bD)}function isRDFlibSubject(obj){return obj&&Object.prototype.hasOwnProperty.call(obj,"termType")&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.$Q||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.r0||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.QW||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.bD)}function isRDFlibPredicate(obj){return isTerm(obj)&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.$Q||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2)}function isVariable(obj){return isTerm(obj)&&obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2}function isTerm(obj){return"object"==typeof obj&&null!==obj&&"termType"in obj}function isLiteral(value){return value.termType===_types__WEBPACK_IMPORTED_MODULE_0__.QW}function isQuad(obj){return"object"==typeof obj&&null!==obj&&"subject"in obj&&"predicate"in obj&&"object"in obj}function isNamedNode(obj){return isTerm(obj)&&"NamedNode"===obj.termType}function isBlankNode(obj){return isTerm(obj)&&"termType"in obj&&"BlankNode"===obj.termType}function isSubject(obj){return isTerm(obj)&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.$Q)}function isPredicate(obj){return isTerm(obj)&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2)}function isRDFObject(obj){return isTerm(obj)&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.$Q||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.QW)}function isGraph(obj){return isTerm(obj)&&(obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.Kk||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.P2||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.$Q||obj.termType===_types__WEBPACK_IMPORTED_MODULE_0__.ic)}},"./node_modules/safe-regex-test/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var callBound=__webpack_require__("./node_modules/call-bound/index.js"),isRegex=__webpack_require__("./node_modules/is-regex/index.js"),$exec=callBound("RegExp.prototype.exec"),$TypeError=__webpack_require__("./node_modules/es-errors/type.js");module.exports=function regexTester(regex){if(!isRegex(regex))throw new $TypeError("`regex` must be a RegExp");return function test(s){return null!==$exec(regex,s)}}},"./node_modules/set-function-length/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("./node_modules/get-intrinsic/index.js"),define=__webpack_require__("./node_modules/define-data-property/index.js"),hasDescriptors=__webpack_require__("./node_modules/has-property-descriptors/index.js")(),gOPD=__webpack_require__("./node_modules/gopd/index.js"),$TypeError=__webpack_require__("./node_modules/es-errors/type.js"),$floor=GetIntrinsic("%Math.floor%");module.exports=function setFunctionLength(fn,length){if("function"!=typeof fn)throw new $TypeError("`fn` is not a function");if("number"!=typeof length||length<0||length>4294967295||$floor(length)!==length)throw new $TypeError("`length` must be a positive 32-bit integer");var loose=arguments.length>2&&!!arguments[2],functionLengthIsConfigurable=!0,functionLengthIsWritable=!0;if("length"in fn&&gOPD){var desc=gOPD(fn,"length");desc&&!desc.configurable&&(functionLengthIsConfigurable=!1),desc&&!desc.writable&&(functionLengthIsWritable=!1)}return(functionLengthIsConfigurable||functionLengthIsWritable||!loose)&&(hasDescriptors?define(fn,"length",length,!0,!0):define(fn,"length",length)),fn}},"./node_modules/solid-logic/dist/solid-logic.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ACL_LINK:()=>ACL_LINK,CrossOriginForbiddenError:()=>CrossOriginForbiddenError,FetchError:()=>FetchError,NotEditableError:()=>NotEditableError,NotFoundError:()=>NotFoundError,SameOriginForbiddenError:()=>SameOriginForbiddenError,UnauthorizedError:()=>UnauthorizedError,WebOperationError:()=>WebOperationError,appContext:()=>appContext,authSession:()=>src_authSession,authn:()=>authn,createTypeIndexLogic:()=>createTypeIndexLogic,getSuggestedIssuers:()=>getSuggestedIssuers,offlineTestID:()=>offlineTestID,solidLogicSingleton:()=>solidLogicSingleton,store:()=>store});var rdflib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rdflib/esm/index.js"),__webpack_modules__={7:module=>{var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,module.exports.once=function once(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver),reject(err)}function resolver(){"function"==typeof emitter.removeListener&&emitter.removeListener("error",errorListener),resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:!0}),"error"!==name&&function addErrorHandlerIfEventEmitter(emitter,handler,flags){"function"==typeof emitter.on&&eventTargetAgnosticAddListener(emitter,"error",handler,flags)}(emitter,errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}function _getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing;if(checkListener(listener),void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=_getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,function ProcessEmitWarning(warning){console&&console.warn&&console.warn(warning)}(w)}return target}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target,type,listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function unwrapListeners(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if("function"==typeof emitter.on)flags.once?emitter.once(name,listener):emitter.on(name,listener);else{if("function"!=typeof emitter.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter);emitter.addEventListener(name,function wrapListener(arg){flags.once&&emitter.removeEventListener(name,wrapListener),listener(arg)})}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function emit(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function once(type,listener){return checkListener(listener),this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){return checkListener(listener),this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(checkListener(listener),void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0===--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0===--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},386:module=>{const aliases={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};module.exports=function vocab(rdf={namedNode:u=>u}){const namespaces={};for(const alias in aliases){const expansion=aliases[alias];namespaces[alias]=function(localName=""){return rdf.namedNode(expansion+localName)}}return namespaces}},516:function(module){!function t(e,r){module.exports=r()}(0,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=22)}([function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i={debug:function t(){},info:function t(){},warn:function t(){},error:function t(){}},o=void 0,s=void 0;(e.Log=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.reset=function t(){s=3,o=i},t.debug=function t(){if(s>=4){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.debug.apply(o,Array.from(r))}},t.info=function t(){if(s>=3){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.info.apply(o,Array.from(r))}},t.warn=function t(){if(s>=2){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.warn.apply(o,Array.from(r))}},t.error=function t(){if(s>=1){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o.error.apply(o,Array.from(r))}},n(t,null,[{key:"NONE",get:function t(){return 0}},{key:"ERROR",get:function t(){return 1}},{key:"WARN",get:function t(){return 2}},{key:"INFO",get:function t(){return 3}},{key:"DEBUG",get:function t(){return 4}},{key:"level",get:function t(){return s},set:function t(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");s=e}},{key:"logger",get:function t(){return o},set:function t(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");o=e}}]),t}()).reset()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i={setInterval:function(t){function e(e,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){return setInterval(t,e)}),clearInterval:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return clearInterval(t)})},o=!1,s=null;e.Global=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t._testing=function t(){o=!0},t.setXMLHttpRequest=function t(e){s=e},n(t,null,[{key:"location",get:function t(){if(!o)return location}},{key:"localStorage",get:function t(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function t(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function t(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function t(){if(!o)return i}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataService=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(7);var a=".well-known/openid-configuration";e.MetadataService=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw i.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=e,this._jsonService=new r(["application/jwk-set+json"])}return t.prototype.resetSigningKeys=function t(){this._settings=this._settings||{},this._settings.signingKeys=void 0},t.prototype.getMetadata=function t(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(t){i.Log.debug("MetadataService.getMetadata: json received");var r=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},r,t),e._settings.metadata})):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},t.prototype.getIssuer=function t(){return this._getMetadataProperty("issuer")},t.prototype.getAuthorizationEndpoint=function t(){return this._getMetadataProperty("authorization_endpoint")},t.prototype.getUserInfoEndpoint=function t(){return this._getMetadataProperty("userinfo_endpoint")},t.prototype.getTokenEndpoint=function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},t.prototype.getCheckSessionIframe=function t(){return this._getMetadataProperty("check_session_iframe",!0)},t.prototype.getEndSessionEndpoint=function t(){return this._getMetadataProperty("end_session_endpoint",!0)},t.prototype.getRevocationEndpoint=function t(){return this._getMetadataProperty("revocation_endpoint",!0)},t.prototype.getKeysEndpoint=function t(){return this._getMetadataProperty("jwks_uri",!0)},t.prototype._getMetadataProperty=function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then(function(t){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===t[e]){if(!0===r)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return t[e]})},t.prototype.getSigningKeys=function t(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then(function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys})})},n(t,[{key:"metadataUrl",get:function t(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(a)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=a))),this._metadataUrl}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.UrlUtility=void 0;var n=r(0),i=r(1);e.UrlUtility=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.addQueryParam=function t(e,r,n){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(r),(e+="=")+encodeURIComponent(n)},t.parseUrlFragment=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=o.location.href);var s=e.lastIndexOf(r);s>=0&&(e=e.substr(s+1)),"?"===r&&(s=e.indexOf("#"))>=0&&(e=e.substr(0,s));for(var a,u={},c=/([^&=]+)=([^&]*)/g,h=0;a=c.exec(e);)if(u[decodeURIComponent(a[1])]=decodeURIComponent(a[2].replace(/\+/g," ")),h++>50)return n.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var l in u)return u;return{}},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.JoseUtil=void 0;var n=r(26),i=function o(t){return t&&t.__esModule?t:{default:t}}(r(33));e.JoseUtil=(0,i.default)({jws:n.jws,KeyUtil:n.KeyUtil,X509:n.X509,crypto:n.crypto,hextob64u:n.hextob64u,b64tohex:n.b64tohex,AllowedSigningAlgs:n.AllowedSigningAlgs})},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.OidcClientSettings=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),s=r(23),a=r(6),u=r(24),c=r(2);var l=".well-known/openid-configuration";e.OidcClientSettings=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.authority,i=e.metadataUrl,o=e.metadata,l=e.signingKeys,p=e.metadataSeed,v=e.client_id,y=e.client_secret,m=e.response_type,_=void 0===m?"id_token":m,S=e.scope,b=void 0===S?"openid":S,w=e.redirect_uri,F=e.post_logout_redirect_uri,E=e.client_authentication,x=void 0===E?"client_secret_post":E,A=e.prompt,k=e.display,P=e.max_age,C=e.ui_locales,T=e.acr_values,R=e.resource,I=e.response_mode,D=e.filterProtocolClaims,L=void 0===D||D,N=e.loadUserInfo,U=void 0===N||N,B=e.staleStateAge,O=void 0===B?900:B,j=e.clockSkew,M=void 0===j?300:j,H=e.clockService,V=void 0===H?new s.ClockService:H,K=e.userInfoJwtIssuer,q=void 0===K?"OP":K,J=e.mergeClaims,W=void 0!==J&&J,z=e.stateStore,Y=void 0===z?new a.WebStorageStateStore:z,G=e.ResponseValidatorCtor,X=void 0===G?u.ResponseValidator:G,$=e.MetadataServiceCtor,Q=void 0===$?c.MetadataService:$,Z=e.extraQueryParams,tt=void 0===Z?{}:Z,et=e.extraTokenParams,rt=void 0===et?{}:et;(function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._authority=r,this._metadataUrl=i,this._metadata=o,this._metadataSeed=p,this._signingKeys=l,this._client_id=v,this._client_secret=y,this._response_type=_,this._scope=b,this._redirect_uri=w,this._post_logout_redirect_uri=F,this._client_authentication=x,this._prompt=A,this._display=k,this._max_age=P,this._ui_locales=C,this._acr_values=T,this._resource=R,this._response_mode=I,this._filterProtocolClaims=!!L,this._loadUserInfo=!!U,this._staleStateAge=O,this._clockSkew=M,this._clockService=V,this._userInfoJwtIssuer=q,this._mergeClaims=!!W,this._stateStore=Y,this._validator=new X(this),this._metadataService=new Q(this),this._extraQueryParams="object"===(void 0===tt?"undefined":n(tt))?tt:{},this._extraTokenParams="object"===(void 0===rt?"undefined":n(rt))?rt:{}}return t.prototype.getEpochTime=function t(){return this._clockService.getEpochTime()},i(t,[{key:"client_id",get:function t(){return this._client_id},set:function t(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function t(){return this._client_secret}},{key:"response_type",get:function t(){return this._response_type}},{key:"scope",get:function t(){return this._scope}},{key:"redirect_uri",get:function t(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function t(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function t(){return this._client_authentication}},{key:"prompt",get:function t(){return this._prompt}},{key:"display",get:function t(){return this._display}},{key:"max_age",get:function t(){return this._max_age}},{key:"ui_locales",get:function t(){return this._ui_locales}},{key:"acr_values",get:function t(){return this._acr_values}},{key:"resource",get:function t(){return this._resource}},{key:"response_mode",get:function t(){return this._response_mode}},{key:"authority",get:function t(){return this._authority},set:function t(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function t(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(l)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=l)),this._metadataUrl}},{key:"metadata",get:function t(){return this._metadata},set:function t(e){this._metadata=e}},{key:"metadataSeed",get:function t(){return this._metadataSeed},set:function t(e){this._metadataSeed=e}},{key:"signingKeys",get:function t(){return this._signingKeys},set:function t(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function t(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function t(){return this._loadUserInfo}},{key:"staleStateAge",get:function t(){return this._staleStateAge}},{key:"clockSkew",get:function t(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function t(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function t(){return this._mergeClaims}},{key:"stateStore",get:function t(){return this._stateStore}},{key:"validator",get:function t(){return this._validator}},{key:"metadataService",get:function t(){return this._metadataService}},{key:"extraQueryParams",get:function t(){return this._extraQueryParams},set:function t(e){"object"===(void 0===e?"undefined":n(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function t(){return this._extraTokenParams},set:function t(e){"object"===(void 0===e?"undefined":n(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.WebStorageStateStore=void 0;var n=r(0),i=r(1);e.WebStorageStateStore=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.prefix,n=void 0===r?"oidc.":r,s=e.store,a=void 0===s?i.Global.localStorage:s;(function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._store=a,this._prefix=n}return t.prototype.set=function t(e,r){return n.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,r),Promise.resolve()},t.prototype.get=function t(e){n.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var r=this._store.getItem(e);return Promise.resolve(r)},t.prototype.remove=function t(e){n.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var r=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(r)},t.prototype.getAllKeys=function t(){n.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],r=0;r<this._store.length;r++){var i=this._store.key(r);0===i.indexOf(this._prefix)&&e.push(i.substr(this._prefix.length))}return Promise.resolve(e)},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.JsonService=void 0;var n=r(0),i=r(1);e.JsonService=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),e&&Array.isArray(e)?this._contentTypes=e.slice():this._contentTypes=[],this._contentTypes.push("application/json"),n&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=r,this._jwtHandler=n}return t.prototype.getJson=function t(e,r){var i=this;if(!e)throw n.Log.error("JsonService.getJson: No url passed"),new Error("url");return n.Log.debug("JsonService.getJson, url: ",e),new Promise(function(t,o){var s=new i._XMLHttpRequest;s.open("GET",e);var a=i._contentTypes,u=i._jwtHandler;s.onload=function(){if(n.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var r=s.getResponseHeader("Content-Type");if(r){var i=a.find(function(t){if(r.startsWith(t))return!0});if("application/jwt"==i)return void u(s).then(t,o);if(i)try{return void t(JSON.parse(s.responseText))}catch(t){return n.Log.error("JsonService.getJson: Error parsing JSON response",t.message),void o(t)}}o(Error("Invalid response Content-Type: "+r+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){n.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},r&&(n.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+r)),s.send()})},t.prototype.postForm=function t(e,r,i){var o=this;if(!e)throw n.Log.error("JsonService.postForm: No url passed"),new Error("url");return n.Log.debug("JsonService.postForm, url: ",e),new Promise(function(t,s){var a=new o._XMLHttpRequest;a.open("POST",e);var u=o._contentTypes;a.onload=function(){if(n.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(i=a.getResponseHeader("Content-Type"))&&u.find(function(t){if(i.startsWith(t))return!0}))try{var r=JSON.parse(a.responseText);if(r&&r.error)return n.Log.error("JsonService.postForm: Error from server: ",r.error),void s(new Error(r.error))}catch(t){return n.Log.error("JsonService.postForm: Error parsing JSON response",t.message),void s(t)}s(Error(a.statusText+" ("+a.status+")"))}else{var i;if((i=a.getResponseHeader("Content-Type"))&&u.find(function(t){if(i.startsWith(t))return!0}))try{return void t(JSON.parse(a.responseText))}catch(t){return n.Log.error("JsonService.postForm: Error parsing JSON response",t.message),void s(t)}s(Error("Invalid response Content-Type: "+i+", from URL: "+e))}},a.onerror=function(){n.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var c="";for(var h in r){var l=r[h];l&&(c.length>0&&(c+="&"),c+=encodeURIComponent(h),c+="=",c+=encodeURIComponent(l))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==i&&a.setRequestHeader("Authorization","Basic "+btoa(i)),a.send(c)})},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SigninRequest=void 0;var n=r(0),i=r(3),o=r(13);e.SigninRequest=function(){function t(e){var r=e.url,s=e.client_id,a=e.redirect_uri,u=e.response_type,c=e.scope,h=e.authority,l=e.data,f=e.prompt,g=e.display,d=e.max_age,p=e.ui_locales,v=e.id_token_hint,y=e.login_hint,m=e.acr_values,_=e.resource,S=e.response_mode,b=e.request,w=e.request_uri,F=e.extraQueryParams,E=e.request_type,x=e.client_secret,A=e.extraTokenParams,k=e.skipUserInfo;if(function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw n.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!s)throw n.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!a)throw n.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!u)throw n.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!c)throw n.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!h)throw n.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var C=t.isOidc(u),T=t.isCode(u);S||(S=t.isCode(u)?"query":null),this.state=new o.SigninState({nonce:C,data:l,client_id:s,authority:h,redirect_uri:a,code_verifier:T,request_type:E,response_mode:S,client_secret:x,scope:c,extraTokenParams:A,skipUserInfo:k}),r=i.UrlUtility.addQueryParam(r,"client_id",s),r=i.UrlUtility.addQueryParam(r,"redirect_uri",a),r=i.UrlUtility.addQueryParam(r,"response_type",u),r=i.UrlUtility.addQueryParam(r,"scope",c),r=i.UrlUtility.addQueryParam(r,"state",this.state.id),C&&(r=i.UrlUtility.addQueryParam(r,"nonce",this.state.nonce)),T&&(r=i.UrlUtility.addQueryParam(r,"code_challenge",this.state.code_challenge),r=i.UrlUtility.addQueryParam(r,"code_challenge_method","S256"));var R={prompt:f,display:g,max_age:d,ui_locales:p,id_token_hint:v,login_hint:y,acr_values:m,resource:_,request:b,request_uri:w,response_mode:S};for(var I in R)R[I]&&(r=i.UrlUtility.addQueryParam(r,I,R[I]));for(var D in F)r=i.UrlUtility.addQueryParam(r,D,F[D]);this.url=r}return t.isOidc=function t(e){return!!e.split(/\s+/g).filter(function(t){return"id_token"===t})[0]},t.isOAuth=function t(e){return!!e.split(/\s+/g).filter(function(t){return"token"===t})[0]},t.isCode=function t(e){return!!e.split(/\s+/g).filter(function(t){return"code"===t})[0]},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=function s(t){return t&&t.__esModule?t:{default:t}}(r(14));e.State=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,n=e.data,i=e.created,s=e.request_type;(function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._id=r||(0,o.default)(),this._data=n,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=s}return t.prototype.toStorageString=function t(){return i.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},t.fromStorageString=function e(r){return i.Log.debug("State.fromStorageString"),new t(JSON.parse(r))},t.clearStaleState=function e(r,n){var o=Date.now()/1e3-n;return r.getAllKeys().then(function(e){i.Log.debug("State.clearStaleState: got keys",e);for(var n=[],s=function s(a){var c=e[a];u=r.get(c).then(function(e){var n=!1;if(e)try{var s=t.fromStorageString(e);i.Log.debug("State.clearStaleState: got item from key: ",c,s.created),s.created<=o&&(n=!0)}catch(t){i.Log.error("State.clearStaleState: Error parsing state for key",c,t.message),n=!0}else i.Log.debug("State.clearStaleState: no item in storage for key: ",c),n=!0;if(n)return i.Log.debug("State.clearStaleState: removed item for key: ",c),r.remove(c)}),n.push(u)},a=0;a<e.length;a++){var u;s(a)}return i.Log.debug("State.clearStaleState: waiting on promise count:",n.length),Promise.all(n)})},n(t,[{key:"id",get:function t(){return this._id}},{key:"data",get:function t(){return this._data}},{key:"created",get:function t(){return this._created}},{key:"request_type",get:function t(){return this._request_type}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.OidcClient=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(5),s=r(12),a=r(8),u=r(34),c=r(35),h=r(36),l=r(13),f=r(9);e.OidcClient=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),e instanceof o.OidcClientSettings?this._settings=e:this._settings=new o.OidcClientSettings(e)}return t.prototype.createSigninRequest=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.response_type,o=r.scope,s=r.redirect_uri,u=r.data,c=r.state,h=r.prompt,l=r.display,f=r.max_age,g=r.ui_locales,d=r.id_token_hint,p=r.login_hint,v=r.acr_values,y=r.resource,m=r.request,_=r.request_uri,S=r.response_mode,b=r.extraQueryParams,w=r.extraTokenParams,F=r.request_type,E=r.skipUserInfo,x=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var A=this._settings.client_id;n=n||this._settings.response_type,o=o||this._settings.scope,s=s||this._settings.redirect_uri,h=h||this._settings.prompt,l=l||this._settings.display,f=f||this._settings.max_age,g=g||this._settings.ui_locales,v=v||this._settings.acr_values,y=y||this._settings.resource,S=S||this._settings.response_mode,b=b||this._settings.extraQueryParams,w=w||this._settings.extraTokenParams;var k=this._settings.authority;return a.SigninRequest.isCode(n)&&"code"!==n?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var r=new a.SigninRequest({url:t,client_id:A,redirect_uri:s,response_type:n,scope:o,data:u||c,authority:k,prompt:h,display:l,max_age:f,ui_locales:g,id_token_hint:d,login_hint:p,acr_values:v,resource:y,request:m,request_uri:_,extraQueryParams:b,extraTokenParams:w,request_type:F,response_mode:S,client_secret:e._settings.client_secret,skipUserInfo:E}),P=r.state;return(x=x||e._stateStore).set(P.id,P.toStorageString()).then(function(){return r})})},t.prototype.readSigninResponseState=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var s="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type)?"?":"#",c=new u.SigninResponse(e,s);return c.state?(r=r||this._stateStore,(n?r.remove.bind(r):r.get.bind(r))(c.state).then(function(t){if(!t)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:l.SigninState.fromStorageString(t),response:c}})):(i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},t.prototype.processSigninResponse=function t(e,r){var n=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,r,!0).then(function(t){var e=t.state,r=t.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),n._validator.validateSigninResponse(e,r)})},t.prototype.createSignoutRequest=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.id_token_hint,o=r.data,s=r.state,a=r.post_logout_redirect_uri,u=r.extraQueryParams,h=r.request_type,l=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),a=a||this._settings.post_logout_redirect_uri,u=u||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var r=new c.SignoutRequest({url:t,id_token_hint:n,post_logout_redirect_uri:a,data:o||s,extraQueryParams:u,request_type:h}),f=r.state;return f&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(l=l||e._stateStore).set(f.id,f.toStorageString())),r})},t.prototype.readSignoutResponseState=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var o=new h.SignoutResponse(e);if(!o.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),o.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",o.error),Promise.reject(new s.ErrorResponse(o))):Promise.resolve({state:void 0,response:o});var a=o.state;return r=r||this._stateStore,(n?r.remove.bind(r):r.get.bind(r))(a).then(function(t){if(!t)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:f.State.fromStorageString(t),response:o}})},t.prototype.processSignoutResponse=function t(e,r){var n=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,r,!0).then(function(t){var e=t.state,r=t.response;return e?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),n._validator.validateSignoutResponse(e,r)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),r)})},t.prototype.clearStaleState=function t(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,f.State.clearStaleState(e,this.settings.staleStateAge)},n(t,[{key:"_stateStore",get:function t(){return this.settings.stateStore}},{key:"_validator",get:function t(){return this.settings.validator}},{key:"_metadataService",get:function t(){return this.settings.metadataService}},{key:"settings",get:function t(){return this._settings}},{key:"metadataService",get:function t(){return this._metadataService}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenClient=void 0;var n=r(7),i=r(2),o=r(0);e.TokenClient=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw o.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=e,this._jsonService=new r,this._metadataService=new a(this._settings)}return t.prototype.exchangeCode=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(r=Object.assign({},r)).grant_type=r.grant_type||"authorization_code",r.client_id=r.client_id||this._settings.client_id,r.client_secret=r.client_secret||this._settings.client_secret,r.redirect_uri=r.redirect_uri||this._settings.redirect_uri;var n=void 0,i=r._client_authentication||this._settings._client_authentication;return delete r._client_authentication,r.code?r.redirect_uri?r.code_verifier?r.client_id?r.client_secret||"client_secret_basic"!=i?("client_secret_basic"==i&&(n=r.client_id+":"+r.client_secret,delete r.client_id,delete r.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(t){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(t,r,n).then(function(t){return o.Log.debug("TokenClient.exchangeCode: response received"),t})})):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},t.prototype.exchangeRefreshToken=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(r=Object.assign({},r)).grant_type=r.grant_type||"refresh_token",r.client_id=r.client_id||this._settings.client_id,r.client_secret=r.client_secret||this._settings.client_secret;var n=void 0,i=r._client_authentication||this._settings._client_authentication;return delete r._client_authentication,r.refresh_token?r.client_id?("client_secret_basic"==i&&(n=r.client_id+":"+r.client_secret,delete r.client_id,delete r.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(t){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(t,r,n).then(function(t){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),t})})):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorResponse=void 0;var n=r(0);e.ErrorResponse=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.error,a=r.error_description,u=r.error_uri,c=r.state,h=r.session_state;if(function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!s)throw n.Log.error("No error passed to ErrorResponse"),new Error("error");var l=function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a||s));return l.name="ErrorResponse",l.error=s,l.error_description=a,l.error_uri=u,l.state=c,l.session_state=h,l}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Error)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SigninState=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(9),s=r(4),a=function u(t){return t&&t.__esModule?t:{default:t}}(r(14));e.SigninState=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.nonce,i=r.authority,o=r.client_id,u=r.redirect_uri,l=r.code_verifier,f=r.response_mode,g=r.client_secret,d=r.scope,p=r.extraTokenParams,v=r.skipUserInfo;!function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var y=function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,arguments[0]));if(!0===n?y._nonce=(0,a.default)():n&&(y._nonce=n),!0===l?y._code_verifier=(0,a.default)()+(0,a.default)()+(0,a.default)():l&&(y._code_verifier=l),y.code_verifier){var m=s.JoseUtil.hashString(y.code_verifier,"SHA256");y._code_challenge=s.JoseUtil.hexToBase64Url(m)}return y._redirect_uri=u,y._authority=i,y._client_id=o,y._response_mode=f,y._client_secret=g,y._scope=d,y._extraTokenParams=p,y._skipUserInfo=v,y}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.toStorageString=function t(){return i.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},e.fromStorageString=function t(r){return i.Log.debug("SigninState.fromStorageString"),new e(JSON.parse(r))},n(e,[{key:"nonce",get:function t(){return this._nonce}},{key:"authority",get:function t(){return this._authority}},{key:"client_id",get:function t(){return this._client_id}},{key:"redirect_uri",get:function t(){return this._redirect_uri}},{key:"code_verifier",get:function t(){return this._code_verifier}},{key:"code_challenge",get:function t(){return this._code_challenge}},{key:"response_mode",get:function t(){return this._response_mode}},{key:"client_secret",get:function t(){return this._client_secret}},{key:"scope",get:function t(){return this._scope}},{key:"extraTokenParams",get:function t(){return this._extraTokenParams}},{key:"skipUserInfo",get:function t(){return this._skipUserInfo}}]),e}(o.State)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(){return("undefined"!=i&&null!==i&&void 0!==i.getRandomValues?o:s)().replace(/-/g,"")};var i="undefined"!=typeof window?window.crypto||window.msCrypto:null;function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^i.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^16*Math.random()>>t/4).toString(16)})}t.exports=e.default},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.User=function(){function t(e){var r=e.id_token,n=e.session_state,i=e.access_token,o=e.refresh_token,s=e.token_type,a=e.scope,u=e.profile,c=e.expires_at,h=e.state;!function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id_token=r,this.session_state=n,this.access_token=i,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=u,this.expires_at=c,this.state=h}return t.prototype.toStorageString=function t(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},t.fromStorageString=function e(r){return i.Log.debug("User.fromStorageString"),new t(JSON.parse(r))},n(t,[{key:"expires_in",get:function t(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function t(e){var r=parseInt(e);if("number"==typeof r&&r>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+r}}},{key:"expired",get:function t(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function t(){return(this.scope||"").split(" ")}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AccessTokenEvents=void 0;var n=r(0),i=r(46);e.AccessTokenEvents=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.accessTokenExpiringNotificationTime,n=void 0===r?60:r,s=e.accessTokenExpiringTimer,a=void 0===s?new i.Timer("Access token expiring"):s,u=e.accessTokenExpiredTimer,c=void 0===u?new i.Timer("Access token expired"):u;(function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._accessTokenExpiringNotificationTime=n,this._accessTokenExpiring=a,this._accessTokenExpired=c}return t.prototype.load=function t(e){if(e.access_token&&void 0!==e.expires_in){var r=e.expires_in;if(n.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",r),r>0){var i=r-this._accessTokenExpiringNotificationTime;i<=0&&(i=1),n.Log.debug("AccessTokenEvents.load: registering expiring timer in:",i),this._accessTokenExpiring.init(i)}else n.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var o=r+1;n.Log.debug("AccessTokenEvents.load: registering expired timer in:",o),this._accessTokenExpired.init(o)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},t.prototype.unload=function t(){n.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},t.prototype.addAccessTokenExpiring=function t(e){this._accessTokenExpiring.addHandler(e)},t.prototype.removeAccessTokenExpiring=function t(e){this._accessTokenExpiring.removeHandler(e)},t.prototype.addAccessTokenExpired=function t(e){this._accessTokenExpired.addHandler(e)},t.prototype.removeAccessTokenExpired=function t(e){this._accessTokenExpired.removeHandler(e)},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var n=r(0);e.Event=function(){function t(e){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._callbacks=[]}return t.prototype.addHandler=function t(e){this._callbacks.push(e)},t.prototype.removeHandler=function t(e){var r=this._callbacks.findIndex(function(t){return t===e});r>=0&&this._callbacks.splice(r,1)},t.prototype.raise=function t(){n.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var r;(r=this._callbacks)[e].apply(r,arguments)}},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SessionMonitor=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(19),s=r(1);e.SessionMonitor=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=e,this._CheckSessionIFrameCtor=n,this._timer=u,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(t){t?r._start(t):r._settings.monitorAnonymousSession&&r._userManager.querySessionStatus().then(function(t){var e={session_state:t.session_state};t.sub&&t.sid&&(e.profile={sub:t.sub,sid:t.sid}),r._start(e)}).catch(function(t){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",t.message)})}).catch(function(t){i.Log.error("SessionMonitor ctor: error from getUser:",t.message)}))}return t.prototype._start=function t(e){var r=this,n=e.session_state;n&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",n,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",n,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(n):this._metadataService.getCheckSessionIframe().then(function(t){if(t){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var e=r._client_id,o=r._checkSessionInterval,s=r._stopCheckSessionOnError;r._checkSessionIFrame=new r._CheckSessionIFrameCtor(r._callback.bind(r),e,t,o,s),r._checkSessionIFrame.load().then(function(){r._checkSessionIFrame.start(n)})}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(t){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",t.message)}))},t.prototype._stop=function t(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var r=this._timer.setInterval(function(){e._timer.clearInterval(r),e._userManager.querySessionStatus().then(function(t){var r={session_state:t.session_state};t.sub&&t.sid&&(r.profile={sub:t.sub,sid:t.sid}),e._start(r)}).catch(function(t){i.Log.error("SessionMonitor: error from querySessionStatus:",t.message)})},1e3)},t.prototype._callback=function t(){var e=this;this._userManager.querySessionStatus().then(function(t){var r=!0;t?t.sub===e._sub?(r=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),r&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))}).catch(function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())})},n(t,[{key:"_settings",get:function t(){return this._userManager.settings}},{key:"_metadataService",get:function t(){return this._userManager.metadataService}},{key:"_client_id",get:function t(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function t(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function t(){return this._settings.stopCheckSessionOnError}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CheckSessionIFrame=void 0;var n=r(0);e.CheckSessionIFrame=function(){function t(e,r,n,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._callback=e,this._client_id=r,this._url=n,this._interval=o||2e3,this._stopOnError=s;var a=n.indexOf("/",n.indexOf("//")+2);this._frame_origin=n.substr(0,a),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=n}return t.prototype.load=function t(){var e=this;return new Promise(function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)})},t.prototype._message=function t(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(n.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(n.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):n.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},t.prototype.start=function t(e){var r=this;if(this._session_state!==e){n.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var i=function t(){r._frame.contentWindow.postMessage(r._client_id+" "+r._session_state,r._frame_origin)};i(),this._timer=window.setInterval(i,this._interval)}},t.prototype.stop=function t(){this._session_state=null,this._timer&&(n.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenRevocationClient=void 0;var n=r(0),i=r(2),o=r(1);e.TokenRevocationClient=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw n.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=e,this._XMLHttpRequestCtor=r,this._metadataService=new a(this._settings)}return t.prototype.revoke=function t(e,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw n.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if("access_token"!==o&&"refresh_token"!=o)throw n.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(t){if(t){n.Log.debug("TokenRevocationClient.revoke: Revoking "+o);var s=i._settings.client_id,a=i._settings.client_secret;return i._revoke(t,s,a,e,o)}if(r)throw n.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},t.prototype._revoke=function t(e,r,i,o,s){var a=this;return new Promise(function(t,u){var c=new a._XMLHttpRequestCtor;c.open("POST",e),c.onload=function(){n.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",c.status),200===c.status?t():u(Error(c.statusText+" ("+c.status+")"))},c.onerror=function(){n.Log.debug("TokenRevocationClient.revoke: Network Error."),u("Network Error")};var h="client_id="+encodeURIComponent(r);i&&(h+="&client_secret="+encodeURIComponent(i)),h+="&token_type_hint="+encodeURIComponent(s),h+="&token="+encodeURIComponent(o),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(h)})},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CordovaPopupWindow=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.CordovaPopupWindow=function(){function t(e){var r=this;!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e}),this.features=e.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=e.popupWindowTarget||"_blank",this.redirect_uri=e.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return t.prototype._isInAppBrowserInstalled=function t(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(t){return e.hasOwnProperty(t)})},t.prototype.navigate=function t(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var r=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(r))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},t.prototype._loadStartCallback=function t(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},t.prototype._exitCallback=function t(e){this._error(e)},t.prototype._success=function t(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},t.prototype._error=function t(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},t.prototype.close=function t(){this._cleanup()},t.prototype._cleanup=function t(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},n(t,[{key:"promise",get:function t(){return this._promise}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(10),o=r(5),s=r(6),a=r(37),u=r(38),c=r(16),h=r(2),l=r(48),f=r(49),g=r(19),d=r(20),p=r(18),v=r(1),y=r(15),m=r(50);e.default={Version:m.Version,Log:n.Log,OidcClient:i.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:u.UserManager,AccessTokenEvents:c.AccessTokenEvents,MetadataService:h.MetadataService,CordovaPopupNavigator:l.CordovaPopupNavigator,CordovaIFrameNavigator:f.CordovaIFrameNavigator,CheckSessionIFrame:g.CheckSessionIFrame,TokenRevocationClient:d.TokenRevocationClient,SessionMonitor:p.SessionMonitor,Global:v.Global,User:y.User},t.exports=e.default},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ClockService=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.getEpochTime=function t(){return Promise.resolve(Date.now()/1e3|0)},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ResponseValidator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(0),o=r(2),s=r(25),a=r(11),u=r(12),c=r(4);var l=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];e.ResponseValidator=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.JoseUtil,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=e,this._metadataService=new r(this._settings),this._userInfoService=new n(this._settings),this._joseUtil=u,this._tokenClient=new l(this._settings)}return t.prototype.validateSigninResponse=function t(e,r){var n=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,r).then(function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),n._validateTokens(e,t).then(function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),n._processClaims(e,t).then(function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),t})})})},t.prototype.validateSignoutResponse=function t(e,r){return e.id!==r.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),r.state=e.data,r.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",r.error),Promise.reject(new u.ErrorResponse(r))):Promise.resolve(r))},t.prototype._processSigninParams=function t(e,r){if(e.id!==r.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),r.state=e.data,r.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",r.error),Promise.reject(new u.ErrorResponse(r))):e.nonce&&!r.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&r.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!r.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&r.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(r.scope||(r.scope=e.scope),Promise.resolve(r))},t.prototype._processClaims=function t(e,r){var n=this;if(r.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),r.profile=this._filterProtocolClaims(r.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&r.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(r.access_token).then(function(t){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),t.sub!==r.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(r.profile=n._mergeClaims(r.profile,t),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",r.profile),r)});i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(r)},t.prototype._mergeClaims=function t(e,r){var i=Object.assign({},e);for(var o in r){var s=r[o];Array.isArray(s)||(s=[s]);for(var a=0;a<s.length;a++){var u=s[a];i[o]?Array.isArray(i[o])?i[o].indexOf(u)<0&&i[o].push(u):i[o]!==u&&("object"===(void 0===u?"undefined":n(u))&&this._settings.mergeClaims?i[o]=this._mergeClaims(i[o],u):i[o]=[i[o],u]):i[o]=u}}return i},t.prototype._filterProtocolClaims=function t(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var r=Object.assign({},e);return this._settings._filterProtocolClaims?(l.forEach(function(t){delete r[t]}),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",r)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),r},t.prototype._validateTokens=function t(e,r){return r.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,r)):r.id_token?r.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,r)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,r)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(r))},t.prototype._processCode=function t(e,r){var o=this,s={client_id:e.client_id,client_secret:e.client_secret,code:r.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===n(e.extraTokenParams)&&Object.assign(s,e.extraTokenParams),this._tokenClient.exchangeCode(s).then(function(t){for(var n in t)r[n]=t[n];return r.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),o._validateIdTokenAttributes(e,r)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),r)})},t.prototype._validateIdTokenAttributes=function t(e,r){var n=this;return this._metadataService.getIssuer().then(function(t){var o=e.client_id,s=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),n._settings.getEpochTime().then(function(a){return n._joseUtil.validateJwtAttributes(r.id_token,t,o,s,a).then(function(t){return e.nonce&&e.nonce!==t.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):t.sub?(r.profile=t,r):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},t.prototype._validateIdTokenAndAccessToken=function t(e,r){var n=this;return this._validateIdToken(e,r).then(function(t){return n._validateAccessToken(t)})},t.prototype._getSigningKeyForJwt=function t(e){var r=this;return this._metadataService.getSigningKeys().then(function(t){var n=e.header.kid;if(!t)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(n)o=t.filter(function(t){return t.kid===n})[0];else{if((t=r._filterByAlg(t,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=t[0]}return Promise.resolve(o)})},t.prototype._getSigningKeyForJwtWithSingleRetry=function t(e){var r=this;return this._getSigningKeyForJwt(e).then(function(t){return t?Promise.resolve(t):(r._metadataService.resetSigningKeys(),r._getSigningKeyForJwt(e))})},t.prototype._validateIdToken=function t(e,r){var n=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var o=this._joseUtil.parseJwt(r.id_token);return o&&o.header&&o.payload?e.nonce!==o.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(t){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),n._getSigningKeyForJwtWithSingleRetry(o).then(function(s){if(!s)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var a=e.client_id,u=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",u),n._joseUtil.validateJwt(r.id_token,s,t,a,u).then(function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),o.payload.sub?(r.profile=o.payload,r):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",o),Promise.reject(new Error("Failed to parse id_token")))},t.prototype._filterByAlg=function t(e,r){var n=null;if(r.startsWith("RS"))n="RSA";else if(r.startsWith("PS"))n="PS";else{if(!r.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",r),[];n="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",n),e=e.filter(function(t){return t.kty===n}),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",n,e.length),e},t.prototype._validateAccessToken=function t(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var r=this._joseUtil.parseJwt(e.id_token);if(!r||!r.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",r),Promise.reject(new Error("Failed to parse id_token"));var n=r.header.alg;if(!n||5!==n.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n),Promise.reject(new Error("Unsupported alg: "+n));var o=n.substr(2,3);if(!o)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,o),Promise.reject(new Error("Unsupported alg: "+n));if(256!==(o=parseInt(o))&&384!==o&&512!==o)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,o),Promise.reject(new Error("Unsupported alg: "+n));var s="sha"+o,a=this._joseUtil.hashString(e.access_token,s);if(!a)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",s),Promise.reject(new Error("Failed to validate at_hash"));var u=a.substr(0,a.length/2),c=this._joseUtil.hexToBase64Url(u);return c!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",c,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.UserInfoService=void 0;var n=r(7),i=r(2),o=r(0),s=r(4);e.UserInfoService=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw o.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=e,this._jsonService=new r(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new u(this._settings),this._joseUtil=c}return t.prototype.getClaims=function t(e){var r=this;return e?this._metadataService.getUserInfoEndpoint().then(function(t){return o.Log.debug("UserInfoService.getClaims: received userinfo url",t),r._jsonService.getJson(t,e).then(function(t){return o.Log.debug("UserInfoService.getClaims: claims received",t),t})}):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},t.prototype._getClaimsFromJwt=function t(e){var r=this;try{var n=this._joseUtil.parseJwt(e.responseText);if(!n||!n.header||!n.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",n),Promise.reject(new Error("Failed to parse id_token"));var i=n.header.kid,s=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":s=this._metadataService.getIssuer();break;case"ANY":s=Promise.resolve(n.payload.iss);break;default:s=Promise.resolve(this._settings.userInfoJwtIssuer)}return s.then(function(t){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+t),r._metadataService.getSigningKeys().then(function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(i)a=s.filter(function(t){return t.kid===i})[0];else{if((s=r._filterByAlg(s,n.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var u=r._settings.client_id,c=r._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",c),r._joseUtil.validateJwt(e.responseText,a,t,u,c,void 0,!0).then(function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),n.payload})})})}catch(t){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",t.message),void reject(t)}},t.prototype._filterByAlg=function t(e,r){var n=null;if(r.startsWith("RS"))n="RSA";else if(r.startsWith("PS"))n="PS";else{if(!r.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",r),[];n="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",n),e=e.filter(function(t){return t.kty===n}),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",n,e.length),e},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AllowedSigningAlgs=e.b64tohex=e.hextob64u=e.crypto=e.X509=e.KeyUtil=e.jws=void 0;var n=r(27);e.jws=n.jws,e.KeyUtil=n.KEYUTIL,e.X509=n.X509,e.crypto=n.crypto,e.hextob64u=n.hextob64u,e.b64tohex=n.b64tohex,e.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(t,e,r){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,n,i,o,s,a,u,c,h,l,f,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d={userAgent:!1},p={},v=v||(r=Math,i=(n={}).lib={},o=i.Base=function(){function t(){}return{extend:function e(r){t.prototype=this;var n=new t;return r&&n.mixIn(r),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function t(){var e=this.extend();return e.init.apply(e,arguments),e},init:function t(){},mixIn:function t(e){for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function t(){return this.init.prototype.extend(this)}}}(),s=i.WordArray=o.extend({init:function t(e,r){e=this.words=e||[],this.sigBytes=null!=r?r:4*e.length},toString:function t(e){return(e||u).stringify(this)},concat:function t(e){var r=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var s=0;s<o;s++){var a=n[s>>>2]>>>24-s%4*8&255;r[i+s>>>2]|=a<<24-(i+s)%4*8}else for(s=0;s<o;s+=4)r[i+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function t(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=r.ceil(n/4)},clone:function t(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function t(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*r.random()|0);return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function t(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function t(e){for(var r=e.length,n=[],i=0;i<r;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,r/2)}},c=a.Latin1={stringify:function t(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function t(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,r)}},h=a.Utf8={stringify:function t(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function t(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function t(){this._data=new s.init,this._nDataBytes=0},_append:function t(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function t(e){var n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,u=o/(4*a),c=(u=e?r.ceil(u):r.max((0|u)-this._minBufferSize,0))*a,h=r.min(4*c,o);if(c){for(var l=0;l<c;l+=a)this._doProcessBlock(i,l);var f=i.splice(0,c);n.sigBytes-=h}return new s.init(f,h)},clone:function t(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),i.Hasher=l.extend({cfg:o.extend(),init:function t(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function t(){l.reset.call(this),this._doReset()},update:function t(e){return this._append(e),this._process(),this},finalize:function t(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function t(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function t(e){return function(t,r){return new f.HMAC.init(e,r).finalize(t)}}}),f=n.algo={},n);!function(){var e,r=(e=v).lib,n=r.Base,i=r.WordArray;(e=e.x64={}).Word=n.extend({init:function t(e,r){this.high=e,this.low=r}}),e.WordArray=n.extend({init:function t(e,r){e=this.words=e||[],this.sigBytes=null!=r?r:8*e.length},toX32:function t(){for(var e=this.words,r=e.length,n=[],o=0;o<r;o++){var s=e[o];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function t(){for(var e=n.clone.call(this),r=e.words=this.words.slice(0),i=r.length,o=0;o<i;o++)r[o]=r[o].clone();return e}})}(),function(){var t=v,e=t.lib.WordArray;t.enc.Base64={stringify:function t(e){var r=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var o=0;o<n;o+=3)for(var s=(r[o>>>2]>>>24-o%4*8&255)<<16|(r[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|r[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;4>a&&o+.75*a<n;a++)e.push(i.charAt(s>>>6*(3-a)&63));if(r=i.charAt(64))for(;e.length%4;)e.push(r);return e.join("")},parse:function t(r){var n=r.length,i=this._map;(o=i.charAt(64))&&-1!=(o=r.indexOf(o))&&(n=o);for(var o=[],s=0,a=0;a<n;a++)if(a%4){var u=i.indexOf(r.charAt(a-1))<<a%4*2,c=i.indexOf(r.charAt(a))>>>6-a%4*2;o[s>>>2]|=(u|c)<<24-s%4*8,s++}return e.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){for(var e=v,r=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,o=[],s=[],a=function t(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var h;t:{h=u;for(var l=t.sqrt(h),f=2;f<=l;f++)if(!(h%f)){h=!1;break t}h=!0}h&&(8>c&&(o[c]=a(t.pow(u,.5))),s[c]=a(t.pow(u,1/3)),c++),u++}var g=[];i=i.SHA256=n.extend({_doReset:function t(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function t(e,r){for(var n=this._hash.words,i=n[0],o=n[1],a=n[2],u=n[3],c=n[4],h=n[5],l=n[6],f=n[7],d=0;64>d;d++){if(16>d)g[d]=0|e[r+d];else{var p=g[d-15],v=g[d-2];g[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+g[d-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+g[d-16]}p=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&h^~c&l)+s[d]+g[d],v=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&o^i&a^o&a),f=l,l=h,h=c,c=u+p|0,u=a,a=o,o=i,i=p+v|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+u|0,n[4]=n[4]+c|0,n[5]=n[5]+h|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function e(){var r=this._data,n=r.words,i=8*this._nDataBytes,o=8*r.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(i/4294967296),n[15+(o+64>>>9<<4)]=i,r.sigBytes=4*n.length,this._process(),this._hash},clone:function t(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA256=n._createHelper(i),e.HmacSHA256=n._createHmacHelper(i)}(Math),function(){function t(){return n.create.apply(n,arguments)}for(var e=v,r=e.lib.Hasher,n=(o=e.x64).Word,i=o.WordArray,o=e.algo,s=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();o=o.SHA512=r.extend({_doReset:function t(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function t(e,r){for(var n=(f=this._hash.words)[0],i=f[1],o=f[2],u=f[3],c=f[4],h=f[5],l=f[6],f=f[7],g=n.high,d=n.low,p=i.high,v=i.low,y=o.high,m=o.low,_=u.high,S=u.low,b=c.high,w=c.low,F=h.high,E=h.low,x=l.high,A=l.low,k=f.high,P=f.low,C=g,T=d,R=p,I=v,D=y,L=m,N=_,U=S,B=b,O=w,j=F,M=E,H=x,V=A,K=k,q=P,J=0;80>J;J++){var W=a[J];if(16>J)var z=W.high=0|e[r+2*J],Y=W.low=0|e[r+2*J+1];else{z=((Y=(z=a[J-15]).high)>>>1|(G=z.low)<<31)^(Y>>>8|G<<24)^Y>>>7;var G=(G>>>1|Y<<31)^(G>>>8|Y<<24)^(G>>>7|Y<<25),X=((Y=(X=a[J-2]).high)>>>19|($=X.low)<<13)^(Y<<3|$>>>29)^Y>>>6,$=($>>>19|Y<<13)^($<<3|Y>>>29)^($>>>6|Y<<26),Q=(Y=a[J-7]).high,Z=(tt=a[J-16]).high,tt=tt.low;z=(z=(z=z+Q+((Y=G+Y.low)>>>0<G>>>0?1:0))+X+((Y+=$)>>>0<$>>>0?1:0))+Z+((Y+=tt)>>>0<tt>>>0?1:0),W.high=z,W.low=Y}Q=B&j^~B&H,tt=O&M^~O&V,W=C&R^C&D^R&D;var et=T&I^T&L^I&L,rt=(G=(C>>>28|T<<4)^(C<<30|T>>>2)^(C<<25|T>>>7),X=(T>>>28|C<<4)^(T<<30|C>>>2)^(T<<25|C>>>7),($=s[J]).high),nt=$.low;Z=K+((B>>>14|O<<18)^(B>>>18|O<<14)^(B<<23|O>>>9))+(($=q+((O>>>14|B<<18)^(O>>>18|B<<14)^(O<<23|B>>>9)))>>>0<q>>>0?1:0),K=H,q=V,H=j,V=M,j=B,M=O,B=N+(Z=(Z=(Z=Z+Q+(($+=tt)>>>0<tt>>>0?1:0))+rt+(($+=nt)>>>0<nt>>>0?1:0))+z+(($+=Y)>>>0<Y>>>0?1:0))+((O=U+$|0)>>>0<U>>>0?1:0)|0,N=D,U=L,D=R,L=I,R=C,I=T,C=Z+(W=G+W+((Y=X+et)>>>0<X>>>0?1:0))+((T=$+Y|0)>>>0<$>>>0?1:0)|0}d=n.low=d+T,n.high=g+C+(d>>>0<T>>>0?1:0),v=i.low=v+I,i.high=p+R+(v>>>0<I>>>0?1:0),m=o.low=m+L,o.high=y+D+(m>>>0<L>>>0?1:0),S=u.low=S+U,u.high=_+N+(S>>>0<U>>>0?1:0),w=c.low=w+O,c.high=b+B+(w>>>0<O>>>0?1:0),E=h.low=E+M,h.high=F+j+(E>>>0<M>>>0?1:0),A=l.low=A+V,l.high=x+H+(A>>>0<V>>>0?1:0),P=f.low=P+q,f.high=k+K+(P>>>0<q>>>0?1:0)},_doFinalize:function t(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),r[31+(i+128>>>10<<5)]=n,e.sigBytes=4*r.length,this._process(),this._hash.toX32()},clone:function t(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),e.SHA512=r._createHelper(o),e.HmacSHA512=r._createHmacHelper(o)}(),function(){var t=v,e=(i=t.x64).Word,r=i.WordArray,n=(i=t.algo).SHA512,i=i.SHA384=n.extend({_doReset:function t(){this._hash=new r.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function t(){var e=n._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=n._createHelper(i),t.HmacSHA384=n._createHmacHelper(i)}();var y,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(t){var e,r,n="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),n+=m.charAt(r>>6)+m.charAt(63&r);for(e+1==t.length?(r=parseInt(t.substring(e,e+1),16),n+=m.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),n+=m.charAt(r>>2)+m.charAt((3&r)<<4));(3&n.length)>0;)n+="=";return n}function S(t){var e,r,n,i="",o=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(n=m.indexOf(t.charAt(e)))<0||(0==o?(i+=T(n>>2),r=3&n,o=1):1==o?(i+=T(r<<2|n>>4),r=15&n,o=2):2==o?(i+=T(r),i+=T(n>>2),r=3&n,o=3):(i+=T(r<<2|n>>4),i+=T(15&n),o=0));return 1==o&&(i+=T(r<<2)),i}function b(t){var e,r=S(t),n=new Array;for(e=0;2*e<r.length;++e)n[e]=parseInt(r.substring(2*e,2*e+2),16);return n}function w(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function F(){return new w(null)}"Microsoft Internet Explorer"==d.appName?(w.prototype.am=function E(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],c=this[t++]>>15,h=a*u+c*s;i=((u=s*u+((32767&h)<<15)+r[n]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),r[n++]=1073741823&u}return i},y=30):"Netscape"!=d.appName?(w.prototype.am=function x(t,e,r,n,i,o){for(;--o>=0;){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},y=26):(w.prototype.am=function A(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],c=this[t++]>>14,h=a*u+c*s;i=((u=s*u+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*c,r[n++]=268435455&u}return i},y=28),w.prototype.DB=y,w.prototype.DM=(1<<y)-1,w.prototype.DV=1<<y,w.prototype.FV=Math.pow(2,52),w.prototype.F1=52-y,w.prototype.F2=2*y-52;var k,P,C=new Array;for(k="0".charCodeAt(0),P=0;P<=9;++P)C[k++]=P;for(k="a".charCodeAt(0),P=10;P<36;++P)C[k++]=P;for(k="A".charCodeAt(0),P=10;P<36;++P)C[k++]=P;function T(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function R(t,e){var r=C[t.charCodeAt(e)];return null==r?-1:r}function I(t){var e=F();return e.fromInt(t),e}function D(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function L(t){this.m=t}function N(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function U(t,e){return t&e}function B(t,e){return t|e}function O(t,e){return t^e}function j(t,e){return t&~e}function M(t){if(0==t)return-1;var e=0;return!(65535&t)&&(t>>=16,e+=16),!(255&t)&&(t>>=8,e+=8),!(15&t)&&(t>>=4,e+=4),!(3&t)&&(t>>=2,e+=2),!(1&t)&&++e,e}function H(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function V(){}function K(t){return t}function q(t){this.r2=F(),this.q3=F(),w.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}L.prototype.convert=function J(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},L.prototype.revert=function W(t){return t},L.prototype.reduce=function z(t){t.divRemTo(this.m,null,t)},L.prototype.mulTo=function Y(t,e,r){t.multiplyTo(e,r),this.reduce(r)},L.prototype.sqrTo=function G(t,e){t.squareTo(e),this.reduce(e)},N.prototype.convert=function X(t){var e=F();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(w.ZERO)>0&&this.m.subTo(e,e),e},N.prototype.revert=function $(t){var e=F();return t.copyTo(e),this.reduce(e),e},N.prototype.reduce=function Q(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},N.prototype.mulTo=function Z(t,e,r){t.multiplyTo(e,r),this.reduce(r)},N.prototype.sqrTo=function tt(t,e){t.squareTo(e),this.reduce(e)},w.prototype.copyTo=function et(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},w.prototype.fromInt=function rt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},w.prototype.fromString=function nt(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=8==r?255&t[n]:R(t,n);s<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&!!(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&w.ZERO.subTo(this,this)},w.prototype.clamp=function it(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},w.prototype.dlShiftTo=function ot(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},w.prototype.drShiftTo=function st(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},w.prototype.lShiftTo=function at(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},w.prototype.rShiftTo=function ut(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},w.prototype.subTo=function ct(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},w.prototype.multiplyTo=function ht(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&w.ZERO.subTo(e,e)},w.prototype.squareTo=function lt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},w.prototype.divRemTo=function ft(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=F());var o=F(),s=this.s,a=t.s,u=this.DB-D(n[n.t-1]);u>0?(n.lShiftTo(u,o),i.lShiftTo(u,r)):(n.copyTo(o),i.copyTo(r));var c=o.t,h=o[c-1];if(0!=h){var l=h*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/l,g=(1<<this.F1)/l,d=1<<this.F2,p=r.t,v=p-c,y=null==e?F():e;for(o.dlShiftTo(v,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),w.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--v>=0;){var m=r[--p]==h?this.DM:Math.floor(r[p]*f+(r[p-1]+d)*g);if((r[p]+=o.am(0,m,r,v,0,c))<m)for(o.dlShiftTo(v,y),r.subTo(y,r);r[p]<--m;)r.subTo(y,r)}null!=e&&(r.drShiftTo(c,e),s!=a&&w.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&w.ZERO.subTo(r,r)}}},w.prototype.invDigit=function gt(){if(this.t<1)return 0;var t=this[0];if(!(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},w.prototype.isEven=function dt(){return 0==(this.t>0?1&this[0]:this.s)},w.prototype.exp=function pt(t,e){if(t>4294967295||t<1)return w.ONE;var r=F(),n=F(),i=e.convert(this),o=D(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)},w.prototype.toString=function vt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=T(r));s>=0;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=T(r));return i?o:"0"},w.prototype.negate=function yt(){var t=F();return w.ZERO.subTo(this,t),t},w.prototype.abs=function mt(){return this.s<0?this.negate():this},w.prototype.compareTo=function _t(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},w.prototype.bitLength=function St(){return this.t<=0?0:this.DB*(this.t-1)+D(this[this.t-1]^this.s&this.DM)},w.prototype.mod=function bt(t){var e=F();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(w.ZERO)>0&&t.subTo(e,e),e},w.prototype.modPowInt=function wt(t,e){var r;return r=t<256||e.isEven()?new L(e):new N(e),this.exp(t,r)},w.ZERO=I(0),w.ONE=I(1),V.prototype.convert=K,V.prototype.revert=K,V.prototype.mulTo=function Ft(t,e,r){t.multiplyTo(e,r)},V.prototype.sqrTo=function Et(t,e){t.squareTo(e)},q.prototype.convert=function xt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=F();return t.copyTo(e),this.reduce(e),e},q.prototype.revert=function At(t){return t},q.prototype.reduce=function kt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},q.prototype.mulTo=function Pt(t,e,r){t.multiplyTo(e,r),this.reduce(r)},q.prototype.sqrTo=function Ct(t,e){t.squareTo(e),this.reduce(e)};var Pe,Ce,Te,Tt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Rt=(1<<26)/Tt[Tt.length-1];function It(){this.i=0,this.j=0,this.S=new Array}function Re(){!function t(e){Ce[Te++]^=255&e,Ce[Te++]^=e>>8&255,Ce[Te++]^=e>>16&255,Ce[Te++]^=e>>24&255,Te>=256&&(Te-=256)}((new Date).getTime())}if(w.prototype.chunkSize=function Dt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},w.prototype.toRadix=function Lt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=I(r),i=F(),o=F(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s},w.prototype.fromRadix=function Nt(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var u=R(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(s=e*s+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&w.ZERO.subTo(this,this)},w.prototype.fromNumber=function Ut(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(w.ONE.shiftLeft(t-1),B,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(w.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},w.prototype.bitwiseTo=function Bt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},w.prototype.changeBit=function Ot(t,e){var r=w.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},w.prototype.addTo=function jt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},w.prototype.dMultiply=function Mt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},w.prototype.dAddOffset=function Ht(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},w.prototype.multiplyLowerTo=function Vt(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},w.prototype.multiplyUpperTo=function Kt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},w.prototype.modInt=function qt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},w.prototype.millerRabin=function Jt(t){var e=this.subtract(w.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);(t=t+1>>1)>Tt.length&&(t=Tt.length);for(var i=F(),o=0;o<t;++o){i.fromInt(Tt[Math.floor(Math.random()*Tt.length)]);var s=i.modPow(n,this);if(0!=s.compareTo(w.ONE)&&0!=s.compareTo(e)){for(var a=1;a++<r&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(w.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0},w.prototype.clone=function Wt(){var t=F();return this.copyTo(t),t},w.prototype.intValue=function zt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},w.prototype.byteValue=function Yt(){return 0==this.t?this.s:this[0]<<24>>24},w.prototype.shortValue=function Gt(){return 0==this.t?this.s:this[0]<<16>>16},w.prototype.signum=function Xt(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},w.prototype.toByteArray=function $t(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),!!(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},w.prototype.equals=function Qt(t){return 0==this.compareTo(t)},w.prototype.min=function Zt(t){return this.compareTo(t)<0?this:t},w.prototype.max=function te(t){return this.compareTo(t)>0?this:t},w.prototype.and=function ee(t){var e=F();return this.bitwiseTo(t,U,e),e},w.prototype.or=function re(t){var e=F();return this.bitwiseTo(t,B,e),e},w.prototype.xor=function ne(t){var e=F();return this.bitwiseTo(t,O,e),e},w.prototype.andNot=function ie(t){var e=F();return this.bitwiseTo(t,j,e),e},w.prototype.not=function oe(){for(var t=F(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},w.prototype.shiftLeft=function se(t){var e=F();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},w.prototype.shiftRight=function ae(t){var e=F();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},w.prototype.getLowestSetBit=function ue(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+M(this[t]);return this.s<0?this.t*this.DB:-1},w.prototype.bitCount=function ce(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=H(this[r]^e);return t},w.prototype.testBit=function he(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:!!(this[e]&1<<t%this.DB)},w.prototype.setBit=function le(t){return this.changeBit(t,B)},w.prototype.clearBit=function fe(t){return this.changeBit(t,j)},w.prototype.flipBit=function ge(t){return this.changeBit(t,O)},w.prototype.add=function de(t){var e=F();return this.addTo(t,e),e},w.prototype.subtract=function pe(t){var e=F();return this.subTo(t,e),e},w.prototype.multiply=function ve(t){var e=F();return this.multiplyTo(t,e),e},w.prototype.divide=function ye(t){var e=F();return this.divRemTo(t,e,null),e},w.prototype.remainder=function me(t){var e=F();return this.divRemTo(t,null,e),e},w.prototype.divideAndRemainder=function _e(t){var e=F(),r=F();return this.divRemTo(t,e,r),new Array(e,r)},w.prototype.modPow=function Se(t,e){var r,n,i=t.bitLength(),o=I(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new L(e):e.isEven()?new q(e):new N(e);var s=new Array,a=3,u=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var h=F();for(n.sqrTo(s[1],h);a<=c;)s[a]=F(),n.mulTo(h,s[a-2],s[a]),a+=2}var l,f,g=t.t-1,d=!0,p=F();for(i=D(t[g])-1;g>=0;){for(i>=u?l=t[g]>>i-u&c:(l=(t[g]&(1<<i+1)-1)<<u-i,g>0&&(l|=t[g-1]>>this.DB+i-u)),a=r;!(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--g),d)s[l].copyTo(o),d=!1;else{for(;a>1;)n.sqrTo(o,p),n.sqrTo(p,o),a-=2;a>0?n.sqrTo(o,p):(f=o,o=p,p=f),n.mulTo(p,s[l],o)}for(;g>=0&&!(t[g]&1<<i);)n.sqrTo(o,p),f=o,o=p,p=f,--i<0&&(i=this.DB-1,--g)}return n.revert(o)},w.prototype.modInverse=function be(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return w.ZERO;for(var r=t.clone(),n=this.clone(),i=I(1),o=I(0),s=I(0),a=I(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(w.ONE)?w.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},w.prototype.pow=function we(t){return this.exp(t,new V)},w.prototype.gcd=function Fe(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},w.prototype.isProbablePrime=function Ee(t){var e,r=this.abs();if(1==r.t&&r[0]<=Tt[Tt.length-1]){for(e=0;e<Tt.length;++e)if(r[0]==Tt[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Tt.length;){for(var n=Tt[e],i=e+1;i<Tt.length&&n<Rt;)n*=Tt[i++];for(n=r.modInt(n);e<i;)if(n%Tt[e++]==0)return!1}return r.millerRabin(t)},w.prototype.square=function xe(){var t=F();return this.squareTo(t),t},It.prototype.init=function Ae(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},It.prototype.next=function ke(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},null==Ce){var Ie;if(Ce=new Array,Te=0,void 0!==p&&(void 0!==p.crypto||void 0!==p.msCrypto)){var De=p.crypto||p.msCrypto;if(De.getRandomValues){var Le=new Uint8Array(32);for(De.getRandomValues(Le),Ie=0;Ie<32;++Ie)Ce[Te++]=Le[Ie]}else if("Netscape"==d.appName&&d.appVersion<"5"){var Ne=p.crypto.random(32);for(Ie=0;Ie<Ne.length;++Ie)Ce[Te++]=255&Ne.charCodeAt(Ie)}}for(;Te<256;)Ie=Math.floor(65536*Math.random()),Ce[Te++]=Ie>>>8,Ce[Te++]=255&Ie;Te=0,Re()}function Ue(){if(null==Pe){for(Re(),(Pe=function t(){return new It}()).init(Ce),Te=0;Te<Ce.length;++Te)Ce[Te]=0;Te=0}return Pe.next()}function Be(){}function Oe(t,e){return new w(t,e)}function je(t,e,r){for(var n="",i=0;n.length<e;)n+=r(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function Me(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function He(t,e){this.x=e,this.q=t}function Ve(t,e,r,n){this.curve=t,this.x=e,this.y=r,this.z=null==n?w.ONE:n,this.zinv=null}function Ke(t,e,r){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new Ve(this,null,null)}Be.prototype.nextBytes=function qe(t){var e;for(e=0;e<t.length;++e)t[e]=Ue()},Me.prototype.doPublic=function Je(t){return t.modPowInt(this.e,this.n)},Me.prototype.setPublic=function We(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=Oe(t,16),this.e=parseInt(e,16)}},Me.prototype.encrypt=function ze(t){var e=function r(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var r=new Array,n=t.length-1;n>=0&&e>0;){var i=t.charCodeAt(n--);i<128?r[--e]=i:i>127&&i<2048?(r[--e]=63&i|128,r[--e]=i>>6|192):(r[--e]=63&i|128,r[--e]=i>>6&63|128,r[--e]=i>>12|224)}r[--e]=0;for(var o=new Be,s=new Array;e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--e]=s[0]}return r[--e]=2,r[--e]=0,new w(r)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var i=n.toString(16);return 1&i.length?"0"+i:i},Me.prototype.encryptOAEP=function Ye(t,e,r){var n=function i(t,e,r,n){var i=Sr.crypto.MessageDigest,o=Sr.crypto.Util,s=null;if(r||(r="sha1"),"string"==typeof r&&(s=i.getCanonicalAlgName(r),n=i.getHashLength(s),r=function t(e){return Lr(o.hashHex(Nr(e),s))}),t.length+2*n+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*n-2;a+=1)u+="\0";var c=r("")+u+""+t,h=new Array(n);(new Be).nextBytes(h);var l=je(h,c.length,r),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^l.charCodeAt(a);var g=je(f,h.length,r),d=[0];for(a=0;a<h.length;a+=1)d[a+1]=h[a]^g.charCodeAt(a);return new w(d.concat(f))}(t,this.n.bitLength()+7>>3,e,r);if(null==n)return null;var o=this.doPublic(n);if(null==o)return null;var s=o.toString(16);return 1&s.length?"0"+s:s},Me.prototype.type="RSA",He.prototype.equals=function Ge(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},He.prototype.toBigInteger=function Xe(){return this.x},He.prototype.negate=function $e(){return new He(this.q,this.x.negate().mod(this.q))},He.prototype.add=function Qe(t){return new He(this.q,this.x.add(t.toBigInteger()).mod(this.q))},He.prototype.subtract=function Ze(t){return new He(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},He.prototype.multiply=function tr(t){return new He(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},He.prototype.square=function er(){return new He(this.q,this.x.square().mod(this.q))},He.prototype.divide=function rr(t){return new He(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},Ve.prototype.getX=function nr(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Ve.prototype.getY=function ir(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Ve.prototype.equals=function or(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(w.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(w.ZERO))},Ve.prototype.isInfinity=function sr(){return null==this.x&&null==this.y||this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)},Ve.prototype.negate=function ar(){return new Ve(this.curve,this.x,this.y.negate(),this.z)},Ve.prototype.add=function ur(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(w.ZERO.equals(r))return w.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new w("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(t.x.toBigInteger(),t.y.toBigInteger(),r.square()),a=s.multiply(r),u=i.multiply(s),c=e.square().multiply(this.z),h=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(r).mod(this.curve.q),l=u.multiply(n).multiply(e).subtract(o.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new Ve(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(l),f)},Ve.prototype.twice=function cr(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new w("3"),e=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=e.square().multiply(t);w.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=s.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new Ve(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},Ve.prototype.multiply=function hr(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new w("3")),i=this.negate(),o=this,s=this.curve.q.subtract(t),a=s.multiply(new w("3")),u=new Ve(this.curve,this.x,this.y),c=u.negate();for(e=n.bitLength()-2;e>0;--e){o=o.twice();var h=n.testBit(e);h!=r.testBit(e)&&(o=o.add(h?this:i))}for(e=a.bitLength()-2;e>0;--e){u=u.twice();var l=a.testBit(e);l!=s.testBit(e)&&(u=u.add(l?u:c))}return o},Ve.prototype.multiplyTwo=function lr(t,e,r){var n;n=t.bitLength()>r.bitLength()?t.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(e);n>=0;)i=i.twice(),t.testBit(n)?i=r.testBit(n)?i.add(o):i.add(this):r.testBit(n)&&(i=i.add(e)),--n;return i},Ke.prototype.getQ=function fr(){return this.q},Ke.prototype.getA=function gr(){return this.a},Ke.prototype.getB=function dr(){return this.b},Ke.prototype.equals=function pr(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},Ke.prototype.getInfinity=function vr(){return this.infinity},Ke.prototype.fromBigInteger=function yr(t){return new He(this.q,t)},Ke.prototype.decodePointHex=function mr(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var e=(t.length-2)/2,r=t.substr(2,e),n=t.substr(e+2,e);return new Ve(this,this.fromBigInteger(new w(r,16)),this.fromBigInteger(new w(n,16)))}},He.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Ve.prototype.getEncoded=function(t){var e=function t(e,r){var n=e.toByteArrayUnsigned();if(r<n.length)n=n.slice(n.length-r);else for(;r>n.length;)n.unshift(0);return n},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=e(r,32);return t?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(n,32))),i},Ve.decodeFrom=function(t,e){e[0];var r=e.length-1,n=e.slice(1,1+r/2),i=e.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var o=new w(n),s=new w(i);return new Ve(t,t.fromBigInteger(o),t.fromBigInteger(s))},Ve.decodeFromHex=function(t,e){e.substr(0,2);var r=e.length-2,n=e.substr(2,r/2),i=e.substr(2+r/2,r/2),o=new w(n,16),s=new w(i,16);return new Ve(t,t.fromBigInteger(o),t.fromBigInteger(s))},Ve.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),r=t.y.subtract(this.y).divide(e),n=r.square().subtract(this.x).subtract(t.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new Ve(this.curve,n,i)},Ve.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(w.valueOf(2)),e=this.curve.fromBigInteger(w.valueOf(3)),r=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=r.square().subtract(this.x.multiply(t)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new Ve(this.curve,n,i)},Ve.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new w("3")),i=this.negate(),o=this;for(e=n.bitLength()-2;e>0;--e){o=o.twice();var s=n.testBit(e);s!=r.testBit(e)&&(o=o.add2D(s?this:i))}return o},Ve.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=e.multiply(e).mod(i),s=t.multiply(t).multiply(t).add(r.multiply(t)).add(n).mod(i);return o.equals(s)},Ve.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Ve.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(e.compareTo(w.ONE)<0||e.compareTo(t.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(w.ONE)<0||r.compareTo(t.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var _r=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(t,e,n){return e?r[e]:String.fromCharCode(parseInt(n,16))}var i=new String(""),o=Object.hasOwnProperty;return function(r,s){var a,u,c=r.match(t),h=c[0],l=!1;"{"===h?a={}:"["===h?a=[]:(a=[],l=!0);for(var f=[a],d=1-l,p=c.length;d<p;++d){var v;switch((h=c[d]).charCodeAt(0)){default:(v=f[0])[u||v.length]=+h,u=void 0;break;case 34:if(-1!==(h=h.substring(1,h.length-1)).indexOf("\\")&&(h=h.replace(e,n)),v=f[0],!u){if(!(v instanceof Array)){u=h||i;break}u=v.length}v[u]=h,u=void 0;break;case 91:v=f[0],f.unshift(v[u||v.length]=[]),u=void 0;break;case 93:case 125:f.shift();break;case 102:(v=f[0])[u||v.length]=!1,u=void 0;break;case 110:(v=f[0])[u||v.length]=null,u=void 0;break;case 116:(v=f[0])[u||v.length]=!0,u=void 0;break;case 123:v=f[0],f.unshift(v[u||v.length]={}),u=void 0}}if(l){if(1!==f.length)throw new Error;a=a[0]}else if(f.length)throw new Error;return s&&(a=function t(e,r){var n=e[r];if(n&&"object"===(void 0===n?"undefined":g(n))){var i=null;for(var a in n)if(o.call(n,a)&&n!==e){var u=t(n,a);void 0!==u?n[a]=u:(i||(i=[]),i.push(a))}if(i)for(var c=i.length;--c>=0;)delete n[i[c]]}return s.call(e,r,n)}({"":a},"")),a}}();void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.asn1&&Sr.asn1||(Sr.asn1={}),Sr.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1).length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";e=new w(n,16).xor(t).add(w.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return jr(t,e)},this.newObject=function(t){var e=Sr.asn1,r=e.ASN1Object,n=e.DERBoolean,i=e.DERInteger,o=e.DERBitString,s=e.DEROctetString,a=e.DERNull,u=e.DERObjectIdentifier,c=e.DEREnumerated,h=e.DERUTF8String,l=e.DERNumericString,f=e.DERPrintableString,g=e.DERTeletexString,d=e.DERIA5String,p=e.DERUTCTime,v=e.DERGeneralizedTime,y=e.DERVisibleString,m=e.DERBMPString,_=e.DERSequence,S=e.DERSet,b=e.DERTaggedObject,w=e.ASN1Util.newObject;if(t instanceof e.ASN1Object)return t;var F=Object.keys(t);if(1!=F.length)throw new Error("key of param shall be only one.");var E=F[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+E+":"))throw new Error("undefined key: "+E);if("bool"==E)return new n(t[E]);if("int"==E)return new i(t[E]);if("bitstr"==E)return new o(t[E]);if("octstr"==E)return new s(t[E]);if("null"==E)return new a(t[E]);if("oid"==E)return new u(t[E]);if("enum"==E)return new c(t[E]);if("utf8str"==E)return new h(t[E]);if("numstr"==E)return new l(t[E]);if("prnstr"==E)return new f(t[E]);if("telstr"==E)return new g(t[E]);if("ia5str"==E)return new d(t[E]);if("utctime"==E)return new p(t[E]);if("gentime"==E)return new v(t[E]);if("visstr"==E)return new y(t[E]);if("bmpstr"==E)return new m(t[E]);if("asn1"==E)return new r(t[E]);if("seq"==E){for(var x=t[E],A=[],k=0;k<x.length;k++){var P=w(x[k]);A.push(P)}return new _({array:A})}if("set"==E){for(x=t[E],A=[],k=0;k<x.length;k++)P=w(x[k]),A.push(P);return new S({array:A})}if("tag"==E){var C=t[E];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var T=w(C[2]);return new b({tag:C[0],explicit:C[1],obj:T})}return new b(C)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},Sr.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=(e=Math.floor(r/40)+"."+r%40,""),i=2;i<t.length;i+=2){var o=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);n+=o.substr(1,7),"0"==o.substr(0,1)&&(e=e+"."+new w(n,2).toString(10),n="")}return e},Sr.asn1.ASN1Util.oidIntToHex=function(t){var e=function t(e){var r=e.toString(16);return 1==r.length&&(r="0"+r),r},r=function t(r){var n="",i=new w(r,10).toString(2),o=7-i.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";for(i=s+i,a=0;a<i.length-1;a+=7){var u=i.substr(a,7);a!=i.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",i=t.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n},Sr.asn1.ASN1Object=function(t){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var r=e.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+r).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(t){this.params=t},null!=t&&null!=t.tlv&&(this.hTLV=t.tlv,this.isModified=!1)},Sr.asn1.DERAbstractString=function(t){Sr.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=Ir(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},Zr(Sr.asn1.DERAbstractString,Sr.asn1.ASN1Object),Sr.asn1.DERAbstractTime=function(t){Sr.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){var e=t.getTime()+6e4*t.getTimezoneOffset();return new Date(e)},this.formatDate=function(t,e,r){var n=this.zeroPadding,i=this.localDateToUTC(t),o=String(i.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=o+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var a=i.getMilliseconds();if(0!=a){var u=n(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=kr(t)},this.setByDateValue=function(t,e,r,n,i,o){var s=new Date(Date.UTC(t,e-1,r,n,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},Zr(Sr.asn1.DERAbstractTime,Sr.asn1.ASN1Object),Sr.asn1.DERAbstractStructured=function(t){Sr.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},Zr(Sr.asn1.DERAbstractStructured,Sr.asn1.ASN1Object),Sr.asn1.DERBoolean=function(t){Sr.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==t?"010100":"0101ff"},Zr(Sr.asn1.DERBoolean,Sr.asn1.ASN1Object),Sr.asn1.DERInteger=function(t){Sr.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Sr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new w(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},Zr(Sr.asn1.DERInteger,Sr.asn1.ASN1Object),Sr.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=Sr.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}Sr.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var n="";for(r=0;r<t.length-1;r+=8){var i=t.substr(r,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},Zr(Sr.asn1.DERBitString,Sr.asn1.ASN1Object),Sr.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=Sr.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}Sr.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},Zr(Sr.asn1.DEROctetString,Sr.asn1.DERAbstractString),Sr.asn1.DERNull=function(){Sr.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Zr(Sr.asn1.DERNull,Sr.asn1.ASN1Object),Sr.asn1.DERObjectIdentifier=function(t){Sr.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var e=function r(t){var e=function t(e){var r=e.toString(16);return 1==r.length&&(r="0"+r),r},r=function t(r){var n="",i=parseInt(r,10).toString(2),o=7-i.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";for(i=s+i,a=0;a<i.length-1;a+=7){var u=i.substr(a,7);a!=i.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};try{if(!t.match(/^[0-9.]+$/))return null;var n="",i=t.split("."),o=40*parseInt(i[0],10)+parseInt(i[1],10);n+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n}catch(t){return null}}(t);if(null==e)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){var e=Sr.asn1.x509.OID.name2oid(t);if(""===e)throw new Error("DERObjectIdentifier oidName undefined: "+t);this.setValueOidString(e)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){"string"==typeof t?this.setValueNameOrOid(t):void 0!==t.oid?this.setValueNameOrOid(t.oid):void 0!==t.name?this.setValueNameOrOid(t.name):void 0!==t.hex&&this.setValueHex(t.hex)},void 0!==t&&this.setByParam(t)},Zr(Sr.asn1.DERObjectIdentifier,Sr.asn1.ASN1Object),Sr.asn1.DEREnumerated=function(t){Sr.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Sr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new w(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},Zr(Sr.asn1.DEREnumerated,Sr.asn1.ASN1Object),Sr.asn1.DERUTF8String=function(t){Sr.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},Zr(Sr.asn1.DERUTF8String,Sr.asn1.DERAbstractString),Sr.asn1.DERNumericString=function(t){Sr.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},Zr(Sr.asn1.DERNumericString,Sr.asn1.DERAbstractString),Sr.asn1.DERPrintableString=function(t){Sr.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},Zr(Sr.asn1.DERPrintableString,Sr.asn1.DERAbstractString),Sr.asn1.DERTeletexString=function(t){Sr.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},Zr(Sr.asn1.DERTeletexString,Sr.asn1.DERAbstractString),Sr.asn1.DERIA5String=function(t){Sr.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},Zr(Sr.asn1.DERIA5String,Sr.asn1.DERAbstractString),Sr.asn1.DERVisibleString=function(t){Sr.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"},Zr(Sr.asn1.DERVisibleString,Sr.asn1.DERAbstractString),Sr.asn1.DERBMPString=function(t){Sr.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"},Zr(Sr.asn1.DERBMPString,Sr.asn1.DERAbstractString),Sr.asn1.DERUTCTime=function(t){Sr.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=kr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=kr(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},Zr(Sr.asn1.DERUTCTime,Sr.asn1.DERAbstractTime),Sr.asn1.DERGeneralizedTime=function(t){Sr.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=kr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=kr(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},Zr(Sr.asn1.DERGeneralizedTime,Sr.asn1.DERAbstractTime),Sr.asn1.DERSequence=function(t){Sr.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},Zr(Sr.asn1.DERSequence,Sr.asn1.DERAbstractStructured),Sr.asn1.DERSet=function(t){Sr.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},Zr(Sr.asn1.DERSet,Sr.asn1.DERAbstractStructured),Sr.asn1.DERTaggedObject=function(t){Sr.asn1.DERTaggedObject.superclass.constructor.call(this);var e=Sr.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){null!=t.tag&&(this.hT=t.tag),null!=t.explicit&&(this.isExplicit=t.explicit),null!=t.tage&&(this.hT=t.tage,this.isExplicit=!0),null!=t.tagi&&(this.hT=t.tagi,this.isExplicit=!1),null!=t.obj&&(t.obj instanceof e.ASN1Object?(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==g(t.obj)&&(this.asn1Object=e.ASN1Util.newObject(t.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=t&&this.setByParam(t)},Zr(Sr.asn1.DERTaggedObject,Sr.asn1.ASN1Object);var Sr,br,wr,Fr=new function(){};function Er(t){for(var e=new Array,r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function xr(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function Ar(t){for(var e="",r=0;r<t.length;r++){var n=t[r].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function kr(t){return Ar(Er(t))}function Pr(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Cr(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function Tr(t){return t.length%2==1&&(t="0"+t),Pr(_(t))}function Rr(t){return S(Cr(t))}function Ir(t){return Kr(Gr(t))}function Dr(t){return decodeURIComponent(qr(t))}function Lr(t){for(var e="",r=0;r<t.length-1;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e}function Nr(t){for(var e="",r=0;r<t.length;r++)e+=("0"+t.charCodeAt(r).toString(16)).slice(-2);return e}function Ur(t){return _(t)}function Br(t){var e=Ur(t).replace(/(.{64})/g,"$1\r\n");return e.replace(/\r\n$/,"")}function Or(t){return S(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function jr(t,e){return"-----BEGIN "+e+"-----\r\n"+Br(t)+"\r\n-----END "+e+"-----\r\n"}function Mr(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return Or(t=void 0!==e?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),"")).replace(new RegExp("-----END "+e+"-----[^]*$"),""):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Hr(t){var e,r,n,i,o,s,a,u,c,h,l;if(l=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=l[1],e=parseInt(u),2===u.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),r=parseInt(l[2])-1,n=parseInt(l[3]),i=parseInt(l[4]),o=parseInt(l[5]),s=parseInt(l[6]),a=0,""!==(c=l[7])&&(h=(c.substr(1)+"00").substr(0,3),a=parseInt(h)),Date.UTC(e,r,n,i,o,s,a);throw"unsupported zulu format: "+t}function Vr(t){return~~(Hr(t)/1e3)}function Kr(t){return t.replace(/%/g,"")}function qr(t){return t.replace(/(..)/g,"%$1")}function Jr(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var r=(t=t.toLowerCase()).split(":").length-1;if(r<2)throw e;var n=":".repeat(7-r+2),i=(t=t.replace("::",n)).split(":");if(8!=i.length)throw e;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}function Wr(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)e[r]=e[r].replace(/^0+/,""),""==e[r]&&(e[r]="0");var n=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===n)return t.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(t=t.replace(i,"::")).slice(1,-1)}function zr(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?Wr(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw e}}function Yr(t){return t.match(/.{4}/g).map(function e(t){var e=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2),16);if(0==e&r<128)return String.fromCharCode(r);if(e<8){var n=128|63&r;return Dr((192|(7&e)<<3|(192&r)>>6).toString(16)+n.toString(16))}n=128|(15&e)<<2|(192&r)>>6;var i=128|63&r;return Dr((224|(240&e)>>4).toString(16)+n.toString(16)+i.toString(16))}).join("")}function Gr(t){for(var e=encodeURIComponent(t),r="",n=0;n<e.length;n++)"%"==e[n]?(r+=e.substr(n,3),n+=2):r=r+"%"+kr(e[n]);return r}function Xr(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))}function $r(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}Fr.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var r=parseInt(t.substr(e+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},Fr.getL=function(t,e){var r=Fr.getLblen(t,e);return r<1?"":t.substr(e+2,2*r)},Fr.getVblen=function(t,e){var r;return""==(r=Fr.getL(t,e))?-1:("8"===r.substr(0,1)?new w(r.substr(2),16):new w(r,16)).intValue()},Fr.getVidx=function(t,e){var r=Fr.getLblen(t,e);return r<0?r:e+2*(r+1)},Fr.getV=function(t,e){var r=Fr.getVidx(t,e),n=Fr.getVblen(t,e);return t.substr(r,2*n)},Fr.getTLV=function(t,e){return t.substr(e,2)+Fr.getL(t,e)+Fr.getV(t,e)},Fr.getTLVblen=function(t,e){return 2+2*Fr.getLblen(t,e)+2*Fr.getVblen(t,e)},Fr.getNextSiblingIdx=function(t,e){return Fr.getVidx(t,e)+2*Fr.getVblen(t,e)},Fr.getChildIdx=function(t,e){var r,n,i,o=Fr,s=[];r=o.getVidx(t,e),n=2*o.getVblen(t,e),"03"==t.substr(e,2)&&(r+=2,n-=2),i=0;for(var a=r;i<=n;){var u=o.getTLVblen(t,a);if((i+=u)<=n&&s.push(a),a+=u,i>=n)break}return s},Fr.getNthChildIdx=function(t,e,r){return Fr.getChildIdx(t,e)[r]},Fr.getIdxbyList=function(t,e,r,n){var i,o,s=Fr;return 0==r.length?void 0!==n&&t.substr(e,2)!==n?-1:e:(i=r.shift())>=(o=s.getChildIdx(t,e)).length?-1:s.getIdxbyList(t,o[i],r,n)},Fr.getIdxbyListEx=function(t,e,r,n){var i,o,s=Fr;if(0==r.length)return void 0!==n&&t.substr(e,2)!==n?-1:e;i=r.shift(),o=s.getChildIdx(t,e);for(var a=0,u=0;u<o.length;u++){var c=t.substr(o[u],2);if("number"==typeof i&&!s.isContextTag(c)&&a==i||"string"==typeof i&&s.isContextTag(c,i))return s.getIdxbyListEx(t,o[u],r,n);s.isContextTag(c)||a++}return-1},Fr.getTLVbyList=function(t,e,r,n){var i=Fr,o=i.getIdxbyList(t,e,r,n);return-1==o||o>=t.length?null:i.getTLV(t,o)},Fr.getTLVbyListEx=function(t,e,r,n){var i=Fr,o=i.getIdxbyListEx(t,e,r,n);return-1==o?null:i.getTLV(t,o)},Fr.getVbyList=function(t,e,r,n,i){var o,s,a=Fr;return-1==(o=a.getIdxbyList(t,e,r,n))||o>=t.length?null:(s=a.getV(t,o),!0===i&&(s=s.substr(2)),s)},Fr.getVbyListEx=function(t,e,r,n,i){var o,s,a=Fr;return-1==(o=a.getIdxbyListEx(t,e,r,n))?null:(s=a.getV(t,o),"03"==t.substr(o,2)&&!1!==i&&(s=s.substr(2)),s)},Fr.getInt=function(t,e,r){null==r&&(r=-1);try{var n=t.substr(e,2);if("02"!=n&&"03"!=n)return r;var i=Fr.getV(t,e);return"02"==n?parseInt(i,16):function o(t){try{var e=t.substr(0,2);if("00"==e)return parseInt(t.substr(2),16);var r=parseInt(e,16),n=t.substr(2),i=parseInt(n,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-r),parseInt(i,2)}catch(t){return-1}}(i)}catch(t){return r}},Fr.getOID=function(t,e,r){null==r&&(r=null);try{return"06"!=t.substr(e,2)?r:function n(t){if(!Xr(t))return null;try{var e=[],r=t.substr(0,2),n=parseInt(r,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var i=t.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],u="";for(s=0;s<o.length;s++)128&o[s]?u+=Qr((127&o[s]).toString(2),7):(u+=Qr((127&o[s]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=e.join(".");return a.length>0&&(c=c+"."+a.join(".")),c}catch(t){return null}}(Fr.getV(t,e))}catch(t){return r}},Fr.getOIDName=function(t,e,r){null==r&&(r=null);try{var n=Fr.getOID(t,e,r);if(n==r)return r;var i=Sr.asn1.x509.OID.oid2name(n);return""==i?n:i}catch(t){return r}},Fr.getString=function(t,e,r){null==r&&(r=null);try{return Lr(Fr.getV(t,e))}catch(t){return r}},Fr.hextooidstr=function(t){var e=function t(e,r){return e.length>=r?e:new Array(r-e.length+1).join("0")+e},r=[],n=t.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var o=t.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var u=[],c="";for(a=0;a<s.length;a++)128&s[a]?c+=e((127&s[a]).toString(2),7):(c+=e((127&s[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var h=r.join(".");return u.length>0&&(h=h+"."+u.join(".")),h},Fr.dump=function(t,e,r,n){var i=Fr,o=i.getV,s=i.dump,a=i.getChildIdx,u=t;t instanceof Sr.asn1.ASN1Object&&(u=t.getEncodedHex());var c=function t(e,r){return e.length<=2*r?e:e.substr(0,r)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-r,r)};void 0===e&&(e={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var h,l=e.ommit_long_octet;if("01"==(h=u.substr(r,2)))return"00"==(f=o(u,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==h)return n+"INTEGER "+c(f=o(u,r),l)+"\n";if("03"==h){var f=o(u,r);return i.isASN1HEX(f.substr(2))?(g=n+"BITSTRING, encapsulates\n")+s(f.substr(2),e,0,n+"  "):n+"BITSTRING "+c(f,l)+"\n"}if("04"==h)return f=o(u,r),i.isASN1HEX(f)?(g=n+"OCTETSTRING, encapsulates\n")+s(f,e,0,n+"  "):n+"OCTETSTRING "+c(f,l)+"\n";if("05"==h)return n+"NULL\n";if("06"==h){var d=o(u,r),p=Sr.asn1.ASN1Util.oidHexToInt(d),v=Sr.asn1.x509.OID.oid2name(p),y=p.replace(/\./g," ");return""!=v?n+"ObjectIdentifier "+v+" ("+y+")\n":n+"ObjectIdentifier ("+y+")\n"}if("0a"==h)return n+"ENUMERATED "+parseInt(o(u,r))+"\n";if("0c"==h)return n+"UTF8String '"+Dr(o(u,r))+"'\n";if("13"==h)return n+"PrintableString '"+Dr(o(u,r))+"'\n";if("14"==h)return n+"TeletexString '"+Dr(o(u,r))+"'\n";if("16"==h)return n+"IA5String '"+Dr(o(u,r))+"'\n";if("17"==h)return n+"UTCTime "+Dr(o(u,r))+"\n";if("18"==h)return n+"GeneralizedTime "+Dr(o(u,r))+"\n";if("1a"==h)return n+"VisualString '"+Dr(o(u,r))+"'\n";if("1e"==h)return n+"BMPString '"+Yr(o(u,r))+"'\n";if("30"==h){if("3000"==u.substr(r,4))return n+"SEQUENCE {}\n";g=n+"SEQUENCE\n";var m=e;if((2==(b=a(u,r)).length||3==b.length)&&"06"==u.substr(b[0],2)&&"04"==u.substr(b[b.length-1],2)){v=i.oidname(o(u,b[0]));var _=JSON.parse(JSON.stringify(e));_.x509ExtName=v,m=_}for(var S=0;S<b.length;S++)g+=s(u,m,b[S],n+"  ");return g}if("31"==h){g=n+"SET\n";var b=a(u,r);for(S=0;S<b.length;S++)g+=s(u,e,b[S],n+"  ");return g}if(128&(h=parseInt(h,16))){var g,w=31&h;if(32&h){for(g=n+"["+w+"]\n",b=a(u,r),S=0;S<b.length;S++)g+=s(u,e,b[S],n+"  ");return g}return f=o(u,r),Fr.isASN1HEX(f)?(g=n+"["+w+"]\n")+s(f,e,0,n+"  "):(("68747470"==f.substr(0,8)||"subjectAltName"===e.x509ExtName&&2==w)&&(f=Dr(f)),n+"["+w+"] "+f+"\n")}return n+"UNKNOWN("+h+") "+o(u,r)+"\n"},Fr.isContextTag=function(t,e){var r,n;t=t.toLowerCase();try{r=parseInt(t,16)}catch(t){return-1}if(void 0===e)return 128==(192&r);try{return null!=e.match(/^\[[0-9]+\]$/)&&!((n=parseInt(e.substr(1,e.length-1),10))>31)&&128==(192&r)&&(31&r)==n}catch(t){return!1}},Fr.isASN1HEX=function(t){var e=Fr;if(t.length%2==1)return!1;var r=e.getVblen(t,0),n=t.substr(0,2),i=e.getL(t,0);return t.length-n.length-i.length==2*r},Fr.checkStrictDER=function(t,e,r,n,i){var o=Fr;if(void 0===r){if("string"!=typeof t)throw new Error("not hex string");if(t=t.toLowerCase(),!Sr.lang.String.isHex(t))throw new Error("not hex string");r=t.length,i=(n=t.length/2)<128?1:Math.ceil(n.toString(16))+1}if(o.getL(t,e).length>2*i)throw new Error("L of TLV too long: idx="+e);var s=o.getVblen(t,e);if(s>n)throw new Error("value of L too long than hex: idx="+e);var a=o.getTLV(t,e),u=a.length-2-o.getL(t,e).length;if(u!==2*s)throw new Error("V string length and L's value not the same:"+u+"/"+2*s);if(0===e&&t.length!=a.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+a.length);var c=t.substr(e,2);if("02"===c){var h=o.getVidx(t,e);if("00"==t.substr(h,2)&&t.charCodeAt(h+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var l=o.getVblen(t,e),f=0,g=o.getChildIdx(t,e),d=0;d<g.length;d++)f+=o.getTLV(t,g[d]).length,o.checkStrictDER(t,g[d],r,n,i);if(2*l!=f)throw new Error("sum of children's TLV length and L unmatch: "+2*l+"!="+f)}},Fr.oidname=function(t){var e=Sr.asn1;Sr.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var r=e.x509.OID.oid2name(t);return""===r&&(r=t),r},void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.lang&&Sr.lang||(Sr.lang={}),Sr.lang.String=function(){},"function"==typeof t?(e.utf8tob64u=br=function e(r){return Pr(t.from(r,"utf8").toString("base64"))},e.b64utoutf8=wr=function e(r){return t.from(Cr(r),"base64").toString("utf8")}):(e.utf8tob64u=br=function t(e){return Tr(Kr(Gr(e)))},e.b64utoutf8=wr=function t(e){return decodeURIComponent(qr(Rr(e)))}),Sr.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},Sr.lang.String.isHex=function(t){return Xr(t)},Sr.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},Sr.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=Cr(t),Sr.lang.String.isBase64(t))},Sr.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},Sr.lang.String.isPrintable=function(t){return null!==t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},Sr.lang.String.isIA5=function(t){return null!==t.match(/^[\x20-\x21\x23-\x7f]*$/)},Sr.lang.String.isMail=function(t){return null!==t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Qr=function t(e,r,n){return null==n&&(n="0"),e.length>=r?e:new Array(r-e.length+1).join(n)+e};function Zr(t,e){var r=function t(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.crypto&&Sr.crypto||(Sr.crypto={}),Sr.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:v.algo.MD5,sha1:v.algo.SHA1,sha224:v.algo.SHA224,sha256:v.algo.SHA256,sha384:v.algo.SHA384,sha512:v.algo.SHA512,ripemd160:v.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,r){var n=this.getDigestInfoHex(t,e),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+e;for(var o="0001",s="00"+n,a="",u=i-4-s.length,c=0;c<u;c+=2)a+="ff";return o+a+s},this.hashString=function(t,e){return new Sr.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new Sr.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof Me||t instanceof Sr.crypto.DSA||t instanceof Sr.crypto.ECDSA}},Sr.crypto.Util.md5=function(t){return new Sr.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},Sr.crypto.Util.ripemd160=function(t){return new Sr.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},Sr.crypto.Util.SECURERANDOMGEN=new Be,Sr.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return Sr.crypto.Util.SECURERANDOMGEN.nextBytes(e),Ar(e)},Sr.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new w(Sr.crypto.Util.getRandomHexOfNbytes(t),16)},Sr.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,r=new Array((t-e)/8+1);return Sr.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<e&255^255)&r[0],Ar(r)},Sr.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new w(Sr.crypto.Util.getRandomHexOfNbits(t),16)},Sr.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var r=Sr.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(r))return r}},Sr.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var r=t.compareTo(e);if(1==r)throw"biMin is greater than biMax";if(0==r)return t;var n=e.subtract(t);return Sr.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t)},Sr.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=Sr.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=Sr.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=Sr.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=v.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(v.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=Sr.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Sr.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},Sr.crypto.MessageDigest.getHashLength=function(t){var e=Sr.crypto.MessageDigest,r=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[r])throw"not supported algorithm: "+t;return e.HASHLENGTH[r]},Sr.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Sr.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=Sr.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var r=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==e){try{var n=Sr.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=v.algo.HMAC.create(n,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=v.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(v.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=Nr(t)),void(this.pass=v.enc.Hex.parse(e))}if("object"!=(void 0===t?"undefined":g(t)))throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=Ir(t.utf8)),void 0!==t.rstr&&(e=Nr(t.rstr)),void 0!==t.b64&&(e=S(t.b64)),void 0!==t.b64u&&(e=Rr(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=v.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=Sr.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Sr.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw new Error("provider not supported: "+e);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Sr.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t)}this.init=function(t,e){var r=null;try{r=void 0===e?tn.getKey(t):tn.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==Sr.crypto.ECDSA&&(this.prvKey=new Sr.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Me&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Me&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Sr.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Sr.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==Sr.crypto.ECDSA&&(this.pubKey=new Sr.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Me&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Me&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==Sr.crypto.ECDSA&&this.pubKey instanceof Sr.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==Sr.crypto.DSA&&this.pubKey instanceof Sr.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=Sr.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=tn.getKey(t.prvkeypem),this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},Sr.crypto.Cipher=function(t){},Sr.crypto.Cipher.encrypt=function(t,e,r){if(e instanceof Me&&e.isPublic){var n=Sr.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.encrypt(t);if("RSAOAEP"===n)return e.encryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},Sr.crypto.Cipher.decrypt=function(t,e,r){if(e instanceof Me&&e.isPrivate){var n=Sr.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.decrypt(t);if("RSAOAEP"===n)return e.decryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},Sr.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof Me){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},Sr.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.crypto&&Sr.crypto||(Sr.crypto={}),Sr.crypto.ECDSA=function(t){var e=Error,r=w,n=Ve,i=Sr.crypto.ECDSA,o=Sr.crypto.ECParameterDB,s=i.getName,a=Fr,u=a.getVbyListEx,c=a.isASN1HEX,h=new Be;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new r(t.bitLength(),h).mod(t.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(t){this.ecparams=o.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var r={};return r.x=t.substr(2,e),r.y=t.substr(2+e),r},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),r=this.ecparams.G.multiply(e),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+e.toString(16)).slice(-o),a="04"+("0000000000"+n.toString(16)).slice(-o)+("0000000000"+i.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new r(e,16),o=this.ecparams.n,s=new r(t.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(o),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(o)}while(u.compareTo(r.ZERO)<=0);var c=a.modInverse(o).multiply(s.add(n.multiply(u))).mod(o);return i.biRSSigToASN1Sig(u,c)},this.sign=function(t,e){var n=e,i=this.ecparams.n,o=r.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(i),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(i)}while(a.compareTo(w.ZERO)<=0);var u=s.modInverse(i).multiply(o.add(n.multiply(a))).mod(i);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,o){try{var s,a,u=i.parseSigHex(e);s=u.r,a=u.s;var c=n.decodeFromHex(this.ecparams.curve,o),h=new r(t.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(h,s,a,c)}catch(t){return!1}},this.verify=function(t,e,i){var o,s,a;if(Bitcoin.Util.isArray(e)){var u=this.parseSig(e);o=u.r,s=u.s}else{if("object"!==(void 0===e?"undefined":g(e))||!e.r||!e.s)throw"Invalid value for signature";o=e.r,s=e.s}if(i instanceof Ve)a=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=n.decodeFrom(this.ecparams.curve,i)}var c=r.fromByteArrayUnsigned(t);return this.verifyRaw(c,o,s,a)},this.verifyRaw=function(t,e,n,i){var o=this.ecparams.n,s=this.ecparams.G;if(e.compareTo(r.ONE)<0||e.compareTo(o)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(o)>=0)return!1;var a=n.modInverse(o),u=t.multiply(a).mod(o),c=e.multiply(a).mod(o);return s.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(o).equals(e)},this.serializeSig=function(t,e){var r=t.toByteArraySigned(),n=e.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var i=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){if(!1===c(t))throw new Error("not ASN.1 hex string");var e,r,n;try{e=u(t,0,["[0]",0],"06"),r=u(t,0,[1],"04");try{n=u(t,0,["[1]",0],"03")}catch(t){}}catch(t){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){if(!1===c(t))throw new e("not ASN.1 hex string");var r,n,i;try{u(t,0,[1,0],"06"),r=u(t,0,[1,1],"06"),n=u(t,0,[2,0,1],"04");try{i=u(t,0,[2,0,"[1]",0],"03")}catch(t){}}catch(t){throw new e("malformed PKCS#8 plain ECC private key")}if(this.curveName=s(r),void 0===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){if(!1===c(t))throw new e("not ASN.1 hex string");var r,n;try{u(t,0,[0,0],"06"),r=u(t,0,[0,1],"06"),n=u(t,0,[1],"03")}catch(t){throw new e("malformed PKCS#8 ECC public key")}if(this.curveName=s(r),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,r){if(!1===c(t))throw new e("not ASN.1 hex string");var n,i;try{n=u(t,0,[0,5,0,1],"06"),i=u(t,0,[0,5,1],"03")}catch(t){throw new e("malformed X.509 certificate ECC public key")}if(this.curveName=s(n),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},Sr.crypto.ECDSA.parseSigHex=function(t){var e=Sr.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new w(e.r,16),s:new w(e.s,16)}},Sr.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=Fr,r=e.getChildIdx,n=e.getV;if(e.checkStrictDER(t,0),"30"!=t.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=r(t,0);if(2!=i.length)throw new Error("signature shall have two elements");var o=i[0],s=i[1];if("02"!=t.substr(o,2))throw new Error("1st item not ASN.1 integer");if("02"!=t.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:n(t,o),s:n(t,s)}},Sr.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=Sr.crypto.ECDSA.parseSigHexInHexRS(t),r=e.r,n=e.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},Sr.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),r=t.substr(t.length/2);return Sr.crypto.ECDSA.hexRSSigToASN1Sig(e,r)},Sr.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var r=new w(t,16),n=new w(e,16);return Sr.crypto.ECDSA.biRSSigToASN1Sig(r,n)},Sr.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var r=Sr.asn1,n=new r.DERInteger({bigint:t}),i=new r.DERInteger({bigint:e});return new r.DERSequence({array:[n,i]}).getEncodedHex()},Sr.crypto.ECDSA.getName=function(t){return"2b8104001f"===t?"secp192k1":"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040021"===t?"secp224r1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(t)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.crypto&&Sr.crypto||(Sr.crypto={}),Sr.crypto.ECParameterDB=new function(){var t={},e={};function r(t){return new w(t,16)}this.getByName=function(r){var n=r;if(void 0!==e[n]&&(n=e[r]),void 0!==t[n])return t[n];throw"unregistered EC curve name: "+n},this.regist=function(n,i,o,s,a,u,c,h,l,f,g,d){t[n]={};var p=r(o),v=r(s),y=r(a),m=r(u),_=r(c),S=new Ke(p,v,y),b=S.decodePointHex("04"+h+l);t[n].name=n,t[n].keylen=i,t[n].curve=S,t[n].G=b,t[n].n=m,t[n].h=_,t[n].oid=g,t[n].info=d;for(var w=0;w<f.length;w++)e[f[w]]=n}},Sr.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Sr.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Sr.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Sr.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Sr.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Sr.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Sr.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Sr.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Sr.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Sr.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var tn=function(){var t=function t(r,n,i){return e(v.AES,r,n,i)},e=function t(e,r,n,i){var o=v.enc.Hex.parse(r),s=v.enc.Hex.parse(n),a=v.enc.Hex.parse(i),u={};u.key=s,u.iv=a,u.ciphertext=o;var c=e.decrypt(u,s,{iv:a});return v.enc.Hex.stringify(c)},r=function t(e,r,i){return n(v.AES,e,r,i)},n=function t(e,r,n,i){var o=v.enc.Hex.parse(r),s=v.enc.Hex.parse(n),a=v.enc.Hex.parse(i),u=e.encrypt(o,s,{iv:a}),c=v.enc.Hex.parse(u.toString());return v.enc.Base64.stringify(c)},i={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function t(r,n,i){return e(v.TripleDES,r,n,i)},eproc:function t(e,r,i){return n(v.TripleDES,e,r,i)},keylen:24,ivlen:8},"DES-CBC":{proc:function t(r,n,i){return e(v.DES,r,n,i)},eproc:function t(e,r,i){return n(v.DES,e,r,i)},keylen:8,ivlen:8}},o=function t(e){var r={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(r.cipher=n[1],r.ivsalt=n[2]);var i=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));i&&(r.type=i[1]);var o=-1,s=0;-1!=e.indexOf("\r\n\r\n")&&(o=e.indexOf("\r\n\r\n"),s=2),-1!=e.indexOf("\n\n")&&(o=e.indexOf("\n\n"),s=1);var a=e.indexOf("-----END");if(-1!=o&&-1!=a){var u=e.substring(o+2*s,a-s);u=u.replace(/\s+/g,""),r.data=u}return r},s=function t(e,r,n){for(var o=n.substring(0,16),s=v.enc.Hex.parse(o),a=v.enc.Utf8.parse(r),u=i[e].keylen+i[e].ivlen,c="",h=null;;){var l=v.algo.MD5.create();if(null!=h&&l.update(h),l.update(a),l.update(s),h=l.finalize(),(c+=v.enc.Hex.stringify(h)).length>=2*u)break}var f={};return f.keyhex=c.substr(0,2*i[e].keylen),f.ivhex=c.substr(2*i[e].keylen,2*i[e].ivlen),f},a=function t(e,r,n,o){var s=v.enc.Base64.parse(e),a=v.enc.Hex.stringify(s);return(0,i[r].proc)(a,n,o)};return{version:"1.0.0",parsePKCS5PEM:function t(e){return o(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function t(e,r,n){return s(e,r,n)},decryptKeyB64:function t(e,r,n,i){return a(e,r,n,i)},getDecryptedKeyHex:function t(e,r){var n=o(e),i=(n.type,n.cipher),u=n.ivsalt,c=n.data,h=s(i,r,u).keyhex;return a(c,i,h,u)},getEncryptedPKCS5PEMFromPrvKeyHex:function t(e,r,n,o,a){var u="";if(void 0!==o&&null!=o||(o="AES-256-CBC"),void 0===i[o])throw new Error("KEYUTIL unsupported algorithm: "+o);void 0!==a&&null!=a||(a=function t(e){var r=v.lib.WordArray.random(e);return v.enc.Hex.stringify(r)}(i[o].ivlen).toUpperCase());var c=function t(e,r,n,o){return(0,i[r].eproc)(e,n,o)}(r,o,s(o,n,a).keyhex,a);return u="-----BEGIN "+e+" PRIVATE KEY-----\r\n",u+="Proc-Type: 4,ENCRYPTED\r\n",u+="DEK-Info: "+o+","+a+"\r\n",u+="\r\n",(u+=c.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={},s=n(e,0);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+s.length);o.ciphertext=i(e,s[1]);var a=n(e,s[0]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+a.length);if("2a864886f70d01050d"!=i(e,a[0]))throw new Error("this only supports pkcs5PBES2");var u=n(e,a[1]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+u.length);var c=n(e,u[1]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length);if("2a864886f70d0307"!=i(e,c[0]))throw"this only supports TripleDES";o.encryptionSchemeAlg="TripleDES",o.encryptionSchemeIV=i(e,c[1]);var h=n(e,u[0]);if(2!=h.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+h.length);if("2a864886f70d01050c"!=i(e,h[0]))throw new Error("this only supports pkcs5PBKDF2");var l=n(e,h[1]);if(l.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length);o.pbkdf2Salt=i(e,l[0]);var f=i(e,l[1]);try{o.pbkdf2Iter=parseInt(f,16)}catch(t){throw new Error("malformed format pbkdf2Iter: "+f)}return o},getPBKDF2KeyHexFromParam:function t(e,r){var n=v.enc.Hex.parse(e.pbkdf2Salt),i=e.pbkdf2Iter,o=v.PBKDF2(r,n,{keySize:6,iterations:i});return v.enc.Hex.stringify(o)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function t(e,r){var n=Mr(e,"ENCRYPTED PRIVATE KEY"),i=this.parseHexOfEncryptedPKCS8(n),o=tn.getPBKDF2KeyHexFromParam(i,r),s={};s.ciphertext=v.enc.Hex.parse(i.ciphertext);var a=v.enc.Hex.parse(o),u=v.enc.Hex.parse(i.encryptionSchemeIV),c=v.TripleDES.decrypt(s,a,{iv:u});return v.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function t(e,r){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,r);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var s=n(e,0);if(s.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(s[1],2))throw new Error("malformed PKCS8 private key(code:003)");var a=n(e,s[1]);if(2!=a.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(o.algoid=i(e,a[0]),"06"==e.substr(a[1],2)&&(o.algparam=i(e,a[1])),"04"!=e.substr(s[2],2))throw new Error("malformed PKCS8 private key(code:006)");return o.keyidx=r.getVidx(e,s[2]),o},getKeyFromPlainPrivatePKCS8PEM:function t(e){var r=Mr(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(r)},getKeyFromPlainPrivatePKCS8Hex:function t(e){var r,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)r=new Me;else if("2a8648ce380401"==n.algoid)r=new Sr.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw new Error("unsupported private key algorithm");r=new Sr.crypto.ECDSA}return r.readPKCS8PrvKeyHex(e),r},_getKeyFromPublicPKCS8Hex:function t(e){var r,n=Fr.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)r=new Me;else if("2a8648ce380401"===n)r=new Sr.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw new Error("unsupported PKCS#8 public key hex");r=new Sr.crypto.ECDSA}return r.readPKCS8PubKeyHex(e),r},parsePublicRawRSAKeyHex:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var s=n(e,0);if(2!=s.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(s[0],2))throw new Error("malformed RSA key(code:003)");if(o.n=i(e,s[0]),"02"!=e.substr(s[1],2))throw new Error("malformed RSA key(code:004)");return o.e=i(e,s[1]),o},parsePublicPKCS8Hex:function t(e){var r=Fr,n=r.getChildIdx,i=r.getV,o={algparam:null},s=n(e,0);if(2!=s.length)throw new Error("outer DERSequence shall have 2 elements: "+s.length);var a=s[0];if("30"!=e.substr(a,2))throw new Error("malformed PKCS8 public key(code:001)");var u=n(e,a);if(2!=u.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(u[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(o.algoid=i(e,u[0]),"06"==e.substr(u[1],2)?o.algparam=i(e,u[1]):"30"==e.substr(u[1],2)&&(o.algparam={},o.algparam.p=r.getVbyList(e,u[1],[0],"02"),o.algparam.q=r.getVbyList(e,u[1],[1],"02"),o.algparam.g=r.getVbyList(e,u[1],[2],"02")),"03"!=e.substr(s[1],2))throw new Error("malformed PKCS8 public key(code:004)");return o.key=i(e,s[1]).substr(2),o}}}();function en(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t}function rn(t,e,r){for(var n="",i=0;n.length<e;)n+=Lr(r(Nr(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function nn(t){for(var e in Sr.crypto.Util.DIGESTINFOHEAD){var r=Sr.crypto.Util.DIGESTINFOHEAD[e],n=r.length;if(t.substring(0,n)==r)return[e,t.substring(n)]}return[]}function on(t){var e,r=Fr,n=r.getChildIdx,i=r.getV,o=r.getTLV,s=r.getVbyList,a=r.getVbyListEx,u=r.getTLVbyList,c=r.getTLVbyListEx,h=r.getIdxbyList,l=r.getIdxbyListEx,f=r.getVidx,g=r.getInt,d=r.oidname,p=r.hextooidstr,v=Mr;try{e=Sr.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(t){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var t=u(this.hex,0,[0,0]);if("a0"==t.substr(0,2)){var e=u(t,0,[0]),r=g(e,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return a(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var t=c(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(t)},this.getAlgorithmIdentifierName=function(t){for(var r in e)if(t===e[r])return r;return d(a(t,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var t=s(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=s(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return r.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return h(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return h(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return tn.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var t=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(t)},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=u(this.hex,0,[0],"30"),i=new Sr.crypto.Signature({alg:e});return i.init(t),i.updateHex(n),i.verify(r)},this.parseExt=function(t){var e,o,a;if(void 0===t){if(a=this.hex,3!==this.version)return-1;e=h(a,0,[0,7,0],"30"),o=n(a,e)}else{a=Mr(t);var u=h(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(a,u))return void(this.aExtInfo=new Array);e=h(a,0,[0,3,0,1,0],"30"),o=n(a,e),this.hex=a}this.aExtInfo=new Array;for(var c=0;c<o.length;c++){var l={critical:!1},g=0;3===n(a,o[c]).length&&(l.critical=!0,g=1),l.oid=r.hextooidstr(s(a,o[c],[0],"06"));var d=h(a,o[c],[1+g]);l.vidx=f(a,d),this.aExtInfo.push(l)}},this.getExtInfo=function(t){var e=this.aExtInfo,r=t;if(t.match(/^[0-9.]+$/)||(r=Sr.asn1.x509.OID.name2oid(t)),""!==r)for(var n=0;n<e.length;n++)if(e[n].oid===r)return e[n]},this.getExtBasicConstraints=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"basicConstraints"};if(e&&(n.critical=!0),"3000"===t)return n;if("30030101ff"===t)return n.cA=!0,n;if("30060101ff02"===t.substr(0,12)){var s=i(t,10),a=parseInt(s,16);return n.cA=!0,n.pathLen=a,n}throw new Error("hExtV parse error: "+t)},this.getExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("keyUsage");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"keyUsage"};return e&&(n.critical=!0),n.names=this.getExtKeyUsageString(t).split(","),n},this.getExtKeyUsageBin=function(t){if(void 0===t){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";t=o(this.hex,e.vidx)}if(8!=t.length&&10!=t.length)throw new Error("malformed key usage value: "+t);var r="000000000000000"+parseInt(t.substr(6),16).toString(2);return 8==t.length&&(r=r.slice(-8)),10==t.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(t){for(var e=this.getExtKeyUsageBin(t),r=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&r.push(on.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"subjectKeyIdentifier"};e&&(n.critical=!0);var s=i(t,0);return n.kid={hex:s},n},this.getExtAuthorityKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var s={extname:"authorityKeyIdentifier"};e&&(s.critical=!0);for(var a=n(t,0),u=0;u<a.length;u++){var c=t.substr(a[u],2);if("80"===c&&(s.kid={hex:i(t,a[u])}),"a1"===c){var h=o(t,a[u]),l=this.getGeneralNames(h);s.issuer=l[0].dn}"82"===c&&(s.sn={hex:i(t,a[u])})}return s},this.getExtExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var s={extname:"extKeyUsage",array:[]};e&&(s.critical=!0);for(var a=n(t,0),u=0;u<a.length;u++)s.array.push(d(i(t,a[u])));return s},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var e=new Array,r=o(this.hex,t.vidx);if(""===r)return e;for(var s=n(r,0),a=0;a<s.length;a++)e.push(d(i(r,s[a])));return e},this.getExtSubjectAltName=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"subjectAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getExtIssuerAltName=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var n={extname:"issuerAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getGeneralNames=function(t){for(var e=n(t,0),r=[],i=0;i<e.length;i++){var s=this.getGeneralName(o(t,e[i]));void 0!==s&&r.push(s)}return r},this.getGeneralName=function(t){var e=t.substr(0,2),r=i(t,0),n=Lr(r);return"81"==e?{rfc822:n}:"82"==e?{dns:n}:"86"==e?{uri:n}:"87"==e?{ip:zr(r)}:"a4"==e?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var t,e,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),c=n(u,0),h=0;h<c.length;h++)r=u.substr(c[h],2),t=i(u,c[h]),"81"===r&&(e=Dr(t),a.push(["MAIL",e])),"82"===r&&(e=Dr(t),a.push(["DNS",e])),"84"===r&&(e=on.hex2dn(t,0),a.push(["DN",e])),"86"===r&&(e=Dr(t),a.push(["URI",e])),"87"===r&&(e=zr(t),a.push(["IP",e]));return a},this.getExtCRLDistributionPoints=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"cRLDistributionPoints",array:[]};e&&(i.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){var u=o(t,s[a]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(t){for(var e={},r=n(t,0),i=0;i<r.length;i++){var s=t.substr(r[i],2),a=o(t,r[i]);"a0"==s&&(e.dpname=this.getDistributionPointName(a))}return e},this.getDistributionPointName=function(t){for(var e={},r=n(t,0),i=0;i<r.length;i++){var s=t.substr(r[i],2),a=o(t,r[i]);"a0"==s&&(e.full=this.getGeneralNames(a))}return e},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var e=new Array,r=n(this.hex,t.vidx),i=0;i<r.length;i++)try{var o=Dr(s(this.hex,r[i],[0,0,0],"86"));e.push(o)}catch(t){}return e},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var e={ocsp:[],caissuer:[]},r=n(this.hex,t.vidx),i=0;i<r.length;i++){var o=s(this.hex,r[i],[0],"06"),a=s(this.hex,r[i],[1],"86");"2b06010505073001"===o&&e.ocsp.push(Dr(a)),"2b06010505073002"===o&&e.caissuer.push(Dr(a))}return e},this.getExtAuthorityInfoAccess=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"authorityInfoAccess",array:[]};e&&(i.critical=!0);for(var u=n(t,0),c=0;c<u.length;c++){var h=a(t,u[c],[0],"06"),l=Dr(s(t,u[c],[1],"86"));if("2b06010505073001"==h)i.array.push({ocsp:l});else{if("2b06010505073002"!=h)throw new Error("unknown method: "+h);i.array.push({caissuer:l})}}return i},this.getExtCertificatePolicies=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"certificatePolicies",array:[]};e&&(i.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){var u=o(t,s[a]),c=this.getPolicyInformation(u);i.array.push(c)}return i},this.getPolicyInformation=function(t){var e={},r=s(t,0,[0],"06");e.policyoid=d(r);var i=l(t,0,[1],"30");if(-1!=i){e.array=[];for(var a=n(t,i),u=0;u<a.length;u++){var c=o(t,a[u]),h=this.getPolicyQualifierInfo(c);e.array.push(h)}}return e},this.getPolicyQualifierInfo=function(t){var e={},r=s(t,0,[0],"06");if("2b06010505070201"===r){var n=a(t,0,[1],"16");e.cps=Lr(n)}else if("2b06010505070202"===r){var i=u(t,0,[1],"30");e.unotice=this.getUserNotice(i)}return e},this.getUserNotice=function(t){for(var e={},r=n(t,0),i=0;i<r.length;i++){var s=o(t,r[i]);"30"!=s.substr(0,2)&&(e.exptext=this.getDisplayText(s))}return e},this.getDisplayText=function(t){var e={};return e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[t.substr(0,2)],e.str=Lr(i(t,0)),e},this.getExtCRLNumber=function(t,e){var r={extname:"cRLNumber"};if(e&&(r.critical=!0),"02"==t.substr(0,2))return r.num={hex:i(t,0)},r;throw new Error("hExtV parse error: "+t)},this.getExtCRLReason=function(t,e){var r={extname:"cRLReason"};if(e&&(r.critical=!0),"0a"==t.substr(0,2))return r.code=parseInt(i(t,0),16),r;throw new Error("hExtV parse error: "+t)},this.getExtOcspNonce=function(t,e){var r={extname:"ocspNonce"};e&&(r.critical=!0);var n=i(t,0);return r.hex=n,r},this.getExtOcspNoCheck=function(t,e){var r={extname:"ocspNoCheck"};return e&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;t=o(this.hex,r.vidx),e=r.critical}var i={extname:"adobeTimeStamp"};e&&(i.critical=!0);var s=n(t,0);if(s.length>1){var a=o(t,s[1]),u=this.getGeneralName(a);null!=u.uri&&(i.uri=u.uri)}if(s.length>2){var c=o(t,s[2]);"0101ff"==c&&(i.reqauth=!0),"010100"==c&&(i.reqauth=!1)}return i},this.getX500NameRule=function(t){for(var e=null,r=[],n=0;n<t.length;n++)for(var i=t[n],o=0;o<i.length;o++)r.push(i[o]);for(n=0;n<r.length;n++){var s=r[n],a=s.ds,u=s.value,c=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=c)return"mixed";if(Sr.lang.String.isMail(u))continue;return"mixed"}if("C"==c){if("prn"==a)continue;return"mixed"}if(null==e)e=a;else if(e!==a)return"mixed"}return null==e?"prn":e},this.getX500Name=function(t){var e=this.getX500NameArray(t);return{array:e,str:this.dnarraytostr(e)}},this.getX500NameArray=function(t){for(var e=[],r=n(t,0),i=0;i<r.length;i++)e.push(this.getRDN(o(t,r[i])));return e},this.getRDN=function(t){for(var e=[],r=n(t,0),i=0;i<r.length;i++)e.push(this.getAttrTypeAndValue(o(t,r[i])));return e},this.getAttrTypeAndValue=function(t){var e={type:null,value:null,ds:null},r=n(t,0),i=s(t,r[0],[],"06"),o=s(t,r[1],[]),a=Sr.asn1.ASN1Util.oidHexToInt(i);return e.type=Sr.asn1.x509.OID.oid2atype(a),e.ds=this.HEX2STAG[t.substr(r[1],2)],"bmp"!=e.ds?e.value=Dr(o):e.value=Yr(o),e},this.readCertPEM=function(t){this.readCertHex(v(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{h(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getParam=function(){var t={};return t.version=this.getVersion(),t.serial={hex:this.getSerialNumberHex()},t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.notbefore=this.getNotBefore(),t.notafter=this.getNotAfter(),t.subject=this.getSubject(),t.sbjpubkey=jr(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(t.ext=this.getExtParamArray()),t.sighex=this.getSignatureValueHex(),t},this.getExtParamArray=function(t){null==t&&-1!=l(this.hex,0,[0,"[3]"])&&(t=c(this.hex,0,[0,"[3]",0],"30"));for(var e=[],r=n(t,0),i=0;i<r.length;i++){var s=o(t,r[i]),a=this.getExtParam(s);null!=a&&e.push(a)}return e},this.getExtParam=function(t){var e=n(t,0).length;if(2!=e&&3!=e)throw new Error("wrong number elements in Extension: "+e+" "+t);var r=p(s(t,0,[0],"06")),i=!1;3==e&&"0101ff"==u(t,0,[1])&&(i=!0);var o=u(t,0,[e-1,0]),a=void 0;if("2.5.29.14"==r?a=this.getExtSubjectKeyIdentifier(o,i):"2.5.29.15"==r?a=this.getExtKeyUsage(o,i):"2.5.29.17"==r?a=this.getExtSubjectAltName(o,i):"2.5.29.18"==r?a=this.getExtIssuerAltName(o,i):"2.5.29.19"==r?a=this.getExtBasicConstraints(o,i):"2.5.29.31"==r?a=this.getExtCRLDistributionPoints(o,i):"2.5.29.32"==r?a=this.getExtCertificatePolicies(o,i):"2.5.29.35"==r?a=this.getExtAuthorityKeyIdentifier(o,i):"2.5.29.37"==r?a=this.getExtExtKeyUsage(o,i):"1.3.6.1.5.5.7.1.1"==r?a=this.getExtAuthorityInfoAccess(o,i):"2.5.29.20"==r?a=this.getExtCRLNumber(o,i):"2.5.29.21"==r?a=this.getExtCRLReason(o,i):"1.3.6.1.5.5.7.48.1.2"==r?a=this.getExtOcspNonce(o,i):"1.3.6.1.5.5.7.48.1.5"==r?a=this.getExtOcspNoCheck(o,i):"1.2.840.113583.1.1.9.1"==r&&(a=this.getExtAdobeTimeStamp(o,i)),null!=a)return a;var c={extname:r,extn:o};return i&&(c.critical=!0),c},this.findExt=function(t,e){for(var r=0;r<t.length;r++)if(t[r].extname==e)return t[r];return null},this.updateExtCDPFullURI=function(t,e){var r=this.findExt(t,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)if(null!=n[i].dpname&&null!=n[i].dpname.full)for(var o=n[i].dpname.full,s=0;s<o.length;s++){var a=o[i];null!=a.uri&&(a.uri=e)}},this.updateExtAIAOCSP=function(t,e){var r=this.findExt(t,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].ocsp&&(n[i].ocsp=e)},this.updateExtAIACAIssuer=function(t,e){var r=this.findExt(t,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].caissuer&&(n[i].caissuer=e)},this.dnarraytostr=function(t){return"/"+t.map(function(t){return function e(t){return t.map(function(t){return function e(t){return t.type+"="+t.value}(t).replace(/\+/,"\\+")}).join("+")}(t).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var t,e,r,n=function t(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},i=function t(e){for(var r="",n=e.array,i=0;i<n.length;i++){var o=n[i];if(r+="    policy oid: "+o.policyoid+"\n",void 0!==o.array)for(var s=0;s<o.array.length;s++){var a=o.array[s];void 0!==a.cps&&(r+="    cps: "+a.cps+"\n")}}return r},o=function t(e){for(var r="",n=e.array,i=0;i<n.length;i++){var o=n[i];try{void 0!==o.dpname.full[0].uri&&(r+="    "+o.dpname.full[0].uri+"\n")}catch(t){}try{void 0!==o.dname.full[0].dn.hex&&(r+="    "+on.hex2dn(o.dpname.full[0].dn.hex)+"\n")}catch(t){}}return r},s=function t(e){for(var r="",n=e.array,i=0;i<n.length;i++){var o=n[i];void 0!==o.caissuer&&(r+="    caissuer: "+o.caissuer+"\n"),void 0!==o.ocsp&&(r+="    ocsp: "+o.ocsp+"\n")}return r};if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+$r(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+$r(e.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var a=0;a<r.length;a++){var u=r[a],c=Sr.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var h="";if(!0===u.critical&&(h="CRITICAL"),t+="  "+c+" "+h+":\n","basicConstraints"===c){var l=this.getExtBasicConstraints();void 0===l.cA?t+="    {}\n":(t+="    cA=true",void 0!==l.pathLen&&(t+=", pathLen="+l.pathLen),t+="\n")}else if("keyUsage"===c)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===c)t+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===c){var f=this.getExtAuthorityKeyIdentifier();void 0!==f.kid&&(t+="    kid="+f.kid.hex+"\n")}else"extKeyUsage"===c?t+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===c?t+="    "+n(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"===c?t+=o(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===c?t+=s(this.getExtAuthorityInfoAccess()):"certificatePolicies"===c&&(t+=i(this.getExtCertificatePolicies()))}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?this.readCertPEM(t):Sr.lang.String.isHex(t)&&this.readCertHex(t))}tn.getKey=function(t,e,r){var R,n=(v=Fr).getChildIdx,i=(v.getV,v.getVbyList),o=Sr.crypto,s=o.ECDSA,a=o.DSA,u=Me,c=Mr,h=tn;if(void 0!==u&&t instanceof u)return t;if(void 0!==s&&t instanceof s)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new s({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new s({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(P=new u).setPublic(t.n,t.e),P;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(P=new u).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),P;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(P=new u).setPrivate(t.n,t.e,t.d),P;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(P=new a).setPublic(t.p,t.q,t.g,t.y),P;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(P=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),P;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(P=new u).setPublic(Rr(t.n),Rr(t.e)),P;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(P=new u).setPrivateEx(Rr(t.n),Rr(t.e),Rr(t.d),Rr(t.p),Rr(t.q),Rr(t.dp),Rr(t.dq),Rr(t.qi)),P;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(P=new u).setPrivate(Rr(t.n),Rr(t.e),Rr(t.d)),P;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var l=(k=new s({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+Rr(t.x)).slice(-l)+("0000000000"+Rr(t.y)).slice(-l);return k.setPublicKeyHex(f),k}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){l=(k=new s({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+Rr(t.x)).slice(-l)+("0000000000"+Rr(t.y)).slice(-l);var g=("0000000000"+Rr(t.d)).slice(-l);return k.setPublicKeyHex(f),k.setPrivateKeyHex(g),k}if("pkcs5prv"===r){var d,p=t,v=Fr;if(9===(d=n(p,0)).length)(P=new u).readPKCS5PrvKeyHex(p);else if(6===d.length)(P=new a).readPKCS5PrvKeyHex(p);else{if(!(d.length>2&&"04"===p.substr(d[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(P=new s).readPKCS5PrvKeyHex(p)}return P}if("pkcs8prv"===r)return h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===r)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===r)return on.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return on.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var y=Mr(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(y)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var m=c(t,"RSA PRIVATE KEY");return h.getKey(m,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var _=i(R=c(t,"DSA PRIVATE KEY"),0,[1],"02"),S=i(R,0,[2],"02"),b=i(R,0,[3],"02"),F=i(R,0,[4],"02"),E=i(R,0,[5],"02");return(P=new a).setPrivate(new w(_,16),new w(S,16),new w(b,16),new w(F,16),new w(E,16)),P}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED"))return m=c(t,"EC PRIVATE KEY"),h.getKey(m,null,"pkcs5prv");if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var x=h.getDecryptedKeyHex(t,e),A=new Me;return A.readPKCS5PrvKeyHex(x),A}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var k,P=i(R=h.getDecryptedKeyHex(t,e),0,[1],"04"),C=i(R,0,[2,0],"06"),T=i(R,0,[3,0],"03").substr(2);if(void 0===Sr.crypto.OID.oidhex2name[C])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+C);return(k=new s({curve:Sr.crypto.OID.oidhex2name[C]})).setPublicKeyHex(T),k.setPrivateKeyHex(P),k.isPublic=!1,k}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return _=i(R=h.getDecryptedKeyHex(t,e),0,[1],"02"),S=i(R,0,[2],"02"),b=i(R,0,[3],"02"),F=i(R,0,[4],"02"),E=i(R,0,[5],"02"),(P=new a).setPrivate(new w(_,16),new w(S,16),new w(b,16),new w(F,16),new w(E,16)),P;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")},tn.generateKeypair=function(t,e){if("RSA"==t){var r=e;(s=new Me).generate(r,"10001"),s.isPrivate=!0,s.isPublic=!0;var n=new Me,i=s.n.toString(16),o=s.e.toString(16);return n.setPublic(i,o),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=n,a}if("EC"==t){var s,a,u=e,c=new Sr.crypto.ECDSA({curve:u}).generateKeyPairHex();return(s=new Sr.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),s.setPrivateKeyHex(c.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(n=new Sr.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=n,a}throw new Error("unknown algorithm: "+t)},tn.getPEM=function(t,e,r,n,i,o){var s=Sr,a=s.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,h=a.ASN1Util.newObject,l=a.x509.SubjectPublicKeyInfo,f=s.crypto,g=f.DSA,d=f.ECDSA,p=Me;function y(t){return h({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function m(t){return h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function _(t){return h({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==p&&t instanceof p||void 0!==g&&t instanceof g||void 0!==d&&t instanceof d)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return jr(F=new l(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===r||null==r)&&1==t.isPrivate)return jr(F=y(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===r||null==r)&&1==t.isPrivate){var S=new u({name:t.curveName}).getEncodedHex(),b=m(t).getEncodedHex(),w="";return(w+=jr(S,"EC PARAMETERS"))+jr(b,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==g&&t instanceof g&&(void 0===r||null==r)&&1==t.isPrivate)return jr(F=_(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==r&&null!=r&&1==t.isPrivate){var F=y(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",F,r,n,o)}if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==r&&null!=r&&1==t.isPrivate)return F=m(t).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",F,r,n,o);if("PKCS5PRV"==e&&void 0!==g&&t instanceof g&&void 0!==r&&null!=r&&1==t.isPrivate)return F=_(t).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",F,r,n,o);var E=function t(e,r){var n=x(e,r);return new h({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},x=function t(e,r){var n=v.lib.WordArray.random(8),i=v.lib.WordArray.random(8),o=v.PBKDF2(r,n,{keySize:6,iterations:100}),s=v.enc.Hex.parse(e),a=v.TripleDES.encrypt(s,o,{iv:i})+"",u={};return u.ciphertext=a,u.pbkdf2Salt=v.enc.Hex.stringify(n),u.pbkdf2Iter=100,u.encryptionSchemeAlg="DES-EDE3-CBC",u.encryptionSchemeIV=v.enc.Hex.stringify(i),u};if("PKCS8PRV"==e&&null!=p&&t instanceof p&&1==t.isPrivate){var A=y(t).getEncodedHex();return F=h({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===r||null==r?jr(F,"PRIVATE KEY"):jr(b=E(F,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate)return A=new h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),F=h({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===r||null==r?jr(F,"PRIVATE KEY"):jr(b=E(F,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==e&&void 0!==g&&t instanceof g&&1==t.isPrivate)return A=new c({bigint:t.x}).getEncodedHex(),F=h({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===r||null==r?jr(F,"PRIVATE KEY"):jr(b=E(F,r),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},tn.getKeyFromCSRPEM=function(t){var e=Mr(t,"CERTIFICATE REQUEST");return tn.getKeyFromCSRHex(e)},tn.getKeyFromCSRHex=function(t){var e=tn.parseCSRHex(t);return tn.getKey(e.p8pubkeyhex,null,"pkcs8pub")},tn.parseCSRHex=function(t){var e=Fr,r=e.getChildIdx,n=e.getTLV,i={},o=t;if("30"!=o.substr(0,2))throw new Error("malformed CSR(code:001)");var s=r(o,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if("30"!=o.substr(s[0],2))throw new Error("malformed CSR(code:003)");var a=r(o,s[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=n(o,a[2]),i},tn.getKeyID=function(t){var e=tn,r=Fr;"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&(t=e.getKey(t));var n=Mr(e.getPEM(t)),i=r.getIdxbyList(n,0,[1]),o=r.getV(n,i).substring(2);return Sr.crypto.Util.hashHex(o,"sha1")},tn.getJWKFromKey=function(t){var e={};if(t instanceof Me&&t.isPrivate)return e.kty="RSA",e.n=Tr(t.n.toString(16)),e.e=Tr(t.e.toString(16)),e.d=Tr(t.d.toString(16)),e.p=Tr(t.p.toString(16)),e.q=Tr(t.q.toString(16)),e.dp=Tr(t.dmp1.toString(16)),e.dq=Tr(t.dmq1.toString(16)),e.qi=Tr(t.coeff.toString(16)),e;if(t instanceof Me&&t.isPublic)return e.kty="RSA",e.n=Tr(t.n.toString(16)),e.e=Tr(t.e.toString(16)),e;if(t instanceof Sr.crypto.ECDSA&&t.isPrivate){if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw new Error("unsupported curve name for JWT: "+n);var r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=Tr(r.x),e.y=Tr(r.y),e.d=Tr(t.prvKeyHex),e}if(t instanceof Sr.crypto.ECDSA&&t.isPublic){var n;if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw new Error("unsupported curve name for JWT: "+n);return r=t.getPublicKeyXYHex(),e.kty="EC",e.crv=n,e.x=Tr(r.x),e.y=Tr(r.y),e}throw new Error("not supported key object")},Me.getPosArrayOfChildrenFromHex=function(t){return Fr.getChildIdx(t,0)},Me.getHexValueArrayOfChildrenFromHex=function(t){var e,r=Fr.getV,n=r(t,(e=Me.getPosArrayOfChildrenFromHex(t))[0]),i=r(t,e[1]),o=r(t,e[2]),s=r(t,e[3]),a=r(t,e[4]),u=r(t,e[5]),c=r(t,e[6]),h=r(t,e[7]),l=r(t,e[8]);return(e=new Array).push(n,i,o,s,a,u,c,h,l),e},Me.prototype.readPrivateKeyFromPEMString=function(t){var e=Mr(t),r=Me.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},Me.prototype.readPKCS5PrvKeyHex=function(t){var e=Me.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Me.prototype.readPKCS8PrvKeyHex=function(t){var e,r,n,i,o,s,a,u,c=Fr,h=c.getVbyListEx;if(!1===c.isASN1HEX(t))throw new Error("not ASN.1 hex string");try{e=h(t,0,[2,0,1],"02"),r=h(t,0,[2,0,2],"02"),n=h(t,0,[2,0,3],"02"),i=h(t,0,[2,0,4],"02"),o=h(t,0,[2,0,5],"02"),s=h(t,0,[2,0,6],"02"),a=h(t,0,[2,0,7],"02"),u=h(t,0,[2,0,8],"02")}catch(t){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,r,n,i,o,s,a,u)},Me.prototype.readPKCS5PubKeyHex=function(t){var e=Fr,r=e.getV;if(!1===e.isASN1HEX(t))throw new Error("keyHex is not ASN.1 hex string");var n=e.getChildIdx(t,0);if(2!==n.length||"02"!==t.substr(n[0],2)||"02"!==t.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=r(t,n[0]),o=r(t,n[1]);this.setPublic(i,o)},Me.prototype.readPKCS8PubKeyHex=function(t){var e=Fr;if(!1===e.isASN1HEX(t))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==e.getTLVbyListEx(t,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(r)},Me.prototype.readCertPubKeyHex=function(t,e){var r,n;(r=new on).readCertHex(t),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)},new RegExp("[^0-9a-f]","gi"),Me.prototype.sign=function(t,e){var r=function t(r){return Sr.crypto.Util.hashString(r,e)}(t);return this.signWithMessageHash(r,e)},Me.prototype.signWithMessageHash=function(t,e){var r=Oe(Sr.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return en(this.doPrivate(r).toString(16),this.n.bitLength())},Me.prototype.signPSS=function(t,e,r){var n=function t(r){return Sr.crypto.Util.hashHex(r,e)}(Nr(t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(n,e,r)},Me.prototype.signWithMessageHashPSS=function(t,e,r){var n,i=Lr(t),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),u=function t(r){return Sr.crypto.Util.hashHex(r,e)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw new Error("invalid salt length");if(a<o+r+2)throw new Error("data too long");var c="";r>0&&(c=new Array(r),(new Be).nextBytes(c),c=String.fromCharCode.apply(String,c));var h=Lr(u(Nr("\0\0\0\0\0\0\0\0"+i+c))),l=[];for(n=0;n<a-r-o-2;n+=1)l[n]=0;var f=String.fromCharCode.apply(String,l)+""+c,g=rn(h,f.length,u),d=[];for(n=0;n<f.length;n+=1)d[n]=f.charCodeAt(n)^g.charCodeAt(n);var p=65280>>8*a-s&255;for(d[0]&=~p,n=0;n<o;n++)d.push(h.charCodeAt(n));return d.push(188),en(this.doPrivate(new w(d)).toString(16),this.n.bitLength())},Me.prototype.verify=function(t,e){if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=Oe(e,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r).toString(16);if(i.length+3!=n/4)return!1;var o=nn(i.replace(/^1f+00/,""));if(0==o.length)return!1;var s=o[0];return o[1]==function t(e){return Sr.crypto.Util.hashString(e,s)}(t)},Me.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Oe(e,16);if(r.bitLength()>this.n.bitLength())return 0;var n=nn(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=n.length&&(n[0],n[1]==t)},Me.prototype.verifyPSS=function(t,e,r,n){var i=function t(e){return Sr.crypto.Util.hashHex(e,r)}(Nr(t));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(i,e,r,n)},Me.prototype.verifyWithMessageHashPSS=function(t,e,r,n){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new w(e,16),s=function t(e){return Sr.crypto.Util.hashHex(e,r)},a=Lr(t),u=a.length,c=this.n.bitLength()-1,h=Math.ceil(c/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=h-u-2;else if(n<-2)throw new Error("invalid salt length");if(h<u+n+2)throw new Error("data too long");var l=this.doPublic(o).toByteArray();for(i=0;i<l.length;i+=1)l[i]&=255;for(;l.length<h;)l.unshift(0);if(188!==l[h-1])throw new Error("encoded message does not end in 0xbc");var f=(l=String.fromCharCode.apply(String,l)).substr(0,h-u-1),g=l.substr(f.length,u),d=65280>>8*h-c&255;if(0!=(f.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var p=rn(g,f.length,s),v=[];for(i=0;i<f.length;i+=1)v[i]=f.charCodeAt(i)^p.charCodeAt(i);v[0]&=~d;var y=h-u-n-2;for(i=0;i<y;i+=1)if(0!==v[i])throw new Error("leftmost octets not zero");if(1!==v[y])throw new Error("0x01 marker not found");return g===Lr(s(Nr("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-n)))))},Me.SALT_LEN_HLEN=-1,Me.SALT_LEN_MAX=-2,Me.SALT_LEN_RECOVER=-2,on.hex2dn=function(t,e){void 0===e&&(e=0);var r=new on;return Fr.getTLV(t,e),r.getX500Name(t).str},on.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw new Error("malformed RDN");for(var r=new Array,n=Fr.getChildIdx(t,e),i=0;i<n.length;i++)r.push(on.hex2attrTypeValue(t,n[i]));return(r=r.map(function(t){return t.replace("+","\\+")})).join("+")},on.hex2attrTypeValue=function(t,e){var r=Fr,n=r.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw new Error("malformed attribute type and value");var i=r.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var o=n(t,i[0]),s=Sr.asn1.ASN1Util.oidHexToInt(o);return Sr.asn1.x509.OID.oid2atype(s)+"="+Lr(n(t,i[1]))},on.getPublicKeyFromCertHex=function(t){var e=new on;return e.readCertHex(t),e.getPublicKey()},on.getPublicKeyFromCertPEM=function(t){var e=new on;return e.readCertPEM(t),e.getPublicKey()},on.getPublicKeyInfoPropOfCertPEM=function(t){var e,r,n=Fr.getVbyList,i={algparam:null};return(e=new on).readCertPEM(t),r=e.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},on.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Sr&&Sr||(e.KJUR=Sr={}),void 0!==Sr.jws&&Sr.jws||(Sr.jws={}),Sr.jws.JWS=function(){var t=Sr.jws.JWS.isSafeJSONString;this.parseJWS=function(e,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=n[1],o=n[2],s=n[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!r){var u=Rr(s),c=Oe(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var h=wr(i),l=wr(o);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=l,!t(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}},Sr.jws.JWS.sign=function(t,e,r,n,i){var o,s,a,u=Sr,c=u.jws.JWS,h=c.readSafeJSONString,l=c.isSafeJSONString,f=u.crypto,d=(f.ECDSA,f.Mac),p=f.Signature,v=JSON;if("string"!=typeof e&&"object"!=(void 0===e?"undefined":g(e)))throw"spHeader must be JSON string or object: "+e;if("object"==(void 0===e?"undefined":g(e))&&(s=e,o=v.stringify(s)),"string"==typeof e){if(!l(o=e))throw"JWS Head is not safe JSON string: "+o;s=h(o)}if(a=r,"object"==(void 0===r?"undefined":g(r))&&(a=v.stringify(r)),""!=t&&null!=t||void 0===s.alg||(t=s.alg),""!=t&&null!=t&&void 0===s.alg&&(s.alg=t,o=v.stringify(s)),t!==s.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+s.alg;var y=null;if(void 0===c.jwsalg2sigalg[t])throw"unsupported alg name: "+t;y=c.jwsalg2sigalg[t];var m=br(o)+"."+br(a),_="";if("Hmac"==y.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var S=new d({alg:y,prov:"cryptojs",pass:n});S.updateString(m),_=S.doFinal()}else if(-1!=y.indexOf("withECDSA")){(w=new p({alg:y})).init(n,i),w.updateString(m);var b=w.sign();_=Sr.crypto.ECDSA.asn1SigToConcatSig(b)}else{var w;"none"!=y&&((w=new p({alg:y})).init(n,i),w.updateString(m),_=w.sign())}return m+"."+Tr(_)},Sr.jws.JWS.verify=function(t,e,r){var n,i=Sr,o=i.jws.JWS,s=o.readSafeJSONString,a=i.crypto,u=a.ECDSA,c=a.Mac,h=a.Signature;void 0!==g(Me)&&(n=Me);var l=t.split(".");if(3!==l.length)return!1;var y,f=l[0]+"."+l[1],d=Rr(l[2]),p=s(wr(l[0])),v=null;if(void 0===p.alg)throw"algorithm not specified in header";if(y=(v=p.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=tn.getKey(e)),!("RS"!=y&&"PS"!=y||e instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==y&&!(e instanceof u))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===o.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+v;if("none"==(m=o.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var _=new c({alg:m,pass:e});return _.updateString(f),d==_.doFinal()}if(-1!=m.indexOf("withECDSA")){var S,b=null;try{b=u.concatSigToASN1Sig(d)}catch(t){return!1}return(S=new h({alg:m})).init(e),S.updateString(f),S.verify(b)}return(S=new h({alg:m})).init(e),S.updateString(f),S.verify(d)},Sr.jws.JWS.parse=function(t){var e,r,n,i=t.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],r=i[1],3==i.length&&(n=i[2]),o.headerObj=Sr.jws.JWS.readSafeJSONString(wr(e)),o.payloadObj=Sr.jws.JWS.readSafeJSONString(wr(r)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=wr(r):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==n&&(o.sigHex=Rr(n)),o},Sr.jws.JWS.verifyJWT=function(t,e,r){var n=Sr.jws,i=n.JWS,o=i.readSafeJSONString,s=i.inArray,a=i.includedArray,u=t.split("."),c=u[0],h=u[1],l=(Rr(u[2]),o(wr(c))),f=o(wr(h));if(void 0===l.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!s(l.alg,r.alg))return!1;if(void 0!==f.iss&&"object"===g(r.iss)&&!s(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"===g(r.sub)&&!s(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"===g(r.aud))if("string"==typeof f.aud){if(!s(f.aud,r.aud))return!1}else if("object"==g(f.aud)&&!a(f.aud,r.aud))return!1;var d=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(d=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<d||void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-r.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-r.gracePeriod||void 0!==f.jti&&void 0!==r.jti&&f.jti!==r.jti||!i.verify(t,e,r.alg))},Sr.jws.JWS.includedArray=function(t,e){var r=Sr.jws.JWS.inArray;if(null===t)return!1;if("object"!==(void 0===t?"undefined":g(t)))return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e))return!1;return!0},Sr.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!==(void 0===e?"undefined":g(e)))return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1},Sr.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Sr.jws.JWS.isSafeJSONString=function(t,e,r){var n=null;try{return"object"!=(void 0===(n=_r(t))?"undefined":g(n))||n.constructor===Array?0:(e&&(e[r]=n),1)}catch(t){return 0}},Sr.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=(void 0===(e=_r(t))?"undefined":g(e))||e.constructor===Array?null:e}catch(t){return null}},Sr.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},Sr.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var r=Nr(e);return Tr(Sr.crypto.Util.hashHex(r,"sha256"))},Sr.jws.IntDate={},Sr.jws.IntDate.get=function(t){var e=Sr.jws.IntDate,r=e.getNow,n=e.getZulu;if("now"==t)return r();if("now + 1hour"==t)return r()+3600;if("now + 1day"==t)return r()+86400;if("now + 1month"==t)return r()+2592e3;if("now + 1year"==t)return r()+31536e3;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},Sr.jws.IntDate.getZulu=function(t){return Vr(t)},Sr.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Sr.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},Sr.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},e.SecureRandom=Be,e.rng_seed_time=Re,e.BigInteger=w,e.RSAKey=Me;var sn=Sr.crypto.EDSA;e.EDSA=sn;var an=Sr.crypto.DSA;e.DSA=an;var un=Sr.crypto.Signature;e.Signature=un;var cn=Sr.crypto.MessageDigest;e.MessageDigest=cn;var hn=Sr.crypto.Mac;e.Mac=hn;var ln=Sr.crypto.Cipher;e.Cipher=ln,e.KEYUTIL=tn,e.ASN1HEX=Fr,e.X509=on,e.CryptoJS=v,e.b64tohex=S,e.b64toBA=b,e.stoBA=Er,e.BAtos=xr,e.BAtohex=Ar,e.stohex=kr,e.stob64=function fn(t){return _(kr(t))},e.stob64u=function gn(t){return Pr(_(kr(t)))},e.b64utos=function dn(t){return xr(b(Cr(t)))},e.b64tob64u=Pr,e.b64utob64=Cr,e.hex2b64=_,e.hextob64u=Tr,e.b64utohex=Rr,e.utf8tob64u=br,e.b64utoutf8=wr,e.utf8tob64=function pn(t){return _(Kr(Gr(t)))},e.b64toutf8=function vn(t){return decodeURIComponent(qr(S(t)))},e.utf8tohex=Ir,e.hextoutf8=Dr,e.hextorstr=Lr,e.rstrtohex=Nr,e.hextob64=Ur,e.hextob64nl=Br,e.b64nltohex=Or,e.hextopem=jr,e.pemtohex=Mr,e.hextoArrayBuffer=function yn(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),r=new DataView(e),n=0;n<t.length/2;n++)r.setUint8(n,parseInt(t.substr(2*n,2),16));return e},e.ArrayBuffertohex=function mn(t){for(var e="",r=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+r.getUint8(n).toString(16)).slice(-2);return e},e.zulutomsec=Hr,e.zulutosec=Vr,e.zulutodate=function _n(t){return new Date(Hr(t))},e.datetozulu=function Sn(t,e,r){var n,i=t.getUTCFullYear();if(e){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),r){var o=t.getUTCMilliseconds();0!==o&&(n+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return n+"Z"},e.uricmptohex=Kr,e.hextouricmp=qr,e.ipv6tohex=Jr,e.hextoipv6=Wr,e.hextoip=zr,e.iptohex=function bn(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Jr(t);throw e}var r=t.split(".");if(4!==r.length)throw e;var n="";try{for(var i=0;i<4;i++)n+=("0"+parseInt(r[i]).toString(16)).slice(-2);return n}catch(t){throw e}},e.encodeURIComponentAll=Gr,e.newline_toUnix=function wn(t){return t.replace(/\r\n/gm,"\n")},e.newline_toDos=function Fn(t){return(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=$r,e.intarystrtohex=function En(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map(function(t,e,r){var n=parseInt(t);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)}).join("")}catch(t){throw"malformed integer array string: "+t}},e.strdiffidx=function t(e,r){var n=e.length;e.length>r.length&&(n=r.length);for(var i=0;i<n;i++)if(e.charCodeAt(i)!=r.charCodeAt(i))return i;return e.length!=r.length?n:-1},e.KJUR=Sr;var xn=Sr.crypto;e.crypto=xn;var An=Sr.asn1;e.asn1=An;var kn=Sr.jws;e.jws=kn;var Pn=Sr.lang;e.lang=Pn}).call(this,r(28).Buffer)},function(t,e,r){(function(t){var n=r(30),i=r(31),o=r(32);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function i(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function s(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function c(t,e){if(u.isBuffer(e)){var r=0|g(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function n(t){return t!=t}(e.length)?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(h(e),t=a(t,e<0?0:0|g(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|g(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function g(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return K(t).length;e=(""+e).toLowerCase(),n=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function S(t,e,r,n){return J(K(e,t.length-r),t,r,n)}function b(t,e,r,n){return J(function i(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return b(t,e,r,n)}function F(t,e,r,n){return J(q(e),t,r,n)}function E(t,e,r,n){return J(function i(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function A(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function f(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}e.Buffer=u,e.SlowBuffer=function k(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function P(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return c(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function n(t,e,r,i){return h(e),e<=0?a(t,e):void 0!==r?"string"==typeof i?a(t,e).fill(r,i):a(t,e).fill(r):a(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function t(e){return!(null==e||!e._isBuffer)},u.compare=function t(e,r){if(!u.isBuffer(e)||!u.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},u.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function t(e,r){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=u.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function t(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)v(this,r,r+1);return this},u.prototype.swap32=function t(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)v(this,r,r+3),v(this,r+1,r+2);return this},u.prototype.swap64=function t(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)v(this,r,r+7),v(this,r+1,r+6),v(this,r+2,r+5),v(this,r+3,r+4);return this},u.prototype.toString=function t(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):p.apply(this,arguments)},u.prototype.equals=function t(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function t(){var r="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(r+=" ... ")),"<Buffer "+r+">"},u.prototype.compare=function t(e,r,n,i,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(r>>>=0),c=Math.min(s,a),h=this.slice(i,o),l=e.slice(r,n),f=0;f<c;++f)if(h[f]!==l[f]){s=h[f],a=l[f];break}return s<a?-1:a<s?1:0},u.prototype.includes=function t(e,r,n){return-1!==this.indexOf(e,r,n)},u.prototype.indexOf=function t(e,r,n){return y(this,e,r,n,!0)},u.prototype.lastIndexOf=function t(e,r,n){return y(this,e,r,n,!1)},u.prototype.write=function t(e,r,n,i){if(void 0===r)i="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)i=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-r;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return _(this,e,r,n);case"utf8":case"utf-8":return S(this,e,r,n);case"ascii":return b(this,e,r,n);case"latin1":case"binary":return w(this,e,r,n);case"base64":return F(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},u.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=V(t[o]);return i}function D(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function O(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||O(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function M(t,e,r,n,o){return o||O(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function t(e,r){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(r=void 0===r?i:~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<e&&(r=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,r)).__proto__=u.prototype;else{var o=r-e;n=new u(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return i},u.prototype.readUIntBE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=this[e+--r],o=1;r>0&&(o*=256);)i+=this[e+--r]*o;return i},u.prototype.readUInt8=function t(e,r){return r||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function t(e,r){return r||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function t(e,r){return r||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function t(e,r){return r||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function t(e,r){return r||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*r)),i},u.prototype.readIntBE=function t(e,r,n){e|=0,r|=0,n||L(e,r,this.length);for(var i=r,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*r)),s},u.prototype.readInt8=function t(e,r){return r||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function t(e,r){r||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function t(e,r){r||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function t(e,r){return r||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function t(e,r){return r||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function t(e,r){return r||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function t(e,r){return r||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function t(e,r){return r||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function t(e,r){return r||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function t(e,r,n,i){e=+e,r|=0,n|=0,i||N(this,e,r,n,Math.pow(2,8*n)-1,0);var o=1,s=0;for(this[r]=255&e;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n},u.prototype.writeUIntBE=function t(e,r,n,i){e=+e,r|=0,n|=0,i||N(this,e,r,n,Math.pow(2,8*n)-1,0);var o=n-1,s=1;for(this[r+o]=255&e;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n},u.prototype.writeUInt8=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},u.prototype.writeUInt16LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):U(this,e,r,!0),r+2},u.prototype.writeUInt16BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):U(this,e,r,!1),r+2},u.prototype.writeUInt32LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):B(this,e,r,!0),r+4},u.prototype.writeUInt32BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):B(this,e,r,!1),r+4},u.prototype.writeIntLE=function t(e,r,n,i){if(e=+e,r|=0,!i){var o=Math.pow(2,8*n-1);N(this,e,r,n,o-1,-o)}var s=0,a=1,u=0;for(this[r]=255&e;++s<n&&(a*=256);)e<0&&0===u&&0!==this[r+s-1]&&(u=1),this[r+s]=(e/a|0)-u&255;return r+n},u.prototype.writeIntBE=function t(e,r,n,i){if(e=+e,r|=0,!i){var o=Math.pow(2,8*n-1);N(this,e,r,n,o-1,-o)}var s=n-1,a=1,u=0;for(this[r+s]=255&e;--s>=0&&(a*=256);)e<0&&0===u&&0!==this[r+s+1]&&(u=1),this[r+s]=(e/a|0)-u&255;return r+n},u.prototype.writeInt8=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},u.prototype.writeInt16LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):U(this,e,r,!0),r+2},u.prototype.writeInt16BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):U(this,e,r,!1),r+2},u.prototype.writeInt32LE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):B(this,e,r,!0),r+4},u.prototype.writeInt32BE=function t(e,r,n){return e=+e,r|=0,n||N(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):B(this,e,r,!1),r+4},u.prototype.writeFloatLE=function t(e,r,n){return j(this,e,r,!0,n)},u.prototype.writeFloatBE=function t(e,r,n){return j(this,e,r,!1,n)},u.prototype.writeDoubleLE=function t(e,r,n){return M(this,e,r,!0,n)},u.prototype.writeDoubleBE=function t(e,r,n){return M(this,e,r,!1,n)},u.prototype.copy=function t(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o,s=i-n;if(this===e&&n<r&&r<i)for(o=s-1;o>=0;--o)e[o+r]=this[o+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s},u.prototype.fill=function t(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var s;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=u.isBuffer(e)?e:K(new u(e,i).toString()),c=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%c]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return n.toByteArray(function e(t){if((t=function e(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(29))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){e.byteLength=function n(t){var e=f(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function i(t){var e,r,n=f(t),i=n[0],o=n[1],s=new u(function c(t,e,r){return 3*(e+r)/4-r}(0,i,o)),h=0,l=o>0?i-4:i;for(r=0;r<l;r+=4)e=a[t.charCodeAt(r)]<<18|a[t.charCodeAt(r+1)]<<12|a[t.charCodeAt(r+2)]<<6|a[t.charCodeAt(r+3)],s[h++]=e>>16&255,s[h++]=e>>8&255,s[h++]=255&e;return 2===o&&(e=a[t.charCodeAt(r)]<<2|a[t.charCodeAt(r+1)]>>4,s[h++]=255&e),1===o&&(e=a[t.charCodeAt(r)]<<10|a[t.charCodeAt(r+1)]<<4|a[t.charCodeAt(r+2)]>>2,s[h++]=e>>8&255,s[h++]=255&e),s},e.fromByteArray=function o(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,u=r-n;a<u;a+=o)i.push(g(t,a,a+o>u?u:a+o));return 1===n?(e=t[r-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"=")),i.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0;h<64;++h)s[h]=c[h],a[c.charCodeAt(h)]=h;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function g(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(s[(i=n)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,f=r?-1:1,g=t[e+l];for(l+=f,o=g&(1<<-h)-1,g>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,n),o-=c}return(g?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,d=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+g]=255&a,g+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+g]=255&s,g+=d,s/=256,c-=8);t[r+g-d]|=128*p}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(t){var e=t.jws,r=t.KeyUtil,n=t.X509,o=t.crypto,s=t.hextob64u,a=t.b64tohex,u=t.AllowedSigningAlgs;return function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.parseJwt=function t(r){i.Log.debug("JoseUtil.parseJwt");try{var n=e.JWS.parse(r);return{header:n.headerObj,payload:n.payloadObj}}catch(t){i.Log.error(t)}},t.validateJwt=function e(o,s,u,c,h,l,f){i.Log.debug("JoseUtil.validateJwt");try{if("RSA"===s.kty)if(s.e&&s.n)s=r.getKey(s);else{if(!s.x5c||!s.x5c.length)return i.Log.error("JoseUtil.validateJwt: RSA key missing key material",s),Promise.reject(new Error("RSA key missing key material"));var g=a(s.x5c[0]);s=n.getPublicKeyFromCertHex(g)}else{if("EC"!==s.kty)return i.Log.error("JoseUtil.validateJwt: Unsupported key type",s&&s.kty),Promise.reject(new Error(s.kty));if(!(s.crv&&s.x&&s.y))return i.Log.error("JoseUtil.validateJwt: EC key missing key material",s),Promise.reject(new Error("EC key missing key material"));s=r.getKey(s)}return t._validateJwt(o,s,u,c,h,l,f)}catch(t){return i.Log.error(t&&t.message||t),Promise.reject("JWT validation failed")}},t.validateJwtAttributes=function e(r,n,o,s,a,u){s||(s=0),a||(a=parseInt(Date.now()/1e3));var c=t.parseJwt(r).payload;if(!c.iss)return i.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(c.iss!==n)return i.Log.error("JoseUtil._validateJwt: Invalid issuer in token",c.iss),Promise.reject(new Error("Invalid issuer in token: "+c.iss));if(!c.aud)return i.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(c.aud===o||Array.isArray(c.aud)&&c.aud.indexOf(o)>=0))return i.Log.error("JoseUtil._validateJwt: Invalid audience in token",c.aud),Promise.reject(new Error("Invalid audience in token: "+c.aud));if(c.azp&&c.azp!==o)return i.Log.error("JoseUtil._validateJwt: Invalid azp in token",c.azp),Promise.reject(new Error("Invalid azp in token: "+c.azp));if(!u){var h=a+s,l=a-s;if(!c.iat)return i.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(h<c.iat)return i.Log.error("JoseUtil._validateJwt: iat is in the future",c.iat),Promise.reject(new Error("iat is in the future: "+c.iat));if(c.nbf&&h<c.nbf)return i.Log.error("JoseUtil._validateJwt: nbf is in the future",c.nbf),Promise.reject(new Error("nbf is in the future: "+c.nbf));if(!c.exp)return i.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(c.exp<l)return i.Log.error("JoseUtil._validateJwt: exp is in the past",c.exp),Promise.reject(new Error("exp is in the past:"+c.exp))}return Promise.resolve(c)},t._validateJwt=function r(n,o,s,a,c,h,l){return t.validateJwtAttributes(n,s,a,c,h,l).then(function(t){try{return e.JWS.verify(n,o,u)?t:(i.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(t){return i.Log.error(t&&t.message||t),Promise.reject(new Error("signature validation failed"))}})},t.hashString=function t(e,r){try{return o.Util.hashString(e,r)}catch(t){i.Log.error(t)}},t.hexToBase64Url=function t(e){try{return s(e)}catch(t){i.Log.error(t)}},t}()};var i=r(0);t.exports=e.default},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SigninResponse=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(3);e.SigninResponse=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";!function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=i.UrlUtility.parseUrlFragment(e,r);this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.code=n.code,this.state=n.state,this.id_token=n.id_token,this.session_state=n.session_state,this.access_token=n.access_token,this.token_type=n.token_type,this.scope=n.scope,this.profile=void 0,this.expires_in=n.expires_in}return n(t,[{key:"expires_in",get:function t(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function t(e){var r=parseInt(e);if("number"==typeof r&&r>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+r}}},{key:"expired",get:function t(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function t(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function t(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SignoutRequest=void 0;var n=r(0),i=r(3),o=r(9);e.SignoutRequest=function t(e){var r=e.url,s=e.id_token_hint,a=e.post_logout_redirect_uri,u=e.data,c=e.extraQueryParams,h=e.request_type;if(function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r)throw n.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var f in s&&(r=i.UrlUtility.addQueryParam(r,"id_token_hint",s)),a&&(r=i.UrlUtility.addQueryParam(r,"post_logout_redirect_uri",a),u&&(this.state=new o.State({data:u,request_type:h}),r=i.UrlUtility.addQueryParam(r,"state",this.state.id))),c)r=i.UrlUtility.addQueryParam(r,f,c[f]);this.url=r}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SignoutResponse=void 0;var n=r(3);e.SignoutResponse=function t(e){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n.UrlUtility.parseUrlFragment(e,"?");this.error=i.error,this.error_description=i.error_description,this.error_uri=i.error_uri,this.state=i.state}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryWebStorage=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.InMemoryWebStorage=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this._data={}}return t.prototype.getItem=function t(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},t.prototype.setItem=function t(e,r){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=r},t.prototype.removeItem=function t(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},t.prototype.key=function t(e){return Object.getOwnPropertyNames(this._data)[e]},n(t,[{key:"length",get:function t(){return Object.getOwnPropertyNames(this._data).length}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.UserManager=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(10),s=r(39),a=r(15),u=r(45),c=r(47),h=r(18),l=r(8),f=r(20),g=r(11),d=r(4);e.UserManager=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.TokenRevocationClient,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.TokenClient,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d.JoseUtil;(function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),r instanceof s.UserManagerSettings||(r=new s.UserManagerSettings(r));var m=function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return m._events=new u.UserManagerEvents(r),m._silentRenewService=new n(m),m.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new o(m)),m._tokenRevocationClient=new a(m._settings),m._tokenClient=new l(m._settings),m._joseUtil=y,m}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getUser=function t(){var e=this;return this._loadUser().then(function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)})},e.prototype.removeUser=function t(){var e=this;return this.storeUser(null).then(function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()})},e.prototype.signinRedirect=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var r={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,r).then(function(){i.Log.info("UserManager.signinRedirect: successful")})},e.prototype.signinRedirectCallback=function t(e){return this._signinEnd(e||this._redirectNavigator.url).then(function(t){return t.profile&&t.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),t})},e.prototype.signinPopup=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var r=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return r?(e.redirect_uri=r,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:r,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),t})):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},e.prototype.signinPopupCallback=function t(e){return this._signinCallback(e,this._popupNavigator).then(function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),t}).catch(function(t){i.Log.error(t.message)})},e.prototype.signinSilent=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=Object.assign({},r),this._loadUser().then(function(t){return t&&t.refresh_token?(r.refresh_token=t.refresh_token,e._useRefreshToken(r)):(r.request_type="si:s",r.id_token_hint=r.id_token_hint||e.settings.includeIdTokenInSilentRenew&&t&&t.id_token,t&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",t.profile.sub),r.current_sub=t.profile.sub),e._signinSilentIframe(r))})},e.prototype._useRefreshToken=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(r).then(function(t){return t?t.access_token?e._loadUser().then(function(r){if(r){var n=Promise.resolve();return t.id_token&&(n=e._validateIdTokenFromTokenRefreshToken(r.profile,t.id_token)),n.then(function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),r.id_token=t.id_token||r.id_token,r.access_token=t.access_token,r.refresh_token=t.refresh_token||r.refresh_token,r.expires_in=t.expires_in,e.storeUser(r).then(function(){return e._events.load(r),r})})}return null}):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},e.prototype._validateIdTokenFromTokenRefreshToken=function t(e,r){var n=this;return this._metadataService.getIssuer().then(function(t){return n.settings.getEpochTime().then(function(o){return n._joseUtil.validateJwtAttributes(r,t,n._settings.client_id,n._settings.clockSkew,o).then(function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},e.prototype._signinSilentIframe=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return r?(e.redirect_uri=r,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:r,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),t})):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},e.prototype.signinSilentCallback=function t(e){return this._signinCallback(e,this._iframeNavigator).then(function(t){return t&&(t.profile&&t.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",t.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),t})},e.prototype.signinCallback=function t(e){var r=this;return this.readSigninResponseState(e).then(function(t){var n=t.state;return t.response,"si:r"===n.request_type?r.signinRedirectCallback(e):"si:p"===n.request_type?r.signinPopupCallback(e):"si:s"===n.request_type?r.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))})},e.prototype.signoutCallback=function t(e,r){var n=this;return this.readSignoutResponseState(e).then(function(t){var i=t.state,o=t.response;return i?"so:r"===i.request_type?n.signoutRedirectCallback(e):"so:p"===i.request_type?n.signoutPopupCallback(e,r):Promise.reject(new Error("invalid response_type in state")):o})},e.prototype.querySessionStatus=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(r=Object.assign({},r)).request_type="si:s";var n=r.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return n?(r.redirect_uri=n,r.prompt="none",r.response_type=r.response_type||this.settings.query_status_response_type,r.scope=r.scope||"openid",r.skipUserInfo=!0,this._signinStart(r,this._iframeNavigator,{startUrl:n,silentRequestTimeout:r.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(t){return e.processSigninResponse(t.url).then(function(t){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),t.session_state&&t.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",t.profile.sub),{session_state:t.session_state,sub:t.profile.sub,sid:t.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t})})):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},e.prototype._signin=function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,r,i).then(function(t){return n._signinEnd(t.url,e)})},e.prototype._signinStart=function t(e,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.prepare(o).then(function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),n.createSigninRequest(e).then(function(e){return i.Log.debug("UserManager._signinStart: got signin request"),o.url=e.url,o.id=e.state.id,t.navigate(o)}).catch(function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e})})},e.prototype._signinEnd=function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then(function(t){i.Log.debug("UserManager._signinEnd: got signin response");var e=new a.User(t);if(n.current_sub){if(n.current_sub!==e.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",e.profile.sub),Promise.reject(new Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return r.storeUser(e).then(function(){return i.Log.debug("UserManager._signinEnd: user stored"),r._events.load(e),e})})},e.prototype._signinCallback=function t(e,r){i.Log.debug("UserManager._signinCallback");var n="query"===this._settings.response_mode||!this._settings.response_mode&&l.SigninRequest.isCode(this._settings.response_type)?"?":"#";return r.callback(e,void 0,n)},e.prototype.signoutRedirect=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var r=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;r&&(e.post_logout_redirect_uri=r);var n={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,n).then(function(){i.Log.info("UserManager.signoutRedirect: successful")})},e.prototype.signoutRedirectCallback=function t(e){return this._signoutEnd(e||this._redirectNavigator.url).then(function(t){return i.Log.info("UserManager.signoutRedirectCallback: successful"),t})},e.prototype.signoutPopup=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var r=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=r,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:r,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){i.Log.info("UserManager.signoutPopup: successful")})},e.prototype.signoutPopupCallback=function t(e,r){return void 0===r&&"boolean"==typeof e&&(r=e,e=null),this._popupNavigator.callback(e,r,"?").then(function(){i.Log.info("UserManager.signoutPopupCallback: successful")})},e.prototype._signout=function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,r,i).then(function(t){return n._signoutEnd(t.url)})},e.prototype._signoutStart=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(o).then(function(t){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),r._loadUser().then(function(n){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(r._settings.revokeAccessTokenOnSignout?r._revokeInternal(n):Promise.resolve()).then(function(){var s=e.id_token_hint||n&&n.id_token;return s&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),r.removeUser().then(function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),r.createSignoutRequest(e).then(function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),o.url=e.url,e.state&&(o.id=e.state.id),t.navigate(o)})})})}).catch(function(e){throw t.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),t.close()),e})})},e.prototype._signoutEnd=function t(e){return this.processSignoutResponse(e).then(function(t){return i.Log.debug("UserManager._signoutEnd: got signout response"),t})},e.prototype.revokeAccessToken=function t(){var e=this;return this._loadUser().then(function(t){return e._revokeInternal(t,!0).then(function(r){if(r)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then(function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)})})}).then(function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},e.prototype._revokeInternal=function t(e,r){var n=this;if(e){var o=e.access_token,s=e.refresh_token;return this._revokeAccessTokenInternal(o,r).then(function(t){return n._revokeRefreshTokenInternal(s,r).then(function(e){return t||e||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),t||e})})}return Promise.resolve(!1)},e.prototype._revokeAccessTokenInternal=function t(e,r){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,r).then(function(){return!0})},e.prototype._revokeRefreshTokenInternal=function t(e,r){return e?this._tokenRevocationClient.revoke(e,r,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},e.prototype.startSilentRenew=function t(){this._silentRenewService.start()},e.prototype.stopSilentRenew=function t(){this._silentRenewService.stop()},e.prototype._loadUser=function t(){return this._userStore.get(this._userStoreKey).then(function(t){return t?(i.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(t)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)})},e.prototype.storeUser=function t(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var r=e.toStorageString();return this._userStore.set(this._userStoreKey,r)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},n(e,[{key:"_redirectNavigator",get:function t(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function t(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function t(){return this.settings.iframeNavigator}},{key:"_userStore",get:function t(){return this.settings.userStore}},{key:"events",get:function t(){return this._events}},{key:"_userStoreKey",get:function t(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),e}(o.OidcClient)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.UserManagerSettings=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=(r(0),r(5)),o=r(40),s=r(41),a=r(43),u=r(6),c=r(1),h=r(8);e.UserManagerSettings=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.popup_redirect_uri,i=r.popup_post_logout_redirect_uri,g=r.popupWindowFeatures,d=r.popupWindowTarget,p=r.silent_redirect_uri,v=r.silentRequestTimeout,y=r.automaticSilentRenew,m=void 0!==y&&y,_=r.validateSubOnSilentRenew,S=void 0!==_&&_,b=r.includeIdTokenInSilentRenew,w=void 0===b||b,F=r.monitorSession,E=void 0===F||F,x=r.monitorAnonymousSession,A=void 0!==x&&x,k=r.checkSessionInterval,P=void 0===k?2e3:k,C=r.stopCheckSessionOnError,T=void 0===C||C,R=r.query_status_response_type,I=r.revokeAccessTokenOnSignout,D=void 0!==I&&I,L=r.accessTokenExpiringNotificationTime,N=void 0===L?60:L,U=r.redirectNavigator,B=void 0===U?new o.RedirectNavigator:U,O=r.popupNavigator,j=void 0===O?new s.PopupNavigator:O,M=r.iframeNavigator,H=void 0===M?new a.IFrameNavigator:M,V=r.userStore,K=void 0===V?new u.WebStorageStateStore({store:c.Global.sessionStorage}):V;!function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var q=function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,arguments[0]));return q._popup_redirect_uri=n,q._popup_post_logout_redirect_uri=i,q._popupWindowFeatures=g,q._popupWindowTarget=d,q._silent_redirect_uri=p,q._silentRequestTimeout=v,q._automaticSilentRenew=m,q._validateSubOnSilentRenew=S,q._includeIdTokenInSilentRenew=w,q._accessTokenExpiringNotificationTime=N,q._monitorSession=E,q._monitorAnonymousSession=A,q._checkSessionInterval=P,q._stopCheckSessionOnError=T,R?q._query_status_response_type=R:arguments[0]&&arguments[0].response_type?q._query_status_response_type=h.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":q._query_status_response_type="id_token",q._revokeAccessTokenOnSignout=D,q._redirectNavigator=B,q._popupNavigator=j,q._iframeNavigator=H,q._userStore=K,q}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"popup_redirect_uri",get:function t(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function t(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function t(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function t(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function t(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function t(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function t(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function t(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function t(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function t(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function t(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function t(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function t(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function t(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function t(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function t(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function t(){return this._redirectNavigator}},{key:"popupNavigator",get:function t(){return this._popupNavigator}},{key:"iframeNavigator",get:function t(){return this._iframeNavigator}},{key:"userStore",get:function t(){return this._userStore}}]),e}(i.OidcClientSettings)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.RedirectNavigator=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.RedirectNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(){return Promise.resolve(this)},t.prototype.navigate=function t(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},n(t,[{key:"url",get:function t(){return window.location.href}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PopupNavigator=void 0;var n=r(0),i=r(42);e.PopupNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){var r=new i.PopupWindow(e);return Promise.resolve(r)},t.prototype.callback=function t(e,r,o){n.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(e,r,o),Promise.resolve()}catch(t){return Promise.reject(t)}},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PopupWindow=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(3);e.PopupWindow=function(){function t(e){var r=this;!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e});var o=e.popupWindowTarget||"_blank",s=e.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",o,s),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return t.prototype.navigate=function t(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},t.prototype._success=function t(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},t.prototype._error=function t(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},t.prototype.close=function t(){this._cleanup(!1)},t.prototype._cleanup=function t(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},t.prototype._checkForPopupClosed=function t(){this._popup&&!this._popup.closed||this._error("Popup window closed")},t.prototype._callback=function t(e,r){this._cleanup(r),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},t.notifyOpener=function t(e,r,n){if(window.opener){if(e=e||window.location.href){var s=o.UrlUtility.parseUrlFragment(e,n);if(s.state){var a="popupCallback_"+s.state,u=window.opener[a];u?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),u(e,r)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},n(t,[{key:"promise",get:function t(){return this._promise}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.IFrameNavigator=void 0;var n=r(0),i=r(44);e.IFrameNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){var r=new i.IFrameWindow(e);return Promise.resolve(r)},t.prototype.callback=function t(e){n.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(e),Promise.resolve()}catch(t){return Promise.reject(t)}},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.IFrameWindow=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);e.IFrameWindow=function(){function t(e){var r=this;!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return t.prototype.navigate=function t(e){if(e&&e.url){var r=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",r),this._timer=window.setTimeout(this._timeout.bind(this),r),this._frame.src=e.url}else this._error("No url provided");return this.promise},t.prototype._success=function t(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},t.prototype._error=function t(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},t.prototype.close=function t(){this._cleanup()},t.prototype._cleanup=function t(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},t.prototype._timeout=function t(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},t.prototype._message=function t(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var r=e.data;r?this._success({url:r}):this._error("Invalid response from frame")}},t.notifyParent=function t(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},n(t,[{key:"promise",get:function t(){return this._promise}},{key:"_origin",get:function t(){return location.protocol+"//"+location.host}}]),t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.UserManagerEvents=void 0;var n=r(0),i=r(16),o=r(17);e.UserManagerEvents=function(t){function e(r){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return i._userLoaded=new o.Event("User loaded"),i._userUnloaded=new o.Event("User unloaded"),i._silentRenewError=new o.Event("Silent renew error"),i._userSignedIn=new o.Event("User signed in"),i._userSignedOut=new o.Event("User signed out"),i._userSessionChanged=new o.Event("User session changed"),i}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.load=function e(r){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.Log.debug("UserManagerEvents.load"),t.prototype.load.call(this,r),i&&this._userLoaded.raise(r)},e.prototype.unload=function e(){n.Log.debug("UserManagerEvents.unload"),t.prototype.unload.call(this),this._userUnloaded.raise()},e.prototype.addUserLoaded=function t(e){this._userLoaded.addHandler(e)},e.prototype.removeUserLoaded=function t(e){this._userLoaded.removeHandler(e)},e.prototype.addUserUnloaded=function t(e){this._userUnloaded.addHandler(e)},e.prototype.removeUserUnloaded=function t(e){this._userUnloaded.removeHandler(e)},e.prototype.addSilentRenewError=function t(e){this._silentRenewError.addHandler(e)},e.prototype.removeSilentRenewError=function t(e){this._silentRenewError.removeHandler(e)},e.prototype._raiseSilentRenewError=function t(e){n.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},e.prototype.addUserSignedIn=function t(e){this._userSignedIn.addHandler(e)},e.prototype.removeUserSignedIn=function t(e){this._userSignedIn.removeHandler(e)},e.prototype._raiseUserSignedIn=function t(){n.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},e.prototype.addUserSignedOut=function t(e){this._userSignedOut.addHandler(e)},e.prototype.removeUserSignedOut=function t(e){this._userSignedOut.removeHandler(e)},e.prototype._raiseUserSignedOut=function t(){n.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},e.prototype.addUserSessionChanged=function t(e){this._userSessionChanged.addHandler(e)},e.prototype.removeUserSessionChanged=function t(e){this._userSessionChanged.removeHandler(e)},e.prototype._raiseUserSessionChanged=function t(){n.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},e}(i.AccessTokenEvents)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=r(1),s=r(17);e.Timer=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return s._timer=n,s._nowFunc=i||function(){return Date.now()/1e3},s}return function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function t(e){e<=0&&(e=1),e=parseInt(e);var r=this.now+e;if(this.expiration===r&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=r;var n=5;e<n&&(n=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*n)}},e.prototype.cancel=function t(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},e.prototype._callback=function e(){var r=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",r),this._expiration<=this.now&&(this.cancel(),t.prototype.raise.call(this))},n(e,[{key:"now",get:function t(){return parseInt(this._nowFunc())}},{key:"expiration",get:function t(){return this._expiration}}]),e}(s.Event)},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SilentRenewService=void 0;var n=r(0);e.SilentRenewService=function(){function t(e){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userManager=e}return t.prototype.start=function t(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(t){}).catch(function(t){n.Log.error("SilentRenewService.start: Error from getUser:",t.message)}))},t.prototype.stop=function t(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},t.prototype._tokenExpiring=function t(){var e=this;this._userManager.signinSilent().then(function(t){n.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(t){n.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)})},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CordovaPopupNavigator=void 0;var n=r(21);e.CordovaPopupNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){var r=new n.CordovaPopupWindow(e);return Promise.resolve(r)},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CordovaIFrameNavigator=void 0;var n=r(21);e.CordovaIFrameNavigator=function(){function t(){!function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function t(e){e.popupWindowFeatures="hidden=yes";var r=new n.CordovaPopupWindow(e);return Promise.resolve(r)},t}()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Version="1.11.6"}])})}},__webpack_module_cache__={};function __nested_webpack_require_304590__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__nested_webpack_require_304590__),module.exports}function log(...args){console.log(...args)}function warn(...args){console.warn(...args)}__nested_webpack_require_304590__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __nested_webpack_require_304590__.d(getter,{a:getter}),getter},__nested_webpack_require_304590__.d=(exports,definition)=>{for(var key in definition)__nested_webpack_require_304590__.o(definition,key)&&!__nested_webpack_require_304590__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__nested_webpack_require_304590__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_304590__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop);const encoder=new TextEncoder,decoder=new TextDecoder;function concat(...buffers){const size=buffers.reduce((acc,{length})=>acc+length,0),buf=new Uint8Array(size);let i=0;for(const buffer of buffers)buf.set(buffer,i),i+=buffer.length;return buf}const encode=input=>(input=>{let unencoded=input;"string"==typeof unencoded&&(unencoded=encoder.encode(unencoded));const arr=[];for(let i=0;i<unencoded.length;i+=32768)arr.push(String.fromCharCode.apply(null,unencoded.subarray(i,i+32768)));return btoa(arr.join(""))})(input).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),decode=input=>{let encoded=input;encoded instanceof Uint8Array&&(encoded=decoder.decode(encoded)),encoded=encoded.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(encoded=>{const binary=atob(encoded),bytes=new Uint8Array(binary.length);for(let i=0;i<binary.length;i++)bytes[i]=binary.charCodeAt(i);return bytes})(encoded)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class JOSEError extends Error{constructor(message,options){super(message,options),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}JOSEError.code="ERR_JOSE_GENERIC";class JWTClaimValidationFailed extends JOSEError{constructor(message,payload,claim="unspecified",reason="unspecified"){super(message,{cause:{claim,reason,payload}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=claim,this.reason=reason,this.payload=payload}}JWTClaimValidationFailed.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class JWTExpired extends JOSEError{constructor(message,payload,claim="unspecified",reason="unspecified"){super(message,{cause:{claim,reason,payload}}),this.code="ERR_JWT_EXPIRED",this.claim=claim,this.reason=reason,this.payload=payload}}JWTExpired.code="ERR_JWT_EXPIRED";class JOSEAlgNotAllowed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}JOSEAlgNotAllowed.code="ERR_JOSE_ALG_NOT_ALLOWED";class errors_JOSENotSupported extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}errors_JOSENotSupported.code="ERR_JOSE_NOT_SUPPORTED";(class JWEDecryptionFailed extends JOSEError{constructor(message="decryption operation failed",options){super(message,options),this.code="ERR_JWE_DECRYPTION_FAILED"}}).code="ERR_JWE_DECRYPTION_FAILED";(class JWEInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}).code="ERR_JWE_INVALID";class JWSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}JWSInvalid.code="ERR_JWS_INVALID";class JWTInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}JWTInvalid.code="ERR_JWT_INVALID";(class JWKInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}).code="ERR_JWK_INVALID";class JWKSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}JWKSInvalid.code="ERR_JWKS_INVALID";class JWKSNoMatchingKey extends JOSEError{constructor(message="no applicable key found in the JSON Web Key Set",options){super(message,options),this.code="ERR_JWKS_NO_MATCHING_KEY"}}JWKSNoMatchingKey.code="ERR_JWKS_NO_MATCHING_KEY";class JWKSMultipleMatchingKeys extends JOSEError{constructor(message="multiple matching keys found in the JSON Web Key Set",options){super(message,options),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator,JWKSMultipleMatchingKeys.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class JWKSTimeout extends JOSEError{constructor(message="request timed out",options){super(message,options),this.code="ERR_JWKS_TIMEOUT"}}JWKSTimeout.code="ERR_JWKS_TIMEOUT";class JWSSignatureVerificationFailed extends JOSEError{constructor(message="signature verification failed",options){super(message,options),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function subtleDsa(alg,algorithm){const hash=`SHA-${alg.slice(-3)}`;switch(alg){case"HS256":case"HS384":case"HS512":return{hash,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash,name:"RSA-PSS",saltLength:alg.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash,name:"ECDSA",namedCurve:algorithm.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:algorithm.name};default:throw new errors_JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`)}}JWSSignatureVerificationFailed.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const webcrypto=crypto,isCryptoKey=key=>key instanceof CryptoKey,check_key_length=(alg,key)=>{if(alg.startsWith("RS")||alg.startsWith("PS")){const{modulusLength}=key.algorithm;if("number"!=typeof modulusLength||modulusLength<2048)throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`)}};function unusable(name,prop="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`)}function isAlgorithm(algorithm,name){return algorithm.name===name}function getHashLength(hash){return parseInt(hash.name.slice(4),10)}function checkUsage(key,usages){if(usages.length&&!usages.some(expected=>key.usages.includes(expected))){let msg="CryptoKey does not support this operation, its usages must include ";if(usages.length>2){const last=usages.pop();msg+=`one of ${usages.join(", ")}, or ${last}.`}else 2===usages.length?msg+=`one of ${usages[0]} or ${usages[1]}.`:msg+=`${usages[0]}.`;throw new TypeError(msg)}}function checkSigCryptoKey(key,alg,...usages){switch(alg){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(key.algorithm,"HMAC"))throw unusable("HMAC");const expected=parseInt(alg.slice(2),10);if(getHashLength(key.algorithm.hash)!==expected)throw unusable(`SHA-${expected}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(key.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");const expected=parseInt(alg.slice(2),10);if(getHashLength(key.algorithm.hash)!==expected)throw unusable(`SHA-${expected}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(key.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");const expected=parseInt(alg.slice(2),10);if(getHashLength(key.algorithm.hash)!==expected)throw unusable(`SHA-${expected}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==key.algorithm.name&&"Ed448"!==key.algorithm.name)throw unusable("Ed25519 or Ed448");break;case"Ed25519":if(!isAlgorithm(key.algorithm,"Ed25519"))throw unusable("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(key.algorithm,"ECDSA"))throw unusable("ECDSA");const expected=function getNamedCurve(alg){switch(alg){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(alg);if(key.algorithm.namedCurve!==expected)throw unusable(expected,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(key,usages)}function message(msg,actual,...types){if((types=types.filter(Boolean)).length>2){const last=types.pop();msg+=`one of type ${types.join(", ")}, or ${last}.`}else 2===types.length?msg+=`one of type ${types[0]} or ${types[1]}.`:msg+=`of type ${types[0]}.`;return null==actual?msg+=` Received ${actual}`:"function"==typeof actual&&actual.name?msg+=` Received function ${actual.name}`:"object"==typeof actual&&null!=actual&&actual.constructor?.name&&(msg+=` Received an instance of ${actual.constructor.name}`),msg}const invalid_key_input=(actual,...types)=>message("Key must be ",actual,...types);function withAlg(alg,actual,...types){return message(`Key for the ${alg} algorithm must be `,actual,...types)}const is_key_like=key=>!!isCryptoKey(key)||"KeyObject"===key?.[Symbol.toStringTag],types=["CryptoKey"];function isObject(input){if(!function isObjectLike(value){return"object"==typeof value&&null!==value}(input)||"[object Object]"!==Object.prototype.toString.call(input))return!1;if(null===Object.getPrototypeOf(input))return!0;let proto=input;for(;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(input)===proto}function isJWK(key){return isObject(key)&&"string"==typeof key.kty}const jwk_to_key=async jwk=>{if(!jwk.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm,keyUsages}=function subtleMapping(jwk){let algorithm,keyUsages;switch(jwk.kty){case"RSA":switch(jwk.alg){case"PS256":case"PS384":case"PS512":algorithm={name:"RSA-PSS",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=jwk.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":algorithm={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=jwk.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":algorithm={name:"RSA-OAEP",hash:`SHA-${parseInt(jwk.alg.slice(-3),10)||1}`},keyUsages=jwk.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(jwk.alg){case"ES256":algorithm={name:"ECDSA",namedCurve:"P-256"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ES384":algorithm={name:"ECDSA",namedCurve:"P-384"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ES512":algorithm={name:"ECDSA",namedCurve:"P-521"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":algorithm={name:"ECDH",namedCurve:jwk.crv},keyUsages=jwk.d?["deriveBits"]:[];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(jwk.alg){case"Ed25519":algorithm={name:"Ed25519"},keyUsages=jwk.d?["sign"]:["verify"];break;case"EdDSA":algorithm={name:jwk.crv},keyUsages=jwk.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":algorithm={name:jwk.crv},keyUsages=jwk.d?["deriveBits"]:[];break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm,keyUsages}}(jwk),rest=[algorithm,jwk.ext??!1,jwk.key_ops??keyUsages],keyData={...jwk};return delete keyData.alg,delete keyData.use,webcrypto.subtle.importKey("jwk",keyData,...rest)},exportKeyValue=k=>decode(k);let privCache,pubCache;const isKeyObject=key=>"KeyObject"===key?.[Symbol.toStringTag],importAndCache=async(cache,key,jwk,alg,freeze=!1)=>{let cached=cache.get(key);if(cached?.[alg])return cached[alg];const cryptoKey=await jwk_to_key({...jwk,alg});return freeze&&Object.freeze(key),cached?cached[alg]=cryptoKey:cache.set(key,{[alg]:cryptoKey}),cryptoKey},normalize_key_normalizePublicKey=(key,alg)=>{if(isKeyObject(key)){let jwk=key.export({format:"jwk"});return delete jwk.d,delete jwk.dp,delete jwk.dq,delete jwk.p,delete jwk.q,delete jwk.qi,jwk.k?exportKeyValue(jwk.k):(pubCache||(pubCache=new WeakMap),importAndCache(pubCache,key,jwk,alg))}if(isJWK(key)){if(key.k)return decode(key.k);pubCache||(pubCache=new WeakMap);return importAndCache(pubCache,key,key,alg,!0)}return key},normalize_key_normalizePrivateKey=(key,alg)=>{if(isKeyObject(key)){let jwk=key.export({format:"jwk"});return jwk.k?exportKeyValue(jwk.k):(privCache||(privCache=new WeakMap),importAndCache(privCache,key,jwk,alg))}if(isJWK(key)){if(key.k)return decode(key.k);privCache||(privCache=new WeakMap);return importAndCache(privCache,key,key,alg,!0)}return key};async function getCryptoKey(alg,key,usage){if("sign"===usage&&(key=await normalize_key_normalizePrivateKey(key,alg)),"verify"===usage&&(key=await normalize_key_normalizePublicKey(key,alg)),isCryptoKey(key))return checkSigCryptoKey(key,alg,usage),key;if(key instanceof Uint8Array){if(!alg.startsWith("HS"))throw new TypeError(invalid_key_input(key,...types));return webcrypto.subtle.importKey("raw",key,{hash:`SHA-${alg.slice(-3)}`,name:"HMAC"},!1,[usage])}throw new TypeError(invalid_key_input(key,...types,"Uint8Array","JSON Web Key"))}const runtime_verify=async(alg,key,signature,data)=>{const cryptoKey=await getCryptoKey(alg,key,"verify");check_key_length(alg,cryptoKey);const algorithm=subtleDsa(alg,cryptoKey.algorithm);try{return await webcrypto.subtle.verify(algorithm,cryptoKey,signature,data)}catch{return!1}},is_disjoint=(...headers)=>{const sources=headers.filter(Boolean);if(0===sources.length||1===sources.length)return!0;let acc;for(const header of sources){const parameters=Object.keys(header);if(acc&&0!==acc.size)for(const parameter of parameters){if(acc.has(parameter))return!1;acc.add(parameter)}else acc=new Set(parameters)}return!0},tag=key=>key?.[Symbol.toStringTag],jwkMatchesOp=(alg,key,usage)=>{if(void 0!==key.use&&"sig"!==key.use)throw new TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==key.key_ops&&!0!==key.key_ops.includes?.(usage))throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${usage}`);if(void 0!==key.alg&&key.alg!==alg)throw new TypeError(`Invalid key for this operation, when present its alg must be ${alg}`);return!0},symmetricTypeCheck=(alg,key,usage,allowJwk)=>{if(!(key instanceof Uint8Array)){if(allowJwk&&isJWK(key)){if(function isSecretJWK(key){return isJWK(key)&&"oct"===key.kty&&"string"==typeof key.k}(key)&&jwkMatchesOp(alg,key,usage))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!is_key_like(key))throw new TypeError(withAlg(alg,key,...types,"Uint8Array",allowJwk?"JSON Web Key":null));if("secret"!==key.type)throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type "secret"`)}};function checkKeyType(allowJwk,alg,key,usage){alg.startsWith("HS")||"dir"===alg||alg.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(alg)?symmetricTypeCheck(alg,key,usage,allowJwk):((alg,key,usage,allowJwk)=>{if(allowJwk&&isJWK(key))switch(usage){case"sign":if(function isPrivateJWK(key){return"oct"!==key.kty&&"string"==typeof key.d}(key)&&jwkMatchesOp(alg,key,usage))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function isPublicJWK(key){return"oct"!==key.kty&&void 0===key.d}(key)&&jwkMatchesOp(alg,key,usage))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!is_key_like(key))throw new TypeError(withAlg(alg,key,...types,allowJwk?"JSON Web Key":null));if("secret"===key.type)throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===usage&&"public"===key.type)throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===usage&&"public"===key.type)throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type "private"`);if(key.algorithm&&"verify"===usage&&"private"===key.type)throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type "public"`);if(key.algorithm&&"encrypt"===usage&&"private"===key.type)throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type "public"`)})(alg,key,usage,allowJwk)}checkKeyType.bind(void 0,!1);const checkKeyTypeWithJwk=checkKeyType.bind(void 0,!0);const validate_crit=function validateCrit(Err,recognizedDefault,recognizedOption,protectedHeader,joseHeader){if(void 0!==joseHeader.crit&&void 0===protectedHeader?.crit)throw new Err('"crit" (Critical) Header Parameter MUST be integrity protected');if(!protectedHeader||void 0===protectedHeader.crit)return new Set;if(!Array.isArray(protectedHeader.crit)||0===protectedHeader.crit.length||protectedHeader.crit.some(input=>"string"!=typeof input||0===input.length))throw new Err('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let recognized;recognized=void 0!==recognizedOption?new Map([...Object.entries(recognizedOption),...recognizedDefault.entries()]):recognizedDefault;for(const parameter of protectedHeader.crit){if(!recognized.has(parameter))throw new errors_JOSENotSupported(`Extension Header Parameter "${parameter}" is not recognized`);if(void 0===joseHeader[parameter])throw new Err(`Extension Header Parameter "${parameter}" is missing`);if(recognized.get(parameter)&&void 0===protectedHeader[parameter])throw new Err(`Extension Header Parameter "${parameter}" MUST be integrity protected`)}return new Set(protectedHeader.crit)},validate_algorithms=(option,algorithms)=>{if(void 0!==algorithms&&(!Array.isArray(algorithms)||algorithms.some(s=>"string"!=typeof s)))throw new TypeError(`"${option}" option must be an array of strings`);if(algorithms)return new Set(algorithms)};async function importJWK(jwk,alg){if(!isObject(jwk))throw new TypeError("JWK must be an object");switch(alg||(alg=jwk.alg),jwk.kty){case"oct":if("string"!=typeof jwk.k||!jwk.k)throw new TypeError('missing "k" (Key Value) Parameter value');return decode(jwk.k);case"RSA":if("oth"in jwk&&void 0!==jwk.oth)throw new errors_JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return jwk_to_key({...jwk,alg});default:throw new errors_JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}async function compactVerify(jws,key,options){if(jws instanceof Uint8Array&&(jws=decoder.decode(jws)),"string"!=typeof jws)throw new JWSInvalid("Compact JWS must be a string or Uint8Array");const{0:protectedHeader,1:payload,2:signature,length}=jws.split(".");if(3!==length)throw new JWSInvalid("Invalid Compact JWS");const verified=await async function flattenedVerify(jws,key,options){if(!isObject(jws))throw new JWSInvalid("Flattened JWS must be an object");if(void 0===jws.protected&&void 0===jws.header)throw new JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==jws.protected&&"string"!=typeof jws.protected)throw new JWSInvalid("JWS Protected Header incorrect type");if(void 0===jws.payload)throw new JWSInvalid("JWS Payload missing");if("string"!=typeof jws.signature)throw new JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==jws.header&&!isObject(jws.header))throw new JWSInvalid("JWS Unprotected Header incorrect type");let parsedProt={};if(jws.protected)try{const protectedHeader=decode(jws.protected);parsedProt=JSON.parse(decoder.decode(protectedHeader))}catch{throw new JWSInvalid("JWS Protected Header is invalid")}if(!is_disjoint(parsedProt,jws.header))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const joseHeader={...parsedProt,...jws.header};let b64=!0;if(validate_crit(JWSInvalid,new Map([["b64",!0]]),options?.crit,parsedProt,joseHeader).has("b64")&&(b64=parsedProt.b64,"boolean"!=typeof b64))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg}=joseHeader;if("string"!=typeof alg||!alg)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');const algorithms=options&&validate_algorithms("algorithms",options.algorithms);if(algorithms&&!algorithms.has(alg))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(b64){if("string"!=typeof jws.payload)throw new JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof jws.payload&&!(jws.payload instanceof Uint8Array))throw new JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let resolvedKey=!1;"function"==typeof key?(key=await key(parsedProt,jws),resolvedKey=!0,checkKeyTypeWithJwk(alg,key,"verify"),isJWK(key)&&(key=await importJWK(key,alg))):checkKeyTypeWithJwk(alg,key,"verify");const data=concat(encoder.encode(jws.protected??""),encoder.encode("."),"string"==typeof jws.payload?encoder.encode(jws.payload):jws.payload);let signature,payload;try{signature=decode(jws.signature)}catch{throw new JWSInvalid("Failed to base64url decode the signature")}if(!await runtime_verify(alg,key,signature,data))throw new JWSSignatureVerificationFailed;if(b64)try{payload=decode(jws.payload)}catch{throw new JWSInvalid("Failed to base64url decode the payload")}else payload="string"==typeof jws.payload?encoder.encode(jws.payload):jws.payload;const result={payload};return void 0!==jws.protected&&(result.protectedHeader=parsedProt),void 0!==jws.header&&(result.unprotectedHeader=jws.header),resolvedKey?{...result,key}:result}({payload,protected:protectedHeader,signature},key,options),result={payload:verified.payload,protectedHeader:verified.protectedHeader};return"function"==typeof key?{...result,key:verified.key}:result}const epoch=date=>Math.floor(date.getTime()/1e3),REGEX=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,secs=str=>{const matched=REGEX.exec(str);if(!matched||matched[4]&&matched[1])throw new TypeError("Invalid time period format");const value=parseFloat(matched[2]);let numericDate;switch(matched[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":numericDate=Math.round(value);break;case"minute":case"minutes":case"min":case"mins":case"m":numericDate=Math.round(60*value);break;case"hour":case"hours":case"hr":case"hrs":case"h":numericDate=Math.round(3600*value);break;case"day":case"days":case"d":numericDate=Math.round(86400*value);break;case"week":case"weeks":case"w":numericDate=Math.round(604800*value);break;default:numericDate=Math.round(31557600*value)}return"-"===matched[1]||"ago"===matched[4]?-numericDate:numericDate},normalizeTyp=value=>value.toLowerCase().replace(/^application\//,""),jwt_claims_set=(protectedHeader,encodedPayload,options={})=>{let payload;try{payload=JSON.parse(decoder.decode(encodedPayload))}catch{}if(!isObject(payload))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");const{typ}=options;if(typ&&("string"!=typeof protectedHeader.typ||normalizeTyp(protectedHeader.typ)!==normalizeTyp(typ)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',payload,"typ","check_failed");const{requiredClaims=[],issuer,subject,audience,maxTokenAge}=options,presenceCheck=[...requiredClaims];void 0!==maxTokenAge&&presenceCheck.push("iat"),void 0!==audience&&presenceCheck.push("aud"),void 0!==subject&&presenceCheck.push("sub"),void 0!==issuer&&presenceCheck.push("iss");for(const claim of new Set(presenceCheck.reverse()))if(!(claim in payload))throw new JWTClaimValidationFailed(`missing required "${claim}" claim`,payload,claim,"missing");if(issuer&&!(Array.isArray(issuer)?issuer:[issuer]).includes(payload.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',payload,"iss","check_failed");if(subject&&payload.sub!==subject)throw new JWTClaimValidationFailed('unexpected "sub" claim value',payload,"sub","check_failed");if(audience&&(audPayload=payload.aud,audOption="string"==typeof audience?[audience]:audience,!("string"==typeof audPayload?audOption.includes(audPayload):Array.isArray(audPayload)&&audOption.some(Set.prototype.has.bind(new Set(audPayload))))))throw new JWTClaimValidationFailed('unexpected "aud" claim value',payload,"aud","check_failed");var audPayload,audOption;let tolerance;switch(typeof options.clockTolerance){case"string":tolerance=secs(options.clockTolerance);break;case"number":tolerance=options.clockTolerance;break;case"undefined":tolerance=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate}=options,now=epoch(currentDate||new Date);if((void 0!==payload.iat||maxTokenAge)&&"number"!=typeof payload.iat)throw new JWTClaimValidationFailed('"iat" claim must be a number',payload,"iat","invalid");if(void 0!==payload.nbf){if("number"!=typeof payload.nbf)throw new JWTClaimValidationFailed('"nbf" claim must be a number',payload,"nbf","invalid");if(payload.nbf>now+tolerance)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',payload,"nbf","check_failed")}if(void 0!==payload.exp){if("number"!=typeof payload.exp)throw new JWTClaimValidationFailed('"exp" claim must be a number',payload,"exp","invalid");if(payload.exp<=now-tolerance)throw new JWTExpired('"exp" claim timestamp check failed',payload,"exp","check_failed")}if(maxTokenAge){const age=now-payload.iat;if(age-tolerance>("number"==typeof maxTokenAge?maxTokenAge:secs(maxTokenAge)))throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',payload,"iat","check_failed");if(age<0-tolerance)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',payload,"iat","check_failed")}return payload};const fetch_jwks=async(url,timeout,options)=>{let controller,id,timedOut=!1;"function"==typeof AbortController&&(controller=new AbortController,id=setTimeout(()=>{timedOut=!0,controller.abort()},timeout));const response=await fetch(url.href,{signal:controller?controller.signal:void 0,redirect:"manual",headers:options.headers}).catch(err=>{if(timedOut)throw new JWKSTimeout;throw err});if(void 0!==id&&clearTimeout(id),200!==response.status)throw new JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await response.json()}catch{throw new JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function isJWKLike(key){return isObject(key)}function clone(obj){return"function"==typeof structuredClone?structuredClone(obj):JSON.parse(JSON.stringify(obj))}class LocalJWKSet{constructor(jwks){if(this._cached=new WeakMap,!function isJWKSLike(jwks){return jwks&&"object"==typeof jwks&&Array.isArray(jwks.keys)&&jwks.keys.every(isJWKLike)}(jwks))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks=clone(jwks)}async getKey(protectedHeader,token){const{alg,kid}={...protectedHeader,...token?.header},kty=function getKtyFromAlg(alg){switch("string"==typeof alg&&alg.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new errors_JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(alg),candidates=this._jwks.keys.filter(jwk=>{let candidate=kty===jwk.kty;if(candidate&&"string"==typeof kid&&(candidate=kid===jwk.kid),candidate&&"string"==typeof jwk.alg&&(candidate=alg===jwk.alg),candidate&&"string"==typeof jwk.use&&(candidate="sig"===jwk.use),candidate&&Array.isArray(jwk.key_ops)&&(candidate=jwk.key_ops.includes("verify")),candidate)switch(alg){case"ES256":candidate="P-256"===jwk.crv;break;case"ES256K":candidate="secp256k1"===jwk.crv;break;case"ES384":candidate="P-384"===jwk.crv;break;case"ES512":candidate="P-521"===jwk.crv;break;case"Ed25519":candidate="Ed25519"===jwk.crv;break;case"EdDSA":candidate="Ed25519"===jwk.crv||"Ed448"===jwk.crv}return candidate}),{0:jwk,length}=candidates;if(0===length)throw new JWKSNoMatchingKey;if(1!==length){const error=new JWKSMultipleMatchingKeys,{_cached}=this;throw error[Symbol.asyncIterator]=async function*(){for(const jwk of candidates)try{yield await importWithAlgCache(_cached,jwk,alg)}catch{}},error}return importWithAlgCache(this._cached,jwk,alg)}}async function importWithAlgCache(cache,jwk,alg){const cached=cache.get(jwk)||cache.set(jwk,{}).get(jwk);if(void 0===cached[alg]){const key=await importJWK({...jwk,ext:!0},alg);if(key instanceof Uint8Array||"public"!==key.type)throw new JWKSInvalid("JSON Web Key Set members must be public keys");cached[alg]=key}return cached[alg]}function createLocalJWKSet(jwks){const set=new LocalJWKSet(jwks),localJWKSet=async(protectedHeader,token)=>set.getKey(protectedHeader,token);return Object.defineProperties(localJWKSet,{jwks:{value:()=>clone(set._jwks),enumerable:!0,configurable:!1,writable:!1}}),localJWKSet}let USER_AGENT;if("undefined"==typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 ")){USER_AGENT=`${"jose"}/${"v5.10.0"}`}const jwksCache=Symbol();class RemoteJWKSet{constructor(url,options){if(!(url instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(url.href),this._options={agent:options?.agent,headers:options?.headers},this._timeoutDuration="number"==typeof options?.timeoutDuration?options?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof options?.cooldownDuration?options?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof options?.cacheMaxAge?options?.cacheMaxAge:6e5,void 0!==options?.[jwksCache]&&(this._cache=options?.[jwksCache],function isFreshJwksCache(input,cacheMaxAge){return"object"==typeof input&&null!==input&&"uat"in input&&"number"==typeof input.uat&&!(Date.now()-input.uat>=cacheMaxAge)&&!!("jwks"in input&&isObject(input.jwks)&&Array.isArray(input.jwks.keys)&&Array.prototype.every.call(input.jwks.keys,isObject))}(options?.[jwksCache],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=createLocalJWKSet(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(protectedHeader,token){this._local&&this.fresh()||await this.reload();try{return await this._local(protectedHeader,token)}catch(err){if(err instanceof JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(protectedHeader,token);throw err}}async reload(){this._pendingFetch&&function isCloudflareWorkers(){return"undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime}()&&(this._pendingFetch=void 0);const headers=new Headers(this._options.headers);USER_AGENT&&!headers.has("User-Agent")&&(headers.set("User-Agent",USER_AGENT),this._options.headers=Object.fromEntries(headers.entries())),this._pendingFetch||(this._pendingFetch=fetch_jwks(this._url,this._timeoutDuration,this._options).then(json=>{this._local=createLocalJWKSet(json),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=json),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(err=>{throw this._pendingFetch=void 0,err})),await this._pendingFetch}}const key_to_jwk=async key=>{if(key instanceof Uint8Array)return{kty:"oct",k:encode(key)};if(!isCryptoKey(key))throw new TypeError(invalid_key_input(key,...types,"Uint8Array"));if(!key.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext,key_ops,alg,use,...jwk}=await webcrypto.subtle.exportKey("jwk",key);return jwk};async function exportJWK(key){return key_to_jwk(key)}const runtime_sign=async(alg,key,data)=>{const cryptoKey=await getCryptoKey(alg,key,"sign");check_key_length(alg,cryptoKey);const signature=await webcrypto.subtle.sign(subtleDsa(alg,cryptoKey.algorithm),cryptoKey,data);return new Uint8Array(signature)};class FlattenedSign{constructor(payload){if(!(payload instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=payload}setProtectedHeader(protectedHeader){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=protectedHeader,this}setUnprotectedHeader(unprotectedHeader){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=unprotectedHeader,this}async sign(key,options){if(!this._protectedHeader&&!this._unprotectedHeader)throw new JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!is_disjoint(this._protectedHeader,this._unprotectedHeader))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const joseHeader={...this._protectedHeader,...this._unprotectedHeader};let b64=!0;if(validate_crit(JWSInvalid,new Map([["b64",!0]]),options?.crit,this._protectedHeader,joseHeader).has("b64")&&(b64=this._protectedHeader.b64,"boolean"!=typeof b64))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg}=joseHeader;if("string"!=typeof alg||!alg)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');checkKeyTypeWithJwk(alg,key,"sign");let protectedHeader,payload=this._payload;b64&&(payload=encoder.encode(encode(payload))),protectedHeader=this._protectedHeader?encoder.encode(encode(JSON.stringify(this._protectedHeader))):encoder.encode("");const data=concat(protectedHeader,encoder.encode("."),payload),signature=await runtime_sign(alg,key,data),jws={signature:encode(signature),payload:""};return b64&&(jws.payload=decoder.decode(payload)),this._unprotectedHeader&&(jws.header=this._unprotectedHeader),this._protectedHeader&&(jws.protected=decoder.decode(protectedHeader)),jws}}class CompactSign{constructor(payload){this._flattened=new FlattenedSign(payload)}setProtectedHeader(protectedHeader){return this._flattened.setProtectedHeader(protectedHeader),this}async sign(key,options){const jws=await this._flattened.sign(key,options);if(void 0===jws.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${jws.protected}.${jws.payload}.${jws.signature}`}}function validateInput(label,input){if(!Number.isFinite(input))throw new TypeError(`Invalid ${label} input`);return input}class ProduceJWT{constructor(payload={}){if(!isObject(payload))throw new TypeError("JWT Claims Set MUST be an object");this._payload=payload}setIssuer(issuer){return this._payload={...this._payload,iss:issuer},this}setSubject(subject){return this._payload={...this._payload,sub:subject},this}setAudience(audience){return this._payload={...this._payload,aud:audience},this}setJti(jwtId){return this._payload={...this._payload,jti:jwtId},this}setNotBefore(input){return"number"==typeof input?this._payload={...this._payload,nbf:validateInput("setNotBefore",input)}:input instanceof Date?this._payload={...this._payload,nbf:validateInput("setNotBefore",epoch(input))}:this._payload={...this._payload,nbf:epoch(new Date)+secs(input)},this}setExpirationTime(input){return"number"==typeof input?this._payload={...this._payload,exp:validateInput("setExpirationTime",input)}:input instanceof Date?this._payload={...this._payload,exp:validateInput("setExpirationTime",epoch(input))}:this._payload={...this._payload,exp:epoch(new Date)+secs(input)},this}setIssuedAt(input){return void 0===input?this._payload={...this._payload,iat:epoch(new Date)}:input instanceof Date?this._payload={...this._payload,iat:validateInput("setIssuedAt",epoch(input))}:this._payload="string"==typeof input?{...this._payload,iat:validateInput("setIssuedAt",epoch(new Date)+secs(input))}:{...this._payload,iat:validateInput("setIssuedAt",input)},this}}class SignJWT extends ProduceJWT{setProtectedHeader(protectedHeader){return this._protectedHeader=protectedHeader,this}async sign(key,options){const sig=new CompactSign(encoder.encode(JSON.stringify(this._payload)));if(sig.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");return sig.sign(key,options)}}function getModulusLengthOption(options){const modulusLength=options?.modulusLength??2048;if("number"!=typeof modulusLength||modulusLength<2048)throw new errors_JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return modulusLength}async function generate_key_pair_generateKeyPair(alg,options){return async function generateKeyPair(alg,options){let algorithm,keyUsages;switch(alg){case"PS256":case"PS384":case"PS512":algorithm={name:"RSA-PSS",hash:`SHA-${alg.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(options)},keyUsages=["sign","verify"];break;case"RS256":case"RS384":case"RS512":algorithm={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${alg.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(options)},keyUsages=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":algorithm={name:"RSA-OAEP",hash:`SHA-${parseInt(alg.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(options)},keyUsages=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":algorithm={name:"ECDSA",namedCurve:"P-256"},keyUsages=["sign","verify"];break;case"ES384":algorithm={name:"ECDSA",namedCurve:"P-384"},keyUsages=["sign","verify"];break;case"ES512":algorithm={name:"ECDSA",namedCurve:"P-521"},keyUsages=["sign","verify"];break;case"Ed25519":algorithm={name:"Ed25519"},keyUsages=["sign","verify"];break;case"EdDSA":{keyUsages=["sign","verify"];const crv=options?.crv??"Ed25519";switch(crv){case"Ed25519":case"Ed448":algorithm={name:crv};break;default:throw new errors_JOSENotSupported("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{keyUsages=["deriveKey","deriveBits"];const crv=options?.crv??"P-256";switch(crv){case"P-256":case"P-384":case"P-521":algorithm={name:"ECDH",namedCurve:crv};break;case"X25519":case"X448":algorithm={name:crv};break;default:throw new errors_JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return webcrypto.subtle.generateKey(algorithm,options?.extractable??!1,keyUsages)}(alg,options)}const esm_browser_native={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let getRandomValues;const rnds8=new Uint8Array(16);const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}const esm_browser_v4=function v4(options,buf,offset){if(esm_browser_native.randomUUID&&!buf&&!options)return esm_browser_native.randomUUID();const rnds=(options=options||{}).random??options.rng?.()??function rng(){if(!getRandomValues){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}();if(rnds.length<16)throw new Error("Random bytes length must be >= 16");if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){if((offset=offset||0)<0||offset+16>buf.length)throw new RangeError(`UUID byte range ${offset}:${offset+15} is out of buffer bounds`);for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)},PREFERRED_SIGNING_ALG=["ES256","RS256"],EVENTS_ERROR="error",EVENTS_LOGIN="login",EVENTS_LOGOUT="logout",EVENTS_NEW_REFRESH_TOKEN="newRefreshToken",EVENTS_SESSION_EXPIRED="sessionExpired",EVENTS_SESSION_EXTENDED="sessionExtended",EVENTS_SESSION_RESTORED="sessionRestore",EVENTS_TIMEOUT_SET="timeoutSet",DEFAULT_SCOPES=["openid","offline_access","webid"];class AggregateHandler{handleables;constructor(handleables){this.handleables=handleables,this.handleables=handleables}async getProperHandler(params){const canHandleList=await Promise.all(this.handleables.map(handleable=>handleable.canHandle(...params)));for(let i=0;i<canHandleList.length;i+=1)if(canHandleList[i])return this.handleables[i];return null}async canHandle(...params){return null!==await this.getProperHandler(params)}async handle(...params){const handler=await this.getProperHandler(params);if(handler)return handler.handle(...params);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${params.map(param=>{try{return JSON.stringify(param)}catch(err){return param.toString()}}).join(", ")}`)}}async function getWebidFromTokenPayload(idToken,jwksIri,issuerIri,clientId){let payload,clientIdInPayload;try{const{payload:verifiedPayload}=await async function jwtVerify(jwt,key,options){const verified=await compactVerify(jwt,key,options);if(verified.protectedHeader.crit?.includes("b64")&&!1===verified.protectedHeader.b64)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");const result={payload:jwt_claims_set(verified.protectedHeader,verified.payload,options),protectedHeader:verified.protectedHeader};return"function"==typeof key?{...result,key:verified.key}:result}(idToken,function createRemoteJWKSet(url,options){const set=new RemoteJWKSet(url,options),remoteJWKSet=async(protectedHeader,token)=>set.getKey(protectedHeader,token);return Object.defineProperties(remoteJWKSet,{coolingDown:{get:()=>set.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>set.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>set.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!set._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>set._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),remoteJWKSet}(new URL(jwksIri)),{issuer:issuerIri,audience:clientId});payload=verifiedPayload}catch(e){throw new Error(`Token verification failed: ${e.stack}`)}if("string"==typeof payload.azp&&(clientIdInPayload=payload.azp),"string"==typeof payload.webid)return{webId:payload.webid,clientId:clientIdInPayload};if("string"!=typeof payload.sub)throw new Error(`The token ${JSON.stringify(payload)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(payload.sub),{webId:payload.sub,clientId:clientIdInPayload}}catch(e){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${payload.sub}] is invalid as a URL - error [${e}].`)}}function isValidRedirectUrl(redirectUrl){try{const urlObject=new URL(redirectUrl),noReservedQuery=!urlObject.searchParams.has("code")&&!urlObject.searchParams.has("state"),noHash=""===urlObject.hash;return noReservedQuery&&noHash}catch(e){return!1}}function removeOpenIdParams(redirectUrl){const cleanedUpUrl=new URL(redirectUrl);return cleanedUpUrl.searchParams.delete("state"),cleanedUpUrl.searchParams.delete("code"),cleanedUpUrl.searchParams.delete("error"),cleanedUpUrl.searchParams.delete("error_description"),cleanedUpUrl.searchParams.delete("iss"),cleanedUpUrl}class AuthorizationCodeWithPkceOidcHandlerBase{storageUtility;redirector;constructor(storageUtility,redirector){this.storageUtility=storageUtility,this.redirector=redirector,this.storageUtility=storageUtility,this.redirector=redirector}parametersGuard=oidcLoginOptions=>void 0!==oidcLoginOptions.issuerConfiguration.grantTypesSupported&&oidcLoginOptions.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1&&void 0!==oidcLoginOptions.redirectUrl;async canHandle(oidcLoginOptions){return this.parametersGuard(oidcLoginOptions)}async setupRedirectHandler({oidcLoginOptions,state,codeVerifier,targetUrl}){if(!this.parametersGuard(oidcLoginOptions))throw new Error("The authorization code grant requires a redirectUrl.");var value,fallback;await Promise.all([this.storageUtility.setForUser(state,{sessionId:oidcLoginOptions.sessionId}),this.storageUtility.setForUser(oidcLoginOptions.sessionId,{codeVerifier,issuer:oidcLoginOptions.issuer.toString(),redirectUrl:oidcLoginOptions.redirectUrl,dpop:Boolean(oidcLoginOptions.dpop).toString(),keepAlive:(value=oidcLoginOptions.keepAlive,fallback=!0,"boolean"==typeof value?Boolean(value):Boolean(fallback)).toString()})]),this.redirector.redirect(targetUrl,{handleRedirect:oidcLoginOptions.handleRedirect})}}class GeneralLogoutHandler{sessionInfoManager;constructor(sessionInfoManager){this.sessionInfoManager=sessionInfoManager,this.sessionInfoManager=sessionInfoManager}async canHandle(){return!0}async handle(userId){await this.sessionInfoManager.clear(userId)}}class IRpLogoutHandler{redirector;constructor(redirector){this.redirector=redirector,this.redirector=redirector}async canHandle(userId,options){return"idp"===options?.logoutType}async handle(userId,options){if("idp"!==options?.logoutType)throw new Error("Attempting to call idp logout handler to perform app logout");if(void 0===options.toLogoutUrl)throw new Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(options.toLogoutUrl(options),{handleRedirect:options.handleRedirect})}}class IWaterfallLogoutHandler{handlers;constructor(sessionInfoManager,redirector){this.handlers=[new GeneralLogoutHandler(sessionInfoManager),new IRpLogoutHandler(redirector)]}async canHandle(){return!0}async handle(userId,options){for(const handler of this.handlers)await handler.canHandle(userId,options)&&await handler.handle(userId,options)}}function getUnauthenticatedSession(){return{isLoggedIn:!1,sessionId:esm_browser_v4(),fetch:(...args)=>fetch(...args)}}async function clear(sessionId,storage){await Promise.all([storage.deleteAllUserData(sessionId,{secure:!1}),storage.deleteAllUserData(sessionId,{secure:!0})])}class SessionInfoManagerBase{storageUtility;constructor(storageUtility){this.storageUtility=storageUtility,this.storageUtility=storageUtility}update(_sessionId,_options){throw new Error("Not Implemented")}set(_sessionId,_sessionInfo){throw new Error("Not Implemented")}get(_){throw new Error("Not implemented")}async getAll(){throw new Error("Not implemented")}async clear(sessionId){return clear(sessionId,this.storageUtility)}async register(_sessionId){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}async setOidcContext(_sessionId,_authorizationRequestState){throw new Error("Not implemented")}}function maybeBuildRpInitiatedLogout({endSessionEndpoint,idTokenHint}){if(void 0!==endSessionEndpoint)return function logout({state,postLogoutUrl}){return function getEndSessionUrl({endSessionEndpoint,idTokenHint,postLogoutRedirectUri,state}){const url=new URL(endSessionEndpoint);return void 0!==idTokenHint&&url.searchParams.append("id_token_hint",idTokenHint),void 0!==postLogoutRedirectUri&&(url.searchParams.append("post_logout_redirect_uri",postLogoutRedirectUri),void 0!==state&&url.searchParams.append("state",state)),url.toString()}({endSessionEndpoint,idTokenHint,state,postLogoutRedirectUri:postLogoutUrl})}}function isValidUrl(url){try{return new URL(url),!0}catch{return!1}}async function handleRegistration(options,issuerConfig,storageUtility,clientRegistrar){let clientInfo;if(function isSolidOidcClient(options,issuerConfig){return issuerConfig.scopesSupported.includes("webid")&&void 0!==options.clientId&&isValidUrl(options.clientId)}(options,issuerConfig))clientInfo={clientId:options.clientId,clientName:options.clientName,clientType:"solid-oidc"};else{if(!function isStaticClient(options){return void 0!==options.clientId&&!isValidUrl(options.clientId)}(options))return clientRegistrar.getClient({sessionId:options.sessionId,clientName:options.clientName,redirectUrl:options.redirectUrl},issuerConfig);clientInfo={clientId:options.clientId,clientSecret:options.clientSecret,clientName:options.clientName,clientType:"static"}}const infoToSave={clientId:clientInfo.clientId,clientType:clientInfo.clientType};return"static"===clientInfo.clientType&&(infoToSave.clientSecret=clientInfo.clientSecret),clientInfo.clientName&&(infoToSave.clientName=clientInfo.clientName),await storageUtility.setForUser(options.sessionId,infoToSave),clientInfo}const boundFetch=(request,init)=>fetch(request,init);class dist_ClientAuthentication{loginHandler;redirectHandler;logoutHandler;sessionInfoManager;issuerConfigFetcher;boundLogout;constructor(loginHandler,redirectHandler,logoutHandler,sessionInfoManager,issuerConfigFetcher){this.loginHandler=loginHandler,this.redirectHandler=redirectHandler,this.logoutHandler=logoutHandler,this.sessionInfoManager=sessionInfoManager,this.issuerConfigFetcher=issuerConfigFetcher,this.loginHandler=loginHandler,this.redirectHandler=redirectHandler,this.logoutHandler=logoutHandler,this.sessionInfoManager=sessionInfoManager,this.issuerConfigFetcher=issuerConfigFetcher}fetch=boundFetch;logout=async(sessionId,options)=>{await this.logoutHandler.handle(sessionId,"idp"===options?.logoutType?{...options,toLogoutUrl:this.boundLogout}:options),this.fetch=boundFetch,delete this.boundLogout};getSessionInfo=async sessionId=>this.sessionInfoManager.get(sessionId);getAllSessionInfo=async()=>this.sessionInfoManager.getAll()}async function loadOidcContextFromStorage(sessionId,storageUtility,configFetcher){try{const[issuerIri,codeVerifier,storedRedirectIri,dpop,keepAlive]=await Promise.all([storageUtility.getForUser(sessionId,"issuer",{errorIfNull:!0}),storageUtility.getForUser(sessionId,"codeVerifier"),storageUtility.getForUser(sessionId,"redirectUrl"),storageUtility.getForUser(sessionId,"dpop",{errorIfNull:!0}),storageUtility.getForUser(sessionId,"keepAlive")]);await storageUtility.deleteForUser(sessionId,"codeVerifier");return{codeVerifier,redirectUrl:storedRedirectIri,issuerConfig:await configFetcher.fetchConfig(issuerIri),dpop:"true"===dpop,keepAlive:"string"!=typeof keepAlive||"true"===keepAlive}}catch(e){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${sessionId}]: ${e}`)}}class StorageUtility{secureStorage;insecureStorage;constructor(secureStorage,insecureStorage){this.secureStorage=secureStorage,this.insecureStorage=insecureStorage,this.secureStorage=secureStorage,this.insecureStorage=insecureStorage}getKey(userId){return`solidClientAuthenticationUser:${userId}`}async getUserData(userId,secure){const stored=await(secure?this.secureStorage:this.insecureStorage).get(this.getKey(userId));if(void 0===stored)return{};try{return JSON.parse(stored)}catch(err){throw new Error(`Data for user [${userId}] in [${secure?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${stored}`)}}async setUserData(userId,data,secure){await(secure?this.secureStorage:this.insecureStorage).set(this.getKey(userId),JSON.stringify(data))}async get(key,options){const value=await(options?.secure?this.secureStorage:this.insecureStorage).get(key);if(void 0===value&&options?.errorIfNull)throw new Error(`[${key}] is not stored`);return value}async set(key,value,options){return(options?.secure?this.secureStorage:this.insecureStorage).set(key,value)}async delete(key,options){return(options?.secure?this.secureStorage:this.insecureStorage).delete(key)}async getForUser(userId,key,options){const userData=await this.getUserData(userId,options?.secure);let value;if(userData&&userData[key]||(value=void 0),value=userData[key],void 0===value&&options?.errorIfNull)throw new Error(`Field [${key}] for user [${userId}] is not stored`);return value||void 0}async setForUser(userId,values,options){let userData;try{userData=await this.getUserData(userId,options?.secure)}catch{userData={}}await this.setUserData(userId,{...userData,...values},options?.secure)}async deleteForUser(userId,key,options){const userData=await this.getUserData(userId,options?.secure);delete userData[key],await this.setUserData(userId,userData,options?.secure)}async deleteAllUserData(userId,options){await(options?.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(userId))}}class InMemoryStorage{map={};async get(key){return this.map[key]||void 0}async set(key,value){this.map[key]=value}async delete(key){delete this.map[key]}}class ConfigurationError extends Error{constructor(message){super(message)}}Error;class InvalidResponseError extends Error{missingFields;constructor(missingFields){super(`Invalid response from OIDC provider: missing fields ${missingFields}`),this.missingFields=missingFields}}class OidcProviderError extends Error{error;errorDescription;constructor(message,error,errorDescription){super(message),this.error=error,this.errorDescription=errorDescription}}function normalizeHTU(audience){const audienceUrl=new URL(audience);return new URL(audienceUrl.pathname,audienceUrl.origin).toString()}async function createDpopHeader(audience,method,dpopKey){return new SignJWT({htu:normalizeHTU(audience),htm:method.toUpperCase(),jti:esm_browser_v4()}).setProtectedHeader({alg:PREFERRED_SIGNING_ALG[0],jwk:dpopKey.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(dpopKey.privateKey,{})}async function buildAuthenticatedHeaders(targetUrl,authToken,dpopKey,defaultOptions){if(void 0!==dpopKey)return async function buildDpopFetchOptions(targetUrl,authToken,dpopKey,defaultOptions){const headers=new Headers(defaultOptions?.headers);return headers.set("Authorization",`DPoP ${authToken}`),headers.set("DPoP",await createDpopHeader(targetUrl,defaultOptions?.method??"get",dpopKey)),{...defaultOptions,headers}}(targetUrl,authToken,dpopKey,defaultOptions);const headers=new Headers(defaultOptions?.headers);return headers.set("Authorization",`Bearer ${authToken}`),{...defaultOptions,headers}}async function makeAuthenticatedRequest(accessToken,url,defaultRequestInit,dpopKey,unauthFetch=fetch){return unauthFetch(url,await buildAuthenticatedHeaders(url.toString(),accessToken,dpopKey,defaultRequestInit))}const computeRefreshDelay=expiresIn=>void 0!==expiresIn?expiresIn-5>0?expiresIn-5:expiresIn:600;function buildAuthenticatedFetch(accessToken,options){let latestTimeout,currentAccessToken=accessToken;const currentRefreshOptions=options?.refreshOptions;if(void 0!==currentRefreshOptions){const proactivelyRefreshToken=async()=>{try{const{accessToken:refreshedAccessToken,refreshToken,expiresIn}=await async function refreshAccessToken(refreshOptions,dpopKey,eventEmitter){const tokenSet=await refreshOptions.tokenRefresher.refresh(refreshOptions.sessionId,refreshOptions.refreshToken,dpopKey);return eventEmitter?.emit(EVENTS_SESSION_EXTENDED,tokenSet.expiresIn??600),{accessToken:tokenSet.accessToken,refreshToken:tokenSet.refreshToken,expiresIn:tokenSet.expiresIn}}(currentRefreshOptions,options.dpopKey,options.eventEmitter);currentAccessToken=refreshedAccessToken,void 0!==refreshToken&&(currentRefreshOptions.refreshToken=refreshToken),clearTimeout(latestTimeout),latestTimeout=setTimeout(proactivelyRefreshToken,1e3*computeRefreshDelay(expiresIn)),options.eventEmitter?.emit(EVENTS_TIMEOUT_SET,latestTimeout)}catch(e){e instanceof OidcProviderError&&(options?.eventEmitter?.emit(EVENTS_ERROR,e.error,e.errorDescription),options?.eventEmitter?.emit(EVENTS_SESSION_EXPIRED)),e instanceof InvalidResponseError&&e.missingFields.includes("access_token")&&options?.eventEmitter?.emit(EVENTS_SESSION_EXPIRED)}};latestTimeout=setTimeout(proactivelyRefreshToken,1e3*computeRefreshDelay(options.expiresIn)),options.eventEmitter?.emit(EVENTS_TIMEOUT_SET,latestTimeout)}else if(void 0!==options&&void 0!==options.eventEmitter){const expirationTimeout=setTimeout(()=>{options.eventEmitter.emit(EVENTS_SESSION_EXPIRED)},1e3*computeRefreshDelay(options.expiresIn));options.eventEmitter.emit(EVENTS_TIMEOUT_SET,expirationTimeout)}return async(url,requestInit)=>{let response=await makeAuthenticatedRequest(currentAccessToken,url,requestInit,options?.dpopKey,options?.fetch);const failedButNotExpectedAuthError=!response.ok&&!function isExpectedAuthError(statusCode){return[401,403].includes(statusCode)}(response.status);if(response.ok||failedButNotExpectedAuthError)return response;return response.url!==url&&void 0!==options?.dpopKey&&(response=await makeAuthenticatedRequest(currentAccessToken,response.url,requestInit,options.dpopKey,options.fetch)),response}}var events=__nested_webpack_require_304590__(7),oidc_client_min=__nested_webpack_require_304590__(516);function validateRegistrationResponse(responseBody,options){if(!function hasClientId(body){return"string"==typeof body.client_id}(responseBody))throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(responseBody)}`);if(options.redirectUrl&&function hasRedirectUri(body){return Array.isArray(body.redirect_uris)&&body.redirect_uris.every(uri=>"string"==typeof uri)}(responseBody)&&responseBody.redirect_uris[0]!==options.redirectUrl.toString())throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(responseBody.redirect_uris)} don't match the provided ${JSON.stringify([options.redirectUrl.toString()])}`);return!0}async function registerClient(options,issuerConfig){if(!issuerConfig.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(issuerConfig.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const signingAlg=function determineSigningAlg(supported,preferred){return preferred.find(signingAlg=>supported.includes(signingAlg))??null}(issuerConfig.idTokenSigningAlgValuesSupported,PREFERRED_SIGNING_ALG),config={client_name:options.clientName,application_type:"web",redirect_uris:[options.redirectUrl?.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:signingAlg,grant_types:["authorization_code","refresh_token"]},registerResponse=await fetch(issuerConfig.registrationEndpoint.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(config)});if(registerResponse.ok){const responseBody=await registerResponse.json();return validateRegistrationResponse(responseBody,options),{clientId:responseBody.client_id,clientSecret:responseBody.client_secret,expiresAt:responseBody.client_secret_expires_at,idTokenSignedResponseAlg:responseBody.id_token_signed_response_alg,clientType:"dynamic"}}throw 400===registerResponse.status&&function processErrorResponse(responseBody,options){if("invalid_redirect_uri"===responseBody.error)throw new Error(`Dynamic client registration failed: the provided redirect uri [${options.redirectUrl?.toString()}] is invalid - ${responseBody.error_description??""}`);if("invalid_client_metadata"===responseBody.error)throw new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(options)} is invalid - ${responseBody.error_description??""}`);throw new Error(`Dynamic client registration failed: ${responseBody.error} - ${responseBody.error_description??""}`)}(await registerResponse.json(),options),new Error(`Dynamic client registration failed: the server returned ${registerResponse.status} ${registerResponse.statusText} - ${await registerResponse.text()}`)}function hasErrorDescription(value){return void 0!==value.error_description&&"string"==typeof value.error_description}function validateTokenEndpointResponse(tokenResponse,dpop){if(function hasError(value){return void 0!==value.error&&"string"==typeof value.error}(tokenResponse))throw new OidcProviderError(`Token endpoint returned error [${tokenResponse.error}]${hasErrorDescription(tokenResponse)?`: ${tokenResponse.error_description}`:""}${function hasErrorUri(value){return void 0!==value.error_uri&&"string"==typeof value.error_uri}(tokenResponse)?` (see ${tokenResponse.error_uri})`:""}`,tokenResponse.error,hasErrorDescription(tokenResponse)?tokenResponse.error_description:void 0);if(!function hasAccessToken(value){return void 0!==value.access_token&&"string"==typeof value.access_token}(tokenResponse))throw new InvalidResponseError(["access_token"]);if(!function hasIdToken(value){return void 0!==value.id_token&&"string"==typeof value.id_token}(tokenResponse))throw new InvalidResponseError(["id_token"]);if(!function hasTokenType(value){return void 0!==value.token_type&&"string"==typeof value.token_type}(tokenResponse))throw new InvalidResponseError(["token_type"]);if(!function hasExpiresIn(value){return void 0===value.expires_in||"number"==typeof value.expires_in}(tokenResponse))throw new InvalidResponseError(["expires_in"]);if(!dpop&&"bearer"!==tokenResponse.token_type.toLowerCase())throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${tokenResponse.token_type}].`);return tokenResponse}async function getTokens(issuer,client,data,dpop){!function validatePreconditions(issuer,data){if(data.grantType&&(!issuer.grantTypesSupported||!issuer.grantTypesSupported.includes(data.grantType)))throw new Error(`The issuer [${issuer.issuer}] does not support the [${data.grantType}] grant`);if(!issuer.tokenEndpoint)throw new Error(`This issuer [${issuer.issuer}] does not have a token endpoint`)}(issuer,data);const headers={"content-type":"application/x-www-form-urlencoded"};let dpopKey;dpop&&(dpopKey=await async function generateDpopKeyPair(){const{privateKey,publicKey}=await generate_key_pair_generateKeyPair(PREFERRED_SIGNING_ALG[0]),dpopKeyPair={privateKey,publicKey:await exportJWK(publicKey)};return[dpopKeyPair.publicKey.alg]=PREFERRED_SIGNING_ALG,dpopKeyPair}(),headers.DPoP=await createDpopHeader(issuer.tokenEndpoint,"POST",dpopKey)),client.clientSecret&&(headers.Authorization=`Basic ${btoa(`${client.clientId}:${client.clientSecret}`)}`);const requestBody={grant_type:data.grantType,redirect_uri:data.redirectUrl,code:data.code,code_verifier:data.codeVerifier,client_id:client.clientId},tokenRequestInit={method:"POST",headers,body:new URLSearchParams(requestBody).toString()},rawTokenResponse=await fetch(issuer.tokenEndpoint,tokenRequestInit),tokenResponse=validateTokenEndpointResponse(await rawTokenResponse.json(),dpop),{webId,clientId}=await getWebidFromTokenPayload(tokenResponse.id_token,issuer.jwksUri,issuer.issuer,client.clientId);return{accessToken:tokenResponse.access_token,idToken:tokenResponse.id_token,refreshToken:(value=tokenResponse,void 0!==value.refresh_token&&"string"==typeof value.refresh_token?tokenResponse.refresh_token:void 0),webId,clientId,dpopKey,expiresIn:tokenResponse.expires_in};var value}async function refresh(refreshToken,issuer,client,dpopKey){if(void 0===client.clientId)throw new Error("No client ID available when trying to refresh the access token.");const requestBody={grant_type:"refresh_token",refresh_token:refreshToken};let dpopHeader={};void 0!==dpopKey&&(dpopHeader={DPoP:await createDpopHeader(issuer.tokenEndpoint,"POST",dpopKey)});let authHeader={};void 0!==client.clientSecret?authHeader={Authorization:`Basic ${btoa(`${client.clientId}:${client.clientSecret}`)}`}:(url=>{try{return new URL(url),!0}catch{return!1}})(client.clientId)&&(requestBody.client_id=client.clientId);const rawResponse=await fetch(issuer.tokenEndpoint,{method:"POST",body:new URLSearchParams(requestBody).toString(),headers:{...dpopHeader,...authHeader,"Content-Type":"application/x-www-form-urlencoded"}});let response;try{response=await rawResponse.json()}catch(e){throw new Error(`The token endpoint of issuer ${issuer.issuer} returned a malformed response.`)}const validatedResponse=validateTokenEndpointResponse(response,void 0!==dpopKey),{webId}=await getWebidFromTokenPayload(validatedResponse.id_token,issuer.jwksUri,issuer.issuer,client.clientId);return{accessToken:validatedResponse.access_token,idToken:validatedResponse.id_token,refreshToken:"string"==typeof validatedResponse.refresh_token?validatedResponse.refresh_token:void 0,webId,dpopKey,expiresIn:validatedResponse.expires_in}}class StorageUtilityBrowser extends StorageUtility{constructor(secureStorage,insecureStorage){super(secureStorage,insecureStorage)}}class ClientAuthentication extends dist_ClientAuthentication{login=async(options,eventEmitter)=>{"none"!==options.prompt&&await this.sessionInfoManager.clear(options.sessionId);const redirectUrl=options.redirectUrl??function normalizeCallbackUrl(redirectUrl){const cleanedUrl=removeOpenIdParams(redirectUrl);return cleanedUrl.hash="",redirectUrl.includes(`${cleanedUrl.origin}/`)?cleanedUrl.href:`${cleanedUrl.origin}${cleanedUrl.href.substring(cleanedUrl.origin.length+1)}`}(window.location.href);if(!isValidRedirectUrl(redirectUrl))throw new Error(`${redirectUrl} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...options,redirectUrl,clientName:options.clientName??options.clientId,eventEmitter})};validateCurrentSession=async currentSessionId=>{const sessionInfo=await this.sessionInfoManager.get(currentSessionId);return void 0===sessionInfo||void 0===sessionInfo.clientAppId||void 0===sessionInfo.issuer?null:sessionInfo};handleIncomingRedirect=async(url,eventEmitter)=>{try{const redirectInfo=await this.redirectHandler.handle(url,eventEmitter,void 0);return this.fetch=redirectInfo.fetch.bind(window),this.boundLogout=redirectInfo.getLogoutUrl,await this.cleanUrlAfterRedirect(url),{isLoggedIn:redirectInfo.isLoggedIn,webId:redirectInfo.webId,sessionId:redirectInfo.sessionId,expirationDate:redirectInfo.expirationDate,clientAppId:redirectInfo.clientAppId}}catch(err){return await this.cleanUrlAfterRedirect(url),void eventEmitter.emit(EVENTS_ERROR,"redirect",err)}};async cleanUrlAfterRedirect(url){const cleanedUpUrl=removeOpenIdParams(url).href;for(window.history.replaceState(null,"",cleanedUpUrl);window.location.href!==cleanedUpUrl;)await new Promise(resolve=>{setTimeout(()=>resolve(),1)})}}function hasIssuer(options){return"string"==typeof options.oidcIssuer}function hasRedirectUrl(options){return"string"==typeof options.redirectUrl}class OidcLoginHandler{storageUtility;oidcHandler;issuerConfigFetcher;clientRegistrar;constructor(storageUtility,oidcHandler,issuerConfigFetcher,clientRegistrar){this.storageUtility=storageUtility,this.oidcHandler=oidcHandler,this.issuerConfigFetcher=issuerConfigFetcher,this.clientRegistrar=clientRegistrar,this.storageUtility=storageUtility,this.oidcHandler=oidcHandler,this.issuerConfigFetcher=issuerConfigFetcher,this.clientRegistrar=clientRegistrar}async canHandle(options){return hasIssuer(options)&&hasRedirectUrl(options)}async handle(options){if(!hasIssuer(options))throw new ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(options)}`);if(!hasRedirectUrl(options))throw new ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(options)}`);const issuerConfig=await this.issuerConfigFetcher.fetchConfig(options.oidcIssuer),clientRegistration=await handleRegistration(options,issuerConfig,this.storageUtility,this.clientRegistrar),OidcOptions={issuer:issuerConfig.issuer,dpop:"dpop"===options.tokenType.toLowerCase(),...options,issuerConfiguration:issuerConfig,client:clientRegistration,scopes:(scopes=options.customScopes,Array.isArray(scopes)?Array.from(new Set([...DEFAULT_SCOPES,...scopes.filter(scope=>"string"==typeof scope&&!scope.includes(" "))])):DEFAULT_SCOPES)};var scopes;return this.oidcHandler.handle(OidcOptions)}}class AuthorizationCodeWithPkceOidcHandler extends AuthorizationCodeWithPkceOidcHandlerBase{async handle(oidcLoginOptions){const oidcOptions={authority:oidcLoginOptions.issuer.toString(),client_id:oidcLoginOptions.client.clientId,client_secret:oidcLoginOptions.client.clientSecret,redirect_uri:oidcLoginOptions.redirectUrl,response_type:"code",scope:oidcLoginOptions.scopes.join(" "),filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:oidcLoginOptions.prompt??"consent"},oidcClientLibrary=new oidc_client_min.OidcClient(oidcOptions);try{const signingRequest=await oidcClientLibrary.createSigninRequest();return await this.setupRedirectHandler({oidcLoginOptions,state:signingRequest.state._id,codeVerifier:signingRequest.state._code_verifier,targetUrl:signingRequest.url.toString()})}catch(err){console.error(err)}}}const issuerConfigKeyMap={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};class IssuerConfigFetcher{storageUtility;constructor(storageUtility){this.storageUtility=storageUtility,this.storageUtility=storageUtility}static getLocalStorageKey(issuer){return`issuerConfig:${issuer}`}async fetchConfig(issuer){let issuerConfig;const openIdConfigUrl=new URL(".well-known/openid-configuration",issuer.endsWith("/")?issuer:`${issuer}/`).href,issuerConfigRequestBody=await fetch(openIdConfigUrl);try{issuerConfig=function processConfig(config){const parsedConfig={};return Object.keys(config).forEach(key=>{issuerConfigKeyMap[key]&&(parsedConfig[issuerConfigKeyMap[key].toKey]=config[key])}),Array.isArray(parsedConfig.scopesSupported)||(parsedConfig.scopesSupported=["openid"]),parsedConfig}(await issuerConfigRequestBody.json())}catch(err){throw new ConfigurationError(`[${issuer.toString()}] has an invalid configuration: ${err.message}`)}return await this.storageUtility.set(IssuerConfigFetcher.getLocalStorageKey(issuer),JSON.stringify(issuerConfig)),issuerConfig}}async function dist_clear(sessionId,storage){await clear(sessionId,storage),await async function clearOidcPersistentStorage(){const client=new oidc_client_min.OidcClient({response_mode:"query"});await client.clearStaleState(new oidc_client_min.WebStorageStateStore({}));const myStorage=window.localStorage,itemsToRemove=[];for(let i=0;i<=myStorage.length;i+=1){const key=myStorage.key(i);key&&(key.match(/^oidc\..+$/)||key.match(/^solidClientAuthenticationUser:.+$/))&&itemsToRemove.push(key)}itemsToRemove.forEach(key=>myStorage.removeItem(key))}()}class SessionInfoManager extends SessionInfoManagerBase{async get(sessionId){const[isLoggedIn,webId,clientId,clientSecret,redirectUrl,refreshToken,issuer,tokenType]=await Promise.all([this.storageUtility.getForUser(sessionId,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(sessionId,"webId",{secure:!0}),this.storageUtility.getForUser(sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(sessionId,"clientSecret",{secure:!1}),this.storageUtility.getForUser(sessionId,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(sessionId,"refreshToken",{secure:!0}),this.storageUtility.getForUser(sessionId,"issuer",{secure:!1}),this.storageUtility.getForUser(sessionId,"tokenType",{secure:!1})]);if("string"!=typeof redirectUrl||isValidRedirectUrl(redirectUrl)){if(void 0!==tokenType&&!function isSupportedTokenType(token){return"string"==typeof token&&["DPoP","Bearer"].includes(token)}(tokenType))throw new Error(`Tokens of type [${tokenType}] are not supported.`);if(void 0!==clientId||void 0!==isLoggedIn||void 0!==webId||void 0!==refreshToken)return{sessionId,webId,isLoggedIn:"true"===isLoggedIn,redirectUrl,refreshToken,issuer,clientAppId:clientId,clientAppSecret:clientSecret,tokenType:tokenType??"DPoP"}}else await Promise.all([this.storageUtility.deleteAllUserData(sessionId,{secure:!1}),this.storageUtility.deleteAllUserData(sessionId,{secure:!0})])}async clear(sessionId){return dist_clear(sessionId,this.storageUtility)}}class FallbackRedirectHandler{async canHandle(redirectUrl){try{return new URL(redirectUrl),!0}catch(e){throw new Error(`[${redirectUrl}] is not a valid URL, and cannot be used as a redirect URL: ${e}`)}}async handle(_redirectUrl){return getUnauthenticatedSession()}}class AuthCodeRedirectHandler{storageUtility;sessionInfoManager;issuerConfigFetcher;clientRegistrar;tokerRefresher;constructor(storageUtility,sessionInfoManager,issuerConfigFetcher,clientRegistrar,tokerRefresher){this.storageUtility=storageUtility,this.sessionInfoManager=sessionInfoManager,this.issuerConfigFetcher=issuerConfigFetcher,this.clientRegistrar=clientRegistrar,this.tokerRefresher=tokerRefresher,this.storageUtility=storageUtility,this.sessionInfoManager=sessionInfoManager,this.issuerConfigFetcher=issuerConfigFetcher,this.clientRegistrar=clientRegistrar,this.tokerRefresher=tokerRefresher}async canHandle(redirectUrl){try{const myUrl=new URL(redirectUrl);return null!==myUrl.searchParams.get("code")&&null!==myUrl.searchParams.get("state")}catch(e){throw new Error(`[${redirectUrl}] is not a valid URL, and cannot be used as a redirect URL: ${e}`)}}async handle(redirectUrl,eventEmitter){if(!await this.canHandle(redirectUrl))throw new Error(`AuthCodeRedirectHandler cannot handle [${redirectUrl}]: it is missing one of [code, state].`);const url=new URL(redirectUrl),oauthState=url.searchParams.get("state"),storedSessionId=await this.storageUtility.getForUser(oauthState,"sessionId",{errorIfNull:!0}),{issuerConfig,codeVerifier,redirectUrl:storedRedirectIri,dpop:isDpop}=await loadOidcContextFromStorage(storedSessionId,this.storageUtility,this.issuerConfigFetcher),iss=url.searchParams.get("iss");if("string"==typeof iss&&iss!==issuerConfig.issuer)throw new Error(`The value of the iss parameter (${iss}) does not match the issuer identifier of the authorization server (${issuerConfig.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(void 0===codeVerifier)throw new Error(`The code verifier for session ${storedSessionId} is missing from storage.`);if(void 0===storedRedirectIri)throw new Error(`The redirect URL for session ${storedSessionId} is missing from storage.`);const client=await this.clientRegistrar.getClient({sessionId:storedSessionId},issuerConfig),tokenCreatedAt=Date.now(),tokens=await getTokens(issuerConfig,client,{grantType:"authorization_code",code:url.searchParams.get("code"),codeVerifier,redirectUrl:storedRedirectIri},isDpop);let refreshOptions;window.localStorage.removeItem(`oidc.${oauthState}`),void 0!==tokens.refreshToken&&(refreshOptions={sessionId:storedSessionId,refreshToken:tokens.refreshToken,tokenRefresher:this.tokerRefresher});const authFetch=buildAuthenticatedFetch(tokens.accessToken,{dpopKey:tokens.dpopKey,refreshOptions,eventEmitter,expiresIn:tokens.expiresIn});await async function saveSessionInfoToStorage(storageUtility,sessionId,webId,clientId,isLoggedIn,refreshToken,secure,dpopKey){void 0!==refreshToken&&await storageUtility.setForUser(sessionId,{refreshToken},{secure}),void 0!==webId&&await storageUtility.setForUser(sessionId,{webId},{secure}),void 0!==clientId&&await storageUtility.setForUser(sessionId,{clientId},{secure}),void 0!==isLoggedIn&&await storageUtility.setForUser(sessionId,{isLoggedIn},{secure}),void 0!==dpopKey&&await storageUtility.setForUser(sessionId,{publicKey:JSON.stringify(dpopKey.publicKey),privateKey:JSON.stringify(await exportJWK(dpopKey.privateKey))},{secure})}(this.storageUtility,storedSessionId,tokens.webId,tokens.clientId,"true",void 0,!0);const sessionInfo=await this.sessionInfoManager.get(storedSessionId);if(!sessionInfo)throw new Error(`Could not retrieve session: [${storedSessionId}].`);return Object.assign(sessionInfo,{fetch:authFetch,getLogoutUrl:maybeBuildRpInitiatedLogout({idTokenHint:tokens.idToken,endSessionEndpoint:issuerConfig.endSessionEndpoint}),expirationDate:"number"==typeof tokens.expiresIn?tokenCreatedAt+1e3*tokens.expiresIn:void 0})}}class AggregateRedirectHandler extends AggregateHandler{constructor(redirectHandlers){super(redirectHandlers)}}class BrowserStorage{get storage(){return window.localStorage}async get(key){return this.storage.getItem(key)||void 0}async set(key,value){this.storage.setItem(key,value)}async delete(key){this.storage.removeItem(key)}}class Redirector{redirect(redirectUrl,options){options&&options.handleRedirect?options.handleRedirect(redirectUrl):options&&options.redirectByReplacingState?window.history.replaceState({},"",redirectUrl):window.location.href=redirectUrl}}class ClientRegistrar{storageUtility;constructor(storageUtility){this.storageUtility=storageUtility,this.storageUtility=storageUtility}async getClient(options,issuerConfig){const[storedClientId,storedClientSecret,expiresAt,storedClientName,storedClientType]=await Promise.all([this.storageUtility.getForUser(options.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(options.sessionId,"clientSecret",{secure:!1}),this.storageUtility.getForUser(options.sessionId,"expiresAt",{secure:!1}),this.storageUtility.getForUser(options.sessionId,"clientName",{secure:!1}),this.storageUtility.getForUser(options.sessionId,"clientType",{secure:!1})]),expirationDate=void 0!==expiresAt?Number.parseInt(expiresAt,10):-1,expired=void 0!==storedClientSecret&&0!==expirationDate&&Math.floor(Date.now()/1e3)>expirationDate;if(storedClientId&&function isKnownClientType(clientType){return"string"==typeof clientType&&["dynamic","static","solid-oidc"].includes(clientType)}(storedClientType)&&!expired)return void 0!==storedClientSecret?{clientId:storedClientId,clientSecret:storedClientSecret,clientName:storedClientName,clientType:"dynamic",expiresAt:expirationDate}:{clientId:storedClientId,clientName:storedClientName,clientType:storedClientType};try{const registeredClient=await registerClient(options,issuerConfig),infoToSave={clientId:registeredClient.clientId,clientType:"dynamic"};return void 0!==registeredClient.clientSecret&&(infoToSave.clientSecret=registeredClient.clientSecret,infoToSave.expiresAt=String(registeredClient.expiresAt)),registeredClient.idTokenSignedResponseAlg&&(infoToSave.idTokenSignedResponseAlg=registeredClient.idTokenSignedResponseAlg),await this.storageUtility.setForUser(options.sessionId,infoToSave,{secure:!1}),registeredClient}catch(error){throw new Error("Client registration failed.",{cause:error})}}}class ErrorOidcHandler{async canHandle(redirectUrl){try{return new URL(redirectUrl).searchParams.has("error")}catch(e){throw new Error(`[${redirectUrl}] is not a valid URL, and cannot be used as a redirect URL: ${e}`)}}async handle(redirectUrl,eventEmitter){if(void 0!==eventEmitter){const url=new URL(redirectUrl),errorUrl=url.searchParams.get("error"),errorDescriptionUrl=url.searchParams.get("error_description");eventEmitter.emit(EVENTS_ERROR,errorUrl,errorDescriptionUrl)}return getUnauthenticatedSession()}}class TokenRefresher{storageUtility;issuerConfigFetcher;clientRegistrar;constructor(storageUtility,issuerConfigFetcher,clientRegistrar){this.storageUtility=storageUtility,this.issuerConfigFetcher=issuerConfigFetcher,this.clientRegistrar=clientRegistrar,this.storageUtility=storageUtility,this.issuerConfigFetcher=issuerConfigFetcher,this.clientRegistrar=clientRegistrar}async refresh(sessionId,refreshToken,dpopKey,eventEmitter){const oidcContext=await loadOidcContextFromStorage(sessionId,this.storageUtility,this.issuerConfigFetcher),clientInfo=await this.clientRegistrar.getClient({sessionId},oidcContext.issuerConfig);if(void 0===refreshToken)throw new Error(`Session [${sessionId}] has no refresh token to allow it to refresh its access token.`);if(oidcContext.dpop&&void 0===dpopKey)throw new Error(`For session [${sessionId}], the key bound to the DPoP access token must be provided to refresh said access token.`);const tokenSet=await refresh(refreshToken,oidcContext.issuerConfig,clientInfo,dpopKey);return void 0!==tokenSet.refreshToken&&eventEmitter?.emit(EVENTS_NEW_REFRESH_TOKEN,tokenSet.refreshToken),tokenSet}}function getClientAuthenticationWithDependencies(dependencies){const inMemoryStorage=new InMemoryStorage,secureStorage=dependencies.secureStorage||inMemoryStorage,insecureStorage=dependencies.insecureStorage||new BrowserStorage,storageUtility=new StorageUtilityBrowser(secureStorage,insecureStorage),issuerConfigFetcher=new IssuerConfigFetcher(storageUtility),clientRegistrar=new ClientRegistrar(storageUtility),sessionInfoManager=new SessionInfoManager(storageUtility),tokenRefresher=new TokenRefresher(storageUtility,issuerConfigFetcher,clientRegistrar),redirector=new Redirector,loginHandler=new OidcLoginHandler(storageUtility,new AuthorizationCodeWithPkceOidcHandler(storageUtility,redirector),issuerConfigFetcher,clientRegistrar),redirectHandler=new AggregateRedirectHandler([new ErrorOidcHandler,new AuthCodeRedirectHandler(storageUtility,sessionInfoManager,issuerConfigFetcher,clientRegistrar,tokenRefresher),new FallbackRedirectHandler]);return new ClientAuthentication(loginHandler,redirectHandler,new IWaterfallLogoutHandler(sessionInfoManager,redirector),sessionInfoManager,issuerConfigFetcher)}class Session{info;events;clientAuthentication;tokenRequestInProgress=!1;constructor(sessionOptions={},sessionId=void 0){this.events=new events,sessionOptions.clientAuthentication?this.clientAuthentication=sessionOptions.clientAuthentication:sessionOptions.secureStorage&&sessionOptions.insecureStorage?this.clientAuthentication=getClientAuthenticationWithDependencies({secureStorage:sessionOptions.secureStorage,insecureStorage:sessionOptions.insecureStorage}):this.clientAuthentication=getClientAuthenticationWithDependencies({}),sessionOptions.sessionInfo?this.info={sessionId:sessionOptions.sessionInfo.sessionId,isLoggedIn:!1,webId:sessionOptions.sessionInfo.webId,clientAppId:sessionOptions.sessionInfo.clientAppId}:this.info={sessionId:sessionId??esm_browser_v4(),isLoggedIn:!1},this.events.on(EVENTS_LOGIN,()=>window.localStorage.setItem("solidClientAuthn:currentSession",this.info.sessionId)),this.events.on(EVENTS_SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(EVENTS_ERROR,()=>this.internalLogout(!1))}login=async options=>(await this.clientAuthentication.login({sessionId:this.info.sessionId,...options,tokenType:options.tokenType??"DPoP"},this.events),new Promise(()=>{}));fetch=(url,init)=>this.clientAuthentication.fetch(url,init);internalLogout=async(emitSignal,options)=>{window.localStorage.removeItem("solidClientAuthn:currentSession"),await this.clientAuthentication.logout(this.info.sessionId,options),this.info.isLoggedIn=!1,emitSignal&&this.events.emit(EVENTS_LOGOUT)};logout=async options=>this.internalLogout(!0,options);handleIncomingRedirect=async(inputOptions={})=>{if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const options="string"==typeof inputOptions?{url:inputOptions}:inputOptions,url=options.url??window.location.href;this.tokenRequestInProgress=!0;const sessionInfo=await this.clientAuthentication.handleIncomingRedirect(url,this.events);if(function isLoggedIn(sessionInfo){return!!sessionInfo?.isLoggedIn}(sessionInfo)){this.setSessionInfo(sessionInfo);const currentUrl=window.localStorage.getItem("solidClientAuthn:currentUrl");null===currentUrl?this.events.emit(EVENTS_LOGIN):(window.localStorage.removeItem("solidClientAuthn:currentUrl"),this.events.emit(EVENTS_SESSION_RESTORED,currentUrl))}else if(!0===options.restorePreviousSession){const storedSessionId=window.localStorage.getItem("solidClientAuthn:currentSession");if(null!==storedSessionId){if(await async function silentlyAuthenticate(sessionId,clientAuthn,session){const storedSessionInfo=await clientAuthn.validateCurrentSession(sessionId);return null!==storedSessionInfo&&(window.localStorage.setItem("solidClientAuthn:currentUrl",window.location.href),await clientAuthn.login({sessionId,prompt:"none",oidcIssuer:storedSessionInfo.issuer,redirectUrl:storedSessionInfo.redirectUrl,clientId:storedSessionInfo.clientAppId,clientSecret:storedSessionInfo.clientAppSecret,tokenType:storedSessionInfo.tokenType??"DPoP"},session.events),!0)}(storedSessionId,this.clientAuthentication,this))return new Promise(()=>{})}}return this.tokenRequestInProgress=!1,sessionInfo};setSessionInfo(sessionInfo){this.info.isLoggedIn=sessionInfo.isLoggedIn,this.info.webId=sessionInfo.webId,this.info.sessionId=sessionInfo.sessionId,this.info.clientAppId=sessionInfo.clientAppId,this.info.expirationDate=sessionInfo.expirationDate,this.events.on(EVENTS_SESSION_EXTENDED,expiresIn=>{this.info.expirationDate=Date.now()+1e3*expiresIn})}}const authSession=new Session,external_rdflib_namespaceObject=rdflib__WEBPACK_IMPORTED_MODULE_0__;var solid_namespace=__nested_webpack_require_304590__(386);const ns_ns=__nested_webpack_require_304590__.n(solid_namespace)()(external_rdflib_namespaceObject),ACL_LINK=(0,external_rdflib_namespaceObject.sym)("http://www.iana.org/assignments/link-relations/acl");function createAclLogic(store){const ns=ns_ns;function genACLText(docURI,me,aclURI,options={}){const optPublic=options.public||[],g=(0,external_rdflib_namespaceObject.graph)(),auth=(0,external_rdflib_namespaceObject.Namespace)("http://www.w3.org/ns/auth/acl#");let a=g.sym(`${aclURI}#a1`);const acl=g.sym(aclURI),doc=g.sym(docURI);if(g.add(a,ns.rdf("type"),auth("Authorization"),acl),g.add(a,auth("accessTo"),doc,acl),options.defaultForNew&&g.add(a,auth("default"),doc,acl),g.add(a,auth("agent"),me,acl),g.add(a,auth("mode"),auth("Read"),acl),g.add(a,auth("mode"),auth("Write"),acl),g.add(a,auth("mode"),auth("Control"),acl),optPublic.length){a=g.sym(`${aclURI}#a2`),g.add(a,ns.rdf("type"),auth("Authorization"),acl),g.add(a,auth("accessTo"),doc,acl),g.add(a,auth("agentClass"),ns.foaf("Agent"),acl);for(let p=0;p<optPublic.length;p++)g.add(a,auth("mode"),auth(optPublic[p]),acl)}return(0,external_rdflib_namespaceObject.serialize)(acl,g,aclURI)}return{findAclDocUrl:async function findAclDocUrl(url){await store.fetcher.load(url);const docNode=store.any(url,ACL_LINK);if(!docNode)throw new Error(`No ACL link discovered for ${url}`);return docNode.value},setACLUserPublic:function setACLUserPublic(docURI,me,options){const aclDoc=store.any(store.sym(docURI),ACL_LINK);return Promise.resolve().then(()=>aclDoc||function fetchACLRel(docURI){const fetcher=store.fetcher;if(!fetcher)throw new Error("Cannot fetch ACL rel, store has no fetcher");return fetcher.load(docURI).then(result=>{if(!result.ok)throw new Error("fetchACLRel: While loading:"+result.error);const aclDoc=store.any(store.sym(docURI),ACL_LINK);if(!aclDoc)throw new Error("fetchACLRel: No Link rel=ACL header for "+docURI);return aclDoc})}(docURI).catch(err=>{throw new Error(`Error fetching rel=ACL header for ${docURI}: ${err}`)})).then(aclDoc=>{const aclText=genACLText(docURI,me,aclDoc.uri,options);if(!store.fetcher)throw new Error("Cannot PUT this, store has no fetcher");return store.fetcher.webOperation("PUT",aclDoc.uri,{data:aclText,contentType:"text/turtle"}).then(result=>{if(!result.ok)throw new Error("Error writing ACL text: "+result.error);return aclDoc})})},genACLText}}const appContext=()=>{let{SolidAppContext}=window;if(SolidAppContext||(SolidAppContext={}),SolidAppContext.viewingNoAuthPage=!1,SolidAppContext.noAuth&&window.document){if(window.document.location.href.startsWith(SolidAppContext.noAuth)){SolidAppContext.viewingNoAuthPage=!0;const params=new URLSearchParams(window.document.location.search);if(params){let viewedPage=SolidAppContext.viewedPage=params.get("uri")||null;if(viewedPage&&(viewedPage=decodeURI(viewedPage),!viewedPage.startsWith(SolidAppContext.noAuth))){const ary=viewedPage.split(/\//);SolidAppContext.idp=ary[0]+"//"+ary[2],SolidAppContext.viewingNoAuthPage=!1}}}}return SolidAppContext};function offlineTestID(){const{$SolidTestEnvironment}=window;if(void 0!==$SolidTestEnvironment&&$SolidTestEnvironment.username)return log("Assuming the user is "+$SolidTestEnvironment.username),(0,external_rdflib_namespaceObject.sym)($SolidTestEnvironment.username);if("undefined"!=typeof document&&document.location&&"http://localhost"===(""+document.location).slice(0,16)){const div=document.getElementById("appTarget");if(!div)return null;const id=div.getAttribute("testID");return id?(log("Assuming user is "+id),(0,external_rdflib_namespaceObject.sym)(id)):null}return null}class SolidAuthnLogic{constructor(solidAuthSession){this.session=solidAuthSession}get authSession(){return this.session}currentUser(){const app=appContext();return app.viewingNoAuthPage?(0,external_rdflib_namespaceObject.sym)(app.webId):this&&this.session&&this.session.info&&this.session.info.webId&&this.session.info.isLoggedIn?(0,external_rdflib_namespaceObject.sym)(this.session.info.webId):offlineTestID()}async checkUser(setUserCallback){const preLoginRedirectHash=new URL(window.location.href).hash;preLoginRedirectHash&&window.localStorage.setItem("preLoginRedirectHash",preLoginRedirectHash),this.session.events.on(EVENTS_SESSION_RESTORED,url=>{log(`Session restored to ${url}`),document.location.toString()!==url&&history.replaceState(null,"",url)});const redirectUrl=new URL(window.location.href);redirectUrl.hash="",await this.session.handleIncomingRedirect({restorePreviousSession:!0,url:redirectUrl.href});const postLoginRedirectHash=window.localStorage.getItem("preLoginRedirectHash");if(postLoginRedirectHash){const curUrl=new URL(window.location.href);curUrl.hash!==postLoginRedirectHash&&(history.pushState?history.pushState(null,document.title,postLoginRedirectHash):location.hash=postLoginRedirectHash,curUrl.hash=postLoginRedirectHash),window.localStorage.setItem("preLoginRedirectHash","")}let me=offlineTestID();if(me)return Promise.resolve(setUserCallback?setUserCallback(me):me);const webId=this.webIdFromSession(this.session.info);return webId&&(me=this.saveUser(webId)),me&&log(`(Logged in as ${me} by authentication)`),Promise.resolve(setUserCallback?setUserCallback(me):me)}saveUser(webId,context){let webIdUri;if(webId){webIdUri="string"==typeof webId?webId:webId.uri;const me=(0,external_rdflib_namespaceObject.namedNode)(webIdUri);return context&&(context.me=me),me}return null}webIdFromSession(session){return(null==session?void 0:session.webId)&&session.isLoggedIn?session.webId:null}}function newThing(doc){return(0,external_rdflib_namespaceObject.sym)(doc.uri+"#id"+Date.now())}function differentOrigin(doc){return!doc||`${window.location.origin}/`!==new URL(doc.value).origin}function createChatLogic(store,profileLogic){const ns=ns_ns;async function setAcl(chatContainer,me,invitee){await store.fetcher.load(chatContainer);const chatAclDoc=store.any(chatContainer,new external_rdflib_namespaceObject.NamedNode("http://www.iana.org/assignments/link-relations/acl"));if(!chatAclDoc)throw new Error("Chat ACL doc not found!");const aclBody=`\n            @prefix acl: <http://www.w3.org/ns/auth/acl#>.\n            <#owner>\n            a acl:Authorization;\n            acl:agent <${me.value}>;\n            acl:accessTo <.>;\n            acl:default <.>;\n            acl:mode\n                acl:Read, acl:Write, acl:Control.\n            <#invitee>\n            a acl:Authorization;\n            acl:agent <${invitee.value}>;\n            acl:accessTo <.>;\n            acl:default <.>;\n            acl:mode\n                acl:Read, acl:Append.\n            `;await store.fetcher.webOperation("PUT",chatAclDoc.value,{data:aclBody,contentType:"text/turtle"})}async function addToPrivateTypeIndex(chatThing,me){const privateTypeIndex=store.any(me,ns.solid("privateTypeIndex"));if(!privateTypeIndex)throw new Error("Private type index not found!");await store.fetcher.load(privateTypeIndex);const reg=newThing(privateTypeIndex),ins=[(0,external_rdflib_namespaceObject.st)(reg,ns.rdf("type"),ns.solid("TypeRegistration"),privateTypeIndex.doc()),(0,external_rdflib_namespaceObject.st)(reg,ns.solid("forClass"),ns.meeting("LongChat"),privateTypeIndex.doc()),(0,external_rdflib_namespaceObject.st)(reg,ns.solid("instance"),chatThing,privateTypeIndex.doc())];await new Promise((resolve,reject)=>{store.updater.update([],ins,function(_uri,ok,errm){ok?resolve(null):reject(new Error(errm))})})}async function findChat(invitee){const me=await profileLogic.loadMe(),chatContainer=function determineChatContainer(invitee,podRoot){const chatContainerStr=new URL(`IndividualChats/${new URL(invitee.value).host}/`,podRoot.value).toString();return new external_rdflib_namespaceObject.NamedNode(chatContainerStr)}(invitee,await profileLogic.getPodRoot(me));let exists=!0;try{await store.fetcher.load(new external_rdflib_namespaceObject.NamedNode(chatContainer.value+"index.ttl#this"))}catch(e){exists=!1}return{me,chatContainer,exists}}async function createChatThing(chatContainer,me){return(await mintNew({me,newBase:chatContainer.value})).newInstance}function mintNew(newPaneOptions){const kb=store,updater=kb.updater;if(newPaneOptions.me&&!newPaneOptions.me.uri)throw new Error("chat mintNew:  Invalid userid "+newPaneOptions.me);const newInstance=newPaneOptions.newInstance=newPaneOptions.newInstance||kb.sym(newPaneOptions.newBase+"index.ttl#this"),newChatDoc=newInstance.doc();return kb.add(newInstance,ns.rdf("type"),ns.meeting("LongChat"),newChatDoc),kb.add(newInstance,ns.dc("title"),"Chat channel",newChatDoc),kb.add(newInstance,ns.dc("created"),(0,external_rdflib_namespaceObject.term)(new Date(Date.now())),newChatDoc),newPaneOptions.me&&kb.add(newInstance,ns.dc("author"),newPaneOptions.me,newChatDoc),new Promise(function(resolve,reject){null==updater||updater.put(newChatDoc,kb.statementsMatching(void 0,void 0,void 0,newChatDoc),"text/turtle",function(uri2,ok,message){ok?resolve({...newPaneOptions,newInstance}):reject(new Error("FAILED to save new chat channel at: "+uri2+" : "+message))})})}async function sendInvite(invitee,chatThing){var _a;await store.fetcher.load(invitee.doc());const inviteeInbox=store.any(invitee,ns.ldp("inbox"),void 0,invitee.doc());if(!inviteeInbox)throw new Error(`Invitee inbox not found! ${invitee.value}`);const inviteBody=`\n        <> a <http://www.w3.org/ns/pim/meeting#LongChatInvite> ;\n        ${ns.rdf("seeAlso")} <${chatThing.value}> .\n        `,inviteResponse=await(null===(_a=store.fetcher)||void 0===_a?void 0:_a.webOperation("POST",inviteeInbox.value,{data:inviteBody,contentType:"text/turtle"}));if(!(null==inviteResponse?void 0:inviteResponse.headers.get("location")))throw new Error(`Invite sending returned a ${null==inviteResponse?void 0:inviteResponse.status}`)}return{setAcl,addToPrivateTypeIndex,findChat,createChatThing,getChat:async function getChat(invitee,createIfMissing=!0){const{me,chatContainer,exists}=await findChat(invitee);if(exists)return new external_rdflib_namespaceObject.NamedNode(chatContainer.value+"index.ttl#this");if(createIfMissing){const chatThing=await createChatThing(chatContainer,me);return await sendInvite(invitee,chatThing),await setAcl(chatContainer,me,invitee),await addToPrivateTypeIndex(chatThing,me),chatThing}return null},sendInvite,mintNew}}function createInboxLogic(store,profileLogic,utilityLogic,containerLogic,aclLogic){return{createInboxFor:async function createInboxFor(peerWebId,nick){const myWebId=await profileLogic.loadMe(),ourInbox=`${(await profileLogic.getPodRoot(myWebId)).value}p2p-inboxes/${encodeURIComponent(nick)}/`;return await containerLogic.createContainer(ourInbox),await utilityLogic.setSinglePeerAccess({ownerWebId:myWebId.value,peerWebId,accessToModes:"acl:Append",target:ourInbox}),ourInbox},getNewMessages:async function getNewMessages(user){user||(user=await profileLogic.loadMe());const inbox=await profileLogic.getMainInbox(user);return(await containerLogic.getContainerMembers(inbox)).filter(url=>!containerLogic.isContainer(url))},markAsRead:async function markAsRead(url,date){const downloaded=await store.fetcher._fetch(url);if(200!==downloaded.status)throw new Error(`Not OK! ${url}`);const archiveUrl=function getArchiveUrl(baseUrl,date){const year=date.getUTCFullYear(),month=("0"+(date.getUTCMonth()+1)).slice(-2),day=("0"+date.getUTCDate()).slice(-2),parts=baseUrl.split("/"),filename=parts[parts.length-1];return new URL(`./archive/${year}/${month}/${day}/${filename}`,baseUrl).toString()}(url,date),options={method:"PUT",body:await downloaded.text(),headers:[["Content-Type",downloaded.headers.get("Content-Type")||"application/octet-stream"]]};"2"===(await store.fetcher._fetch(archiveUrl,options)).status.toString()[0]&&await store.fetcher._fetch(url,{method:"DELETE"})}}}class CustomError extends Error{constructor(message){super(message),Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name}}class UnauthorizedError extends CustomError{}class CrossOriginForbiddenError extends CustomError{}class SameOriginForbiddenError extends CustomError{}class NotFoundError extends CustomError{}class NotEditableError extends CustomError{}class WebOperationError extends CustomError{}class FetchError extends CustomError{constructor(status,message){super(message),this.status=status}}function createProfileLogic(store,authn,utilityLogic){const ns=ns_ns;async function loadPreferences(user){await loadProfile(user);const possiblePreferencesFile=function suggestPreferencesFile(me){const fileURI=me.uri.replace("/profile/","/").replace("/public/","/").split("/").slice(0,-1).join("/")+"/Settings/Preferences.ttl";return(0,external_rdflib_namespaceObject.sym)(fileURI)}(user);let preferencesFile;try{preferencesFile=await utilityLogic.followOrCreateLink(user,ns.space("preferencesFile"),possiblePreferencesFile,user.doc())}catch(err){if(warn(`User ${user} has no pointer in profile to preferences file.`),err instanceof NotEditableError)throw err;if(err instanceof WebOperationError)throw err;if(err instanceof UnauthorizedError)throw err;if(err instanceof CrossOriginForbiddenError)throw err;if(err instanceof SameOriginForbiddenError)throw err;if(err instanceof FetchError)throw err;throw err}try{await store.fetcher.load(preferencesFile)}catch(err){const msg=`Unable to load preference of user ${user}: ${err}`;if(warn(msg),401===err.response.status)throw new UnauthorizedError;if(403===err.response.status){if(differentOrigin(preferencesFile))throw new CrossOriginForbiddenError;throw new SameOriginForbiddenError}throw new Error(msg)}return preferencesFile}async function loadProfile(user){if(!user)throw new Error("loadProfile: no user given.");try{await store.fetcher.load(user.doc())}catch(err){throw new Error(`Unable to load profile of user ${user}: ${err}`)}return user.doc()}function findStorage(me){return store.any(me,ns.space("storage"),void 0,me.doc())}return{loadMe:async function loadMe(){const me=authn.currentUser();if(null===me)throw new Error("Current user not found! Not logged in?");return await store.fetcher.load(me.doc()),me},getPodRoot:function getPodRoot(user){const podRoot=findStorage(user);if(!podRoot)throw new Error("User pod root not found!");return podRoot},getMainInbox:async function getMainInbox(user){await store.fetcher.load(user);const mainInbox=store.any(user,ns.ldp("inbox"),void 0,user.doc());if(!mainInbox)throw new Error("User main inbox not found!");return mainInbox},findStorage,loadPreferences,loadProfile,silencedLoadPreferences:async function silencedLoadPreferences(user){try{return await loadPreferences(user)}catch(err){return}}}}function createTypeIndexLogic(store,authn,profileLogic,utilityLogic){const ns=ns_ns;async function loadTypeIndexesFor(user){if(!user)throw new Error("loadTypeIndexesFor: No user given");const profile=await profileLogic.loadProfile(user),suggestion=suggestPublicTypeIndex(user);let publicTypeIndex;try{publicTypeIndex=await utilityLogic.followOrCreateLink(user,ns.solid("publicTypeIndex"),suggestion,profile)}catch(err){warn(`User ${user} has no pointer in profile to publicTypeIndex file.`)}const publicScopes=publicTypeIndex?[{label:"public",index:publicTypeIndex,agent:user}]:[];let preferencesFile,privateScopes;try{preferencesFile=await profileLogic.silencedLoadPreferences(user)}catch(err){preferencesFile=null}if(preferencesFile){const suggestedPrivateTypeIndex=suggestPrivateTypeIndex(preferencesFile);let privateTypeIndex;try{privateTypeIndex=store.any(user,ns.solid("privateTypeIndex"),void 0,profile)||await utilityLogic.followOrCreateLink(user,ns.solid("privateTypeIndex"),suggestedPrivateTypeIndex,preferencesFile)}catch(err){warn(`User ${user} has no pointer in preference file to privateTypeIndex file.`)}privateScopes=privateTypeIndex?[{label:"private",index:privateTypeIndex,agent:user}]:[]}else privateScopes=[];const scopes=publicScopes.concat(privateScopes);if(0===scopes.length)return scopes;const files=scopes.map(scope=>scope.index);try{await store.fetcher.load(files)}catch(err){warn("Problems loading type index: ",err)}return scopes}async function loadCommunityTypeIndexes(user){let preferencesFile;try{preferencesFile=await profileLogic.silencedLoadPreferences(user)}catch(err){warn(`User ${user} has no pointer in profile to preferences file.`)}if(preferencesFile){const communities=store.each(user,ns.solid("community"),void 0,preferencesFile).concat(store.each(user,ns.solid("community"),void 0,user.doc()));let result=[];for(const org of communities)result=result.concat(await loadTypeIndexesFor(org));return result}return[]}async function loadAllTypeIndexes(user){return(await loadTypeIndexesFor(user)).concat((await loadCommunityTypeIndexes(user)).flat())}async function getScopedAppInstances(klass,user){const scopes=await loadAllTypeIndexes(user);let scopedApps=[];for(const scope of scopes){const scopedApps0=await getScopedAppsFromIndex(scope,klass);scopedApps=scopedApps.concat(scopedApps0)}return scopedApps}function suggestPublicTypeIndex(me){var _a;return(0,external_rdflib_namespaceObject.sym)((null===(_a=me.doc().dir())||void 0===_a?void 0:_a.uri)+"publicTypeIndex.ttl")}function suggestPrivateTypeIndex(preferencesFile){var _a;return(0,external_rdflib_namespaceObject.sym)((null===(_a=preferencesFile.doc().dir())||void 0===_a?void 0:_a.uri)+"privateTypeIndex.ttl")}async function getScopedAppsFromIndex(scope,theClass){const index=scope.index,results=[],registrations=store.statementsMatching(null,ns.solid("instance"),null,index).concat(store.statementsMatching(null,ns.solid("instanceContainer"),null,index)).map(st=>st.subject);for(const reg of registrations){const klass=store.any(reg,ns.solid("forClass"),null,index);if(!theClass||klass.sameTerm(theClass)){const instances=store.each(reg,ns.solid("instance"),null,index);for(const instance of instances)results.push({instance,type:klass,scope});const containers=store.each(reg,ns.solid("instanceContainer"),null,index);for(const instance of containers)await store.fetcher.load(instance),results.push({instance:(0,external_rdflib_namespaceObject.sym)(instance.value),type:klass,scope})}}return results}return{registerInTypeIndex:async function registerInTypeIndex(instance,index,theClass){const registration=newThing(index),ins=[(0,external_rdflib_namespaceObject.st)(registration,ns.rdf("type"),ns.solid("TypeRegistration"),index),(0,external_rdflib_namespaceObject.st)(registration,ns.solid("forClass"),theClass,index),(0,external_rdflib_namespaceObject.st)(registration,ns.solid("instance"),instance,index)];try{await store.updater.update([],ins)}catch(err){const msg=`Unable to register ${instance} in index ${index}: ${err}`;return console.warn(msg),null}return registration},getRegistrations:function getRegistrations(instance,theClass){return store.each(void 0,ns.solid("instance"),instance).filter(r=>store.holds(r,ns.solid("forClass"),theClass))},loadTypeIndexesFor,loadCommunityTypeIndexes,loadAllTypeIndexes,getScopedAppInstances,getAppInstances:async function getAppInstances(klass){const user=authn.currentUser();if(!user)throw new Error("getAppInstances: Must be logged in to find apps.");return(await getScopedAppInstances(klass,user)).map(scoped=>scoped.instance)},suggestPublicTypeIndex,suggestPrivateTypeIndex,deleteTypeIndexRegistration:async function deleteTypeIndexRegistration(item){const reg=store.the(null,ns.solid("instance"),item.instance,item.scope.index);if(!reg)throw new Error(`deleteTypeIndexRegistration: No registration found for ${item.instance}`);const statements=store.statementsMatching(reg,null,null,item.scope.index);await store.updater.update(statements,[])},getScopedAppsFromIndex}}function createSolidLogic(specialFetch,session){log("SolidLogic: Unique instance created.  There should only be one of these.");const store=external_rdflib_namespaceObject.graph();external_rdflib_namespaceObject.fetcher(store,{fetch:specialFetch.fetch}),store.updater=new external_rdflib_namespaceObject.UpdateManager(store),store.features=[];const authn=new SolidAuthnLogic(session),acl=createAclLogic(store),containerLogic=function createContainerLogic(store){function getContainerElements(containerNode){return store.statementsMatching(containerNode,(0,external_rdflib_namespaceObject.sym)("http://www.w3.org/ns/ldp#contains"),void 0).map(st=>st.object)}function isContainer(url){const nodeToString=url.value;return"/"===nodeToString.charAt(nodeToString.length-1)}return{isContainer,createContainer:async function createContainer(url){if(!isContainer((0,external_rdflib_namespaceObject.sym)(url)))throw new Error(`Not a container URL ${url}`);const result=await store.fetcher._fetch(url,{method:"PUT",headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"'},body:" "});if("2"!==result.status.toString()[0])throw new Error(`Not OK: got ${result.status} response while creating container at ${url}`)},getContainerElements,getContainerMembers:async function getContainerMembers(containerUrl){return await store.fetcher.load(containerUrl),getContainerElements(containerUrl)}}}(store),utilityLogic=function createUtilityLogic(store,aclLogic,containerLogic){async function loadOrCreateIfNotExists(doc){let response;try{response=await store.fetcher.load(doc)}catch(err){if(404!==err.response.status){if(401===err.response.status)throw new UnauthorizedError;if(403===err.response.status){if(differentOrigin(doc))throw new CrossOriginForbiddenError;throw new SameOriginForbiddenError}const msg="createIfNotExists doc load error NOT 404:  "+doc+": "+err;throw new FetchError(err.status,err.message+msg)}try{await store.fetcher.webOperation("PUT",doc,{data:"",contentType:"text/turtle"})}catch(err){throw new WebOperationError("createIfNotExists: PUT FAILED: "+doc+": "+err)}await store.fetcher.load(doc)}return response}return{recursiveDelete:async function recursiveDelete(containerNode){try{if(containerLogic.isContainer(containerNode)){const aclDocUrl=await aclLogic.findAclDocUrl(containerNode);await store.fetcher._fetch(aclDocUrl,{method:"DELETE"});const containerMembers=await containerLogic.getContainerMembers(containerNode);await Promise.all(containerMembers.map(url=>recursiveDelete(url)))}const nodeToStringHere=containerNode.value;return store.fetcher._fetch(nodeToStringHere,{method:"DELETE"})}catch(e){log(`Please manually remove ${containerNode.value} from your system.`,e)}},setSinglePeerAccess:async function setSinglePeerAccess(options){let str=["@prefix acl: <http://www.w3.org/ns/auth/acl#>.","",`<#alice> a acl:Authorization;\n  acl:agent <${options.ownerWebId}>;`,`  acl:accessTo <${options.target}>;`,`  acl:default <${options.target}>;`,"  acl:mode acl:Read, acl:Write, acl:Control.",""].join("\n");options.accessToModes&&(str+=["<#bobAccessTo> a acl:Authorization;",`  acl:agent <${options.peerWebId}>;`,`  acl:accessTo <${options.target}>;`,`  acl:mode ${options.accessToModes}.`,""].join("\n")),options.defaultModes&&(str+=["<#bobDefault> a acl:Authorization;",`  acl:agent <${options.peerWebId}>;`,`  acl:default <${options.target}>;`,`  acl:mode ${options.defaultModes}.`,""].join("\n"));const aclDocUrl=await aclLogic.findAclDocUrl((0,external_rdflib_namespaceObject.sym)(options.target));return store.fetcher._fetch(aclDocUrl,{method:"PUT",body:str,headers:[["Content-Type","text/turtle"]]})},createEmptyRdfDoc:async function createEmptyRdfDoc(doc,comment){await store.fetcher.webOperation("PUT",doc.uri,{data:`# ${new Date} ${comment}\n  `,contentType:"text/turtle"})},followOrCreateLink:async function followOrCreateLink(subject,predicate,object,doc){await store.fetcher.load(doc);const result=store.any(subject,predicate,null,doc);if(result)return result;if(!store.updater.editable(doc)){const msg=`followOrCreateLink: cannot edit ${doc.value}`;throw warn(msg),new NotEditableError(msg)}try{await store.updater.update([],[(0,external_rdflib_namespaceObject.st)(subject,predicate,object,doc)])}catch(err){throw warn(`followOrCreateLink: Error making link in ${doc} to ${object}: ${err}`),new WebOperationError(err)}try{await loadOrCreateIfNotExists(object)}catch(err){throw warn(`followOrCreateLink: Error loading or saving new linked document: ${object}: ${err}`),err}return object},loadOrCreateIfNotExists}}(store,acl,containerLogic),profile=createProfileLogic(store,authn,utilityLogic),chat=createChatLogic(store,profile),inbox=createInboxLogic(store,profile,utilityLogic,containerLogic),typeIndex=createTypeIndexLogic(store,authn,profile,utilityLogic);return log("SolidAuthnLogic initialized"),{store,authn,acl,inbox,chat,profile,typeIndex,load:function load(doc){return store.fetcher.load(doc)},updatePromise:function updatePromise(del,ins=[]){return new Promise((resolve,reject)=>{store.updater.update(del,ins,function(_uri,ok,errorBody){ok?resolve():reject(new Error(errorBody))})})},clearStore:function clearStore(){store.statements.slice().forEach(store.remove.bind(store))}}}const _fetch=async(url,requestInit)=>{const omitCreds=requestInit&&requestInit.credentials&&"omit"==requestInit.credentials;return authSession.info.webId&&!omitCreds?authSession.fetch(url,requestInit):window.fetch(url,requestInit)},SINGLETON_SYMBOL=Symbol.for("solid-logic-singleton"),globalTarget="undefined"!=typeof window?window:__nested_webpack_require_304590__.g;const solidLogicSingleton=function getOrCreateSingleton(){return globalTarget[SINGLETON_SYMBOL]?log("SolidLogic: Using existing global singleton instance."):(log("SolidLogic: Creating new global singleton instance."),globalTarget[SINGLETON_SYMBOL]=createSolidLogic({fetch:_fetch},authSession),log("Unique quadstore initialized.")),globalTarget[SINGLETON_SYMBOL]}(),DEFAULT_ISSUERS=[{name:"Solid Community",uri:"https://solidcommunity.net"},{name:"Solid Web",uri:"https://solidweb.org"},{name:"Solid Web ME",uri:"https://solidweb.me"},{name:"Inrupt.com",uri:"https://login.inrupt.com"}];function getSuggestedIssuers(){const issuers=[...DEFAULT_ISSUERS],{host,origin}=new URL(location.href),hosts=issuers.map(({uri})=>new URL(uri).host);return hosts.includes(host)||hosts.some(existing=>function isSubdomainOf(subdomain,domain){const dot=subdomain.length-domain.length-1;return dot>0&&"."===subdomain[dot]&&subdomain.endsWith(domain)}(host,existing))||issuers.unshift({name:host,uri:origin}),issuers}const authn=solidLogicSingleton.authn,src_authSession=solidLogicSingleton.authn.authSession,store=solidLogicSingleton.store},"./node_modules/solid-namespace/index.js":module=>{const aliases={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};module.exports=function vocab(rdf={namedNode:u=>u}){const namespaces={};for(const alias in aliases){const expansion=aliases[alias];namespaces[alias]=function(localName=""){return rdf.namedNode(expansion+localName)}}return namespaces}},"./node_modules/ts-dedent/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function dedent(templ){for(var values=[],_i=1;_i<arguments.length;_i++)values[_i-1]=arguments[_i];var strings=Array.from("string"==typeof templ?[templ]:templ);strings[strings.length-1]=strings[strings.length-1].replace(/\r?\n([\t ]*)$/,"");var indentLengths=strings.reduce(function(arr,str){var matches=str.match(/\n([\t ]+|(?!\s).)/g);return matches?arr.concat(matches.map(function(match){var _a,_b;return null!==(_b=null===(_a=match.match(/[\t ]/g))||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0})):arr},[]);if(indentLengths.length){var pattern_1=new RegExp("\n[\t ]{"+Math.min.apply(Math,indentLengths)+"}","g");strings=strings.map(function(str){return str.replace(pattern_1,"\n")})}strings[0]=strings[0].replace(/^\r?\n/,"");var string=strings[0];return values.forEach(function(value,i){var endentations=string.match(/(?:^|\n)( *)$/),endentation=endentations?endentations[1]:"",indentedValue=value;"string"==typeof value&&value.includes("\n")&&(indentedValue=String(value).split("\n").map(function(str,i){return 0===i?str:""+endentation+str}).join("\n")),string+=indentedValue+strings[i+1]}),string}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,T:()=>dedent});const __WEBPACK_DEFAULT_EXPORT__=dedent},"./node_modules/util/support/isBufferBrowser.js":module=>{module.exports=function isBuffer(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},"./node_modules/util/support/types.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var isArgumentsObject=__webpack_require__("./node_modules/is-arguments/index.js"),isGeneratorFunction=__webpack_require__("./node_modules/is-generator-function/index.js"),whichTypedArray=__webpack_require__("./node_modules/which-typed-array/index.js"),isTypedArray=__webpack_require__("./node_modules/is-typed-array/index.js");function uncurryThis(f){return f.call.bind(f)}var BigIntSupported="undefined"!=typeof BigInt,SymbolSupported="undefined"!=typeof Symbol,ObjectToString=uncurryThis(Object.prototype.toString),numberValue=uncurryThis(Number.prototype.valueOf),stringValue=uncurryThis(String.prototype.valueOf),booleanValue=uncurryThis(Boolean.prototype.valueOf);if(BigIntSupported)var bigIntValue=uncurryThis(BigInt.prototype.valueOf);if(SymbolSupported)var symbolValue=uncurryThis(Symbol.prototype.valueOf);function checkBoxedPrimitive(value,prototypeValueOf){if("object"!=typeof value)return!1;try{return prototypeValueOf(value),!0}catch(e){return!1}}function isMapToString(value){return"[object Map]"===ObjectToString(value)}function isSetToString(value){return"[object Set]"===ObjectToString(value)}function isWeakMapToString(value){return"[object WeakMap]"===ObjectToString(value)}function isWeakSetToString(value){return"[object WeakSet]"===ObjectToString(value)}function isArrayBufferToString(value){return"[object ArrayBuffer]"===ObjectToString(value)}function isArrayBuffer(value){return"undefined"!=typeof ArrayBuffer&&(isArrayBufferToString.working?isArrayBufferToString(value):value instanceof ArrayBuffer)}function isDataViewToString(value){return"[object DataView]"===ObjectToString(value)}function isDataView(value){return"undefined"!=typeof DataView&&(isDataViewToString.working?isDataViewToString(value):value instanceof DataView)}exports.isArgumentsObject=isArgumentsObject,exports.isGeneratorFunction=isGeneratorFunction,exports.isTypedArray=isTypedArray,exports.isPromise=function isPromise(input){return"undefined"!=typeof Promise&&input instanceof Promise||null!==input&&"object"==typeof input&&"function"==typeof input.then&&"function"==typeof input.catch},exports.isArrayBufferView=function isArrayBufferView(value){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(value):isTypedArray(value)||isDataView(value)},exports.isUint8Array=function isUint8Array(value){return"Uint8Array"===whichTypedArray(value)},exports.isUint8ClampedArray=function isUint8ClampedArray(value){return"Uint8ClampedArray"===whichTypedArray(value)},exports.isUint16Array=function isUint16Array(value){return"Uint16Array"===whichTypedArray(value)},exports.isUint32Array=function isUint32Array(value){return"Uint32Array"===whichTypedArray(value)},exports.isInt8Array=function isInt8Array(value){return"Int8Array"===whichTypedArray(value)},exports.isInt16Array=function isInt16Array(value){return"Int16Array"===whichTypedArray(value)},exports.isInt32Array=function isInt32Array(value){return"Int32Array"===whichTypedArray(value)},exports.isFloat32Array=function isFloat32Array(value){return"Float32Array"===whichTypedArray(value)},exports.isFloat64Array=function isFloat64Array(value){return"Float64Array"===whichTypedArray(value)},exports.isBigInt64Array=function isBigInt64Array(value){return"BigInt64Array"===whichTypedArray(value)},exports.isBigUint64Array=function isBigUint64Array(value){return"BigUint64Array"===whichTypedArray(value)},isMapToString.working="undefined"!=typeof Map&&isMapToString(new Map),exports.isMap=function isMap(value){return"undefined"!=typeof Map&&(isMapToString.working?isMapToString(value):value instanceof Map)},isSetToString.working="undefined"!=typeof Set&&isSetToString(new Set),exports.isSet=function isSet(value){return"undefined"!=typeof Set&&(isSetToString.working?isSetToString(value):value instanceof Set)},isWeakMapToString.working="undefined"!=typeof WeakMap&&isWeakMapToString(new WeakMap),exports.isWeakMap=function isWeakMap(value){return"undefined"!=typeof WeakMap&&(isWeakMapToString.working?isWeakMapToString(value):value instanceof WeakMap)},isWeakSetToString.working="undefined"!=typeof WeakSet&&isWeakSetToString(new WeakSet),exports.isWeakSet=function isWeakSet(value){return isWeakSetToString(value)},isArrayBufferToString.working="undefined"!=typeof ArrayBuffer&&isArrayBufferToString(new ArrayBuffer),exports.isArrayBuffer=isArrayBuffer,isDataViewToString.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1)),exports.isDataView=isDataView;var SharedArrayBufferCopy="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function isSharedArrayBufferToString(value){return"[object SharedArrayBuffer]"===ObjectToString(value)}function isSharedArrayBuffer(value){return void 0!==SharedArrayBufferCopy&&(void 0===isSharedArrayBufferToString.working&&(isSharedArrayBufferToString.working=isSharedArrayBufferToString(new SharedArrayBufferCopy)),isSharedArrayBufferToString.working?isSharedArrayBufferToString(value):value instanceof SharedArrayBufferCopy)}function isNumberObject(value){return checkBoxedPrimitive(value,numberValue)}function isStringObject(value){return checkBoxedPrimitive(value,stringValue)}function isBooleanObject(value){return checkBoxedPrimitive(value,booleanValue)}function isBigIntObject(value){return BigIntSupported&&checkBoxedPrimitive(value,bigIntValue)}function isSymbolObject(value){return SymbolSupported&&checkBoxedPrimitive(value,symbolValue)}exports.isSharedArrayBuffer=isSharedArrayBuffer,exports.isAsyncFunction=function isAsyncFunction(value){return"[object AsyncFunction]"===ObjectToString(value)},exports.isMapIterator=function isMapIterator(value){return"[object Map Iterator]"===ObjectToString(value)},exports.isSetIterator=function isSetIterator(value){return"[object Set Iterator]"===ObjectToString(value)},exports.isGeneratorObject=function isGeneratorObject(value){return"[object Generator]"===ObjectToString(value)},exports.isWebAssemblyCompiledModule=function isWebAssemblyCompiledModule(value){return"[object WebAssembly.Module]"===ObjectToString(value)},exports.isNumberObject=isNumberObject,exports.isStringObject=isStringObject,exports.isBooleanObject=isBooleanObject,exports.isBigIntObject=isBigIntObject,exports.isSymbolObject=isSymbolObject,exports.isBoxedPrimitive=function isBoxedPrimitive(value){return isNumberObject(value)||isStringObject(value)||isBooleanObject(value)||isBigIntObject(value)||isSymbolObject(value)},exports.isAnyArrayBuffer=function isAnyArrayBuffer(value){return"undefined"!=typeof Uint8Array&&(isArrayBuffer(value)||isSharedArrayBuffer(value))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(method){Object.defineProperty(exports,method,{enumerable:!1,value:function(){throw new Error(method+" is not supported in userland")}})})},"./node_modules/util/util.js":(__unused_webpack_module,exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(obj){for(var keys=Object.keys(obj),descriptors={},i=0;i<keys.length;i++)descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i]);return descriptors},formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}i=1;for(var args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])isNull(x)||!isObject(x)?str+=" "+x:str+=" "+inspect(x);return str},exports.deprecate=function(fn,msg){if(void 0!==process&&!0===process.noDeprecation)return fn;if(void 0===process)return function(){return exports.deprecate(fn,msg).apply(this,arguments)};var warned=!1;return function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}};var debugs={},debugEnvRegex=/^$/;if(process.env.NODE_DEBUG){var debugEnv=process.env.NODE_DEBUG;debugEnv=debugEnv.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),debugEnvRegex=new RegExp("^"+debugEnv+"$","i")}function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var output,base="",array=!1,braces=["{","}"];(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value))&&(base=" [Function"+(value.name?": "+value.name:"")+"]");return isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0!==keys.length||array&&0!=value.length?recurseTimes<0?isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special"):(ctx.seen.push(value),output=array?function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),function reduceToSingleString(output,base,braces){var length=output.reduce(function(prev,cur){return cur.indexOf("\n")>=0&&0,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60)return braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1];return braces[0]+base+" "+output.join(", ")+" "+braces[1]}(output,base,braces)):braces[0]+base+braces[1]}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if((desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]}).get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1)).indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").slice(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;(name=JSON.stringify(""+key)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.slice(1,-1),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}exports.debuglog=function(set){if(set=set.toUpperCase(),!debugs[set])if(debugEnvRegex.test(set)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.types=__webpack_require__("./node_modules/util/support/types.js"),exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=function isNullOrUndefined(arg){return null==arg},exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=function isSymbol(arg){return"symbol"==typeof arg},exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.types.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.types.isDate=isDate,exports.isError=isError,exports.types.isNativeError=isError,exports.isFunction=isFunction,exports.isPrimitive=function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=__webpack_require__("./node_modules/util/support/isBufferBrowser.js");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}exports.log=function(){console.log("%s - %s",function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin};var kCustomPromisifiedSymbol="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason,reason=newReason}return cb(reason)}exports.promisify=function promisify(original){if("function"!=typeof original)throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn;if("function"!=typeof(fn=original[kCustomPromisifiedSymbol]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),fn}function fn(){for(var promiseResolve,promiseReject,promise=new Promise(function(resolve,reject){promiseResolve=resolve,promiseReject=reject}),args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);args.push(function(err,value){err?promiseReject(err):promiseResolve(value)});try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}return Object.setPrototypeOf(fn,Object.getPrototypeOf(original)),kCustomPromisifiedSymbol&&Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fn,getOwnPropertyDescriptors(original))},exports.promisify.custom=kCustomPromisifiedSymbol,exports.callbackify=function callbackify(original){if("function"!=typeof original)throw new TypeError('The "original" argument must be of type Function');function callbackified(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);var maybeCb=args.pop();if("function"!=typeof maybeCb)throw new TypeError("The last argument must be of type Function");var self=this,cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then(function(ret){process.nextTick(cb.bind(null,null,ret))},function(rej){process.nextTick(callbackifyOnRejected.bind(null,rej,cb))})}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original)),Object.defineProperties(callbackified,getOwnPropertyDescriptors(original)),callbackified}},"./node_modules/which-typed-array/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var forEach=__webpack_require__("./node_modules/for-each/index.js"),availableTypedArrays=__webpack_require__("./node_modules/available-typed-arrays/index.js"),callBind=__webpack_require__("./node_modules/call-bind/index.js"),callBound=__webpack_require__("./node_modules/call-bound/index.js"),gOPD=__webpack_require__("./node_modules/gopd/index.js"),getProto=__webpack_require__("./node_modules/get-proto/index.js"),$toString=callBound("Object.prototype.toString"),hasToStringTag=__webpack_require__("./node_modules/has-tostringtag/shams.js")(),g="undefined"==typeof globalThis?__webpack_require__.g:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),$indexOf=callBound("Array.prototype.indexOf",!0)||function indexOf(array,value){for(var i=0;i<array.length;i+=1)if(array[i]===value)return i;return-1},cache={__proto__:null};forEach(typedArrays,hasToStringTag&&gOPD&&getProto?function(typedArray){var arr=new g[typedArray];if(Symbol.toStringTag in arr&&getProto){var proto=getProto(arr),descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor&&proto){var superProto=getProto(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}cache["$"+typedArray]=callBind(descriptor.get)}}:function(typedArray){var arr=new g[typedArray],fn=arr.slice||arr.set;fn&&(cache["$"+typedArray]=callBind(fn))});module.exports=function whichTypedArray(value){if(!value||"object"!=typeof value)return!1;if(!hasToStringTag){var tag=$slice($toString(value),8,-1);return $indexOf(typedArrays,tag)>-1?tag:"Object"===tag&&function tryAllSlices(value){var found=!1;return forEach(cache,function(getter,name){if(!found)try{getter(value),found=$slice(name,1)}catch(e){}}),found}(value)}return gOPD?function tryAllTypedArrays(value){var found=!1;return forEach(cache,function(getter,typedArray){if(!found)try{"$"+getter(value)===typedArray&&(found=$slice(typedArray,1))}catch(e){}}),found}(value):null}}}]);
//# sourceMappingURL=857.bb457702.iframe.bundle.js.map