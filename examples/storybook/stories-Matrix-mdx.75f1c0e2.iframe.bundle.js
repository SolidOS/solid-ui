(self.webpackChunksolid_ui=self.webpackChunksolid_ui||[]).push([[5100,6762],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>useMDXComponents,x:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}},[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},properties.children)}},"./node_modules/@storybook/blocks/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/blocks/dist sync recursive",module.exports=webpackEmptyContext},"./node_modules/@storybook/core/dist/components sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/core/dist/components sync recursive",module.exports=webpackEmptyContext},"./node_modules/@storybook/core/dist/theming sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/core/dist/theming sync recursive",module.exports=webpackEmptyContext},"./src/log.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LogLevel:()=>LogLevel,alert:()=>alert,clear:()=>clear,debug:()=>debug,dumpHTML:()=>dumpHTML,error:()=>error,escapeForXML:()=>escapeForXML,info:()=>info,logAscending:()=>logAscending,logDescending:()=>logDescending,msg:()=>msg,setInternals:()=>setInternals,setLevel:()=>setLevel,success:()=>success,warn:()=>warn});const TERROR=1,TWARN=2,TMESG=4,TSUCCESS=8,TINFO=16,TDEBUG=32,TALL=63;var LogLevel=function(LogLevel){return LogLevel[LogLevel.Error=TERROR]="Error",LogLevel[LogLevel.Warning=TWARN]="Warning",LogLevel[LogLevel.Message=TMESG]="Message",LogLevel[LogLevel.Success=TSUCCESS]="Success",LogLevel[LogLevel.Info=TINFO]="Info",LogLevel[LogLevel.Debug=TDEBUG]="Debug",LogLevel[LogLevel.All=TALL]="All",LogLevel}({});let _level=TERROR+TWARN+TMESG,_ascending=!1,_dom=document,_window=window;function log(str,type=TMESG,typestr="mesg"){if(_level&type)if(void 0!==_dom){const logArea=_dom.getElementById("status");if(!logArea)return;const addendum=_dom.createElement("span");addendum.setAttribute("class",typestr);const now=new Date;addendum.innerHTML=`${now.getHours()}:${now.getMinutes()}:${now.getSeconds()} [${typestr}] ${escapeForXML(str)}<br/>`,_ascending?logArea.insertBefore(addendum,logArea.firstChild):logArea.appendChild(addendum)}else"undefined"!=typeof console&&console.log(str)}function msg(message){log(message)}function warn(message){log(message,TWARN,"warn")}function debug(message){log(message,TDEBUG,"dbug")}function info(message){log(message,TINFO,"info")}function error(message){log(message,TERROR,"eror")}function success(message){log(message,TSUCCESS,"good")}function alert(message){_window&&void 0!==_window.alert?_window.alert(message):warn(message)}function clear(){const logArea=_dom?.getElementById("status");logArea&&(logArea.innerHTML="")}function setLevel(level){_level=TALL,debug("Log level is now "+level),_level=level}function dumpHTML(){if(!_dom)return;const level=_level;_level=TALL,debug(_dom?.body?.innerHTML||""),_level=level}function logAscending(){_ascending=!0}function logDescending(){_ascending=!1}function escapeForXML(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function setInternals(window1,document1){_window=window1,_dom=document1}},"./src/ns.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var solid_namespace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/solid-namespace/index.js"),solid_namespace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(solid_namespace__WEBPACK_IMPORTED_MODULE_0__),rdflib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rdflib/esm/index.js");const __WEBPACK_DEFAULT_EXPORT__=solid_namespace__WEBPACK_IMPORTED_MODULE_0___default()(rdflib__WEBPACK_IMPORTED_MODULE_1__)},"./src/stories/Matrix.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MDXContent});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_home_runner_work_solid_ui_solid_ui_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_Matrix_stories__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/stories/Matrix.stories.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={a:"a",h1:"h1",h2:"h2",p:"p",...(0,_home_runner_work_solid_ui_solid_ui_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_4__.W8,{of:_Matrix_stories__WEBPACK_IMPORTED_MODULE_3__}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"matrix",children:"Matrix"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["More complex examples can be investigated on the\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.a,{href:"http://solidos.github.io/solid-ui/examples/matrix/index.html",rel:"nofollow",children:"example page"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"for-query",children:"for query"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_4__.Hl,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_4__.gG,{of:_Matrix_stories__WEBPACK_IMPORTED_MODULE_3__.ForQuery})})]})}function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,_home_runner_work_solid_ui_solid_ui_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}},"./src/stories/Matrix.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ForQuery:()=>ForQuery,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Matrix_stories});var label=__webpack_require__("./src/utils/label.ts"),esm=__webpack_require__("./node_modules/rdflib/esm/index.js");const kb=__webpack_require__("./node_modules/solid-logic/dist/solid-logic.esm.js").solidLogicSingleton.store;const matrix={matrixForQuery:function matrixForQuery(dom,query,vx,vy,vvalue,options,whenDone){const matrix=dom.createElement("table"),header=dom.createElement("tr");header.appendChild(dom.createElement("td")).setAttribute("class","MatrixCorner"),matrix.appendChild(header),matrix.lastHeader=header;let columns=[];const rows=[],setCell=function(cell,x,y,value){for(;cell.firstChild;)cell.removeChild(cell.firstChild);cell.setAttribute("style",""),cell.style.textAlign="center",options.cellFunction?options.cellFunction(cell,x,y,value):(cell.textContent=label.P(value),cell.setAttribute("style","padding: 0.3em")),delete cell.old},rowFor=function(y1){const y=y1.toNT();if(rows[y])return rows[y];const tr=dom.createElement("tr"),header=tr.appendChild(dom.createElement("td"));header.setAttribute("style","padding: 0.3em;"),header.textContent=label.P(y1),"NamedNode"===y1.termType&&kb.fetcher.nowOrWhenFetched(y1.uri.split("#")[0],void 0,function(ok,_body,_response){ok&&(header.textContent=label.P(y1))});for(let i=0;i<columns.length;i++)setCell(tr.appendChild(dom.createElement("td")),esm.fromNT(columns[i]),y1,null);tr.dataValueNT=y,rows[y]=tr;for(let ele=matrix.lastHeader.nextSibling;ele;ele=ele.nextSibling)if(y>ele.dataValueNT&&options&&options.yDecreasing||y<ele.dataValueNT&&(!options||!options.yDecreasing))return matrix.insertBefore(tr,ele);return matrix.appendChild(tr)},columnNumberFor=function(x1){const xNT=x1.toNT();let col=null;for(let i=0;i<columns.length;i++){if(columns[i]===xNT)return i;if(xNT>columns[i]&&options.xDecreasing||xNT<columns[i]&&!options.xDecreasing){columns=columns.slice(0,i).concat([xNT]).concat(columns.slice(i)),col=i;break}}null===col&&(col=columns.length,columns.push(xNT));for(let row=matrix.firstChild;row;row=row.nextSibling){const y=row.dataValueNT,td=dom.createElement("td");if(td.style.textAlign="center",row===matrix.firstChild?td.textContent=label.P(x1):setCell(td,x1,esm.fromNT(y),null),col===columns.length-1)row.appendChild(td);else{let t=row.firstChild;for(let j=0;j<col+1;j++)t=t.nextSibling;row.insertBefore(td,t)}}return col},clearOldCells=function(){let row,cell;const colsUsed=[],rowsUsed=[];if(options.set_y)for(let k=0;k<options.set_y.length;k++)rowsUsed[options.set_y[k]]=!0;if(options.set_x)for(let k=0;k<options.set_x.length;k++)colsUsed[columnNumberFor(options.set_x[k])+1]=!0;for(let i=1;i<matrix.children.length;i++){row=matrix.children[i];for(let j=1;j<row.children.length;j++)if(cell=row.children[j],cell.old){const y=esm.fromNT(row.dataValueNT),x=esm.fromNT(columns[j-1]);setCell(cell,x,y,null)}else rowsUsed[row.dataValueNT]=!0,colsUsed[j]=!0}for(let i=0;i<matrix.children.length;i++)if(row=matrix.children[i],i>0&&!rowsUsed[row.dataValueNT])delete rows[row.dataValueNT],matrix.removeChild(row);else for(let j=row.children.length-1;j>0;j--){const cell=row.children[j];colsUsed[j]||row.removeChild(cell)}const newcolumns=[];for(let j=0;j<columns.length;j++)colsUsed[j+1]&&newcolumns.push(columns[j]);columns=newcolumns};matrix.refresh=function(){!function(){for(let i=1;i<matrix.children.length;i++){const row=matrix.children[i];for(let j=1;j<row.children.length;j++)row.children[j].old=!0}}(),kb.query(query,addCellFromBindings,void 0,clearOldCells)};const addCellFromBindings=function(bindings){const x=bindings[vx.toString()],y=bindings[vy.toString()],value=bindings[vvalue.toString()],row=rowFor(y),colNo=columnNumberFor(x),cell=row.children[colNo+1];setCell(cell,x,y,value)};if(options.set_y)for(let k=0;k<options.set_y.length;k++)rowFor(options.set_y[k]);if(options.set_x)for(let k=0;k<options.set_x.length;k++)columnNumberFor(options.set_x[k]);return kb.query(query,addCellFromBindings,void 0,whenDone),matrix}},Matrix_stories={title:"Matrix"},ForQuery={render:()=>{const testDocURI="https://pod.example/",testDoc=$rdf.sym(testDocURI),kb=SolidLogic.store;kb.removeMany(void 0,void 0,void 0,testDoc);$rdf.parse('@prefix :  <#>.\n@prefix foaf:  <http://xmlns.com/foaf/0.1/>.\n@prefix sched: <http://www.w3.org/ns/pim/schedule#>.\n@prefix cal:  <http://www.w3.org/2002/12/cal/ical#>.\n@prefix dc:    <http://purl.org/dc/elements/1.1/>.\n:event1 dc:author :a0;\n    a sched:YesNoMaybe ;\n    sched:response :r1, :r2 .\n:a0 foaf:name "Zoe" .\n:a1 foaf:name "Alice" .\n:a2 foaf:name "Bob" .\n:r1 dc:author :a1;\n    sched:cell\n          [ sched:availabilty sched:No; cal:dtstart "2015-01-01" ],\n          [ sched:availabilty sched:Yes; cal:dtstart "2015-01-05"] .\n:r2 dc:author :a2;\n    sched:cell\n          [ sched:availabilty sched:Maybe; cal:dtstart "2015-01-01" ] .\n',kb,testDocURI,"text/turtle");const SCHED=$rdf.Namespace("http://www.w3.org/ns/pim/schedule#"),DC=$rdf.Namespace("http://purl.org/dc/elements/1.1/"),ICAL=$rdf.Namespace("http://www.w3.org/2002/12/cal/ical#"),invitation=kb.sym(`${testDocURI}#event1`);var query=new $rdf.Query("Responses");const variables={time:$rdf.variable("time"),author:$rdf.variable("author"),availabilty:$rdf.variable("value"),response:$rdf.variable("response"),cell:$rdf.variable("cell")};query.pat.add(invitation,SCHED("response"),variables.response),query.pat.add(variables.response,DC("author"),variables.author),query.pat.add(variables.response,SCHED("cell"),variables.cell),query.pat.add(variables.cell,SCHED("availabilty"),variables.availabilty),query.pat.add(variables.cell,ICAL("dtstart"),variables.time);const options={cellFunction:(cell,x,y,value)=>{cell.textContent=value?label.P(value):"-"}};return matrix.matrixForQuery(document,query,variables.time,variables.author,variables.availabilty,options,function(){})},name:"for query"},__namedExportsOrder=["ForQuery"];ForQuery.parameters={...ForQuery.parameters,docs:{...ForQuery.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const testDocURI = "https://pod.example/";\n    const testDoc = $rdf.sym(testDocURI);\n    const kb = SolidLogic.store;\n    kb.removeMany(undefined, undefined, undefined, testDoc);\n    const turtle = `@prefix :  <#>.\n@prefix foaf:  <http://xmlns.com/foaf/0.1/>.\n@prefix sched: <http://www.w3.org/ns/pim/schedule#>.\n@prefix cal:  <http://www.w3.org/2002/12/cal/ical#>.\n@prefix dc:    <http://purl.org/dc/elements/1.1/>.\n:event1 dc:author :a0;\n    a sched:YesNoMaybe ;\n    sched:response :r1, :r2 .\n:a0 foaf:name "Zoe" .\n:a1 foaf:name "Alice" .\n:a2 foaf:name "Bob" .\n:r1 dc:author :a1;\n    sched:cell\n          [ sched:availabilty sched:No; cal:dtstart "2015-01-01" ],\n          [ sched:availabilty sched:Yes; cal:dtstart "2015-01-05"] .\n:r2 dc:author :a2;\n    sched:cell\n          [ sched:availabilty sched:Maybe; cal:dtstart "2015-01-01" ] .\n`;\n    $rdf.parse(turtle, kb, testDocURI, "text/turtle");\n    const SCHED = $rdf.Namespace("http://www.w3.org/ns/pim/schedule#");\n    const DC = $rdf.Namespace("http://purl.org/dc/elements/1.1/");\n    const ICAL = $rdf.Namespace("http://www.w3.org/2002/12/cal/ical#");\n    const invitation = kb.sym(`${testDocURI}#event1`);\n    var query = new $rdf.Query("Responses");\n    const variables = {\n      time: $rdf.variable("time"),\n      author: $rdf.variable("author"),\n      availabilty: $rdf.variable("value"),\n      response: $rdf.variable("response"),\n      cell: $rdf.variable("cell")\n    };\n    query.pat.add(invitation, SCHED("response"), variables.response);\n    query.pat.add(variables.response, DC("author"), variables.author);\n    query.pat.add(variables.response, SCHED("cell"), variables.cell);\n    query.pat.add(variables.cell, SCHED("availabilty"), variables.availabilty);\n    query.pat.add(variables.cell, ICAL("dtstart"), variables.time);\n    const options = {\n      cellFunction: (cell, x, y, value) => {\n        cell.textContent = value ? UI.utils.label(value) : "-";\n      }\n    };\n    return UI.matrix.matrixForQuery(document, query, variables.time, variables.author, variables.availabilty, options, function () {});\n  },\n  name: "for query"\n}',...ForQuery.parameters?.docs?.source}}}},"./src/utils/label.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>label});var _log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/log.ts"),solid_logic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/solid-logic/dist/solid-logic.esm.js"),_ns__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ns.js"),rdflib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rdflib/esm/index.js");const UI={log:_log__WEBPACK_IMPORTED_MODULE_0__,ns:_ns__WEBPACK_IMPORTED_MODULE_2__.A,rdf:rdflib__WEBPACK_IMPORTED_MODULE_3__};function label(thing,initialCap=!1){function doCap(label){return initialCap?label.slice(0,1).toUpperCase()+label.slice(1):label}function cleanUp(label){let result="";"/"===label.slice(-1)&&(label=label.slice(0,-1));for(let i=0;i<label.length;i++)"_"!==label[i]&&"-"!==label[i]?(result+=label[i],i+1<label.length&&label[i].toUpperCase()!==label[i]&&label[i+1].toLowerCase()!==label[i+1]&&(result+=" ")):result+=" ";return"has "===result.slice(0,4)&&(result=result.slice(4)),doCap(result)}const label1=function getWellKnownLabel(thing){return solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.ui("label"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.link("message"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.vcard("fn"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.foaf("name"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.dct("title"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.dc("title"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.rss("title"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.contact("fullName"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.sym("http://www.w3.org/2001/04/roadmap/org#name"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.cal("summary"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.foaf("nick"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.as("name"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.schema("name"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,UI.ns.rdfs("label"))||solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.any(thing,solid_logic__WEBPACK_IMPORTED_MODULE_1__.store.sym("http://www.w3.org/2004/02/skos/core#prefLabel"))}(thing);if(label1)return doCap(label1.value);if("BlankNode"===thing.termType)return"...";if("Collection"===thing.termType)return"("+thing.elements.length+")";let s=thing.uri;if(void 0===s)return thing.toString();try{s=s.split("/").map(decodeURIComponent).join("/")}catch(_e){for(let i=s.length-3;i>0;i--){const hex="0123456789abcefABCDEF";for(;"%"===s[i]&&hex.indexOf(s[i+1])>=0&&hex.indexOf(s[i+2])>=0;)s=s.slice(0,i)+String.fromCharCode(parseInt(s.slice(i+1,i+3),16))+s.slice(i+3)}}s=slice(s,"/profile/card#me"),s=slice(s,"#this"),s=slice(s,"#me");const hash=s.indexOf("#");if(hash>=0)return cleanUp(s.slice(hash+1));const slash=s.lastIndexOf("/",s.length-2);return slash>=0&&slash<thing.uri.length?cleanUp(s.slice(slash+1)):doCap(decodeURIComponent(thing.uri))}function slice(s,suffix){const length=-1*suffix.length;return s.slice(length)===suffix?s.slice(0,length):s}}}]);