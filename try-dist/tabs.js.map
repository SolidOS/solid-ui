{"version":3,"sources":["../src/tabs.js"],"names":["tabs","module","exports","UI","icons","require","log","ns","store","widgets","utils","tabWidget","options","kb","subject","dom","orientation","parseInt","backgroundColor","color","flipped","vertical","mainElement","navElement","tabContainer","tabElement","onClose","isLight","x","total","i","slice","colorBlend","a","b","mix","ca","cb","res","str","hex","res2","split","h","l","selectedColor","bodyMainStyle","rootElement","createElement","style","appendChild","setAttribute","bodyContainer","getItems","items","ordered","list","the","predicate","elements","each","corners","concat","join","margins","tabStyle","unselectedStyle","selectedStyle","shownStyle","hiddenStyle","resetTabStyle","children","length","tab","classList","contains","firstChild","resetBodyStyle","makeNewSlot","item","ele","div","addEventListener","e","metaKey","bodyTR","bodyMain","renderTabSettings","altKey","asSetttings","innerHTML","renderMain","renderTab","textContent","label","orderedSync","slot","j","left","right","differ","sameTerm","insertables","removeChild","newSlot","newBodyDiv","insertBefore","addCancelButton","sync","refresh","startEmpty","selectedTab","found","dataset","name","click","onCloseSet","existingCancelButton","querySelector","extraTab","add","textAlign","cancelButton"],"mappings":"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","sourcesContent":["// SOLID-compaible Tabs widget\r\n//\r\n// - Any Orientation = top, left, bottom, right\r\n// - Selected bodies are hidden not deleted\r\n// - Multiple tab select with Alt key\r\n//\r\n// written 2016-05-27\r\n// See https://github.com/solid/solid-ui/issues/183 for styles\r\n\r\nvar tabs = {}\r\nmodule.exports = tabs\r\n\r\nvar UI = {\r\n  icons: require('./iconBase'),\r\n  log: require('./log'),\r\n  ns: require('./ns'),\r\n  store: require('./store'),\r\n  tabs: tabs,\r\n  widgets: require('./widgets')\r\n}\r\n\r\nconst utils = require('./utils')\r\n\r\n// options.subject\r\n// options.orientation 0 top, 1 left, 2 bottom, 3 right\r\n// options.showMain(div, subject) function to show subject in div when tab selected\r\n// options.renderTabSettings  function(subject, domContainer)\r\n// options.renderTabSettings  like showMain but when user has held Alt down\r\n// options.onClose            if given, will present a cancelButton next to tabs that calls this optional method\r\n//\r\n\r\nUI.tabs.tabWidget = function (options) {\r\n  var kb = UI.store\r\n  var subject = options.subject\r\n  var dom = options.dom\r\n  var orientation = parseInt(options.orientation || '0')\r\n  var backgroundColor = options.backgroundColor || '#ddddcc'\r\n  var color\r\n  var flipped = orientation & 2\r\n  var vertical = orientation & 1\r\n\r\n  var mainElement, navElement\r\n  var tabContainer, tabElement\r\n  var onClose = options.onClose\r\n\r\n  var isLight = function (x) {\r\n    var total = 0\r\n    for (var i = 0; i < 3; i++) {\r\n      total += parseInt(x.slice(i * 2 + 1, i * 2 + 3), 16)\r\n    }\r\n    return total > 128 * 3\r\n  }\r\n  var colorBlend = function (a, b, mix) {\r\n    var ca, cb, res\r\n    var str = '#'\r\n    const hex = '0123456789abcdef'\r\n    for (var i = 0; i < 3; i++) {\r\n      ca = parseInt(a.slice(i * 2 + 1, i * 2 + 3), 16)\r\n      cb = parseInt(b.slice(i * 2 + 1, i * 2 + 3), 16)\r\n      res = ca * (1.0 - mix) + cb * mix // @@@ rounding\r\n      var res2 = parseInt(('' + res).split('.')[0]) // @@ ugh\r\n      var h = parseInt(('' + res2 / 16).split('.')[0]) // @@ ugh\r\n      var l = parseInt(('' + (res2 % 16)).split('.')[0]) // @@ ugh\r\n      str += hex[h] + hex[l]\r\n    }\r\n    // console.log('Blending colors ' + a + ' with ' + mix + ' of ' + b + ' to give ' + str)\r\n    return str\r\n  }\r\n\r\n  var selectedColor\r\n  if (isLight(backgroundColor)) {\r\n    selectedColor = colorBlend(backgroundColor, '#ffffff', 0.3)\r\n    color = '#000000'\r\n  } else {\r\n    selectedColor = colorBlend(backgroundColor, '#000000', 0.3)\r\n    color = '#ffffff'\r\n  }\r\n  var bodyMainStyle = `flex: 2; width: auto; height: 100%; border: 0.1em; border-style: solid; border-color: ${selectedColor}; padding: 1em;`\r\n\r\n  /*\r\n    'resize: both; overflow: scroll; margin:0; border: 0.1em; border-style: solid; border-color: ' +\r\n    selectedColor +\r\n    '; padding: 1em;  min-width: 30em; min-height: 450px; width:100%;'\r\n*/\r\n  const rootElement = dom.createElement('div') // 20200117a\r\n\r\n  rootElement.style = 'display: flex; height: 100%; width: 100%; flex-direction: ' +\r\n      (vertical ? 'row' : 'column') + (flipped ? '-reverse;' : ';')\r\n\r\n  navElement = rootElement.appendChild(dom.createElement('nav'))\r\n  navElement.style = 'margin: 0;'\r\n\r\n  mainElement = rootElement.appendChild(dom.createElement('main'))\r\n\r\n  mainElement.setAttribute('style', 'margin: 0; width:100%; height: 100%;') // override tabbedtab.css\r\n  tabContainer = navElement.appendChild(dom.createElement('ul'))\r\n  tabContainer.style = 'list-style-type: none;' + // No bullet please ...\r\n  'display: flex; height: 100%; width: 100%; flex-direction: ' +\r\n     (vertical ? 'column' : 'row') // + (flipped ? '-reverse;' : ';')\r\n     // Never flip the direction of readuing the tabs, assuming people read left to right and top to bottom\r\n\r\n  tabElement = 'li'\r\n\r\n  var bodyContainer = mainElement // .appendChild(dom.createElement('table'))\r\n  rootElement.tabContainer = tabContainer // ussed by caller\r\n  rootElement.bodyContainer = bodyContainer\r\n\r\n  var getItems = function () {\r\n    if (options.items) return options.items\r\n    if (options.ordered !== false) {\r\n      // default to true\r\n      var list = kb.the(subject, options.predicate)\r\n      return list.elements\r\n    } else {\r\n      return kb.each(subject, options.predicate)\r\n    }\r\n  }\r\n\r\n  var corners = ['2em', '2em', '0', '0'] // top left, TR, BR, BL\r\n  corners = corners.concat(corners).slice(orientation, orientation + 4)\r\n  corners = 'border-radius: ' + corners.join(' ') + ';'\r\n\r\n  var margins = ['0.3em', '0.3em', '0', '0.3em'] // top, right, bottom, left\r\n  margins = margins.concat(margins).slice(orientation, orientation + 4)\r\n  margins = 'margin: ' + margins.join(' ') + ';'\r\n\r\n  var tabStyle = corners + 'padding: 0.7em; max-width: 20em;' //  border: 0.05em 0 0.5em 0.05em; border-color: grey;\r\n  tabStyle += 'color: ' + color + ';'\r\n  var unselectedStyle =\r\n    tabStyle +\r\n    'opacity: 50%; margin: 0.3em; background-color: ' +\r\n    backgroundColor +\r\n    ';' // @@ rotate border\r\n  var selectedStyle =\r\n    tabStyle + margins + ' background-color: ' + selectedColor + ';'\r\n  var shownStyle = 'height: 100%; width: 100%;'\r\n  var hiddenStyle = shownStyle + 'display: none;'\r\n\r\n  var resetTabStyle = function () {\r\n    for (var i = 0; i < tabContainer.children.length; i++) {\r\n      const tab = tabContainer.children[i]\r\n      if (tab.classList.contains('unstyled')) {\r\n        continue\r\n      }\r\n      tab.firstChild.setAttribute('style', unselectedStyle)\r\n    }\r\n  }\r\n  var resetBodyStyle = function () {\r\n    for (var i = 0; i < bodyContainer.children.length; i++) {\r\n      bodyContainer.children[i].setAttribute('style', hiddenStyle)\r\n    }\r\n  }\r\n\r\n  var makeNewSlot = function (item) {\r\n    var ele = dom.createElement(tabElement)\r\n    ele.subject = item\r\n    var div = ele.appendChild(dom.createElement('div'))\r\n    div.setAttribute('style', unselectedStyle)\r\n\r\n    div.addEventListener('click', function (e) {\r\n      if (!e.metaKey) {\r\n        resetTabStyle()\r\n        resetBodyStyle()\r\n      }\r\n      div.setAttribute('style', selectedStyle)\r\n      ele.bodyTR.setAttribute('style', shownStyle)\r\n      var bodyMain = ele.bodyTR.firstChild\r\n      if (!bodyMain) {\r\n        bodyMain = ele.bodyTR.appendChild(dom.createElement('main'))\r\n        bodyMain.setAttribute('style', bodyMainStyle)\r\n      }\r\n      if (options.renderTabSettings && e.altKey) {\r\n        if (bodyMain.asSetttings !== true) {\r\n          bodyMain.innerHTML = 'loading settings ...' + item\r\n          options.renderTabSettings(bodyMain, ele.subject)\r\n          bodyMain.asSetttings = true\r\n        }\r\n      } else {\r\n        if (bodyMain.asSetttings !== false) {\r\n          bodyMain.innerHTML = 'loading item ...' + item\r\n          options.renderMain(bodyMain, ele.subject)\r\n          bodyMain.asSetttings = false\r\n        }\r\n      }\r\n    })\r\n\r\n    if (options.renderTab) {\r\n      options.renderTab(div, item)\r\n    } else {\r\n      div.textContent = utils.label(item)\r\n    }\r\n    return ele\r\n  }\r\n\r\n  // @@ Use common one from utils?\r\n  var orderedSync = function () {\r\n    var items = getItems()\r\n    if (!vertical) {\r\n      // mainElement.setAttribute('colspan', items.length + (onClose ? 1 : 0))\r\n    }\r\n    var slot, i, j, left, right\r\n    var differ = false\r\n    // Find how many match at each end\r\n    for (left = 0; left < tabContainer.children.length; left++) {\r\n      slot = tabContainer.children[left]\r\n      if (\r\n        left >= items.length ||\r\n        (slot.subject && !slot.subject.sameTerm(items[left]))\r\n      ) {\r\n        differ = true\r\n        break\r\n      }\r\n    }\r\n    if (!differ && items.length === tabContainer.children.length) {\r\n      return // The two just match in order: a case to optimize for\r\n    }\r\n    for (right = tabContainer.children.length - 1; right >= 0; right--) {\r\n      slot = tabContainer.children[right]\r\n      j = right - tabContainer.children.length + items.length\r\n      if (slot.subject && !slot.subject.sameTerm(items[j])) {\r\n        break\r\n      }\r\n    }\r\n    // The elements left ... right in tabContainer.children do not match\r\n    var insertables = items.slice(\r\n      left,\r\n      right - tabContainer.children.length + items.length + 1\r\n    )\r\n    while (right >= left) {\r\n      // remove extra\r\n      tabContainer.removeChild(tabContainer.children[left])\r\n      bodyContainer.removeChild(bodyContainer.children[left])\r\n      right -= 1\r\n    }\r\n    for (i = 0; i < insertables.length; i++) {\r\n      var newSlot = makeNewSlot(insertables[i])\r\n      var newBodyDiv = dom.createElement('div')\r\n      // var newBodyDiv = newBodyDiv.appendChild(dom.createElement('div'))\r\n      newSlot.bodyTR = newBodyDiv\r\n      if (left === tabContainer.children.length) {\r\n        // None left of original on right\r\n        tabContainer.appendChild(newSlot)\r\n        bodyContainer.appendChild(newBodyDiv)\r\n        // console.log('   appending new ' + insertables[i])\r\n      } else {\r\n        // console.log('   inserting at ' + (left + i) + ' new ' + insertables[i])\r\n        tabContainer.insertBefore(newSlot, tabContainer.children[left + i])\r\n        bodyContainer.insertBefore(newBodyDiv, bodyContainer.children[left + i])\r\n      }\r\n    }\r\n    if (onClose) {\r\n      addCancelButton(tabContainer)\r\n    }\r\n  }\r\n\r\n  var sync = function () {\r\n    if (options.ordered) {\r\n      orderedSync()\r\n    } else {\r\n      // @@ SORT THE values\r\n      orderedSync()\r\n    }\r\n  }\r\n  rootElement.refresh = sync\r\n  sync()\r\n\r\n  // From select-tabs branch by hand\r\n  if (\r\n    !options.startEmpty &&\r\n    tabContainer.children.length &&\r\n    options.selectedTab\r\n  ) {\r\n    var tab\r\n    var found = false\r\n    for (var i = 0; i < tabContainer.children.length; i++) {\r\n      tab = tabContainer.children[i]\r\n      if (\r\n        tab.firstChild &&\r\n        tab.firstChild.dataset.name === options.selectedTab\r\n      ) {\r\n        tab.firstChild.click()\r\n        found = true\r\n      }\r\n    }\r\n    if (!found) {\r\n      tabContainer.children[0].firstChild.click() // Open first tab\r\n    }\r\n  } else if (!options.startEmpty && tabContainer.children.length) {\r\n    tabContainer.children[0].firstChild.click() // Open first tab\r\n  }\r\n  return rootElement\r\n\r\n  function addCancelButton (tabContainer) {\r\n    if (tabContainer.dataset.onCloseSet) {\r\n      // @@ TODO: this is only here to make the tests work\r\n      // Discussion at https://github.com/solid/solid-ui/pull/110#issuecomment-527080663\r\n      const existingCancelButton = tabContainer.querySelector('.unstyled')\r\n      tabContainer.removeChild(existingCancelButton)\r\n    }\r\n    const extraTab = dom.createElement(tabElement)\r\n    extraTab.classList.add('unstyled')\r\n    if (tabElement === 'td') {\r\n      extraTab.style.textAlign = 'right'\r\n    }\r\n    const cancelButton = UI.widgets.cancelButton(dom, onClose)\r\n    extraTab.appendChild(cancelButton)\r\n    tabContainer.appendChild(extraTab)\r\n    tabContainer.dataset.onCloseSet = 'true'\r\n  }\r\n}\r\n"],"file":"tabs.js"}