{"version":3,"file":"thread.js","names":["_iconBase","require","_solidLogic","_index","ns","_interopRequireWildcard","login","pad","$rdf","style","utils","widgets","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","UI","icons","media","thread","dom","kb","subject","messageStore","options","store","doc","WF","Namespace","DCT","newestFirst","messageBodyStyle","div","createElement","messageTable","me","updater","anchor","text","term","uri","setAttribute","addEventListener","openHrefInOutlineMode","textContent","mention","message","pre","appendChild","createTextNode","announce","log","warn","error","newMessageForm","form","lhs","middle","rhs","AJAR_date","sendMessage","_ref","_asyncToGenerator2","_regenerator","mark","_callee2","_yield$appendMsg","dateStamp","sts","sendComplete","wrap","_callee2$","_context2","prev","next","field","disabled","appendMsg","value","sent","_ref2","_callee","success","body","bindings","_callee$","_context","errorMessageBlock","literal","renderMessage","stop","_x","_x2","_x3","apply","arguments","updateMany","sendButton","turnOnInput","creatorAndDate","innerHTML","rows","_ref3","_callee3","_callee3$","_context3","keyCode","altKey","_x4","button","iconBase","buttonStyle","context","ensureLoggedIn","then","_ref4","fieldValue","oldMsg","length","undefined","_callee4","now","timestamp","msgBody","_callee4$","_context4","Date","getTime","sym","t0","t1","Statement","mostRecentVersion","t2","t3","t4","t5","t6","push","wf","concat","nick","sioc","foaf","abrupt","_x5","person","s","any","label","td1","creator","date","nickAnchor","fetcher","nowOrWhenFetched","_ok","_body","syncMessages","about","displayed","ele","ele2","firstChild","nextSibling","AJAR_subject","messages","each","stored","forEach","m","addMessage","removeChild","msg","statementsMatching","_deleteMessage","_ref5","_callee5","deletions","_callee5$","_context5","connectedStatements","ok","_x6","_ref6","_callee6","_callee6$","_context6","_x7","_ref7","_callee9","fresh","content","dateString","tr","done","td2","td3","delButton","_callee9$","_context9","insertBefore","shortDate","_ref8","_callee8","_event","cancelButton","sureButton","_callee8$","_context8","_ref9","_callee7","_yield$appendMsg2","_callee7$","_context7","_x11","_x10","_x8","_x9","query","Query","v","vs","x","vars","variable","pat","add","dct","doneQuery","refresh"],"sources":["../../src/chat/thread.js"],"sourcesContent":["/**\n * Contains the [[thread]] function\n * @packageDocumentation\n */\n\nimport { icons } from '../iconBase'\nimport { store } from 'solid-logic'\nimport { media } from '../media/index'\nimport * as ns from '../ns'\nimport * as login from '../login/login'\nimport * as pad from '../pad'\nimport * as $rdf from 'rdflib' // pull in first avoid cross-refs\nimport * as style from '../style'\nimport * as utils from '../utils'\nimport * as widgets from '../widgets'\n\nconst UI = { icons, ns, media, pad, style, utils, widgets }\n\n/**\n * HTML component for a chat thread\n */\nexport function thread (dom, kb, subject, messageStore, options) {\n  kb = kb || store\n  messageStore = messageStore.doc() // No hash\n  const ns = UI.ns\n  const WF = $rdf.Namespace('http://www.w3.org/2005/01/wf/flow#')\n  const DCT = $rdf.Namespace('http://purl.org/dc/terms/')\n\n  options = options || {}\n\n  const newestFirst = !!options.newestFirst\n\n  const messageBodyStyle =\n    'white-space: pre-wrap; width: 90%; font-size:100%; border: 0.07em solid #eee; padding: .2em 0.5em; margin: 0.1em 1em 0.1em 1em;'\n  // 'font-size: 100%; margin: 0.1em 1em 0.1em 1em;  background-color: white; white-space: pre-wrap; padding: 0.1em;'\n\n  const div = dom.createElement('div')\n  // eslint-disable-next-line prefer-const\n  let messageTable\n\n  let me\n\n  const updater = store.updater\n\n  const anchor = function (text, term) {\n    // If there is no link return an element anyway\n    const a = dom.createElement('a')\n    if (term && term.uri) {\n      a.setAttribute('href', term.uri)\n      a.addEventListener('click', UI.widgets.openHrefInOutlineMode, true)\n      a.setAttribute('style', 'color: #3B5998; text-decoration: none; ') // font-weight: bold\n    }\n    a.textContent = text\n    return a\n  }\n\n  const mention = function mention (message, style) {\n    const pre = dom.createElement('pre')\n    pre.setAttribute('style', style || 'color: grey')\n    div.appendChild(pre)\n    pre.appendChild(dom.createTextNode(message))\n    return pre\n  }\n\n  const announce = {\n    log: function (message) {\n      mention(message, 'color: #111;')\n    },\n    warn: function (message) {\n      mention(message, 'color: #880;')\n    },\n    error: function (message) {\n      mention(message, 'color: #800;')\n    }\n  }\n\n  /**\n   * Form for a new message\n   */\n  const newMessageForm = function () {\n    const form = dom.createElement('tr')\n    const lhs = dom.createElement('td')\n    const middle = dom.createElement('td')\n    const rhs = dom.createElement('td')\n    form.appendChild(lhs)\n    form.appendChild(middle)\n    form.appendChild(rhs)\n    form.AJAR_date = '9999-01-01T00:00:00Z' // ISO format for field sort\n\n    const sendMessage = async function () {\n      // titlefield.setAttribute('class','pendingedit')\n      // titlefield.disabled = true\n      field.setAttribute('class', 'pendingedit')\n      field.disabled = true\n      const { message, dateStamp, sts } = await appendMsg(field.value)\n\n      const sendComplete = async function (uri, success, body) {\n        if (!success) {\n          form.appendChild(\n            UI.widgets.errorMessageBlock(dom, 'Error writing message: ' + body)\n          )\n        } else {\n          const bindings = {\n            '?msg': message,\n            '?content': store.literal(field.value),\n            '?date': dateStamp,\n            '?creator': me\n          }\n          renderMessage(bindings, false) // not green\n\n          field.value = '' // clear from out for reuse\n          field.setAttribute('class', '')\n          field.disabled = false\n        }\n      }\n      await updater.updateMany([], sts, sendComplete)\n    }\n    form.appendChild(dom.createElement('br'))\n\n    let field, sendButton\n    const turnOnInput = function () {\n      creatorAndDate(lhs, me, '', null)\n\n      field = dom.createElement('textarea')\n      middle.innerHTML = ''\n      middle.appendChild(field)\n      field.rows = 3\n      // field.cols = 40\n      field.setAttribute('style', messageBodyStyle + 'background-color: #eef;')\n\n      field.addEventListener(\n        'keyup',\n        async function (e) {\n          // User preference?\n          if (e.keyCode === 13) {\n            if (!e.altKey) {\n              // Alt-Enter just adds a new line\n              await sendMessage()\n            }\n          }\n        },\n        false\n      )\n\n      rhs.innerHTML = ''\n      sendButton = UI.widgets.button(\n        dom,\n        UI.icons.iconBase + 'noun_383448.svg',\n        'Send'\n      )\n      sendButton.setAttribute('style', UI.style.buttonStyle + 'float: right;')\n      sendButton.addEventListener('click', sendMessage, false)\n      rhs.appendChild(sendButton)\n    }\n\n    const context = { div: middle, dom }\n    login.ensureLoggedIn(context).then(context => {\n      me = context.me\n      turnOnInput()\n    })\n\n    return form\n  }\n\n  const appendMsg = async function (fieldValue, oldMsg = {}, options = '') { // alain\n    const sts = []\n    const now = new Date()\n    const timestamp = '' + now.getTime()\n    const dateStamp = $rdf.term(now)\n    // http://www.w3schools.com/jsref/jsref_obj_date.asp\n    const message = store.sym(messageStore.uri + '#' + 'Msg' + timestamp)\n\n    if (options === 'edit' || options === 'delete') {\n      sts.push(\n        new $rdf.Statement(await mostRecentVersion(oldMsg), DCT('isReplacedBy'), message, messageStore)\n      )\n    } else {\n      sts.push(\n        new $rdf.Statement(subject, ns.wf('message'), message, messageStore)\n      )\n    }\n    // sts.push(new $rdf.Statement(message, ns.dc('title'), store.literal(titlefield.value), messageStore))\n    const msgBody = options !== 'delete' ? fieldValue : `message deleted\\nby ${nick(me)}`\n    sts.push(\n      new $rdf.Statement(\n        message,\n        ns.sioc('content'),\n        store.literal(msgBody),\n        messageStore\n      )\n    )\n    sts.push(\n      new $rdf.Statement(message, DCT('created'), dateStamp, messageStore)\n    )\n    if (me) {\n      sts.push(\n        new $rdf.Statement(message, ns.foaf('maker'), me, messageStore)\n      )\n    }\n    return { message, dateStamp, sts }\n  }\n\n  function nick (person) {\n    const s = store.any(person, UI.ns.foaf('nick'))\n    if (s) return '' + s.value\n    return '' + utils.label(person)\n  }\n\n  function creatorAndDate (td1, creator, date, message) {\n    const nickAnchor = td1.appendChild(anchor(nick(creator), creator))\n    if (creator.uri) {\n      store.fetcher.nowOrWhenFetched(creator.doc(), undefined, function (\n        _ok,\n        _body\n      ) {\n        nickAnchor.textContent = nick(creator)\n      })\n    }\n    td1.appendChild(dom.createElement('br'))\n    td1.appendChild(anchor(date, message))\n  }\n\n  // ///////////////////////////////////////////////////////////////////////\n\n  function syncMessages (about, messageTable) {\n    const displayed = {}\n    let ele, ele2\n    for (ele = messageTable.firstChild; ele; ele = ele.nextSibling) {\n      if (ele.AJAR_subject) {\n        displayed[ele.AJAR_subject.uri] = true\n      }\n    }\n    const messages = store.each(about, ns.wf('message'))\n    const stored = {}\n    messages.forEach(function (m) {\n      stored[m.uri] = true\n      if (!displayed[m.uri]) {\n        addMessage(m)\n      }\n    })\n\n    // eslint-disable-next-line space-in-parens\n    for (ele = messageTable.firstChild; ele; ) {\n      ele2 = ele.nextSibling\n      if (ele.AJAR_subject && !stored[ele.AJAR_subject.uri]) {\n        messageTable.removeChild(ele)\n      }\n      ele = ele2\n    }\n  }\n\n  const mostRecentVersion = function (message) {\n    let msg = message\n    // const listMsg = []\n    while (msg) {\n      message = msg\n      // listMsg.push(msg)\n      msg = store.statementsMatching(message, DCT('isReplacedBy'))\n    }\n    return message\n  }\n\n  const _deleteMessage = async function (message) { // alain: must delete message and all linked with isReplacedBy\n    // alain: check that me is not the author and ask for confirmation.\n    const deletions = await store.connectedStatements(message, messageStore)\n    await updater.updateMany(deletions, [], function (uri, ok, body) {\n      if (!ok) {\n        announce.error('Cant delete messages:' + body)\n      } else {\n        syncMessages(subject, messageTable)\n      }\n    })\n  }\n\n  const addMessage = async function (message) {\n    const bindings = {\n      '?msg': message,\n      '?creator': store.any(message, ns.foaf('maker')),\n      '?date': store.any(message, DCT('created')),\n      '?content': store.any(message, ns.sioc('content'))\n    }\n    await renderMessage(bindings, true) // fresh from elsewhere\n  }\n\n  const renderMessage = async function (bindings, fresh) {\n    const creator = bindings['?creator']\n    const message = bindings['?msg']\n    const date = bindings['?date']\n    const content = bindings['?content']\n\n    const dateString = date.value\n    const tr = dom.createElement('tr')\n    tr.AJAR_date = dateString\n    tr.AJAR_subject = message\n\n    let done = false\n    for (let ele = messageTable.firstChild; ; ele = ele.nextSibling) {\n      if (!ele) {\n        // empty\n        break\n      }\n      if (\n        (dateString > ele.AJAR_date && newestFirst) ||\n        (dateString < ele.AJAR_date && !newestFirst)\n      ) {\n        messageTable.insertBefore(tr, ele)\n        done = true\n        break\n      }\n    }\n    if (!done) {\n      messageTable.appendChild(tr)\n    }\n\n    const td1 = dom.createElement('td')\n    tr.appendChild(td1)\n    creatorAndDate(td1, creator, UI.widgets.shortDate(dateString), message)\n\n    const td2 = dom.createElement('td')\n    tr.appendChild(td2)\n    const pre = dom.createElement('p')\n    pre.setAttribute(\n      'style',\n      messageBodyStyle +\n        (fresh ? 'background-color: #e8ffe8;' : 'background-color: #white;')\n    )\n    td2.appendChild(pre)\n    pre.textContent = content.value\n\n    const td3 = dom.createElement('td')\n    tr.appendChild(td3)\n\n    const delButton = dom.createElement('button')\n    td3.appendChild(delButton)\n    delButton.textContent = '-'\n\n    tr.setAttribute('class', 'hoverControl') // See tabbedtab.css (sigh global CSS)\n    delButton.setAttribute('class', 'hoverControlHide')\n    delButton.setAttribute('style', 'color: red;')\n    delButton.addEventListener(\n      'click',\n      async function (_event) {\n        td3.removeChild(delButton) // Ask -- are you sure?\n        const cancelButton = dom.createElement('button')\n        cancelButton.textContent = 'cancel'\n        td3.appendChild(cancelButton).addEventListener(\n          'click',\n          function (_event) {\n            td3.removeChild(sureButton)\n            td3.removeChild(cancelButton)\n            td3.appendChild(delButton)\n          },\n          false\n        )\n        const sureButton = dom.createElement('button')\n        sureButton.textContent = 'Delete message'\n        td3.appendChild(sureButton).addEventListener(\n          'click',\n          async function (_event) { // alain: test for delete or edit depending on me = maker\n            td3.removeChild(sureButton)\n            td3.removeChild(cancelButton)\n            // deleteMessage(message) // alain or sendMessage(message, 'delete' or 'edit') //alain\n            if (me.value === store.any(message, ns.foaf('maker')).value) {\n              const { sts } = await appendMsg() // alain\n              await updater.updateMany([], sts) // alain\n            }\n          },\n          false\n        )\n      },\n      false\n    )\n  }\n\n  // Messages with date, author etc\n\n  messageTable = dom.createElement('table')\n  messageTable.fresh = false\n  div.appendChild(messageTable)\n  messageTable.setAttribute('style', 'width: 100%;') // fill that div!\n\n  const tr = newMessageForm()\n  if (newestFirst) {\n    messageTable.insertBefore(tr, messageTable.firstChild) // If newestFirst\n  } else {\n    messageTable.appendChild(tr) // not newestFirst\n  }\n\n  let query\n  // Do this with a live query to pull in messages from web\n  if (options.query) {\n    query = options.query\n  } else {\n    query = new $rdf.Query('Messages')\n    const v = {} // semicolon needed\n    const vs = ['msg', 'date', 'creator', 'content']\n    vs.forEach(function (x) {\n      query.vars.push((v[x] = $rdf.variable(x)))\n    })\n    query.pat.add(subject, WF('message'), v.msg)\n    query.pat.add(v.msg, ns.dct('created'), v.date)\n    query.pat.add(v.msg, ns.foaf('maker'), v.creator)\n    query.pat.add(v.msg, ns.sioc('content'), v.content)\n  }\n\n  function doneQuery () {\n    messageTable.fresh = true // any new are fresh and so will be greenish\n  }\n  store.query(query, renderMessage, undefined, doneQuery)\n  div.refresh = function () {\n    syncMessages(subject, messageTable)\n  }\n  // syncMessages(subject, messageTable) // no the query will do this async\n  return div\n}\n"],"mappings":"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","ignoreList":[]}