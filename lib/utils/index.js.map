{"version":3,"file":"index.js","names":["log","_interopRequireWildcard","require","_solidLogic","ns","rdf","_label","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","UI","nextVariable","newVariableName","clearVariableNames","audioContext","AudioContext","window","webkitAudioContext","beep","ContextClass","ctx","duration","frequency","type","finishedCallback","osc","createOscillator","value","connect","destination","start","stop","hashColor","who","uri","hash","x","split","reduce","b","charCodeAt","toString","genUuid","replace","c","Math","random","v","syncTableToArray","table","things","createNewRow","foundOne","row","children","length","trashMe","g","thing","subject","sameTerm","newRow","appendChild","ele","insertBefore","removeChild","syncTableToArrayReOrdered","elementMap","toNT","existingRow","before","stackString","str","stack","lines","toPrint","line","indexOf","charAt","chunks","push","emptyNode","node","nodes","childNodes","len","getTarget","target","event","srcElement","nodeType","parentNode","ancestor","tagName","level","undefined","getAbout","kb","aa","getAttribute","fromNT","debug","getTerm","statementTr","st","AJAR_statement","className","predicate","AJAR_inverse","object","store","nextSibling","include","document","linkstr","lnk","createElement","setAttribute","addLoadEvent","func","oldonload","onload","findPos","obj","myDocument","ownerDocument","DocBox","documentElement","getBoundingClientRect","box","left","top","getEyeFocus","element","instantly","isBottom","myWindow","elementPosY","appContext","SolidAppContext","scrollDiff","scroll","totalScroll","scrollY","scrollBy","clientHeight","innerHeight","id","setInterval","scrollAmount","times","clearInterval","AJARImage","src","alt","tt","doc","image","addEventListener","clipboardData","setData","preventDefault","shortName","p","slice","namespaces","prefixes","pok","canUse","pp","lastIndexOf","slash","prefixchars","ontologyLabel","term","s","part","labelWithOntology","initialCap","findTypeURIs","rdfs","label","escapeForXML","labelForXML","predicateLabelForXML","inverse","predicateLabel","lab","ip","any","owl","RDFComparePredicateObject","self","other","compareTerm","RDFComparePredicateSubject","predParentOf","previousSibling","nodeName","error"],"sources":["../../src/utils/index.js"],"sourcesContent":["//                  Solid-UI general Utilities\n//                  ==========================\n//\n// This must load AFTER the rdflib.js and log-ext.js (or log.js).\n//\nimport * as log from '../log'\nimport { store } from 'solid-logic'\nimport * as ns from '../ns'\nimport * as rdf from 'rdflib' // pull in first avoid cross-refs\nimport { label } from './label'\n\nconst UI = { log, ns, rdf }\n\nexport {\n  addLoadEvent, // not used anywhere\n  AJARImage,\n  ancestor,\n  beep,\n  clearVariableNames,\n  emptyNode,\n  escapeForXML,\n  findPos,\n  genUuid,\n  getAbout,\n  getEyeFocus,\n  getTarget,\n  getTerm,\n  hashColor,\n  include,\n  label,\n  labelForXML,\n  labelWithOntology,\n  newVariableName,\n  ontologyLabel,\n  predicateLabel,\n  predicateLabelForXML,\n  predParentOf,\n  RDFComparePredicateObject,\n  RDFComparePredicateSubject,\n  shortName,\n  stackString,\n  syncTableToArray,\n  syncTableToArrayReOrdered\n}\n\nlet nextVariable = 0\n\nfunction newVariableName () {\n  return 'v' + nextVariable++\n}\n\nfunction clearVariableNames () {\n  nextVariable = 0\n}\n\n// http://stackoverflow.com/questions/879152/how-do-i-make-javascript-beep\n// http://www.tsheffler.com/blog/2013/05/14/audiocontext-noteonnoteoff-and-time-units/\n\nlet audioContext\n\nif (typeof AudioContext !== 'undefined') {\n  audioContext = AudioContext\n} else if (typeof window !== 'undefined') {\n  audioContext = window.AudioContext || window.webkitAudioContext\n}\n\nfunction beep () {\n  if (!audioContext) {\n    return\n  } // Safari 2015\n\n  const ContextClass = audioContext\n  const ctx = new ContextClass()\n\n  return function (duration, frequency, type, finishedCallback) {\n    duration = +(duration || 0.3)\n\n    // Only 0-4 are valid types.\n    type = type || 'sine' // sine, square, sawtooth, triangle\n\n    if (typeof finishedCallback !== 'function') {\n      finishedCallback = function () {}\n    }\n\n    const osc = ctx.createOscillator()\n\n    osc.type = type\n    osc.frequency.value = frequency || 256\n\n    osc.connect(ctx.destination)\n    osc.start(0)\n    osc.stop(duration)\n  }\n}\n\n// Make pseudorandom color from a uri\n// NOT USED ANYWHERE\nfunction hashColor (who) {\n  who = who.uri || who\n  const hash = function (x) {\n    return x.split('').reduce(function (a, b) {\n      a = (a << 5) - a + b.charCodeAt(0)\n      return a & a\n    }, 0)\n  }\n  return '#' + ((hash(who) & 0xffffff) | 0xc0c0c0).toString(16) // c0c0c0 or 808080 forces pale\n}\n\nfunction genUuid () {\n  // http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0\n    const v = c === 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n}\n\n/** Sync a DOM table with an array of things\n *\n * @param {DomElement} table - will have a tr for each thing\n * @param {Array<NamedNode>} things - ORDERED array of NamedNode objects\n * @param {function({NamedNode})} createNewRow(thing) returns a TR table row for a new thing\n *\n * Tolerates out of order elements but puts new ones in order.\n * Can be used for any element type; does not have to be a table and tr.\n */\nfunction syncTableToArray (table, things, createNewRow) {\n  let foundOne\n  let row\n  let i\n\n  for (i = 0; i < table.children.length; i++) {\n    row = table.children[i]\n    row.trashMe = true\n  }\n\n  for (let g = 0; g < things.length; g++) {\n    const thing = things[g]\n    foundOne = false\n\n    for (i = 0; i < table.children.length; i++) {\n      row = table.children[i]\n      if (row.subject && row.subject.sameTerm(thing)) {\n        row.trashMe = false\n        foundOne = true\n        break\n      }\n    }\n    if (!foundOne) {\n      const newRow = createNewRow(thing)\n      // Insert new row in position g in the table to match array\n      if (g >= table.children.length) {\n        table.appendChild(newRow)\n      } else {\n        const ele = table.children[g]\n        table.insertBefore(newRow, ele)\n      }\n      newRow.subject = thing\n    } // if not foundOne\n  } // loop g\n\n  for (i = 0; i < table.children.length; i++) {\n    row = table.children[i]\n    if (row.trashMe) {\n      table.removeChild(row)\n    }\n  }\n} // syncTableToArray\n\n/** Sync a DOM table with an array of things\n *\n * @param {DomElement} table - will have a tr for each thing\n * @param {Array<NamedNode>} things - ORDERED array of UNIQUE NamedNode objects. No duplicates\n * @param {function({NamedNode})} createNewRow(thing) returns a rendering of a new thing\n *\n * Ensures order matches exacly.  We will re-rder existing elements if necessary\n * Can be used for any element type; does not have to be a table and tr.\n * Any RDF node value can only appear ONCE in the array\n */\nfunction syncTableToArrayReOrdered (table, things, createNewRow) {\n  const elementMap = {}\n\n  for (let i = 0; i < table.children.length; i++) {\n    const row = table.children[i]\n    elementMap[row.subject.toNT()] = row // More sophisticaed would be to have a bag of duplicates\n  }\n\n  for (let g = 0; g < things.length; g++) {\n    const thing = things[g]\n    if (g >= table.children.length) { // table needs extending\n      const newRow = createNewRow(thing)\n      newRow.subject = thing\n      table.appendChild(newRow)\n    } else {\n      const row = table.children[g]\n      if (row.subject.sameTerm(thing)) {\n        // ...\n      } else {\n        const existingRow = elementMap[thing.toNT()]\n        if (existingRow) {\n          table.removeChild(existingRow)\n          table.insertBefore(existingRow, row) // Insert existing row in place of this one\n        } else {\n          const newRow = createNewRow(thing)\n          row.before(newRow) // Insert existing row in place of this one\n          newRow.subject = thing\n        }\n      }\n    }\n  } // loop g\n  // Lop off any we don't need any more:\n  while (table.children.length > things.length) {\n    table.removeChild(table.children[table.children.length - 1])\n  }\n} // syncTableToArrayReOrdered\n\n/* Error stack to string for better diagnotsics\n **\n ** See  http://snippets.dzone.com/posts/show/6632\n */\nfunction stackString (e) {\n  let str = '' + e + '\\n'\n  let i\n  if (!e.stack) {\n    return str + 'No stack available.\\n'\n  }\n  const lines = e.stack.toString().split('\\n')\n  const toPrint = []\n  for (i = 0; i < lines.length; i++) {\n    let line = lines[i]\n    if (line.indexOf('ecmaunit.js') > -1) {\n      // remove useless bit of traceback\n      break\n    }\n    if (line.charAt(0) === '(') {\n      line = 'function' + line\n    }\n    const chunks = line.split('@')\n    toPrint.push(chunks)\n  }\n  // toPrint.reverse();  No - I prefer the latest at the top by the error message -tbl\n\n  for (i = 0; i < toPrint.length; i++) {\n    str += '  ' + toPrint[i][1] + '\\n    ' + toPrint[i][0]\n  }\n  return str\n}\n\nfunction emptyNode (node) {\n  const nodes = node.childNodes\n  const len = nodes.length\n  for (let i = len - 1; i >= 0; i--) node.removeChild(nodes[i])\n  return node\n}\n\nfunction getTarget (e) {\n  let target\n  e = e || window.event\n  if (e.target) target = e.target\n  else if (e.srcElement) target = e.srcElement\n  if (target.nodeType === 3) {\n    // defeat Safari bug [sic]\n    target = target.parentNode\n  }\n  // UI.log.debug(\"Click on: \" + target.tagName)\n  return target\n}\n\nfunction ancestor (target, tagName) {\n  let level\n  for (level = target; level; level = level.parentNode) {\n    // UI.log.debug(\"looking for \"+tagName+\" Level: \"+level+\" \"+level.tagName)\n    try {\n      if (level.tagName === tagName) return level\n    } catch (e) {\n      // can hit \"TypeError: can't access dead object\" in ffox\n      return undefined\n    }\n  }\n  return undefined\n}\n\nfunction getAbout (kb, target) {\n  let level, aa\n  for (\n    level = target;\n    level && level.nodeType === 1;\n    level = level.parentNode\n  ) {\n    // UI.log.debug(\"Level \"+level + ' '+level.nodeType + ': '+level.tagName)\n    aa = level.getAttribute('about')\n    if (aa) {\n      // UI.log.debug(\"kb.fromNT(aa) = \" + kb.fromNT(aa))\n      return kb.fromNT(aa)\n      //        } else {\n      //            if (level.tagName=='TR') return undefined//this is to prevent literals passing through\n    }\n  }\n  UI.log.debug('getAbout: No about found')\n  return undefined\n}\n\nfunction getTerm (target) {\n  const statementTr = target.parentNode\n  const st = statementTr ? statementTr.AJAR_statement : undefined\n\n  const className = st ? target.className : '' // if no st then it's necessary to use getAbout\n  switch (className) {\n    case 'pred':\n    case 'pred selected':\n      return st.predicate\n    case 'obj':\n    case 'obj selected':\n      if (!statementTr.AJAR_inverse) {\n        return st.object\n      } else {\n        return st.subject\n      }\n    case '':\n    case 'selected': // header TD\n      return getAbout(store, target) // kb to be changed\n    case 'undetermined selected':\n      return target.nextSibling\n        ? st.predicate\n        : !statementTr.AJAR_inverse\n            ? st.object\n            : st.subject\n  }\n}\n\nfunction include (document, linkstr) {\n  const lnk = document.createElement('script')\n  lnk.setAttribute('type', 'text/javascript')\n  lnk.setAttribute('src', linkstr)\n  // TODO:This needs to be fixed or no longer used.\n  // document.getElementsByTagName('head')[0].appendChild(lnk)\n  return lnk\n}\n\nfunction addLoadEvent (func) {\n  const oldonload = window.onload\n  if (typeof window.onload !== 'function') {\n    window.onload = func\n  } else {\n    window.onload = function () {\n      oldonload()\n      func()\n    }\n  }\n} // addLoadEvent\n\n// Find the position of an object relative to the window\nfunction findPos (obj) {\n  // C&P from http://www.quirksmode.org/js/findpos.html\n  const myDocument = obj.ownerDocument\n  const DocBox = myDocument.documentElement.getBoundingClientRect()\n  const box = obj.getBoundingClientRect()\n  return [box.left - DocBox.left, box.top - DocBox.top]\n}\n\nfunction getEyeFocus (element, instantly, isBottom, myWindow) {\n  if (!myWindow) myWindow = window\n  const elementPosY = findPos(element)[1]\n  const appContext = window.SolidAppContext || {}\n  const scrollDiff = (appContext && appContext.scroll) || 52 // 52 = magic number for web-based version\n  const totalScroll = elementPosY - scrollDiff - myWindow.scrollY\n\n  if (instantly) {\n    if (isBottom) {\n      myWindow.scrollBy(\n        0,\n        elementPosY +\n        element.clientHeight -\n        (myWindow.scrollY + myWindow.innerHeight)\n      )\n      return\n    }\n    myWindow.scrollBy(0, totalScroll)\n    return\n  }\n  const id = myWindow.setInterval(scrollAmount, 50)\n  let times = 0\n  function scrollAmount () {\n    myWindow.scrollBy(0, totalScroll / 10)\n    times++\n    if (times === 10) {\n      myWindow.clearInterval(id)\n    }\n  }\n}\n\nfunction AJARImage (src, alt, tt, doc) {\n  if (!doc) {\n    doc = document\n  }\n  const image = doc.createElement('img')\n  image.setAttribute('src', src)\n  image.addEventListener('copy', function (e) {\n    e.clipboardData.setData('text/plain', '')\n    e.clipboardData.setData('text/html', '')\n    e.preventDefault() // We want no title data to be written to the clipboard\n  })\n  //    if (typeof alt != 'undefined')      // Messes up cut-and-paste of text\n  //        image.setAttribute('alt', alt)\n  if (typeof tt !== 'undefined') {\n    image.setAttribute('title', tt)\n  }\n  return image\n}\n\n//  Make short name for ontology\n\nfunction shortName (uri) {\n  let p = uri\n  if ('#/'.indexOf(p[p.length - 1]) >= 0) p = p.slice(0, -1)\n  const namespaces = []\n  for (const ns in this.prefixes) {\n    namespaces[this.prefixes[ns]] = ns // reverse index\n  }\n  let pok\n  const canUse = function canUse (pp) {\n    // if (!__Serializer.prototype.validPrefix.test(pp)) return false; // bad format\n    if (pp === 'ns') return false // boring\n    // if (pp in this.namespaces) return false; // already used\n    // this.prefixes[uri] = pp;\n    // this.namespaces[pp] = uri;\n    pok = pp\n    return true\n  }\n\n  let i\n  const hash = p.lastIndexOf('#')\n  if (hash >= 0) p = p.slice(hash - 1) // lop off localid\n  // eslint-disable-next-line no-unreachable-loop\n  for (;;) {\n    const slash = p.lastIndexOf('/')\n    if (slash >= 0) p = p.slice(slash + 1)\n    i = 0\n    while (i < p.length) {\n      if (this.prefixchars.indexOf(p[i])) i++\n      else break\n    }\n    p = p.slice(0, i)\n    if (p.length < 6 && canUse(p)) return pok // exact i sbest\n    if (canUse(p.slice(0, 3))) return pok\n    if (canUse(p.slice(0, 2))) return pok\n    if (canUse(p.slice(0, 4))) return pok\n    if (canUse(p.slice(0, 1))) return pok\n    if (canUse(p.slice(0, 5))) return pok\n    for (i = 0; ; i++) if (canUse(p.slice(0, 3) + i)) return pok\n  }\n}\n\n// Short name for an ontology\nfunction ontologyLabel (term) {\n  if (term.uri === undefined) return '??'\n  let s = term.uri\n  const namespaces = []\n  let i = s.lastIndexOf('#')\n  let part\n  if (i >= 0) {\n    s = s.slice(0, i + 1)\n  } else {\n    i = s.lastIndexOf('/')\n    if (i >= 0) {\n      s = s.slice(0, i + 1)\n    } else {\n      return term.uri + '?!' // strange should have # or /\n    }\n  }\n  for (const ns in UI.ns) {\n    namespaces[UI.ns[ns]] = ns // reverse index\n  }\n  try {\n    return namespaces[s]\n  } catch (e) {}\n\n  s = s.slice(0, -1) // Chop off delimiter ... now have just\n\n  while (s) {\n    i = s.lastIndexOf('/')\n    if (i >= 0) {\n      part = s.slice(i + 1)\n      s = s.slice(0, i)\n      if (part !== 'ns' && '0123456789'.indexOf(part[0]) < 0) {\n        return part\n      }\n    } else {\n      return term.uri + '!?' // strange should have a nice part\n    }\n  }\n}\n\nfunction labelWithOntology (x, initialCap) {\n  const t = store.findTypeURIs(x)\n  if (t[UI.ns.rdf('Predicate').uri] || t[UI.ns.rdfs('Class').uri]) {\n    return label(x, initialCap) + ' (' + ontologyLabel(x) + ')'\n  }\n  return label(x, initialCap)\n}\n\nfunction escapeForXML (str) {\n  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;')\n}\n\n//  As above but escaped for XML and chopped of contains a slash\nfunction labelForXML (x) {\n  return escapeForXML(label(x))\n}\n\nfunction predicateLabelForXML (p, inverse) {\n  return escapeForXML(predicateLabel(p, inverse))\n}\n// As above but for predicate, possibly inverse\nfunction predicateLabel (p, inverse) {\n  const lab = label(p)\n  if (inverse) {\n    // If we know an inverse predicate, use its label\n    const ip = store.any(p, UI.ns.owl('inverseOf')) || store.any(undefined, UI.ns.owl('inverseOf'), p)\n    if (ip) return label(ip)\n    if (lab === 'type') return '...' // Not \"is type of\"\n    return 'is ' + lab + ' of'\n  }\n  return lab\n}\n\n// Not a method. For use in sorts\nfunction RDFComparePredicateObject (self, other) {\n  const x = self.predicate.compareTerm(other.predicate)\n  if (x !== 0) return x\n  return self.object.compareTerm(other.object)\n}\n\nfunction RDFComparePredicateSubject (self, other) {\n  const x = self.predicate.compareTerm(other.predicate)\n  if (x !== 0) return x\n  return self.subject.compareTerm(other.subject)\n}\n// ends\n\nfunction predParentOf (node) {\n  let n = node\n  while (true) {\n    if (n.getAttribute('predTR')) {\n      return n\n    } else if (n.previousSibling && n.previousSibling.nodeName === 'TR') {\n      n = n.previousSibling\n    } else {\n      UI.log.error('Could not find predParent')\n      return node\n    }\n  }\n}\n\n// makeQueryRow moved to outline mode\n"],"mappings":"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"}