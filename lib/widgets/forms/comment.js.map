{"version":3,"sources":["../../../src/widgets/forms/comment.ts"],"names":["store","solidLogicSingleton","commentField","dom","container","already","subject","form","_doc","_callbackFunction","kb","contents","any","ns","ui","uri","params","fieldParams","undefined","box","createElement","appendChild","p","element","textContent","style","setAttribute"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,KAAK,GAAGC,gCAAoBD,KAAlC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,SAASE,YAAT,CACLC,GADK,EAELC,SAFK,EAGLC,OAHK,EAILC,OAJK,EAKLC,IALK,EAMLC,IANK,EAOLC,iBAPK,EAQL;AACA,MAAMC,EAAE,GAAGV,KAAX;AACA,MAAIW,QAAa,GAAGD,EAAE,CAACE,GAAH,CAAOL,IAAP,EAAaM,EAAE,CAACC,EAAH,CAAM,UAAN,CAAb,CAApB;;AACA,MAAI,CAACH,QAAL,EAAe;AACbA,IAAAA,QAAQ,GAAG,sCAAX;AACD;;AACD,MAAMI,GAAG,GAAG,yCAAqBR,IAArB,CAAZ;AACA,MAAIS,MAAM,GAAGC,yBAAYF,GAAZ,CAAb;;AACA,MAAIC,MAAM,KAAKE,SAAf,EAA0B;AACxBF,IAAAA,MAAM,GAAG,EAAT;AACD,GAVD,CAUE;;;AAEF,MAAMG,GAAG,GAAGhB,GAAG,CAACiB,aAAJ,CAAkB,KAAlB,CAAZ;AACA,MAAIhB,SAAJ,EAAeA,SAAS,CAACiB,WAAV,CAAsBF,GAAtB;AACf,MAAMG,CAAC,GAAGH,GAAG,CAACE,WAAJ,CAAgBlB,GAAG,CAACiB,aAAJ,CAAkBJ,MAAM,CAACO,OAAP,IAAkB,GAApC,CAAhB,CAAV;AACAD,EAAAA,CAAC,CAACE,WAAF,GAAgBb,QAAhB;AAEA,MAAIc,KAAU,GAAGf,EAAE,CAACE,GAAH,CAAOL,IAAP,EAAaM,EAAE,CAACC,EAAH,CAAM,OAAN,CAAb,CAAjB;;AACA,MAAIW,KAAK,KAAKP,SAAd,EAAyB;AACvBO,IAAAA,KAAK,GAAGT,MAAM,CAACS,KAAP,GAAeT,MAAM,CAACS,KAAtB,GAA8B,EAAtC;AACD;;AACD,MAAIA,KAAJ,EAAWH,CAAC,CAACI,YAAF,CAAe,OAAf,EAAwBD,KAAxB;AAEX,SAAON,GAAP;AACD","sourcesContent":["import { solidLogicSingleton } from 'solid-logic'\nimport * as ns from '../../ns'\nimport { mostSpecificClassURI } from './fieldFunction'\nimport { fieldParams } from './fieldParams'\n\nconst store = solidLogicSingleton.store\n\n/**\n * A [[FieldFunction]] for a simple comment box. It will look for\n * the first (form, ns.ui('contents'), ?) triple it can find in\n * store and use the value of the object of that triple as\n * the comment text.\n *\n * @param dom The DOM\n * @param container If set, the result will be appended to it as a child\n * @param already Unused\n * @param subject Unused\n * @param form RDF node with `ns.ui('contents')` attribute\n * @param _doc Unused\n * @param _callbackFunction Unused\n *\n * @returns a DOM element containing the comment.\n */\nexport function commentField (\n  dom: HTMLDocument,\n  container: HTMLElement | undefined,\n  already: any,\n  subject: any,\n  form,\n  _doc,\n  _callbackFunction\n) {\n  const kb = store\n  let contents: any = kb.any(form, ns.ui('contents'))\n  if (!contents) {\n    contents = 'Error: No contents in comment field.'\n  }\n  const uri = mostSpecificClassURI(form)\n  let params = fieldParams[uri]\n  if (params === undefined) {\n    params = {}\n  } // non-bottom field types can do this\n\n  const box = dom.createElement('div')\n  if (container) container.appendChild(box)\n  const p = box.appendChild(dom.createElement(params.element || 'p'))\n  p.textContent = contents\n\n  let style: any = kb.any(form, ns.ui('style'))\n  if (style === undefined) {\n    style = params.style ? params.style : ''\n  }\n  if (style) p.setAttribute('style', style as any)\n\n  return box\n}\n"],"file":"comment.js"}