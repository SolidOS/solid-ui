{"version":3,"file":"index.js","names":["_index","require","_solidLogic","_login","widgets","_interopRequireWildcard","style","_emptyProfile","_headerFooterHelpers","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","DEFAULT_HELP_MENU_ICON","icons","iconBase","DEFAUL_SOLID_ICON_URL","initHeader","_x","_x2","_x3","_initHeader","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee2","store","userMenuList","options","header","pod","wrap","_callee2$","_context2","prev","next","document","getElementById","abrupt","getPod","rebuildHeader","authSession","onLogout","onLogin","stop","_callee","user","_callee$","_context","authn","currentUser","innerHTML","t0","createBanner","t1","sent","appendChild","_x4","_x5","_x6","_x7","_x8","_createBanner","_callee3","podLink","image","userMenu","banner","leftSideOfHeader","helpMenu","_callee3$","_context3","createElement","href","uri","setAttribute","headerBannerLink","src","logo","headerBannerIcon","createUserMenu","createLoginSignUpButtons","headerBanner","headerBannerRightMenu","helpMenuList","createHelpMenu","helpMenuItems","headerUserMenuList","forEach","menuItem","menuItemType","url","createUserMenuItem","createUserMenuLink","label","target","createUserMenuButton","onclick","headerUserMenuNavigationMenuNotDisplayed","helpMenuContainer","headerBannerUserMenu","helpMenuTrigger","headerUserMenuTrigger","type","helpMenuIcon","helpIcon","headerUserMenuTriggerImg","throttledMenuToggle","throttle","event","toggleMenu","addEventListener","timer","setTimeout","clearTimeout","nav","headerUserMenuNavigationMenu","profileLoginButtonPre","headerBannerLogin","loginStatusBox","onClick","button","headerUserMenuButton","onmouseover","headerUserMenuButtonHover","onmouseout","innerText","link","headerUserMenuLink","headerUserMenuLinkHover","_x9","_x10","_x11","_createUserMenu","_callee4","fetcher","loggedInMenuList","loggedInMenu","loggedInMenuTrigger","profileImg","loggedInMenuContainer","_callee4$","_context4","load","getProfileImg","headerBannerUserMenuNotDisplayed","child","menuProfileItem","headerUserMenuListItem","profileUrl","findImage","emptyProfile","_unused","profileImage","headerUserMenuPhoto","backgroundImage","concat","trigger","menu","isExpanded","getAttribute","expand","close","toString"],"sources":["../../src/header/index.ts"],"sourcesContent":["/* global EventListenerOrEventListenerObject */\n/*\n    This file was copied from mashlib/src/global/header.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { IndexedFormula, NamedNode } from 'rdflib'\nimport { icons } from '../index'\nimport { authn, authSession } from 'solid-logic'\nimport { loginStatusBox } from '../login/login'\n// import { loginStatusBox, authSession, currentUser } from '../authn/authn'\nimport * as widgets from '../widgets'\nimport * as style from '../style'\nimport { emptyProfile } from './empty-profile'\nimport { getPod, throttle } from '../utils/headerFooterHelpers'\n\n/**\n * menu icons\n*/\nconst DEFAULT_HELP_MENU_ICON = icons.iconBase + 'noun_help.svg'\nconst DEFAUL_SOLID_ICON_URL = 'https://solidproject.org/assets/img/solid-emblem.svg'\n\nexport type MenuItemLink = {\n  label: string,\n  url: string,\n  target?: string\n}\n\nexport type MenuItemButton = {\n  label: string,\n  onclick: () => void\n}\n\nexport type MenuItems = MenuItemLink | MenuItemButton\n\n/*\n  HeaderOptions allow for customizing the logo and menu list.  If a logo is not provided the default\n  is solid. Menulist will always show a link to logout and to the users profile.\n  */\nexport type HeaderOptions = {\n  logo?: string,\n  helpIcon?: string,\n  helpMenuList?: MenuItems[]\n}\n\n/**\n * Initialize header component, the header object returned depends on whether the user is authenticated.\n * @param store the data store\n * @param userMenuList a list of menu items when the user is logged in\n * @param options allow the header to be customized with a personalized logo, help icon and a help menu list of links or buttons.\n * @returns a header for an authenticated user with menu items given or a login screen\n */\nexport async function initHeader (store: IndexedFormula, userMenuList: MenuItems[], options?: HeaderOptions) {\n  const header = document.getElementById('PageHeader')\n  if (!header) {\n    return\n  }\n\n  const pod = getPod()\n  rebuildHeader(header, store, pod, userMenuList, options)()\n  authSession.onLogout(rebuildHeader(header, store, pod, userMenuList, options))\n  authSession.onLogin(rebuildHeader(header, store, pod, userMenuList, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildHeader (header: HTMLElement, store: IndexedFormula, pod: NamedNode, userMenuList: MenuItems[], options?: HeaderOptions) {\n  return async () => {\n    const user = authn.currentUser()\n    header.innerHTML = ''\n    header.appendChild(await createBanner(store, pod, user, userMenuList, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport async function createBanner (store: IndexedFormula, pod: NamedNode, user: NamedNode | null, userMenuList: MenuItems[], options?: HeaderOptions): Promise<HTMLElement> {\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  podLink.setAttribute('style', style.headerBannerLink)\n  const image = document.createElement('img')\n  if (options) {\n    image.src = options.logo ? options.logo : DEFAUL_SOLID_ICON_URL\n  }\n  image.setAttribute('style', style.headerBannerIcon)\n  podLink.appendChild(image)\n\n  const userMenu = user\n    ? await createUserMenu(store, user, userMenuList)\n    : createLoginSignUpButtons()\n\n  const banner = document.createElement('div')\n  banner.setAttribute('style', style.headerBanner)\n  banner.appendChild(podLink)\n\n  const leftSideOfHeader = document.createElement('div')\n  leftSideOfHeader.setAttribute('style', style.headerBannerRightMenu)\n  leftSideOfHeader.appendChild(userMenu)\n\n  if (options && options.helpMenuList) {\n    const helpMenu = createHelpMenu(options, options.helpMenuList)\n    leftSideOfHeader.appendChild(helpMenu as HTMLDivElement)\n  }\n\n  banner.appendChild(leftSideOfHeader)\n\n  return banner\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createHelpMenu (options: HeaderOptions, helpMenuItems: MenuItems[]) {\n  if (!helpMenuItems) return\n  const helpMenuList = document.createElement('ul')\n  helpMenuList.setAttribute('style', style.headerUserMenuList)\n  helpMenuItems.forEach(function (menuItem) {\n    const menuItemType: string = (menuItem as MenuItemLink).url ? 'url' : 'onclick'\n    if (menuItemType === 'url') {\n      helpMenuList.appendChild(createUserMenuItem(createUserMenuLink(menuItem.label, (menuItem as MenuItemLink).url, (menuItem as MenuItemLink).target)))\n    } else {\n      helpMenuList.appendChild(createUserMenuItem(createUserMenuButton(menuItem.label, (menuItem as MenuItemButton).onclick)))\n    }\n  })\n\n  const helpMenu = document.createElement('nav')\n\n  helpMenu.setAttribute('style', style.headerUserMenuNavigationMenuNotDisplayed)\n  helpMenu.setAttribute('aria-hidden', 'true')\n  helpMenu.setAttribute('id', 'helperNav')\n  helpMenu.appendChild(helpMenuList)\n\n  const helpMenuContainer = document.createElement('div')\n  helpMenuContainer.setAttribute('style', style.headerBannerUserMenu)\n  helpMenuContainer.appendChild(helpMenu)\n\n  const helpMenuTrigger = document.createElement('button')\n  helpMenuTrigger.setAttribute('style', style.headerUserMenuTrigger)\n  helpMenuTrigger.type = 'button'\n\n  const helpMenuIcon = document.createElement('img')\n  helpMenuIcon.src = (options && options.helpIcon) ? options.helpIcon : icons.iconBase + DEFAULT_HELP_MENU_ICON\n  helpMenuIcon.setAttribute('style', style.headerUserMenuTriggerImg)\n  helpMenuContainer.appendChild(helpMenuTrigger)\n  helpMenuTrigger.appendChild(helpMenuIcon)\n\n  const throttledMenuToggle = throttle((event: Event) => toggleMenu(event, helpMenuTrigger, helpMenu), 50)\n  helpMenuTrigger.addEventListener('click', throttledMenuToggle)\n  let timer = setTimeout(() => null, 0)\n  helpMenuContainer.addEventListener('mouseover', event => {\n    clearTimeout(timer)\n    throttledMenuToggle(event)\n    const nav = document.getElementById('helperNav')\n    nav?.setAttribute('style', style.headerUserMenuNavigationMenu)\n  })\n  helpMenuContainer.addEventListener('mouseout', event => {\n    timer = setTimeout(() => throttledMenuToggle(event), 200)\n    const nav = document.getElementById('helperNav')\n    nav?.setAttribute('style', style.headerUserMenuNavigationMenuNotDisplayed)\n  })\n\n  return helpMenuContainer\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createLoginSignUpButtons () {\n  const profileLoginButtonPre = document.createElement('div')\n  profileLoginButtonPre.setAttribute('style', style.headerBannerLogin)\n  profileLoginButtonPre.appendChild(loginStatusBox(document, null, {}))\n  return profileLoginButtonPre\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createUserMenuButton (label: string, onClick: EventListenerOrEventListenerObject): HTMLElement {\n  const button = document.createElement('button')\n  button.setAttribute('style', style.headerUserMenuButton)\n  button.onmouseover = function () {\n    button.setAttribute('style', style.headerUserMenuButtonHover)\n  }\n  button.onmouseout = function () {\n    button.setAttribute('style', style.headerUserMenuButton)\n  }\n  button.addEventListener('click', onClick)\n  button.innerText = label\n  return button\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createUserMenuLink (label: string, href: string, target?: string): HTMLElement {\n  const link = document.createElement('a')\n  link.setAttribute('style', style.headerUserMenuLink)\n  link.onmouseover = function () {\n    link.setAttribute('style', style.headerUserMenuLinkHover)\n  }\n  link.onmouseout = function () {\n    link.setAttribute('style', style.headerUserMenuLink)\n  }\n  link.href = href\n  link.innerText = label\n  if (target) link.target = target\n  return link\n}\n\n/**\n * @ignore exporting this only for the unit test\n */\nexport async function createUserMenu (store: IndexedFormula, user: NamedNode, userMenuList: MenuItems[]): Promise<HTMLElement> {\n  const fetcher = (<any>store).fetcher\n  if (fetcher) {\n    // Making sure that Profile is loaded before building menu\n    await fetcher.load(user)\n  }\n\n  const loggedInMenuList = document.createElement('ul')\n  loggedInMenuList.setAttribute('style', style.headerUserMenuList)\n  if (userMenuList) {\n    userMenuList.forEach(function (menuItem) {\n      const menuItemType: string = (menuItem as MenuItemLink).url ? 'url' : 'onclick'\n      if (menuItemType === 'url') {\n        loggedInMenuList.appendChild(createUserMenuItem(createUserMenuLink(menuItem.label, (menuItem as MenuItemLink).url, (menuItem as MenuItemLink).target)))\n      } else {\n        loggedInMenuList.appendChild(createUserMenuItem(createUserMenuButton(menuItem.label, (menuItem as MenuItemButton).onclick)))\n      }\n    })\n  }\n  const loggedInMenu = document.createElement('nav')\n\n  loggedInMenu.setAttribute('style', style.headerUserMenuNavigationMenuNotDisplayed)\n  loggedInMenu.setAttribute('aria-hidden', 'true')\n  loggedInMenu.setAttribute('id', 'loggedInNav')\n  loggedInMenu.appendChild(loggedInMenuList)\n\n  const loggedInMenuTrigger = document.createElement('button')\n  loggedInMenuTrigger.setAttribute('style', style.headerUserMenuTrigger)\n  loggedInMenuTrigger.type = 'button'\n  const profileImg = getProfileImg(store, user)\n  if (typeof profileImg === 'string') {\n    loggedInMenuTrigger.innerHTML = profileImg\n  } else {\n    loggedInMenuTrigger.appendChild(profileImg)\n  }\n\n  const loggedInMenuContainer = document.createElement('div')\n  loggedInMenuContainer.setAttribute('style', style.headerBannerUserMenuNotDisplayed)\n  loggedInMenuContainer.appendChild(loggedInMenuTrigger)\n  loggedInMenuContainer.appendChild(loggedInMenu)\n\n  const throttledMenuToggle = throttle((event: Event) => toggleMenu(event, loggedInMenuTrigger, loggedInMenu), 50)\n  loggedInMenuTrigger.addEventListener('click', throttledMenuToggle)\n  let timer = setTimeout(() => null, 0)\n  loggedInMenuContainer.addEventListener('mouseover', event => {\n    clearTimeout(timer)\n    throttledMenuToggle(event)\n    const nav = document.getElementById('loggedInNav')\n    nav?.setAttribute('style', style.headerUserMenuNavigationMenu)\n  })\n  loggedInMenuContainer.addEventListener('mouseout', event => {\n    timer = setTimeout(() => throttledMenuToggle(event), 200)\n    const nav = document.getElementById('loggedInNav')\n    nav?.setAttribute('style', style.headerUserMenuNavigationMenuNotDisplayed)\n  })\n\n  return loggedInMenuContainer\n}\n\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createUserMenuItem (child: HTMLElement): HTMLElement {\n  const menuProfileItem = document.createElement('li')\n  menuProfileItem.setAttribute('style', style.headerUserMenuListItem)\n  menuProfileItem.appendChild(child)\n  return menuProfileItem\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function getProfileImg (store: IndexedFormula, user: NamedNode): string | HTMLElement {\n  let profileUrl = null\n  try {\n    profileUrl = widgets.findImage(user)\n    if (!profileUrl) {\n      return emptyProfile\n    }\n  } catch {\n    return emptyProfile\n  }\n\n  const profileImage = document.createElement('div')\n  profileImage.setAttribute('style', style.headerUserMenuPhoto)\n  profileImage.style.backgroundImage = `url(${profileUrl})`\n  return profileImage\n}\n\n/**\n * @internal\n */\nfunction toggleMenu (event: Event, trigger: HTMLButtonElement, menu: HTMLElement): void {\n  const isExpanded = trigger.getAttribute('aria-expanded') === 'true'\n  const expand = event.type === 'mouseover'\n  const close = event.type === 'mouseout'\n  if ((isExpanded && expand) || (!isExpanded && close)) {\n    return\n  }\n  trigger.setAttribute('aria-expanded', (!isExpanded).toString())\n  menu.setAttribute('aria-hidden', isExpanded.toString())\n}\n"],"mappings":"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","ignoreList":[]}