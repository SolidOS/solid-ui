{"version":3,"file":"index.js","names":["_solidLogic","require","style","_interopRequireWildcard","_headerFooterHelpers","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","DEFAULT_SOLID_PROJECT_URL","DEFAULT_SOLID_PROJECT_NAME","initFooter","_x","_x2","_initFooter","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee2","store","options","footer","pod","podOwner","wrap","_context2","prev","next","document","getElementById","abrupt","getPod","getPodOwner","sent","rebuildFooter","authSession","onLogin","onLogout","stop","_callee","user","_t","_context","authn","currentUser","innerHTML","createControllerInfoBlock","appendChild","profileLinkContainer","createElement","equals","setAttribute","podLinkPre","innerText","podLink","href","uri","profileLinkPre","profileLink","getName","solidProjectLinkPre","solidProjectLink","solidProjectUrl","solidProjectName","solidProjectLinkPost"],"sources":["../../src/footer/index.ts"],"sourcesContent":["/*\n    This file was copied from mashlib/src/global/footer.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { LiveStore, NamedNode } from 'rdflib'\nimport { authn, authSession } from 'solid-logic'\nimport * as style from '../style'\nimport { getName, getPod, getPodOwner } from '../utils/headerFooterHelpers'\n\nconst DEFAULT_SOLID_PROJECT_URL = 'https://solidproject.org'\nconst DEFAULT_SOLID_PROJECT_NAME = 'solidproject.org'\n\n/*\n  FooterOptions allow for customizing the link and name of the link part of the footer.\n  */\nexport type FooterOptions = {\n  solidProjectUrl?: string,\n  solidProjectName?: string\n}\n\n/**\n * Initialize footer component, the footer object returned depends on whether the user is authenticated.\n * @param store the data store\n * @returns the footer\n */\nexport async function initFooter (store: LiveStore, options?: FooterOptions) {\n  const footer = document.getElementById('PageFooter')\n  if (!footer) {\n    return\n  }\n  const pod = getPod()\n  const podOwner = await getPodOwner(pod, store)\n  rebuildFooter(footer, store, pod, podOwner, options)()\n  authSession.onLogin(rebuildFooter(footer, store, pod, podOwner, options))\n  authSession.onLogout(rebuildFooter(footer, store, pod, podOwner, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildFooter (footer: HTMLElement, store: LiveStore, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions) {\n  return async () => {\n    const user = authn.currentUser()\n    footer.innerHTML = ''\n    footer.appendChild(await createControllerInfoBlock(store, user, pod, podOwner, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createControllerInfoBlock (store: LiveStore, user: NamedNode | null, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions): HTMLElement {\n  const profileLinkContainer = document.createElement('div')\n  if (!pod || !podOwner || (user && user.equals(podOwner))) {\n    return profileLinkContainer\n  }\n\n  profileLinkContainer.setAttribute('style', style.footer)\n\n  const podLinkPre = document.createElement('span')\n  podLinkPre.innerText = \"You're visiting \"\n\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  podLink.innerText = 'the Pod'\n\n  const profileLinkPre = document.createElement('span')\n  profileLinkPre.innerText = ' controlled by '\n\n  const profileLink = document.createElement('a')\n  profileLink.href = podOwner.uri\n  profileLink.innerText = getName(store, podOwner)\n\n  const solidProjectLinkPre = document.createElement('span')\n  solidProjectLinkPre.innerText = '. For more info, check out '\n\n  const solidProjectLink = document.createElement('a')\n  solidProjectLink.href = options && options.solidProjectUrl ? options.solidProjectUrl : DEFAULT_SOLID_PROJECT_URL\n  solidProjectLink.innerText = options && options.solidProjectName ? options.solidProjectName : DEFAULT_SOLID_PROJECT_NAME\n\n  const solidProjectLinkPost = document.createElement('span')\n  solidProjectLinkPost.innerText = '.'\n\n  profileLinkContainer.appendChild(podLinkPre)\n  profileLinkContainer.appendChild(podLink)\n  profileLinkContainer.appendChild(profileLinkPre)\n  profileLinkContainer.appendChild(profileLink)\n  profileLinkContainer.appendChild(solidProjectLinkPre)\n  profileLinkContainer.appendChild(solidProjectLink)\n  profileLinkContainer.appendChild(solidProjectLinkPost)\n\n  return profileLinkContainer\n}\n"],"mappings":"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","ignoreList":[]}