{"version":3,"file":"tabs.js","names":["_widgets","require","_utils","style","_interopRequireWildcard","_solidLogic","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_callSuper","o","_getPrototypeOf2","_possibleConstructorReturn2","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","ContainerElement","_HTMLElement","_this","_classCallCheck2","_len","arguments","length","args","Array","_key","concat","_defineProperty2","_inherits2","_createClass2","_wrapNativeSuper2","HTMLElement","TabWidgetElement","exports","_HTMLElement2","_this2","_len2","_key2","TabElement","_HTMLElement3","_this3","_len3","_key3","tabsDefaultBackgroundColor","tabWidget","options","subject","dom","document","orientation","parseInt","backgroundColor","flipped","vertical","onClose","_getColors","getColors","_getColors2","_slicedToArray2","selectedColor","color","bodyMainStyle","rootElement","createElement","setAttribute","tabsRootElement","flexDirection","navElement","appendChild","tabsNavElement","mainElement","tabsMainElement","tabContainer","tabElement","bodyContainer","corners","cornersPrepped","slice","cornersStyle","join","margins","marginsPrepped","marginsStyle","paddingStyle","tabStyle","unselectedStyle","selectedStyle","shownStyle","hiddenStyle","refresh","orderedSync","startEmpty","children","selectedTab","selectedTab0","from","map","tab","firstChild","find","dataset","name","selectedTabURI","uri","selectedTab1","clickMe","click","addCancelButton","onCloseSet","existingCancelButton","querySelector","removeChild","extraTab","classList","add","tabCancelButton","cancelButton","getAttribute","getItems","items","ordered","store","the","predicate","elements","each","makeNewSlot","item","ele","div","onclick","resetTabStyle","resetBodyStyle","bodyTR","bodyMain","getOrCreateContainerElement","renderMain","asSettings","innerHTML","renderTabSettings","ellipsis","textContent","renderTab","label","_ele$bodyTR","newBodyMain","slot","j","left","right","differ","sameTerm","insertables","newSlot","newBodyDiv","insertBefore","contains","isLight","colorBlend","b","mix","ca","cb","res","str","hex","res2","split","h","l","x","total"],"sources":["../src/tabs.ts"],"sourcesContent":["import { cancelButton } from './widgets'\nimport { label } from './utils'\nimport { NamedNode } from 'rdflib'\nimport * as style from './style'\nimport { store } from 'solid-logic'\n\n/**\n * @ignore\n */\nclass ContainerElement extends HTMLElement {\n  asSettings?: boolean\n}\n\ntype TabWidgetOptions = {\n  backgroundColor?: string;\n  dom?: HTMLDocument;\n  items?: Array<NamedNode>;\n  onClose?: (event: Event) => void;\n  ordered?: boolean;\n  orientation?: '0' | '1' | '2' | '3';\n  predicate?: NamedNode;\n  renderMain?: (bodyMain: HTMLElement, subject: NamedNode) => void;\n  renderTab?: (tabDiv: HTMLButtonElement, subject: NamedNode) => void;\n  renderTabSettings?: (bodyMain: ContainerElement, subject: NamedNode) => void;\n  selectedTab?: NamedNode;\n  startEmpty?: boolean;\n  subject?: NamedNode;\n};\n\nexport class TabWidgetElement extends HTMLElement {\n  bodyContainer?: HTMLElement\n  refresh?: () => void\n  tabContainer?: HTMLElement\n}\n\n/**\n * @ignore\n */\nclass TabElement extends HTMLElement {\n  bodyTR?: HTMLElement\n  subject?: NamedNode\n}\n\n/**\n * Use this widget to generate tabs from triples set in the global store.\n *\n * [Here you can see examples of the tabs](https://solidos.github.io/solid-ui/examples/tabs/).\n *\n * It assumes that items to use for tabs will be in a collection by default,\n * e.g.:\n *\n * ```turtle\n * :subject :predicate ( :item1 :item2 ) .\n * ```\n *\n * You can override this by setting `ordered: false`, in which case it expects\n * unordered triples:\n *\n * ```turtle\n * :subject :predicate :item1, :item 2 .\n * ```\n *\n * Triples that are not ordered in collection are in principle not sorted,\n * which means that tabs could change order every time you render the widget.\n * But in this case the widget will try to sort it in order to keep it\n * consistent.\n *\n * In both of these cases you need to define options `subject` and `predicate`\n * to tell the widget which triples it should be looking for.\n *\n * Finally you can set items manually, using the `items` option, e.g.:\n *\n * ```javascript\n * {\n *   items: [\n *     namedNode('https://domain.tld/#item1'),\n *     namedNode('https://domain.tld/#item2')\n *   ]\n * }\n * ```\n *\n * When you set items manually you do not need to set `subject` and\n * `predicate`.\n *\n * In any case you probably want to set the renderMain option to specify\n * what should be rendered for the various items, e.g.:\n *\n * ```javascript\n * {\n *   renderMain: (bodyMain, subject) => {\n *     bodyMain.innerHTML = renderItem(subject)\n *   }\n * }\n * ```\n *\n * **Note:** `renderItem` is a custom function that you need to define yourself.\n *\n * The option `renderTabSettings` allows you to render a custom view in the\n * body container that is shown when you hold the ALT key and click on a\n * tab. It works very much like the `renderMain` option:\n *\n * ```javascript\n * {\n *   renderTabSettings: (bodyMain, subject) => {\n *     bodyMain.innerHTML = renderTabSettings(subject)\n *   }\n * }\n * ```\n *\n * **Note:** `renderTabSettings` is a custom function that you need to define\n * yourself.\n *\n * By default the widget will try to guess the label by using the\n * [[utils.label]] function. If you want to customize this yourself, you can\n * use the `renderTab` option:\n *\n * ```javascript\n * {\n *   renderTab: (tabDiv, subject) => {\n *     tabDiv.innerText = renderTabText(subject)\n *   }\n * }\n * ```\n *\n * **Note:** `renderTabText` is a custom function you need to define yourself.\n *\n * The option renderTab is also important if you want to set which tab should\n * be selected once the widget is rendered. By default it will simply select\n * the first tab, but you can override by setting `dataset.name` on the tab\n * and referring to the same string in `selectedTab`:\n *\n * ```javascript\n * {\n *   renderTab: (tabDiv, subject)  => {\n *     tabDiv.dataset.name = subject.uri\n *   },\n *   selectedTab: item2.uri\n * }\n * ```\n *\n * You can apply a color to use for tabs and border of the container by using\n * option `background-color`. This is #ddddcc by default.\n *\n * You can override the document object that the widget uses to generate DOM\n * elements by setting the option `dom`. This is encouraged to set if you\n * intend your functionality to be used in environments that don't provide\n * a global `document` object.\n *\n * If you want to render a close button next to the tabs you can set option\n * `onClose` which takes a callback function that is triggered when the\n * button is clicked:\n *\n * ```javascript\n * {\n *   onClose: (event) => {\n *     // do something that hides the widget altogether\n *   }\n * }\n * ```\n *\n * The option `orientation` allows you to set which side the tabs should be\n * located: `'0'` = Top, `'1'` = Left, `'2'` = Bottom, `'3'` = Right\n *\n * If you don't want to render anything in the body container by default,\n * you can set the option `startEmpty` to `true`.\n *\n * @param options\n */\nconst tabsDefaultBackgroundColor = '#ddddcc'\n\nexport function tabWidget (options: TabWidgetOptions) {\n  const subject = options.subject\n  const dom = options.dom || document\n  const orientation = parseInt(options.orientation || '0')\n  const backgroundColor = options.backgroundColor || tabsDefaultBackgroundColor\n  const flipped = orientation & 2\n  const vertical = orientation & 1\n  const onClose = options.onClose\n\n  const [selectedColor, color] = getColors(backgroundColor)\n  const bodyMainStyle = `flex: 2; width: auto; height: 100%; border: 0.1em; border-style: solid; border-color: ${selectedColor}; padding: 1em;`\n  const rootElement: TabWidgetElement = dom.createElement('div') // 20200117a\n\n  rootElement.setAttribute('style', style.tabsRootElement)\n  rootElement.style.flexDirection = (vertical ? 'row' : 'column') + (flipped ? '-reverse' : '')\n\n  const navElement = rootElement.appendChild(dom.createElement('nav'))\n  navElement.setAttribute('style', style.tabsNavElement)\n\n  const mainElement = rootElement.appendChild(dom.createElement('main'))\n\n  mainElement.setAttribute('style', style.tabsMainElement) // override tabbedtab.css\n  const tabContainer = navElement.appendChild(dom.createElement('ul'))\n  tabContainer.setAttribute('style', style.tabContainer)\n  tabContainer.style.flexDirection = `${vertical ? 'column' : 'row'}`\n\n  const tabElement = 'li'\n\n  const bodyContainer = mainElement\n  rootElement.tabContainer = tabContainer\n  rootElement.bodyContainer = bodyContainer\n\n  const corners = ['0.2em', '0.2em', '0', '0'] // top left, TR, BR, BL\n  const cornersPrepped = corners.concat(corners).slice(orientation, orientation + 4)\n  const cornersStyle = `border-radius: ${cornersPrepped.join(' ')};`\n\n  const margins = ['0.3em', '0.3em', '0', '0.3em'] // top, right, bottom, left\n  const marginsPrepped = margins.concat(margins).slice(orientation, orientation + 4)\n  const marginsStyle = `margin: ${marginsPrepped.join(' ')};`\n\n  const paddingStyle = `padding: ${marginsPrepped.join(' ')};`\n\n  const tabStyle = cornersStyle + `position: relative; padding: 0.7em; max-width: 20em; color: ${color};`\n  const unselectedStyle = `${\n    tabStyle + marginsStyle\n  } opacity: 50%; background-color: ${backgroundColor};`\n  const selectedStyle = `${tabStyle + marginsStyle} background-color: ${selectedColor};`\n  const shownStyle = 'height: 100%; width: 100%;'\n  const hiddenStyle = shownStyle + 'display: none;'\n  rootElement.refresh = orderedSync\n  orderedSync()\n\n  if (!options.startEmpty && tabContainer.children.length && options.selectedTab) {\n    const selectedTab0 = Array.from(tabContainer.children) // Version left for compatibility with ??\n      .map((tab) => tab.firstChild as HTMLElement)\n      .find((tab) => tab.dataset.name === options.selectedTab)\n\n    const selectedTabURI = options.selectedTab.uri\n    const selectedTab1 = Array.from(tabContainer.children)\n      // @ts-ignore\n      .find(\n        (tab) =>\n          (tab as TabElement).subject &&\n          // @ts-ignore\n          (tab as TabElement).subject.uri &&\n          // @ts-ignore\n          (tab as TabElement).subject.uri === selectedTabURI\n      )\n\n    const tab = selectedTab1 || selectedTab0 || (tabContainer.children[0] as HTMLButtonElement)\n    const clickMe = tab.firstChild\n    // @ts-ignore\n    if (clickMe) clickMe.click()\n  } else if (!options.startEmpty) {\n    (tabContainer.children[0].firstChild as HTMLButtonElement).click() // Open first tab\n  }\n  return rootElement\n\n  function addCancelButton (tabContainer) {\n    if (tabContainer.dataset.onCloseSet) {\n      // @@ TODO: this is only here to make the browser tests work\n      // Discussion at https://github.com/solidos/solid-ui/pull/110#issuecomment-527080663\n      const existingCancelButton = tabContainer.querySelector('.unstyled')\n      tabContainer.removeChild(existingCancelButton)\n    }\n    const extraTab = dom.createElement(tabElement)\n    extraTab.classList.add('unstyled')\n    const tabCancelButton = cancelButton(dom, onClose)\n    tabCancelButton.setAttribute('style', tabCancelButton.getAttribute('style') + paddingStyle)\n    extraTab.appendChild(tabCancelButton)\n    tabContainer.appendChild(extraTab)\n    tabContainer.dataset.onCloseSet = 'true'\n  }\n\n  function getItems (): Array<NamedNode> {\n    if (options.items) return options.items\n    if (options.ordered !== false) {\n      // options.ordered defaults to true\n      return (store.the(subject, options.predicate) as any).elements\n    } else {\n      return store.each(subject, options.predicate) as any\n    }\n  }\n\n  function makeNewSlot (item: NamedNode) {\n    const ele = dom.createElement(tabElement) as TabElement\n    ele.setAttribute('style', unselectedStyle)\n    ele.subject = item\n    const div = ele.appendChild(dom.createElement('button'))\n    div.setAttribute('style', style.makeNewSlot)\n\n    div.onclick = function () {\n      resetTabStyle()\n      resetBodyStyle()\n      ele.setAttribute('style', selectedStyle)\n      if (!ele.bodyTR) return\n      ele.bodyTR.setAttribute('style', shownStyle)\n      const bodyMain = getOrCreateContainerElement(ele)\n      if (options.renderMain && ele.subject && bodyMain.asSettings !== false) {\n        bodyMain.innerHTML = 'loading item ...' + item\n        options.renderMain(bodyMain, ele.subject)\n        bodyMain.asSettings = false\n      }\n    }\n\n    if (options.renderTabSettings && ele.subject) {\n      const ellipsis = dom.createElement('button')\n      ellipsis.textContent = '...'\n      ellipsis.setAttribute('style', style.ellipsis)\n\n      ellipsis.onclick = function () {\n        resetTabStyle()\n        resetBodyStyle()\n        ele.setAttribute('style', selectedStyle)\n        if (!ele.bodyTR) return\n        ele.bodyTR.setAttribute('style', shownStyle)\n        const bodyMain = getOrCreateContainerElement(ele)\n        if (options.renderTabSettings && ele.subject && bodyMain.asSettings !== true) {\n          bodyMain.innerHTML = 'loading settings ...' + item\n          options.renderTabSettings(bodyMain, ele.subject)\n          bodyMain.asSettings = true\n        }\n      }\n      ele.appendChild(ellipsis)\n    }\n\n    if (options.renderTab) {\n      options.renderTab(div, item)\n    } else {\n      div.innerHTML = label(item)\n    }\n    return ele\n\n    function getOrCreateContainerElement (ele: TabElement): ContainerElement {\n      const bodyMain = ele.bodyTR?.children[0] as ContainerElement\n      if (bodyMain) return bodyMain\n      const newBodyMain = ele.bodyTR!.appendChild(dom.createElement('main'))\n      newBodyMain.setAttribute('style', bodyMainStyle)\n      return newBodyMain\n    }\n  }\n\n  // @@ Use common one from utils?\n  function orderedSync () {\n    const items = getItems()\n    let slot: TabElement, i, j, left, right\n    let differ = false\n    // Find how many match at each end\n    for (left = 0; left < tabContainer.children.length; left++) {\n      slot = tabContainer.children[left] as TabElement\n      if (left >= items.length || (slot.subject && !slot.subject.sameTerm(items[left]))) {\n        differ = true\n        break\n      }\n    }\n    if (!differ && items.length === tabContainer.children.length) {\n      return // The two just match in order: a case to optimize for\n    }\n    for (right = tabContainer.children.length - 1; right >= 0; right--) {\n      slot = tabContainer.children[right] as TabElement\n      j = right - tabContainer.children.length + items.length\n      if (slot.subject && !slot.subject.sameTerm(items[j])) {\n        break\n      }\n    }\n    // The elements left ... right in tabContainer.children do not match\n    const insertables = items.slice(left, right - tabContainer.children.length + items.length + 1)\n    while (right >= left) {\n      // remove extra\n      tabContainer.removeChild(tabContainer.children[left])\n      bodyContainer.removeChild(bodyContainer.children[left])\n      right -= 1\n    }\n    for (i = 0; i < insertables.length; i++) {\n      const newSlot = makeNewSlot(insertables[i])\n      const newBodyDiv = dom.createElement('div')\n      newSlot.bodyTR = newBodyDiv\n      if (left === tabContainer.children.length) {\n        // None left of original on right\n        tabContainer.appendChild(newSlot)\n        bodyContainer.appendChild(newBodyDiv)\n      } else {\n        tabContainer.insertBefore(newSlot, tabContainer.children[left + i])\n        bodyContainer.insertBefore(newBodyDiv, bodyContainer.children[left + i])\n      }\n    }\n    if (onClose) {\n      addCancelButton(tabContainer)\n    }\n  }\n\n  function resetTabStyle () {\n    for (let i = 0; i < tabContainer.children.length; i++) {\n      const tab = tabContainer.children[i]\n      if (tab.classList.contains('unstyled')) {\n        continue\n      } else {\n        tab.setAttribute('style', unselectedStyle)\n      }\n    }\n  }\n\n  function resetBodyStyle () {\n    for (let i = 0; i < bodyContainer.children.length; i++) {\n      bodyContainer.children[i].setAttribute('style', hiddenStyle)\n    }\n  }\n}\n\n/**\n * @internal\n */\nfunction getColors (backgroundColor: string): [string, string] {\n  return isLight(backgroundColor)\n    ? [colorBlend(backgroundColor, '#ffffff', 0.3), '#000000']\n    : [colorBlend(backgroundColor, '#000000', 0.3), '#ffffff']\n}\n\n/**\n * @internal\n */\nfunction colorBlend (a: string, b: string, mix: number): string {\n  let ca, cb, res\n  let str = '#'\n  const hex = '0123456789abcdef'\n  for (let i = 0; i < 3; i++) {\n    ca = parseInt(a.slice(i * 2 + 1, i * 2 + 3), 16)\n    cb = parseInt(b.slice(i * 2 + 1, i * 2 + 3), 16)\n    res = ca * (1.0 - mix) + cb * mix // @@@ rounding\n    const res2 = parseInt(('' + res).split('.')[0]) // @@ ugh\n    const h = parseInt(('' + res2 / 16).split('.')[0]) // @@ ugh\n    const l = parseInt(('' + (res2 % 16)).split('.')[0]) // @@ ugh\n    str += hex[h] + hex[l]\n  }\n  return str\n}\n\n/**\n * @internal\n */\nfunction isLight (x: string): boolean {\n  let total = 0\n  for (let i = 0; i < 3; i++) {\n    total += parseInt(x.slice(i * 2 + 1, i * 2 + 3), 16)\n  }\n  return total > 128 * 3\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAEA,IAAAE,KAAA,GAAAC,uBAAA,CAAAH,OAAA;AACA,IAAAI,WAAA,GAAAJ,OAAA;AAAmC,SAAAK,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAH,wBAAAG,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,gBAAAK,OAAA,CAAAL,CAAA,0BAAAA,CAAA,sBAAAA,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,cAAAR,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA,SAAAW,WAAAhB,CAAA,EAAAiB,CAAA,EAAApB,CAAA,WAAAoB,CAAA,OAAAC,gBAAA,aAAAD,CAAA,OAAAE,2BAAA,aAAAnB,CAAA,EAAAoB,yBAAA,KAAAC,OAAA,CAAAC,SAAA,CAAAL,CAAA,EAAApB,CAAA,YAAAqB,gBAAA,aAAAlB,CAAA,EAAAuB,WAAA,IAAAN,CAAA,CAAAO,KAAA,CAAAxB,CAAA,EAAAH,CAAA;AAAA,SAAAuB,0BAAA,cAAApB,CAAA,IAAAyB,OAAA,CAAAC,SAAA,CAAAC,OAAA,CAAAd,IAAA,CAAAQ,OAAA,CAAAC,SAAA,CAAAG,OAAA,iCAAAzB,CAAA,aAAAoB,yBAAA,YAAAA,0BAAA,aAAApB,CAAA;AAEnC;AACA;AACA;AAFA,IAGM4B,gBAAgB,0BAAAC,YAAA;EAAA,SAAAD,iBAAA;IAAA,IAAAE,KAAA;IAAA,IAAAC,gBAAA,mBAAAH,gBAAA;IAAA,SAAAI,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAAP,KAAA,GAAAd,UAAA,OAAAY,gBAAA,KAAAU,MAAA,CAAAH,IAAA;IAAA,IAAAI,gBAAA,aAAAT,KAAA;IAAA,OAAAA,KAAA;EAAA;EAAA,IAAAU,UAAA,aAAAZ,gBAAA,EAAAC,YAAA;EAAA,WAAAY,aAAA,aAAAb,gBAAA;AAAA,mBAAAc,iBAAA,aAASC,WAAW;AAAA,IAoB7BC,gBAAgB,GAAAC,OAAA,CAAAD,gBAAA,0BAAAE,aAAA;EAAA,SAAAF,iBAAA;IAAA,IAAAG,MAAA;IAAA,IAAAhB,gBAAA,mBAAAa,gBAAA;IAAA,SAAAI,KAAA,GAAAf,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAY,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAAd,IAAA,CAAAc,KAAA,IAAAhB,SAAA,CAAAgB,KAAA;IAAA;IAAAF,MAAA,GAAA/B,UAAA,OAAA4B,gBAAA,KAAAN,MAAA,CAAAH,IAAA;IAAA,IAAAI,gBAAA,aAAAQ,MAAA;IAAA,IAAAR,gBAAA,aAAAQ,MAAA;IAAA,IAAAR,gBAAA,aAAAQ,MAAA;IAAA,OAAAA,MAAA;EAAA;EAAA,IAAAP,UAAA,aAAAI,gBAAA,EAAAE,aAAA;EAAA,WAAAL,aAAA,aAAAG,gBAAA;AAAA,mBAAAF,iBAAA,aAASC,WAAW;AAMjD;AACA;AACA;AAFA,IAGMO,UAAU,0BAAAC,aAAA;EAAA,SAAAD,WAAA;IAAA,IAAAE,MAAA;IAAA,IAAArB,gBAAA,mBAAAmB,UAAA;IAAA,SAAAG,KAAA,GAAApB,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAiB,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAAnB,IAAA,CAAAmB,KAAA,IAAArB,SAAA,CAAAqB,KAAA;IAAA;IAAAF,MAAA,GAAApC,UAAA,OAAAkC,UAAA,KAAAZ,MAAA,CAAAH,IAAA;IAAA,IAAAI,gBAAA,aAAAa,MAAA;IAAA,IAAAb,gBAAA,aAAAa,MAAA;IAAA,OAAAA,MAAA;EAAA;EAAA,IAAAZ,UAAA,aAAAU,UAAA,EAAAC,aAAA;EAAA,WAAAV,aAAA,aAAAS,UAAA;AAAA,mBAAAR,iBAAA,aAASC,WAAW;AAKpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMY,0BAA0B,GAAG,SAAS;A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","ignoreList":[]}